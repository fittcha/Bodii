# Bodii 실기기 테스트 가이드

## 1. 배포 방식 비교 및 선택

### 방식별 비교

| 방식 | 비용 | 유효 기간 | 테스터 수 | 앱스토어 심사 | 설치 방법 |
|------|------|-----------|-----------|-------------|-----------|
| **Xcode USB 직접 설치** | 무료 | 7일 | 본인 1명 | 불필요 | USB 연결 후 Xcode Run |
| **Ad Hoc 배포** | $99/년 | 1년 | 최대 100대 | 불필요 | UDID 등록 → IPA 배포 |
| **TestFlight 내부** | $99/년 | 90일 | 최대 25명 | 불필요 | 이메일 초대 |
| **TestFlight 외부** | $99/년 | 90일 | 최대 10,000명 | 베타 심사 필요 | 공개 링크 공유 |
| **앱스토어 정식 출시** | $99/년 | 무제한 | 무제한 | 정식 심사 필요 | 앱스토어 다운로드 |

### 현재 선택: Xcode USB 직접 설치 (무료)

**선택 이유:**
- Apple Developer Program 미가입 상태에서 유일한 실기기 테스트 방법
- 본인 기기에서 핵심 기능 검증이 1차 목적
- 시뮬레이터에서 불가능한 기능 (카메라, HealthKit) 확인 필요
- 비용 없이 즉시 시작 가능

**제약사항:**
- 프로비저닝 7일 만료 → Xcode에서 다시 Run하면 연장 (데이터 유지)
- 본인 기기에서만 테스트 가능
- 지인 배포 불가 → 추후 TestFlight 전환 필요 ($99/년 가입 후)

---

## 2. 테스트 환경 설정

### 사전 준비 체크리스트

- [ ] Mac에 Xcode 15.0+ 설치
- [ ] iPhone (iOS 17.0+) 준비
- [ ] USB 케이블 (Lightning 또는 USB-C)
- [ ] Gemini API Key 발급 완료
- [ ] Info.plist에 API Key 설정 완료

### 설치 순서

1. iPhone을 USB로 Mac에 연결
2. Xcode에서 `Bodii.xcodeproj` 열기
3. 상단 Run Destination에서 본인 iPhone 선택
4. Signing & Capabilities → Team을 본인 Apple ID로 설정
5. Bundle Identifier가 고유한지 확인 (예: `com.yourname.Bodii`)
6. `Cmd+R`로 빌드 & 실행
7. iPhone: 설정 → 일반 → VPN 및 기기 관리 → 개발자 앱 신뢰

### 주의사항

- 7일 만료 후 앱 실행 불가 → Xcode에서 다시 Run하면 데이터 유지한 채 갱신
- 앱 삭제 시 Core Data 데이터도 삭제됨
- 동일 Bundle ID로 재설치하면 기존 데이터 유지

---

## 3. 테스트 포인트

### A. 온보딩 & 체성분

| # | 테스트 항목 | 확인 내용 | Pass/Fail |
|---|-----------|----------|-----------|
| A-1 | 최초 실행 | 온보딩 화면 정상 표시, 정보 입력 흐름 자연스러운지 | |
| A-2 | 체성분 입력 | 키/몸무게/체지방률/활동수준 입력 → 저장 성공 | |
| A-3 | BMR/TDEE 자동 계산 | 체성분 저장 후 BMR/TDEE 값이 화면에 표시되는지 | |
| A-4 | 활동수준 변경 | 활동수준 변경 시 TDEE가 재계산되는지 | |
| A-5 | 체성분 수정 | 기존 값 수정 → BMR/TDEE 업데이트 확인 | |

### B. 식단 기록 (수동 입력)

| # | 테스트 항목 | 확인 내용 | Pass/Fail |
|---|-----------|----------|-----------|
| B-1 | 음식 검색 (KFDA) | 한국 음식 검색 (예: "닭가슴살") → 결과 표시 | |
| B-2 | 음식 검색 (USDA) | 외국 음식 검색 (예: "pizza") → 결과 표시 | |
| B-3 | 음식 추가 | 끼니 선택(아침/점심/저녁/간식) → 수량 입력 → 저장 | |
| B-4 | DailyLog 반영 | 음식 추가 후 대시보드 섭취 칼로리/매크로 업데이트 | |
| B-5 | 식단 삭제 | 기록 삭제 → DailyLog에서 칼로리/매크로 차감 | |
| B-6 | 여러 끼니 기록 | 아침/점심/저녁 각각 기록 → 합산 정확한지 | |

### C. AI 사진 음식 인식 (Gemini Multimodal)

| # | 테스트 항목 | 확인 내용 | Pass/Fail |
|---|-----------|----------|-----------|
| C-1 | 카메라 권한 | 최초 촬영 시 카메라 권한 요청 팝업 표시 | |
| C-2 | 카메라 촬영 | 음식 사진 촬영 → 이미지 전달 성공 | |
| C-3 | 갤러리 선택 | 앨범에서 음식 사진 선택 → 이미지 전달 | |
| C-4 | Gemini 분석 | "AI 음식 분석 중..." 로딩 → 결과 카드 표시 | |
| C-5 | 한국 음식 인식 | 밥, 김치, 찌개 등 한국 음식 인식 정확도 | |
| C-6 | 외국 음식 인식 | 피자, 파스타 등 외국 음식 인식 정확도 | |
| C-7 | 다중 음식 인식 | 밥상 사진 → 여러 음식 개별 인식 | |
| C-8 | 수량 편집 | 추정 g수 수정 → 칼로리/영양소 비례 재계산 | |
| C-9 | 항목 선택/해제 | 체크박스 토글 → 하단 총 칼로리 업데이트 | |
| C-10 | 식단에 추가 | "식단에 추가" 버튼 → FoodRecord + DailyLog 반영 | |
| C-11 | Fallback 동작 | Gemini 실패 시 Vision API 자동 전환 확인 | |
| C-12 | 음식 아닌 사진 | 음식이 아닌 사진 → 적절한 안내 메시지 | |
| C-13 | 네트워크 오류 | 비행기 모드에서 촬영 → 에러 메시지 표시 | |

### D. AI 식단 코멘트 & 점수

| # | 테스트 항목 | 확인 내용 | Pass/Fail |
|---|-----------|----------|-----------|
| D-1 | 끼니별 코멘트 | 끼니 기록 후 AI 코멘트 생성 요청 → 응답 표시 | |
| D-2 | 일일 식단 점수 | 하루 식단 기준 0~10 점수 카드 표시 | |
| D-3 | 총평 내용 | 좋은 점/개선점/총평이 구체적인지 | |
| D-4 | 한국어 자연스러움 | 코멘트가 자연스러운 한국어로 생성되는지 | |
| D-5 | API 실패 처리 | Gemini API 오류 시 에러 메시지 표시 | |
| D-6 | 빈 식단 | 기록 없는 상태에서 코멘트 요청 → 적절한 안내 | |

### E. 운동 기록

| # | 테스트 항목 | 확인 내용 | Pass/Fail |
|---|-----------|----------|-----------|
| E-1 | 운동 추가 | 운동 종류/시간 입력 → 소모 칼로리 계산 | |
| E-2 | MET 기반 계산 | 운동별 소모 칼로리가 합리적인 범위인지 | |
| E-3 | DailyLog 반영 | 대시보드 소모 칼로리 업데이트 | |
| E-4 | 운동 삭제 | 삭제 → 소모 칼로리 차감 확인 | |

### F. 수면 기록

| # | 테스트 항목 | 확인 내용 | Pass/Fail |
|---|-----------|----------|-----------|
| F-1 | 수면 입력 | 취침/기상 시간 입력 → 수면 시간 자동 계산 | |
| F-2 | 수면 기록 조회 | 기록 목록 정상 표시 | |
| F-3 | 자정 넘기는 수면 | 23:00~07:00 같은 자정 교차 입력 처리 | |

### G. 대시보드 & 그래프

| # | 테스트 항목 | 확인 내용 | Pass/Fail |
|---|-----------|----------|-----------|
| G-1 | 오늘 현황 | 섭취/소모 칼로리, 매크로 비율 정확히 표시 | |
| G-2 | 반응 속도 | 대시보드 로딩 0.5초 이내 체감 | |
| G-3 | 체성분 그래프 | 체중/체지방 변화 추이 그래프 렌더링 | |
| G-4 | 날짜 이동 | 날짜 변경 → 해당 날짜 데이터 표시 | |
| G-5 | 탭 전환 | 식단/운동/설정 탭 전환 부드러운지 | |

### H. HealthKit 연동

| # | 테스트 항목 | 확인 내용 | Pass/Fail |
|---|-----------|----------|-----------|
| H-1 | 권한 요청 | HealthKit 접근 권한 팝업 정상 표시 | |
| H-2 | 데이터 읽기 | Apple Health 데이터 불러오기 | |
| H-3 | 데이터 쓰기 | Bodii 기록 → Apple Health에 반영 | |
| H-4 | 권한 거부 시 | 권한 거부 후 앱이 크래시 없이 동작하는지 | |

### I. 엣지 케이스 & 안정성

| # | 테스트 항목 | 확인 내용 | Pass/Fail |
|---|-----------|----------|-----------|
| I-1 | 빈 상태 | 데이터 없을 때 빈 화면에 적절한 안내 문구 | |
| I-2 | 앱 백그라운드/복귀 | 백그라운드 갔다가 돌아와도 데이터 유지 | |
| I-3 | 앱 강제 종료 후 재실행 | Core Data 저장 데이터 유지 확인 | |
| I-4 | 극단적 입력 | 칼로리 0, 매우 큰 값 (99999) 입력 처리 | |
| I-5 | 빠른 연속 입력 | 음식 추가를 빠르게 여러 번 → 중복/크래시 없는지 | |
| I-6 | 저장 공간 부족 | Core Data 저장 실패 시 에러 처리 | |
| I-7 | 키보드 처리 | 입력 필드에서 키보드가 뷰를 가리지 않는지 | |
| I-8 | 화면 회전 | 세로/가로 전환 시 레이아웃 깨지지 않는지 | |

---

## 4. 테스트 진행 순서 (권장)

```
1단계: 기본 흐름
   온보딩 → 체성분 입력 → 대시보드 확인

2단계: 핵심 기능
   식단 수동 입력 → AI 사진 인식 → AI 코멘트/점수

3단계: 보조 기능
   운동 기록 → 수면 기록 → HealthKit

4단계: 안정성
   엣지 케이스 → 네트워크 오류 → 앱 종료/복귀
```

---

## 5. 버그 리포트 양식

테스트 중 발견된 문제는 다음 형식으로 기록:

```
### [테스트 번호] 버그 제목
- **심각도**: Critical / Major / Minor / Cosmetic
- **재현 경로**: 화면1 → 버튼 탭 → 화면2 → ...
- **기대 동작**: ...
- **실제 동작**: ...
- **스크린샷**: (있으면 첨부)
- **기기/OS**: iPhone XX / iOS XX.X
```

---

*문서 버전: 1.0*
*작성일: 2026-01-29*
