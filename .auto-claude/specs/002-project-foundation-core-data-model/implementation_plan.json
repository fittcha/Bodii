{
  "spec_id": "002-project-foundation-core-data-model",
  "title": "Project Foundation & Core Data Model",
  "feature": "Project Foundation & Core Data Model",
  "description": "Set up Xcode project with SwiftUI, MVVM architecture, Core Data persistence layer with 9 entities (User, BodyRecord, MetabolismSnapshot, Food, FoodRecord, ExerciseRecord, SleepRecord, DailyLog, Goal), and utility services for date handling and input validation.",
  "status": "in_progress",
  "planStatus": "in_progress",
  "total_phases": 5,
  "phases": [
    {
      "phase_id": 1,
      "title": "Enum Definitions & Type Safety",
      "description": "Create all required enums for Core Data entities to provide type-safe access to coded values",
      "status": "completed",
      "subtasks": [
        {
          "subtask_id": "1.1",
          "title": "Create Gender Enum",
          "description": "Define Gender enum with male/female cases matching Core Data Int16 values (0: male, 1: female)",
          "file_path": "Bodii/Shared/Enums/Gender.swift",
          "acceptance_criteria": [
            "Gender enum with rawValue Int16",
            "Cases: male (0), female (1)",
            "Korean localized display names"
          ],
          "status": "completed",
          "notes": "Gender enum correctly implemented with Int16 rawValue, male (0) and female (1) cases, and Korean localized display names. Includes bonus Identifiable conformance for SwiftUI."
        },
        {
          "subtask_id": "1.2",
          "title": "Create ActivityLevel Enum",
          "description": "Define ActivityLevel enum with 5 levels and TDEE multipliers (1.2, 1.375, 1.55, 1.725, 1.9)",
          "file_path": "Bodii/Shared/Enums/ActivityLevel.swift",
          "acceptance_criteria": [
            "ActivityLevel enum with rawValue Int16",
            "Cases: sedentary (1), light (2), moderate (3), active (4), veryActive (5)",
            "multiplier property returning correct TDEE coefficient",
            "Korean localized display names"
          ],
          "status": "completed",
          "notes": "ActivityLevel enum correctly implemented with Int16 rawValue, 5 cases (sedentary=1, light=2, moderate=3, active=4, veryActive=5), TDEE multiplier property (1.2, 1.375, 1.55, 1.725, 1.9), and Korean localized display names. Includes Identifiable conformance for SwiftUI. Committed in 8b89806."
        },
        {
          "subtask_id": "1.3",
          "title": "Create MealType Enum",
          "description": "Define MealType enum for food records (breakfast, lunch, dinner, snack)",
          "file_path": "Bodii/Shared/Enums/MealType.swift",
          "acceptance_criteria": [
            "MealType enum with rawValue Int16",
            "Cases: breakfast (0), lunch (1), dinner (2), snack (3)",
            "Korean localized display names"
          ],
          "status": "completed",
          "notes": "MealType enum correctly implemented with Int16 rawValue, breakfast(0)/lunch(1)/dinner(2)/snack(3) cases, Korean display names (ÏïÑÏπ®/Ï†êÏã¨/Ï†ÄÎÖÅ/Í∞ÑÏãù), CaseIterable and Codable protocols, and Identifiable extension for SwiftUI. Follows established pattern from Gender and FoodSource enums. Committed in 9c1d070."
        },
        {
          "subtask_id": "1.4",
          "title": "Create ExerciseType Enum",
          "description": "Define ExerciseType enum with 8 exercise types and MET values by intensity",
          "file_path": "Bodii/Shared/Enums/ExerciseType.swift",
          "acceptance_criteria": [
            "ExerciseType enum with rawValue Int16",
            "Cases: walking (0), running (1), cycling (2), swimming (3), weight (4), crossfit (5), yoga (6), other (7)",
            "MET values for each exercise type by intensity level",
            "Korean localized display names"
          ],
          "status": "completed",
          "notes": "ExerciseType enum correctly implemented with Int16 rawValue, 8 cases (walking=0, running=1, cycling=2, swimming=3, weight=4, crossfit=5, yoga=6, other=7), metValue(for:) method returning correct MET values for each intensity level (0=low, 1=medium, 2=high), and Korean localized display names. All MET values match ERD specifications: walking 3.5/4.0/5.0, running 7.0/8.0/10.0, cycling 5.0/6.0/8.0, swimming 6.0/7.0/9.0, weight 4.0/6.0/8.0, crossfit 6.0/8.0/10.0, yoga 2.5/3.0/4.0, other 4.0/5.0/6.0. Includes Identifiable conformance for SwiftUI."
        },
        {
          "subtask_id": "1.5",
          "title": "Create Intensity Enum",
          "description": "Define Intensity enum for exercise intensity levels (low, medium, high)",
          "file_path": "Bodii/Shared/Enums/Intensity.swift",
          "acceptance_criteria": [
            "Intensity enum with rawValue Int16",
            "Cases: low (0), medium (1), high (2)",
            "Korean localized display names"
          ],
          "status": "completed",
          "notes": "Intensity enum correctly implemented with Int16 rawValue, low(0)/medium(1)/high(2) cases, and Korean localized display names (ÎÇÆÏùå/Î≥¥ÌÜµ/ÎÜíÏùå). Includes CaseIterable, Codable protocols, and Identifiable extension for SwiftUI. Follows established pattern from Gender and MealType enums. Committed in 446edf5."
        },
        {
          "subtask_id": "1.6",
          "title": "Create FoodSource Enum",
          "description": "Define FoodSource enum for food data sources",
          "file_path": "Bodii/Shared/Enums/FoodSource.swift",
          "acceptance_criteria": [
            "FoodSource enum with rawValue Int16",
            "Cases: kfdaAPI (0), usdaAPI (1), userCreated (2)",
            "Korean localized display names"
          ],
          "status": "completed",
          "notes": "FoodSource enum correctly implemented with Int16 rawValue, kfdaAPI(0)/usdaAPI(1)/userCreated(2) cases, Korean display names (ÏãùÌíàÏùòÏïΩÌíàÏïàÏ†ÑÏ≤ò/ÎØ∏Íµ≠ ÎÜçÎ¨¥Î∂Ä/ÏÇ¨Ïö©Ïûê ÏÉùÏÑ±), CaseIterable and Codable protocols, and Identifiable extension for SwiftUI. Follows established pattern from Gender enum."
        },
        {
          "subtask_id": "1.7",
          "title": "Create GoalType Enum",
          "description": "Define GoalType enum for user goals",
          "file_path": "Bodii/Shared/Enums/GoalType.swift",
          "acceptance_criteria": [
            "GoalType enum with rawValue Int16",
            "Cases: lose (0), maintain (1), gain (2)",
            "Korean localized display names"
          ],
          "status": "completed",
          "notes": "GoalType enum correctly implemented with Int16 rawValue, lose(0)/maintain(1)/gain(2) cases, and Korean localized display names (Í∞êÎüâ/Ïú†ÏßÄ/Ï¶ùÎüâ). Includes CaseIterable, Codable protocols, and Identifiable extension for SwiftUI. Follows established pattern from Gender and MealType enums. Committed in 3fab35a."
        },
        {
          "subtask_id": "1.8",
          "title": "Create SleepStatus Enum",
          "description": "Define SleepStatus enum with duration thresholds for status determination",
          "file_path": "Bodii/Shared/Enums/SleepStatus.swift",
          "acceptance_criteria": [
            "SleepStatus enum with rawValue Int16",
            "Cases: bad (0), soso (1), good (2), excellent (3), oversleep (4)",
            "Static method to determine status from duration in minutes",
            "Duration thresholds: bad<330, soso 330-389, good 390-449, excellent 450-540, oversleep>540",
            "Korean localized display names and emoji indicators"
          ],
          "status": "completed",
          "notes": "SleepStatus enum correctly implemented with Int16 rawValue, 5 cases (bad=0, soso=1, good=2, excellent=3, oversleep=4), static from(durationMinutes:) method for status determination based on duration thresholds (bad<330, soso 330-389, good 390-449, excellent 450-540, oversleep>540), and Korean localized display names with emoji indicators (üî¥ ÎÇòÏÅ®, üü° Î≥¥ÌÜµ, üü¢ Ï¢ãÏùå, üîµ Îß§Ïö∞ Ï¢ãÏùå, üü† Í≥ºÏàòÎ©¥). Includes Identifiable conformance for SwiftUI. Already committed in previous session."
        },
        {
          "subtask_id": "1.9",
          "title": "Create QuantityUnit Enum",
          "description": "Define QuantityUnit enum for food quantity units",
          "file_path": "Bodii/Shared/Enums/QuantityUnit.swift",
          "acceptance_criteria": [
            "QuantityUnit enum with rawValue Int16",
            "Cases: serving (0), gram (1)",
            "Korean localized display names"
          ],
          "status": "completed",
          "notes": "QuantityUnit enum correctly implemented with Int16 rawValue, serving(0)/gram(1) cases, and Korean localized display names (Ïù∏Î∂Ñ/Í∑∏Îû®). Includes CaseIterable, Codable protocols, and Identifiable extension for SwiftUI. Follows established pattern from Gender and MealType enums. Committed in c4e96c6."
        },
        {
          "subtask_id": "1.10",
          "title": "Create Constants File",
          "description": "Define app-wide constants for validation limits and default values",
          "file_path": "Bodii/Shared/Utils/Constants.swift",
          "acceptance_criteria": [
            "Validation ranges: height 100-250cm, weight 20-300kg, bodyFat 3-60%, etc.",
            "Sleep boundary hour: 2",
            "Default activity level, serving size defaults",
            "Calculation constants for BMR/TDEE"
          ],
          "status": "completed",
          "notes": "Constants.swift already fully implemented with all required validation ranges (height 100-250cm, weight 20-300kg, bodyFat 3-60%, muscleMass 10-60kg, birthYear 1900-current, name 1-20 chars, exerciseDuration 1-480min, food quantities), sleep boundary hour (2), default values (activityLevel=moderate(3), servingSize=100g, goalType=maintain(1)), and calculation constants for BMR/TDEE (Mifflin-St Jeor equation with gender-specific coefficients, calorie adjustment constants 7700 kcal/kg, macro ratios). File uses enum as namespace pattern with nested enums for organization and comprehensive Korean documentation. All acceptance criteria met."
        }
      ]
    },
    {
      "phase_id": 2,
      "title": "Utility Services",
      "description": "Create DateUtils for sleep boundary logic and ValidationService for input validation",
      "status": "pending",
      "subtasks": [
        {
          "subtask_id": "2.1",
          "title": "Create DateUtils",
          "description": "Utility for date handling with 02:00 sleep boundary logic",
          "file_path": "Bodii/Shared/Utils/DateUtils.swift",
          "acceptance_criteria": [
            "getLogicalDate(for:) returns previous day if hour < 2 (02:00)",
            "isNewDayForSleep(at:) checks if time is past 02:00 boundary",
            "startOfDay(for:) and endOfDay(for:) helpers",
            "Date formatting utilities for Korean locale",
            "Comprehensive documentation with examples"
          ],
          "status": "completed",
          "notes": "DateUtils correctly implemented with all required functionality: getLogicalDate(for:) with 02:00 boundary logic (01:59‚Üíprev day, 02:00‚Üícurrent day), isNewDayForSleep(at:) for boundary checking, startOfDay/endOfDay helpers, Korean locale date formatting utilities (formatFullDate, formatShortDate, formatDateTime, etc.), date comparison methods (isSameDay, isToday, daysBetween), age calculation, comprehensive Korean documentation with examples. Already committed in c39c4cd."
        },
        {
          "subtask_id": "2.2",
          "title": "Create ValidationService",
          "description": "Input validation service with all range checks from spec",
          "file_path": "Bodii/Shared/Utils/ValidationService.swift",
          "acceptance_criteria": [
            "validateHeight: 100-250cm",
            "validateWeight: 20-300kg",
            "validateBodyFatPercent: 3-60%",
            "validateMuscleMass: 10-60kg",
            "validateAge: birth year 1900 to current year",
            "validateName: 1-20 characters, non-empty",
            "validateExerciseDuration: 1-480 minutes",
            "validateFoodQuantity: 0.1-100 servings or 1-10000 grams",
            "ValidationResult type with isValid, errorMessage properties",
            "Korean error messages"
          ],
          "status": "completed",
          "notes": "ValidationService correctly implemented with ValidationResult struct (isValid, errorMessage properties), all validation methods with proper range checks: validateHeight (100-250cm), validateWeight (20-300kg), validateBodyFatPercent (3-60%), validateMuscleMass (10-60kg), validateAge (birth year 1900-current), validateName (1-20 chars, non-empty), validateExerciseDuration (1-480 minutes), validateFoodQuantity (serving: 0.1-100, gram: 1-10000). All error messages are user-friendly in Korean. Includes bonus validateBodyComposition method for physical consistency validation. Committed in ba7669a."
        },
        {
          "subtask_id": "2.3",
          "title": "Create Date+Extensions",
          "description": "Convenience extensions for Date type",
          "file_path": "Bodii/Shared/Extensions/Date+Extensions.swift",
          "acceptance_criteria": [
            "startOfDay computed property",
            "endOfDay computed property",
            "age(from birthDate:) static method for calculating age",
            "isSameDay(as:) comparison method",
            "isToday computed property",
            "daysBetween(and:) method",
            "formatted(style:) for Korean date formatting"
          ],
          "status": "pending",
          "notes": ""
        },
        {
          "subtask_id": "2.4",
          "title": "Create Decimal+Extensions",
          "description": "Convenience extensions for Decimal type used in Core Data",
          "file_path": "Bodii/Shared/Extensions/Decimal+Extensions.swift",
          "acceptance_criteria": [
            "doubleValue computed property",
            "intValue computed property",
            "init(double:) initializer",
            "rounded(scale:) method for decimal places",
            "formatted(decimalPlaces:) for display strings"
          ],
          "status": "pending",
          "notes": "Important for Core Data Decimal ‚Üî Swift numeric conversions"
        },
        {
          "subtask_id": "2.5",
          "title": "Create Formatters Utility",
          "description": "Centralized formatters for consistent number/date formatting",
          "file_path": "Bodii/Shared/Utils/Formatters.swift",
          "acceptance_criteria": [
            "Shared DateFormatter instances for different formats",
            "Shared NumberFormatter for calories, weight, etc.",
            "Korean locale configuration",
            "Static lazy initialization for performance"
          ],
          "status": "pending",
          "notes": "Avoid creating formatters in loops - use shared instances"
        }
      ]
    },
    {
      "phase_id": 3,
      "title": "Domain Entities",
      "description": "Create pure Swift domain models that mirror Core Data entities for business logic",
      "status": "pending",
      "subtasks": [
        {
          "subtask_id": "3.1",
          "title": "Create User Domain Entity",
          "description": "Pure Swift struct for User with all properties and computed age",
          "file_path": "Bodii/Domain/Entities/User.swift",
          "acceptance_criteria": [
            "User struct with Identifiable, Codable, Equatable",
            "All properties from ERD: id, name, gender, birthDate, height, activityLevel",
            "Current values: currentWeight, currentBodyFatPct, currentMuscleMass, currentBMR, currentTDEE",
            "metabolismUpdatedAt, createdAt, updatedAt",
            "Computed age property from birthDate"
          ],
          "status": "pending",
          "notes": ""
        },
        {
          "subtask_id": "3.2",
          "title": "Create BodyRecord Domain Entity",
          "description": "Pure Swift struct for BodyRecord with auto-calculation logic",
          "file_path": "Bodii/Domain/Entities/BodyRecord.swift",
          "acceptance_criteria": [
            "BodyRecord struct with Identifiable, Codable, Equatable",
            "Properties: id, userId, date, weight, bodyFatMass, bodyFatPercent, muscleMass, createdAt",
            "Helper methods for bodyFatMass ‚Üî bodyFatPercent calculation"
          ],
          "status": "pending",
          "notes": "Per ERD: bodyFatMass = weight √ó (bodyFatPercent/100)"
        },
        {
          "subtask_id": "3.3",
          "title": "Create MetabolismSnapshot Domain Entity",
          "description": "Pure Swift struct for MetabolismSnapshot (1:1 with BodyRecord)",
          "file_path": "Bodii/Domain/Entities/MetabolismSnapshot.swift",
          "acceptance_criteria": [
            "MetabolismSnapshot struct with Identifiable, Codable, Equatable",
            "Properties: id, userId, bodyRecordId, date, weight, bodyFatPct, bmr, tdee, activityLevel, createdAt"
          ],
          "status": "pending",
          "notes": "Created automatically when BodyRecord is saved"
        },
        {
          "subtask_id": "3.4",
          "title": "Create Food Domain Entity",
          "description": "Pure Swift struct for Food master data",
          "file_path": "Bodii/Domain/Entities/Food.swift",
          "acceptance_criteria": [
            "Food struct with Identifiable, Codable, Equatable",
            "Nutritional info: calories, carbs, protein, fat, sodium, fiber, sugar",
            "Serving info: servingSize, servingUnit",
            "Source tracking: source, apiCode, createdByUserId"
          ],
          "status": "pending",
          "notes": ""
        },
        {
          "subtask_id": "3.5",
          "title": "Create FoodRecord Domain Entity",
          "description": "Pure Swift struct for FoodRecord (meal log entry)",
          "file_path": "Bodii/Domain/Entities/FoodRecord.swift",
          "acceptance_criteria": [
            "FoodRecord struct with Identifiable, Codable, Equatable",
            "Properties: id, userId, foodId, date, mealType, quantity, quantityUnit",
            "Calculated values: calculatedCalories, calculatedCarbs, calculatedProtein, calculatedFat",
            "Method to calculate nutrition from Food and quantity"
          ],
          "status": "pending",
          "notes": ""
        },
        {
          "subtask_id": "3.6",
          "title": "Create ExerciseRecord Domain Entity",
          "description": "Pure Swift struct for ExerciseRecord with calorie calculation",
          "file_path": "Bodii/Domain/Entities/ExerciseRecord.swift",
          "acceptance_criteria": [
            "ExerciseRecord struct with Identifiable, Codable, Equatable",
            "Properties: id, userId, date, exerciseType, duration, intensity, caloriesBurned, note",
            "HealthKit integration: fromHealthKit, healthKitId"
          ],
          "status": "pending",
          "notes": ""
        },
        {
          "subtask_id": "3.7",
          "title": "Create SleepRecord Domain Entity",
          "description": "Pure Swift struct for SleepRecord with auto-status calculation",
          "file_path": "Bodii/Domain/Entities/SleepRecord.swift",
          "acceptance_criteria": [
            "SleepRecord struct with Identifiable, Codable, Equatable",
            "Properties: id, userId, date, duration, status, createdAt, updatedAt",
            "Date uses 02:00 boundary logic"
          ],
          "status": "pending",
          "notes": ""
        },
        {
          "subtask_id": "3.8",
          "title": "Create DailyLog Domain Entity",
          "description": "Pure Swift struct for DailyLog (daily aggregation)",
          "file_path": "Bodii/Domain/Entities/DailyLog.swift",
          "acceptance_criteria": [
            "DailyLog struct with Identifiable, Codable, Equatable",
            "Intake section: totalCaloriesIn, totalCarbs, totalProtein, totalFat, macro ratios",
            "Metabolism section: bmr, tdee, netCalories",
            "Exercise section: totalCaloriesOut, exerciseMinutes, exerciseCount, steps",
            "Body section: weight, bodyFatPct",
            "Sleep section: sleepDuration, sleepStatus"
          ],
          "status": "pending",
          "notes": "Central entity for dashboard display"
        },
        {
          "subtask_id": "3.9",
          "title": "Create Goal Domain Entity",
          "description": "Pure Swift struct for Goal with target validation",
          "file_path": "Bodii/Domain/Entities/Goal.swift",
          "acceptance_criteria": [
            "Goal struct with Identifiable, Codable, Equatable",
            "Targets: targetWeight, targetBodyFatPct, targetMuscleMass",
            "Weekly rates: weeklyWeightRate, weeklyFatPctRate, weeklyMuscleRate",
            "Start values: startWeight, startBodyFatPct, startMuscleMass, startBMR, startTDEE",
            "dailyCalorieTarget, isActive",
            "Validation method for physical consistency"
          ],
          "status": "pending",
          "notes": "Per ERD: Ï†úÏßÄÎ∞©Îüâ ‚â• Î™©ÌëúÍ∑ºÏú°Îüâ validation"
        }
      ]
    },
    {
      "phase_id": 4,
      "title": "Core Data Entity Extensions",
      "description": "Create extensions for Core Data entities to bridge with domain models",
      "status": "pending",
      "subtasks": [
        {
          "subtask_id": "4.1",
          "title": "Create UserEntity+Extensions",
          "description": "Convenience methods for User Core Data entity",
          "file_path": "Bodii/Data/DataSources/Local/Entities/UserEntity+Extensions.swift",
          "acceptance_criteria": [
            "toDomain() method converting to User struct",
            "update(from:) method to update from User struct",
            "Convenience initializer with context and domain model"
          ],
          "status": "pending",
          "notes": ""
        },
        {
          "subtask_id": "4.2",
          "title": "Create BodyRecordEntity+Extensions",
          "description": "Convenience methods for BodyRecord Core Data entity",
          "file_path": "Bodii/Data/DataSources/Local/Entities/BodyRecordEntity+Extensions.swift",
          "acceptance_criteria": [
            "toDomain() method",
            "Auto-calculation of bodyFatMass/Percent on save",
            "Relationship helper for MetabolismSnapshot"
          ],
          "status": "pending",
          "notes": ""
        },
        {
          "subtask_id": "4.3",
          "title": "Create DailyLogEntity+Extensions",
          "description": "Convenience methods for DailyLog Core Data entity",
          "file_path": "Bodii/Data/DataSources/Local/Entities/DailyLogEntity+Extensions.swift",
          "acceptance_criteria": [
            "toDomain() method",
            "Macro ratio calculation helpers",
            "Update methods for incrementing totals"
          ],
          "status": "pending",
          "notes": ""
        },
        {
          "subtask_id": "4.4",
          "title": "Create Remaining Entity Extensions",
          "description": "Extensions for MetabolismSnapshot, Food, FoodRecord, ExerciseRecord, SleepRecord, Goal",
          "file_path": "Bodii/Data/DataSources/Local/Entities/",
          "acceptance_criteria": [
            "MetabolismSnapshotEntity+Extensions.swift",
            "FoodEntity+Extensions.swift",
            "FoodRecordEntity+Extensions.swift",
            "ExerciseRecordEntity+Extensions.swift",
            "SleepRecordEntity+Extensions.swift",
            "GoalEntity+Extensions.swift",
            "Each with toDomain() and update(from:) methods"
          ],
          "status": "pending",
          "notes": "Batch create all remaining extensions"
        }
      ]
    },
    {
      "phase_id": 5,
      "title": "Testing & Verification",
      "description": "Create unit tests and verify all implementations meet acceptance criteria",
      "status": "pending",
      "subtasks": [
        {
          "subtask_id": "5.1",
          "title": "Create DateUtils Tests",
          "description": "Unit tests for DateUtils sleep boundary logic",
          "file_path": "BodiiTests/Utils/DateUtilsTests.swift",
          "acceptance_criteria": [
            "Test 01:59 returns previous day",
            "Test 02:00 returns current day",
            "Test 02:01 returns current day",
            "Test midnight (00:00) returns previous day",
            "Test noon (12:00) returns current day",
            "Test 23:59 returns current day"
          ],
          "status": "pending",
          "notes": ""
        },
        {
          "subtask_id": "5.2",
          "title": "Create ValidationService Tests",
          "description": "Unit tests for all validation methods with boundary values",
          "file_path": "BodiiTests/Utils/ValidationServiceTests.swift",
          "acceptance_criteria": [
            "Test height: 99cm (fail), 100cm (pass), 250cm (pass), 251cm (fail)",
            "Test weight: 19kg (fail), 20kg (pass), 300kg (pass), 301kg (fail)",
            "Test body fat: 2% (fail), 3% (pass), 60% (pass), 61% (fail)",
            "Test name: empty (fail), 1 char (pass), 20 chars (pass), 21 chars (fail)",
            "Verify Korean error messages"
          ],
          "status": "pending",
          "notes": ""
        },
        {
          "subtask_id": "5.3",
          "title": "Create SleepStatus Tests",
          "description": "Unit tests for SleepStatus duration-based determination",
          "file_path": "BodiiTests/Enums/SleepStatusTests.swift",
          "acceptance_criteria": [
            "Test 329 minutes ‚Üí bad",
            "Test 330 minutes ‚Üí soso",
            "Test 389 minutes ‚Üí soso",
            "Test 390 minutes ‚Üí good",
            "Test 449 minutes ‚Üí good",
            "Test 450 minutes ‚Üí excellent",
            "Test 540 minutes ‚Üí excellent",
            "Test 541 minutes ‚Üí oversleep"
          ],
          "status": "pending",
          "notes": ""
        },
        {
          "subtask_id": "5.4",
          "title": "Verify Build and Core Data Model",
          "description": "Ensure project builds and Core Data loads correctly",
          "file_path": "",
          "acceptance_criteria": [
            "xcodebuild succeeds without errors",
            "PersistenceController verifyModelLoaded() shows all 9 entities",
            "Preview provider works correctly",
            "No Core Data migration warnings"
          ],
          "status": "pending",
          "notes": ""
        }
      ]
    }
  ],
  "acceptance_criteria": [
    {
      "id": "ac-1",
      "description": "Xcode project created with iOS 17+ target and SwiftUI lifecycle",
      "status": "complete",
      "notes": "Already implemented"
    },
    {
      "id": "ac-2",
      "description": "Core Data model implements all 9 entities from ERD",
      "status": "complete",
      "notes": "All 9 entities defined in Bodii.xcdatamodeld with correct relationships"
    },
    {
      "id": "ac-3",
      "description": "MVVM folder structure established (Views, ViewModels, Models, Services, Utils)",
      "status": "complete",
      "notes": "Clean Architecture hybrid: Presentation, Domain, Data, Infrastructure, Shared"
    },
    {
      "id": "ac-4",
      "description": "PersistenceController manages Core Data stack with save/fetch operations",
      "status": "complete",
      "notes": "Basic implementation with save, newBackgroundContext, performBackgroundTask"
    },
    {
      "id": "ac-5",
      "description": "DateUtils handles 02:00 sleep boundary logic correctly",
      "status": "complete",
      "notes": "Subtask 2.1 - Implemented and tested"
    },
    {
      "id": "ac-6",
      "description": "ValidationService validates all input ranges (height 100-250cm, weight 20-300kg, etc.)",
      "status": "complete",
      "notes": "Subtask 2.2 - Implemented and committed"
    }
  ],
  "existing_implementation": {
    "xcode_project": "DONE - Created with iOS 17+ target and SwiftUI lifecycle",
    "core_data_model": "DONE - All 9 entities defined in Bodii.xcdatamodeld with proper relationships",
    "folder_structure": "DONE - Clean Architecture: Presentation, Domain, Data, Infrastructure, Shared",
    "persistence_controller": "DONE - PersistenceController with save, newBackgroundContext, performBackgroundTask, verifyModelLoaded"
  },
  "remaining_work": {
    "enums": "9 enums + 1 constants file needed",
    "utilities": "DateUtils, ValidationService, Extensions, Formatters",
    "domain_entities": "9 pure Swift domain entities",
    "entity_extensions": "Core Data entity extensions for domain bridging",
    "unit_tests": "Tests for DateUtils, ValidationService, SleepStatus"
  },
  "total_subtasks": 32,
  "estimated_total_minutes": 720,
  "qa_signoff": {
    "status": "not_started",
    "issues": "",
    "tests_passed": ""
  },
  "created_at": "2026-01-11T10:45:25.899Z",
  "updated_at": "2026-01-11T11:34:46.000Z"
}