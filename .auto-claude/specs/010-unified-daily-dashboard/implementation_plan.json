{
  "feature": "Unified Daily Dashboard",
  "description": "Central dashboard showing all daily health metrics: calorie balance (intake vs. TDEE), macro breakdown, exercise summary, sleep quality, and body composition status. Pre-calculated values from DailyLog for fast loading (<0.5s).",
  "created_at": "2026-01-14T09:02:15.645Z",
  "updated_at": "2026-01-16T02:19:25.647Z",
  "status": "in_progress",
  "planStatus": "in_progress",
  "totalEstimatedHours": 25,
  "phases": [
    {
      "id": "phase-1",
      "name": "Core ViewModel & Data Layer",
      "description": "Create DashboardViewModel and extend DailyLogRepository for dashboard needs",
      "subtasks": [
        {
          "id": "1.1",
          "title": "Extend DailyLogRepository for Dashboard",
          "description": "Add fetchCurrentDay method to DailyLogRepository protocol and implementation that returns DailyLog with all pre-calculated values. This will be the single source of truth for dashboard data.",
          "status": "completed",
          "estimatedHours": 1.5,
          "files": [
            "Bodii/Domain/Interfaces/DailyLogRepository.swift",
            "Bodii/Data/Repositories/DailyLogRepositoryImpl.swift",
            "Bodii/Data/DataSources/Local/DailyLogLocalDataSource.swift"
          ],
          "dependencies": [],
          "notes": "Added fetchCurrentDay() method to DailyLogRepository protocol and implementation chain (DailyLogRepositoryImpl and DailyLogLocalDataSource). Method returns DailyLog for today's date with all pre-calculated values.",
          "updated_at": "2026-01-15T08:05:46.659094+00:00"
        },
        {
          "id": "1.2",
          "title": "Create DashboardViewModel",
          "description": "Create DashboardViewModel with @Published properties for DailyLog data, loading state, error handling, date navigation state. Implements loadDailyLog(for:), refresh(), navigateDate(by:) methods.",
          "status": "completed",
          "estimatedHours": 2.5,
          "files": [
            "Bodii/Presentation/Features/Dashboard/DashboardViewModel.swift"
          ],
          "dependencies": [
            "1.1"
          ],
          "notes": "Created DashboardViewModel with @Observable pattern (iOS 17+). Includes @Published-like properties for DailyLog data (selectedDate, dailyLog, isLoading, errorMessage), loading state, error handling, and all required methods: loadDailyLog(for:), refresh(), navigateDate(by:). Also added convenience methods goToPreviousDay(), goToNextDay(), goToToday(), selectDate(). Includes computed properties for easy access to all DailyLog fields. Follows patterns from ExerciseListViewModel with proper Korean localization for date formatting.",
          "updated_at": "2026-01-15T08:08:29.102311+00:00"
        },
        {
          "id": "1.3",
          "title": "Register DashboardViewModel in DIContainer",
          "description": "Add factory method for DashboardViewModel in DIContainer, inject DailyLogRepository dependency.",
          "status": "completed",
          "estimatedHours": 0.5,
          "files": [
            "Bodii/App/DIContainer.swift"
          ],
          "dependencies": [
            "1.2"
          ],
          "notes": "Added dailyLogLocalDataSource and dailyLogRepository to DIContainer with proper lazy initialization. Created makeDashboardViewModel(userId:) factory method that injects DailyLogRepository dependency. Follows existing patterns with educational Korean comments and Java comparisons. All dependencies properly chained: PersistenceController \u2192 DailyLogLocalDataSource \u2192 DailyLogRepositoryImpl \u2192 DashboardViewModel.",
          "updated_at": "2026-01-15T08:10:54.911644+00:00"
        }
      ]
    },
    {
      "id": "phase-2",
      "name": "Dashboard UI Components",
      "description": "Build reusable card components for dashboard sections",
      "subtasks": [
        {
          "id": "2.1",
          "title": "Create CalorieBalanceCard",
          "description": "Visual card showing today's calorie intake vs TDEE with circular progress indicator. Shows intake/TDEE/netCalories with color coding (deficit=green, surplus=red, balanced=blue).",
          "status": "completed",
          "estimatedHours": 2,
          "files": [
            "Bodii/Presentation/Features/Dashboard/Components/CalorieBalanceCard.swift"
          ],
          "dependencies": [
            "1.2"
          ],
          "notes": "Created CalorieBalanceCard component with circular progress indicator showing calorie intake vs TDEE. Implements color coding (green for deficit, blue for balanced, red for surplus). Includes stats section, status badge, and comprehensive previews. Follows existing patterns from ExerciseDailySummaryCard and NutritionSummaryCard.",
          "updated_at": "2026-01-15T08:13:53.981479+00:00"
        },
        {
          "id": "2.2",
          "title": "Create MacroBreakdownCard",
          "description": "Card displaying protein/carbs/fat breakdown with horizontal progress bars. Shows actual grams and ratio percentages. Uses carbsRatio, proteinRatio, fatRatio from DailyLog.",
          "status": "completed",
          "estimatedHours": 2,
          "files": [
            "Bodii/Presentation/Features/Dashboard/Components/MacroBreakdownCard.swift"
          ],
          "dependencies": [
            "1.2"
          ],
          "notes": "Created MacroBreakdownCard component with horizontal progress bars for protein/carbs/fat breakdown. Displays actual grams and ratio percentages using carbsRatio, proteinRatio, fatRatio from DailyLog. Features color-coded progress bars (blue for carbs, orange for protein, purple for fat), SF Symbol icons, and animated transitions. Includes comprehensive previews for balanced, high-carb, high-protein, keto, and empty states. Follows existing card patterns from CalorieBalanceCard.",
          "updated_at": "2026-01-15T10:15:00.000000+00:00"
        },
        {
          "id": "2.3",
          "title": "Create ExerciseSummaryCard",
          "description": "Card showing today's exercise summary - total calories burned, exercise count, total minutes. Uses totalCaloriesOut, exerciseCount, exerciseMinutes from DailyLog.",
          "status": "completed",
          "estimatedHours": 1.5,
          "files": [
            "Bodii/Presentation/Features/Dashboard/Components/ExerciseSummaryCard.swift"
          ],
          "dependencies": [
            "1.2"
          ],
          "notes": "Created ExerciseSummaryCard component showing today's exercise summary with three key metrics: total calories burned (totalCaloriesOut), exercise count (exerciseCount), and exercise minutes (exerciseMinutes). Displays stats in three equal-width cards with color-coded icons (orange for calories, green for count, blue for time). Includes time formatting helper (e.g., \"1\uc2dc\uac04 30\ubd84\"), empty state handling (gray tone when no exercise data), and comprehensive previews for various scenarios. Follows patterns from CalorieBalanceCard and MacroBreakdownCard.",
          "updated_at": "2026-01-15T08:19:29.028800+00:00"
        },
        {
          "id": "2.4",
          "title": "Create SleepQualityCard",
          "description": "Card displaying previous night's sleep with emoji indicator (\ud83d\udd35/\ud83d\udfe2/\ud83d\udfe1/\ud83d\udd34/\ud83d\udfe0), duration in hours:minutes format, and quality label. Uses sleepDuration, sleepStatus from DailyLog.",
          "status": "completed",
          "estimatedHours": 1.5,
          "files": [
            "Bodii/Presentation/Features/Dashboard/Components/SleepQualityCard.swift"
          ],
          "dependencies": [
            "1.2"
          ],
          "notes": "Created SleepQualityCard component showing sleep duration and quality with emoji indicator (\ud83d\udd35/\ud83d\udfe2/\ud83d\udfe1/\ud83d\udd34/\ud83d\udfe0) based on SleepStatus. Displays duration in hours:minutes format and includes quality label with informational messages. Handles empty state properly. Follows existing card patterns with comprehensive previews for all sleep states.",
          "updated_at": "2026-01-15T08:22:22.458057+00:00"
        },
        {
          "id": "2.5",
          "title": "Create BodyCompositionCard",
          "description": "Card showing today's body composition if recorded - weight, body fat percentage. Shows 'No data today' message if weight is nil. Displays change from yesterday if available.",
          "status": "completed",
          "estimatedHours": 1.5,
          "files": [
            "Bodii/Presentation/Features/Dashboard/Components/BodyCompositionCard.swift"
          ],
          "dependencies": [
            "1.2"
          ],
          "notes": "Created BodyCompositionCard component showing today's body composition data. Displays weight and body fat percentage in a two-column card layout. Shows 'No data today' message when weight is nil. Displays change from yesterday (weightChange, bodyFatPctChange) with color-coded indicators (green for decrease, red for increase, blue for no change). Includes comprehensive previews for all states (with data, without changes, empty state, various change scenarios). Follows existing patterns from CalorieBalanceCard and SleepQualityCard with proper Korean localization and educational comments.",
          "updated_at": "2026-01-16T02:22:15.033868+00:00"
        }
      ]
    },
    {
      "id": "phase-3",
      "name": "Date Navigation & Quick Actions",
      "description": "Add date navigation and quick-add functionality",
      "subtasks": [
        {
          "id": "3.1",
          "title": "Create DateNavigationHeader",
          "description": "Reusable header component with left/right arrows to navigate dates, centered date display (\uc624\ub298, \uc5b4\uc81c, or formatted date), and 'today' button to return to current date.",
          "status": "completed",
          "estimatedHours": 1.5,
          "files": [
            "Bodii/Presentation/Features/Dashboard/Components/DateNavigationHeader.swift"
          ],
          "dependencies": [],
          "notes": "Created DateNavigationHeader component with left/right arrow navigation, centered date display (\uc624\ub298, \uc5b4\uc81c, or formatted date), and 'today' button to return to current date. Follows existing patterns from CalorieBalanceCard and SleepQualityCard with comprehensive Korean documentation. Includes accessibility support and multiple preview configurations for various date states.",
          "updated_at": "2026-01-16T02:24:41.777419+00:00"
        },
        {
          "id": "3.2",
          "title": "Create QuickAddButtons",
          "description": "Horizontal scroll of quick-add buttons for Food, Exercise, Body Composition. Each button navigates to respective input screen. Uses SF Symbols for icons.",
          "status": "completed",
          "estimatedHours": 1,
          "files": [
            "Bodii/Presentation/Features/Dashboard/Components/QuickAddButtons.swift"
          ],
          "dependencies": [],
          "notes": "Created QuickAddButtons component with horizontal scroll of quick-add buttons for Food, Exercise, and Body Composition. Each button navigates to respective input screen using callback pattern. Uses SF Symbols for icons (fork.knife, figure.run, scalemass.fill) with distinct colors (orange, green, blue). Follows existing patterns from DateNavigationHeader and CalorieBalanceCard with comprehensive Korean documentation, accessibility support, and multiple preview configurations.",
          "updated_at": "2026-01-16T02:27:25.805072+00:00"
        }
      ]
    },
    {
      "id": "phase-4",
      "name": "Dashboard Integration",
      "description": "Integrate all components into DashboardView",
      "subtasks": [
        {
          "id": "4.1",
          "title": "Refactor DashboardView with New Components",
          "description": "Replace placeholder cards with actual components. Integrate DashboardViewModel, add date navigation header, organize cards in ScrollView with proper spacing.",
          "status": "completed",
          "estimatedHours": 2,
          "files": [
            "Bodii/Presentation/Features/Dashboard/DashboardView.swift"
          ],
          "dependencies": [
            "2.1",
            "2.2",
            "2.3",
            "2.4",
            "2.5",
            "3.1",
            "3.2"
          ],
          "notes": "Refactored DashboardView to integrate all new components:\n- Replaced metabolismViewModel with DashboardViewModel using @Observable pattern\n- Integrated DateNavigationHeader for date navigation (left/right arrows, today button)\n- Added QuickAddButtons component for fast navigation to Diet/Exercise/Body tabs\n- Integrated all dashboard cards:\n  * CalorieBalanceCard - showing intake vs TDEE with circular progress\n  * MacroBreakdownCard - showing protein/carbs/fat breakdown with progress bars\n  * ExerciseSummaryCard - showing calories burned, exercise count, minutes\n  * SleepQualityCard - showing sleep duration and quality with emoji indicator\n  * BodyCompositionCard - showing weight and body fat percentage\n- Added navigation callbacks (onNavigateToDiet, onNavigateToExercise, onNavigateToBody)\n- Organized cards in ScrollView with 20pt spacing between components\n- Updated documentation to reflect new component-based architecture\n- All components use DashboardViewModel's computed properties from DailyLog\n- Committed as: 3a2f0f6",
          "updated_at": "2026-01-16T02:31:19.579609+00:00"
        },
        {
          "id": "4.2",
          "title": "Implement Pull-to-Refresh with DailyLog",
          "description": "Connect refreshable modifier to DashboardViewModel.refresh() method. Show loading indicator during refresh. Update all cards with fresh DailyLog data.",
          "status": "completed",
          "estimatedHours": 0.5,
          "files": [
            "Bodii/Presentation/Features/Dashboard/DashboardView.swift"
          ],
          "dependencies": [
            "4.1"
          ],
          "notes": "Added .refreshable modifier to DashboardView that connects to DashboardViewModel.refresh() method. Pull-to-refresh gesture now updates all dashboard cards with fresh DailyLog data. Loading indicator is automatically shown during refresh (handled by SwiftUI's refreshable modifier). Follows the same pattern as ExerciseListView and BodyTrendsView. Committed as: 060a5a1",
          "updated_at": "2026-01-16T02:33:23.086778+00:00"
        },
        {
          "id": "4.3",
          "title": "Add Navigation Callbacks for Quick-Add",
          "description": "Implement navigation callbacks from quick-add buttons to Diet, Exercise, Body tabs. Add onNavigateToDiet, onNavigateToExercise callbacks to DashboardView.",
          "status": "completed",
          "estimatedHours": 1,
          "files": [
            "Bodii/Presentation/Features/Dashboard/DashboardView.swift",
            "Bodii/App/ContentView.swift"
          ],
          "dependencies": [
            "4.1"
          ],
          "notes": "Successfully implemented navigation callbacks from quick-add buttons. Updated ContentView to provide all three navigation callbacks (onNavigateToDiet, onNavigateToExercise, onNavigateToBody) to DashboardView. Each callback switches the TabView's selectedTab to the appropriate tab. Updated ContentView to use DIContainer.shared.makeDashboardViewModel(userId:) for proper dependency injection. All callbacks are properly wired through DashboardView \u2192 QuickAddButtons \u2192 ContentView. Committed as: df75e80",
          "updated_at": "2026-01-16T02:36:06.551371+00:00"
        },
        {
          "id": "4.4",
          "title": "Update ContentView Tab Integration",
          "description": "Update ContentView to pass DashboardViewModel with proper dependencies and all navigation callbacks for tab switching.",
          "status": "completed",
          "estimatedHours": 0.5,
          "files": [
            "Bodii/App/ContentView.swift"
          ],
          "dependencies": [
            "4.3"
          ],
          "notes": "Verified that ContentView properly passes DashboardViewModel with DIContainer dependency injection and all three navigation callbacks (onNavigateToDiet, onNavigateToExercise, onNavigateToBody) for tab switching. Implementation was completed in previous commit df75e80 during subtask 4.3. All requirements met:\n- DashboardViewModel created via DIContainer.shared.makeDashboardViewModel(userId:)\n- All navigation callbacks properly wired to switch selectedTab\n- Follows existing patterns with Korean documentation",
          "updated_at": "2026-01-16T02:38:14.123001+00:00"
        }
      ]
    },
    {
      "id": "phase-5",
      "name": "Empty States & Polish",
      "description": "Handle edge cases and add visual polish",
      "subtasks": [
        {
          "id": "5.1",
          "title": "Create Empty State Views",
          "description": "Create EmptyStateView components for when DailyLog has no data. Show helpful messages and call-to-action buttons for each card type (no food, no exercise, no sleep recorded).",
          "status": "completed",
          "estimatedHours": 1.5,
          "files": [
            "Bodii/Presentation/Features/Dashboard/Components/DashboardEmptyStates.swift"
          ],
          "dependencies": [
            "4.1"
          ],
          "notes": "Created DashboardEmptyStates.swift with reusable empty state components (DashboardEmptyState, FoodEmptyState, ExerciseEmptyState, SleepEmptyState, BodyCompositionEmptyState). Integrated empty states into all dashboard cards (CalorieBalanceCard, MacroBreakdownCard, ExerciseSummaryCard, SleepQualityCard, BodyCompositionCard) with conditional rendering. Added navigation callbacks to card components for action buttons. Updated DashboardView to pass navigation callbacks. Includes comprehensive previews and documentation. Committed as: 14cc444",
          "updated_at": "2026-01-16T02:43:44.007400+00:00"
        },
        {
          "id": "5.2",
          "title": "Add Loading Skeleton Views",
          "description": "Create skeleton loading views for cards during initial load. Use shimmer effect for better UX during async data fetch.",
          "status": "completed",
          "estimatedHours": 1,
          "files": [
            "Bodii/Presentation/Features/Dashboard/Components/DashboardSkeletonView.swift"
          ],
          "dependencies": [
            "4.1"
          ],
          "notes": "Created comprehensive skeleton loading views with shimmer effect for all dashboard cards:\n- Implemented ShimmerModifier with LinearGradient animation for smooth loading effect\n- Created individual skeleton components for each card type:\n  * CalorieBalanceCardSkeleton - circular progress placeholder\n  * MacroBreakdownCardSkeleton - progress bars placeholder\n  * ExerciseSummaryCardSkeleton - stats cards placeholder\n  * SleepQualityCardSkeleton - sleep info placeholder\n  * BodyCompositionCardSkeleton - body metrics placeholder\n  * DateNavigationHeaderSkeleton - header placeholder\n  * QuickAddButtonsSkeleton - quick add buttons placeholder\n- Created DashboardSkeletonView for full dashboard loading state\n- Integrated skeleton views into DashboardView with conditional rendering (isLoading && dailyLog == nil)\n- Used shimmer effect with 1.5s linear animation for professional UX\n- All skeleton layouts match actual card structures for consistency\n- Includes comprehensive previews for easy development\n- Committed as: 8701946",
          "updated_at": "2026-01-16T02:47:01.775200+00:00"
        },
        {
          "id": "5.3",
          "title": "Add Accessibility Support",
          "description": "Add accessibility labels, hints, and traits to all dashboard components. Ensure VoiceOver reads meaningful information for each card.",
          "status": "completed",
          "estimatedHours": 1,
          "files": [
            "Bodii/Presentation/Features/Dashboard/Components/CalorieBalanceCard.swift",
            "Bodii/Presentation/Features/Dashboard/Components/MacroBreakdownCard.swift",
            "Bodii/Presentation/Features/Dashboard/Components/ExerciseSummaryCard.swift",
            "Bodii/Presentation/Features/Dashboard/Components/SleepQualityCard.swift",
            "Bodii/Presentation/Features/Dashboard/Components/BodyCompositionCard.swift"
          ],
          "dependencies": [
            "4.1"
          ],
          "notes": "Added comprehensive accessibility support to all dashboard components:\n- CalorieBalanceCard: Progress indicator with label/value, stats section, status badge\n- MacroBreakdownCard: Individual progress bars with name and value (grams + percentage)\n- ExerciseSummaryCard: Stat cards for calories/count/time with proper labels\n- SleepQualityCard: Sleep info with time/quality, advice section, emoji hidden from VoiceOver\n- BodyCompositionCard: Weight and body fat stats with change indicators\n- All cards have container-level accessibility labels for context\n- DateNavigationHeader and QuickAddButtons already had proper accessibility\n- VoiceOver users can now navigate and understand all dashboard data effectively\nCommitted as: 7a8df67",
          "updated_at": "2026-01-16T02:51:47.699762+00:00"
        }
      ]
    },
    {
      "id": "phase-6",
      "name": "Testing & Documentation",
      "description": "Add unit tests and documentation",
      "subtasks": [
        {
          "id": "6.1",
          "title": "Unit Tests for DashboardViewModel",
          "description": "Test DashboardViewModel: loadDailyLog success/failure, date navigation, refresh behavior, state transitions. Use mock DailyLogRepository.",
          "status": "completed",
          "estimatedHours": 2,
          "files": [
            "BodiiTests/Presentation/Features/Dashboard/DashboardViewModelTests.swift"
          ],
          "dependencies": [
            "1.2"
          ],
          "notes": "Created comprehensive unit tests for DashboardViewModel (748 lines). Tests cover: loadDailyLog success/failure scenarios, date navigation (previous/next/today/selectDate), refresh behavior, state transitions (loading \u2192 success/error), computed properties, date formatting (\uc624\ub298/\uc5b4\uc81c/formatted date), error handling and clearError. Created MockDailyLogRepository for dependency isolation. All tests follow Given-When-Then pattern with @MainActor for proper async/await testing. Committed as: 7972b20",
          "updated_at": "2026-01-16T02:55:22.885584+00:00"
        },
        {
          "id": "6.2",
          "title": "SwiftUI Previews for All Components",
          "description": "Create comprehensive SwiftUI previews for all dashboard components showing different states: with data, empty, loading, error.",
          "status": "pending",
          "estimatedHours": 1,
          "files": [
            "Bodii/Presentation/Features/Dashboard/DashboardView.swift",
            "Bodii/Presentation/Features/Dashboard/Components/CalorieBalanceCard.swift",
            "Bodii/Presentation/Features/Dashboard/Components/MacroBreakdownCard.swift"
          ],
          "dependencies": [
            "5.1",
            "5.2"
          ],
          "notes": ""
        }
      ]
    }
  ],
  "acceptanceCriteria": [
    {
      "id": "ac-1",
      "description": "Dashboard loads in under 0.5 seconds with pre-calculated values",
      "testable": true,
      "relatedSubtasks": [
        "1.1",
        "1.2"
      ]
    },
    {
      "id": "ac-2",
      "description": "Shows today's calorie intake vs. TDEE with visual indicator",
      "testable": true,
      "relatedSubtasks": [
        "2.1"
      ]
    },
    {
      "id": "ac-3",
      "description": "Displays macro breakdown (protein/carbs/fat) with progress bars",
      "testable": true,
      "relatedSubtasks": [
        "2.2"
      ]
    },
    {
      "id": "ac-4",
      "description": "Shows exercise calories burned for the day",
      "testable": true,
      "relatedSubtasks": [
        "2.3"
      ]
    },
    {
      "id": "ac-5",
      "description": "Displays previous night's sleep duration and quality",
      "testable": true,
      "relatedSubtasks": [
        "2.4"
      ]
    },
    {
      "id": "ac-6",
      "description": "Quick-add buttons for food, exercise, and body composition",
      "testable": true,
      "relatedSubtasks": [
        "3.2",
        "4.3"
      ]
    },
    {
      "id": "ac-7",
      "description": "Date navigation to view past days",
      "testable": true,
      "relatedSubtasks": [
        "3.1",
        "1.2"
      ]
    },
    {
      "id": "ac-8",
      "description": "Pull-to-refresh updates all metrics",
      "testable": true,
      "relatedSubtasks": [
        "4.2"
      ]
    }
  ],
  "technicalNotes": [
    "DailyLog entity already contains all pre-calculated values (totalCaloriesIn, tdee, netCalories, macros, exercise stats, sleep data)",
    "Follow existing Clean Architecture pattern: Repository \u2192 Service \u2192 ViewModel \u2192 View",
    "Use existing SleepStatus enum for sleep quality display",
    "Existing MetabolismViewModel can be kept for BMR/TDEE card, but primary data comes from DailyLog",
    "Date navigation should use DateUtils for consistent date handling (02:00 boundary)",
    "Korean localization required for all user-facing strings"
  ],
  "qaSignOff": {
    "status": "pending",
    "tests_passed": "",
    "issues": ""
  },
  "last_updated": "2026-01-16T02:55:22.885595+00:00"
}