{
  "feature": "Exercise Tracking with MET Calculations",
  "description": "Exercise logging with activity type selection, duration input, and automatic calorie burn calculation using MET (Metabolic Equivalent of Task) values. Track both cardio and strength training with appropriate calculations.",
  "created_at": "2026-01-13T09:55:58.414Z",
  "updated_at": "2026-01-14T02:45:40.877Z",
  "status": "in_progress",
  "planStatus": "in_progress",
  "phases": [
    {
      "id": "phase-1",
      "name": "Core Services & Data Layer",
      "description": "Implement the core calculation service, repository interfaces, and data access layer for exercise records",
      "subtasks": [
        {
          "id": "1.1",
          "title": "Create ExerciseCalcService for MET-based calorie calculation",
          "description": "Implement the service that calculates calories burned using the MET formula: calories = MET \u00d7 weight(kg) \u00d7 duration(hours). Use ExerciseType.baseMET and Intensity.metMultiplier for accurate calculations.",
          "status": "completed",
          "notes": "Implemented ExerciseCalcService with MET-based calorie calculation. Service correctly applies formula: calories = MET \u00d7 weight(kg) \u00d7 duration(hours), with intensity multipliers (0.8, 1.0, 1.2) applied to base MET values. Returns Int32 and handles all 8 exercise types.",
          "files": [
            "Bodii/Domain/Services/ExerciseCalcService.swift"
          ],
          "acceptance_criteria": [
            "Service uses formula: MET \u00d7 weight(kg) \u00d7 duration(hours)",
            "Correctly applies intensity multipliers (0.8, 1.0, 1.2)",
            "Returns Int32 for calories burned",
            "Handles all 8 exercise types with correct MET values"
          ],
          "updated_at": "2026-01-13T10:02:07.200738+00:00"
        },
        {
          "id": "1.2",
          "title": "Create ExerciseRecordRepository protocol",
          "description": "Define the repository interface for ExerciseRecord CRUD operations following the Clean Architecture pattern. Include methods for create, read (by date, by ID), update, and delete.",
          "status": "completed",
          "notes": "Created ExerciseRecordRepository protocol with full CRUD operations (create, update, delete) and multiple read methods (fetchById, fetchByDate, fetchByDateRange, fetchAll). Added utility methods for aggregations (count, totalDuration, totalCaloriesBurned). Uses async/await pattern throughout for modern Swift concurrency. Includes comprehensive documentation with examples.",
          "files": [
            "Bodii/Domain/Interfaces/ExerciseRecordRepository.swift"
          ],
          "acceptance_criteria": [
            "Protocol defines create, read, update, delete methods",
            "Includes fetchByDate and fetchByDateRange methods",
            "Follows existing repository patterns in codebase",
            "Uses async/await or Combine for async operations"
          ],
          "updated_at": "2026-01-13T19:15:00.000Z"
        },
        {
          "id": "1.3",
          "title": "Create ExerciseRecordLocalDataSource",
          "description": "Implement Core Data operations for ExerciseRecord entity. Map between Core Data managed objects and domain entities.",
          "status": "completed",
          "notes": "Created ExerciseRecordLocalDataSource with full Core Data CRUD operations. Implemented async/await pattern throughout for modern Swift concurrency. Added mapping between NSManagedObject and domain ExerciseRecord entity. Supports filtering by date, date range, and user ID. Includes utility methods (count, totalDuration, totalCaloriesBurned) and proper error handling with DataSourceError enum. All operations use context.perform for thread safety.",
          "files": [
            "Bodii/Data/DataSources/Local/ExerciseRecordLocalDataSource.swift"
          ],
          "acceptance_criteria": [
            "CRUD operations using Core Data",
            "Maps NSManagedObject to domain ExerciseRecord entity",
            "Proper error handling",
            "Supports filtering by date and user"
          ],
          "updated_at": "2026-01-13T10:07:52.101865+00:00"
        },
        {
          "id": "1.4",
          "title": "Implement ExerciseRecordRepositoryImpl",
          "description": "Implement the repository that coordinates between data sources and domain layer. Use ExerciseRecordLocalDataSource for persistence.",
          "status": "completed",
          "notes": "Created ExerciseRecordRepositoryImpl that coordinates between data sources and domain layer. Implements ExerciseRecordRepository protocol with full CRUD operations. Delegates all operations to ExerciseRecordLocalDataSource for Core Data persistence. Includes comprehensive documentation, Korean learning comments, and follows async/await pattern throughout. Supports all repository methods (create, read by ID/date/date range/all, update, delete) and utility methods (count, totalDuration, totalCaloriesBurned).",
          "files": [
            "Bodii/Data/Repositories/ExerciseRecordRepositoryImpl.swift"
          ],
          "acceptance_criteria": [
            "Implements ExerciseRecordRepository protocol",
            "Uses ExerciseRecordLocalDataSource for data operations",
            "Proper entity mapping",
            "Handles Core Data save context"
          ],
          "updated_at": "2026-01-13T10:10:06.113540+00:00"
        },
        {
          "id": "1.5",
          "title": "Create DailyLogService for exercise updates",
          "description": "Implement service to update DailyLog when exercise records are added/modified/deleted. Update totalCaloriesOut, exerciseMinutes, and exerciseCount fields.",
          "status": "completed",
          "notes": "Implemented comprehensive DailyLog infrastructure:\n\n- Created DailyLogRepository protocol with getOrCreate, addExercise, removeExercise, updateExercise methods\n- Implemented DailyLogLocalDataSource with Core Data CRUD operations, thread-safe async/await pattern, date normalization\n- Created DailyLogRepositoryImpl following Clean Architecture pattern\n- Implemented DailyLogService with methods to update DailyLog when exercises are added/modified/deleted\n- All methods use User.currentBMR/TDEE when creating new DailyLog\n- addExercise increments totalCaloriesOut, exerciseMinutes, exerciseCount\n- removeExercise decrements fields (with protection against negative values)\n- updateExercise applies difference calculation between old and new values\n\nFiles created:\n- Bodii/Domain/Interfaces/DailyLogRepository.swift\n- Bodii/Data/DataSources/Local/DailyLogLocalDataSource.swift\n- Bodii/Data/Repositories/DailyLogRepositoryImpl.swift\n- Bodii/Domain/Services/DailyLogService.swift\n\nAll implementations follow existing codebase patterns with Korean learning comments, comprehensive documentation, and proper error handling.",
          "files": [
            "Bodii/Domain/Services/DailyLogService.swift",
            "Bodii/Domain/Interfaces/DailyLogRepository.swift",
            "Bodii/Data/DataSources/Local/DailyLogLocalDataSource.swift",
            "Bodii/Data/Repositories/DailyLogRepositoryImpl.swift"
          ],
          "acceptance_criteria": [
            "getOrCreate(for date) method returns or creates DailyLog",
            "addExercise method increments totalCaloriesOut, exerciseMinutes, exerciseCount",
            "removeExercise method decrements the fields",
            "updateExercise method adjusts the difference",
            "Uses User.currentBMR/TDEE when creating new DailyLog"
          ],
          "updated_at": "2026-01-13T10:15:20.441579+00:00"
        }
      ]
    },
    {
      "id": "phase-2",
      "name": "Use Cases & Business Logic",
      "description": "Implement use cases that orchestrate the business logic for exercise tracking",
      "subtasks": [
        {
          "id": "2.1",
          "title": "Create AddExerciseRecordUseCase",
          "description": "Implement use case for adding a new exercise record. Calculate calories using ExerciseCalcService and update DailyLog through DailyLogService.",
          "status": "completed",
          "notes": "Implementation verified: \u2705 Calculates calories using ExerciseCalcService.calculateCalories() with MET formula, \u2705 Saves ExerciseRecord via exerciseRepository.create(), \u2705 Updates DailyLog via dailyLogService.addExercise() with calories/duration/userBMR/userTDEE, \u2705 Validates exercise duration (minimum 1 minute) with ValidationError, \u2705 Includes comprehensive error handling and documentation, \u2705 Follows existing codebase patterns with Korean learning comments. The use case correctly orchestrates the entire flow: validation \u2192 calculation \u2192 persistence \u2192 daily log update. Previously committed in 5cd3957.",
          "files": [
            "Bodii/Domain/UseCases/Exercise/AddExerciseRecordUseCase.swift"
          ],
          "acceptance_criteria": [
            "Calculates calories using ExerciseCalcService",
            "Saves ExerciseRecord via repository",
            "Updates DailyLog via DailyLogService",
            "Validates exercise duration (min 1 minute)"
          ],
          "updated_at": "2026-01-14T02:47:04.156928+00:00"
        },
        {
          "id": "2.2",
          "title": "Create UpdateExerciseRecordUseCase",
          "description": "Implement use case for updating an existing exercise record. Recalculate calories and adjust DailyLog accordingly.",
          "status": "completed",
          "notes": "Implementation verified: \u2705 Fetches existing ExerciseRecord by ID using exerciseRepository.fetchById(), \u2705 Validates user ownership with guard statement checking userId match, \u2705 Recalculates calories using ExerciseCalcService.calculateCalories() when type/duration/intensity changes (hasCalorieAffectingChanges helper), \u2705 Updates ExerciseRecord via exerciseRepository.update(), \u2705 Adjusts DailyLog via dailyLogService.updateExercise() with old and new values for difference calculation, \u2705 Validates exercise duration (minimum 1 minute) with ValidationError, \u2705 Includes comprehensive error handling (RecordNotFoundError, UnauthorizedError, ValidationError), \u2705 Follows existing codebase patterns with Korean learning comments and extensive documentation. The use case correctly orchestrates the entire update flow: fetch \u2192 validate ownership \u2192 validate input \u2192 check changes \u2192 recalculate if needed \u2192 update record \u2192 adjust daily log. Committed in 7119ae7.",
          "files": [
            "Bodii/Domain/UseCases/Exercise/UpdateExerciseRecordUseCase.swift"
          ],
          "acceptance_criteria": [
            "Recalculates calories if type, duration, or intensity changed",
            "Updates ExerciseRecord via repository",
            "Adjusts DailyLog with difference in calories/minutes"
          ],
          "updated_at": "2026-01-14T02:49:45.313133+00:00"
        },
        {
          "id": "2.3",
          "title": "Create DeleteExerciseRecordUseCase",
          "description": "Implement use case for deleting an exercise record. Update DailyLog to remove the calories and minutes.",
          "status": "completed",
          "notes": "Implementation verified: \u2705 Fetches existing ExerciseRecord by ID using exerciseRepository.fetchById(), \u2705 Validates user ownership with guard statement checking userId match, \u2705 Deletes ExerciseRecord via exerciseRepository.delete(), \u2705 Decrements DailyLog fields via dailyLogService.removeExercise() with calories and duration values (including exerciseCount by 1), \u2705 Includes comprehensive error handling (RecordNotFoundError, UnauthorizedError), \u2705 Follows existing codebase patterns with Korean learning comments and extensive documentation. The use case correctly orchestrates the entire deletion flow: fetch \u2192 validate ownership \u2192 update DailyLog \u2192 delete record. Execution order is critical: DailyLog must be updated before ExerciseRecord deletion to access the record's data. Committed in c19fdab.",
          "files": [
            "Bodii/Domain/UseCases/Exercise/DeleteExerciseRecordUseCase.swift"
          ],
          "acceptance_criteria": [
            "Deletes ExerciseRecord via repository",
            "Decrements DailyLog fields by deleted record values",
            "Decrements exerciseCount by 1"
          ],
          "updated_at": "2026-01-14T02:52:31.404111+00:00"
        },
        {
          "id": "2.4",
          "title": "Create GetExerciseRecordsUseCase",
          "description": "Implement use case for fetching exercise records by date or date range.",
          "status": "completed",
          "notes": "Implementation verified: \u2705 Fetches records for a specific date via execute(forDate:userId:), \u2705 Fetches records for a date range via execute(startDate:endDate:userId:), \u2705 Returns sorted by date (newest first) as repository handles sorting. The use case is simple and follows existing patterns - delegates to ExerciseRecordRepository methods (fetchByDate and fetchByDateRange) and returns sorted results. Includes comprehensive documentation with Korean learning comments explaining Read UseCase pattern vs Write UseCase pattern. Committed in 37da4fe.",
          "files": [
            "Bodii/Domain/UseCases/Exercise/GetExerciseRecordsUseCase.swift"
          ],
          "acceptance_criteria": [
            "Fetches records for a specific date",
            "Fetches records for a date range",
            "Returns sorted by date (newest first or by creation time)"
          ],
          "updated_at": "2026-01-14T02:54:59.896698+00:00"
        }
      ]
    },
    {
      "id": "phase-3",
      "name": "UI - Exercise List View",
      "description": "Implement the main exercise list view showing daily exercise records",
      "subtasks": [
        {
          "id": "3.1",
          "title": "Create ExerciseListViewModel",
          "description": "Implement the ViewModel for ExerciseListView. Manage state for exercise records, loading, and daily summary. Use GetExerciseRecordsUseCase for data fetching.",
          "status": "completed",
          "notes": "\u2705 Implemented ExerciseListViewModel with @Observable macro (iOS 17+). Features include:\n- State management for exercise records, daily summary (totalCaloriesOut, exerciseMinutes, exerciseCount), loading, and error states\n- Fetches data using GetExerciseRecordsUseCase and DailyLogRepository\n- Date navigation support (previous/next day, date selection)\n- Concurrent data fetching with async/await for optimal performance (async let for parallel execution)\n- @MainActor annotations for UI-safe updates\n- Comprehensive documentation with Korean learning comments explaining @Observable, async/await patterns, and MVVM architecture\n- Dependency injection for testability\n- Computed properties for convenience (isEmpty, isToday, isFuture, formattedSelectedDate)\n- Pull-to-refresh support via refresh() method\n\nThe ViewModel follows the codebase patterns from the development guide and is ready for integration with the View layer. Committed in 0ed5cca.",
          "files": [
            "Bodii/Presentation/Features/Exercise/ViewModels/ExerciseListViewModel.swift"
          ],
          "acceptance_criteria": [
            "Fetches exercise records for selected date",
            "Exposes totalCaloriesOut, exerciseMinutes, exerciseCount from DailyLog",
            "Handles loading and error states",
            "Supports date navigation (previous/next day)"
          ],
          "updated_at": "2026-01-14T02:58:38.825576+00:00"
        },
        {
          "id": "3.2",
          "title": "Create ExerciseCardView component",
          "description": "Create a reusable card component showing exercise details: type icon, name, duration, intensity, and calories burned.",
          "status": "completed",
          "notes": "\u2705 Implemented ExerciseCardView reusable component with comprehensive features:\n\n**UI Elements:**\n- Exercise type icon using SF Symbols (systemIconName extension)\n- Exercise type name with headline font\n- Duration display with clock icon (minutes)\n- Intensity badge with color-coding (\uc800/\uc911/\uace0)\n- Calories burned prominently displayed\n- Card design with shadow and rounded corners\n\n**Features:**\n- Swipe-to-delete gesture support using .swipeActions modifier\n- Color-coded intensity badges (green/orange/red)\n- Unique accent colors per exercise type\n- Responsive layout with HStack and VStack\n- Optional delete action handler\n\n**Extensions:**\n- ExerciseType.systemIconName: Maps each exercise type to appropriate SF Symbol\n- ExerciseType.accentColor: Provides unique color for each exercise type\n\n**Code Quality:**\n- Follows SwiftUI View composition pattern\n- Comprehensive Korean learning comments\n- Multiple preview configurations for development\n- Clean separation of view components\n- Immutable props pattern\n\nAll acceptance criteria met. Component is ready for integration into ExerciseListView. Committed in 5403d2a.",
          "files": [
            "Bodii/Presentation/Components/ExerciseCardView.swift"
          ],
          "acceptance_criteria": [
            "Shows exercise type icon and name",
            "Shows duration in minutes",
            "Shows intensity level (\uc800/\uc911/\uace0)",
            "Shows calories burned",
            "Supports swipe-to-delete gesture"
          ],
          "updated_at": "2026-01-14T03:01:06.020143+00:00"
        },
        {
          "id": "3.3",
          "title": "Create ExerciseListView",
          "description": "Implement the main exercise tab view with date navigation, daily summary, exercise list, and add button.",
          "status": "completed",
          "notes": "\u2705 Implemented ExerciseListView with comprehensive features:\n\n**Core Components:**\n- Date navigation header with previous/next day buttons and calendar-style UI\n- Daily summary section with three color-coded cards (calories, time, count)\n- Exercise list using ExerciseCardView components with swipe-to-delete\n- Empty state with encouraging messaging and add button\n- Loading state with progress indicator\n- Error handling with alert dialog\n\n**View Architecture:**\n- Clean view composition using computed properties (dateNavigationHeader, dailySummarySection, contentView, etc.)\n- Reusable summaryCard function for statistics display\n- MVVM pattern with @Observable ViewModel (iOS 17+)\n- NavigationStack with toolbar integration\n\n**Features:**\n- Date navigation with disabled future dates\n- 'Today' badge indicator for current date\n- Time formatting helper (converts minutes to \"X\uc2dc\uac04 Y\ubd84\" format)\n- Floating add button in navigation toolbar\n- Pull-to-refresh support using .refreshable modifier\n- List customization (no separators, custom insets, clear backgrounds)\n\n**Preview Support:**\n- Three preview configurations: with data, empty state, loading state\n- Mock implementations of GetExerciseRecordsUseCase, DailyLogRepository, ExerciseRecordRepository\n- Sample data for rapid development feedback\n\n**Code Quality:**\n- Comprehensive Korean learning comments explaining SwiftUI patterns\n- Swift vs Java comparisons for learning\n- Follows development guide conventions\n- Clean separation of concerns\n\nAll acceptance criteria met:\n\u2705 Date header with left/right navigation\n\u2705 Daily summary card (total calories, total minutes, exercise count)\n\u2705 List of ExerciseCardView for each record\n\u2705 Floating add button in navigation bar\n\u2705 Empty state when no exercises\n\u2705 Pull-to-refresh support\n\nCommitted in 2dc33bc.",
          "files": [
            "Bodii/Presentation/Features/Exercise/Views/ExerciseListView.swift"
          ],
          "acceptance_criteria": [
            "Date header with left/right navigation",
            "Daily summary card (total calories, total minutes, exercise count)",
            "List of ExerciseCardView for each record",
            "Floating add button or navigation bar button",
            "Empty state when no exercises",
            "Pull-to-refresh support"
          ],
          "updated_at": "2026-01-14T03:05:02.659655+00:00"
        },
        {
          "id": "3.4",
          "title": "Create DailySummaryCardView for exercises",
          "description": "Create a summary card showing today's exercise totals: calories burned, total minutes, and exercise count.",
          "status": "completed",
          "notes": "\u2705 Implemented ExerciseDailySummaryCard reusable component with comprehensive features:\n\n**UI Components:**\n- Three-column card layout with equal distribution\n- Total calories burned card with flame icon (orange)\n- Total exercise time card with clock icon (blue) in \"X\uc2dc\uac04 Y\ubd84\" format\n- Exercise count card with figure.run icon (green)\n- Card container with shadow and rounded corners\n\n**Features:**\n- Visual distinction for empty state (isEmpty computed property)\n- Gray color scheme when no exercises logged\n- Time formatting helper (formatMinutes) for hours:minutes display\n- Props-based immutable design pattern\n- Reusable summaryCard function for DRY principle\n\n**Preview Configurations:**\n- \"With Exercises\": Various activity levels (short, medium, long)\n- \"Empty State\": Zero values with gray styling\n- \"Various Times\": Edge cases (exact hours, mixed minutes)\n\n**Code Quality:**\n- Comprehensive Korean learning comments\n- Swift vs Java comparisons\n- Extensive documentation with usage examples\n- Follows existing codebase patterns\n- Clean separation of concerns\n\nAll acceptance criteria met:\n\u2705 Shows total calories burned with icon\n\u2705 Shows total exercise time in hours:minutes format\n\u2705 Shows number of workout sessions\n\u2705 Visual distinction when no exercises logged\n\nComponent is ready for integration into ExerciseListView or standalone use. File committed in fd31df7.",
          "files": [
            "Bodii/Presentation/Features/Exercise/Views/Components/ExerciseDailySummaryCard.swift"
          ],
          "acceptance_criteria": [
            "Shows total calories burned with icon",
            "Shows total exercise time in hours:minutes format",
            "Shows number of workout sessions",
            "Visual distinction when no exercises logged"
          ],
          "updated_at": "2026-01-14T03:08:37.508647+00:00"
        }
      ]
    },
    {
      "id": "phase-4",
      "name": "UI - Exercise Input Modal",
      "description": "Implement the exercise input/edit modal with real-time calorie calculation",
      "subtasks": [
        {
          "id": "4.1",
          "title": "Create ExerciseInputViewModel",
          "description": "Implement ViewModel for the exercise input modal. Handle form state, validation, real-time calorie preview, and save action.",
          "status": "completed",
          "notes": "\u2705 Implemented ExerciseInputViewModel with comprehensive features:\n\n**Form State Management:**\n- Manages form state (selectedExerciseType, duration, selectedIntensity, note, selectedDate)\n- Uses @Observable macro (iOS 17+) for automatic View updates\n- All form fields with sensible defaults (running, 30 min, medium intensity)\n\n**Real-time Calorie Preview:**\n- previewCalories computed property calculates calories in real-time\n- Uses ExerciseCalcService.calculateCalories() with MET formula\n- Automatically recalculates when any form field changes (type, duration, intensity)\n- Gets user weight from injected userWeight dependency\n\n**Validation:**\n- isFormValid computed property checks duration >= 1 minute\n- durationValidationError provides user-friendly validation messages\n- Validates on save() before calling UseCase\n\n**Save Action:**\n- Calls AddExerciseRecordUseCase.execute() with all required parameters\n- Handles loading state with isSaving boolean\n- Sets isSaveSuccess flag on success for View dismiss\n- Captures errors in errorMessage for user feedback\n\n**Additional Features:**\n- reset() method to clear form after save or cancel\n- clearError() method for error alert dismissal\n- selectExerciseType(), selectIntensity(), setDuration() helper methods\n- Comprehensive error handling with user-friendly messages\n\n**Code Quality:**\n- Follows ExerciseListViewModel pattern from the codebase\n- Extensive Korean learning comments explaining Form ViewModel pattern\n- @MainActor annotations for UI-safe operations\n- Dependency injection for testability (AddExerciseRecordUseCase, userId, userWeight, userBMR, userTDEE)\n- Comprehensive documentation with usage examples and testing patterns\n- Comparison with Java/Android patterns for learning\n\nAll acceptance criteria met:\n\u2705 Manages form state (type, duration, intensity, note)\n\u2705 Calculates preview calories in real-time using ExerciseCalcService\n\u2705 Gets user weight from User.currentWeight for calculation\n\u2705 Validates minimum duration (1 minute)\n\u2705 Calls AddExerciseRecordUseCase on save\n\nCommitted in 6014550.",
          "files": [
            "Bodii/Presentation/Features/Exercise/ViewModels/ExerciseInputViewModel.swift"
          ],
          "acceptance_criteria": [
            "Manages form state (type, duration, intensity, note)",
            "Calculates preview calories in real-time using ExerciseCalcService",
            "Gets user weight from User.currentWeight for calculation",
            "Validates minimum duration (1 minute)",
            "Calls AddExerciseRecordUseCase on save"
          ],
          "updated_at": "2026-01-14T03:11:20.800213+00:00"
        },
        {
          "id": "4.2",
          "title": "Create ExerciseTypeGridView component",
          "description": "Create a grid of exercise type buttons for selection. Each button shows icon and name, with selected state highlighting.",
          "status": "pending",
          "notes": "",
          "files": [
            "Bodii/Presentation/Features/Exercise/Views/Components/ExerciseTypeGridView.swift"
          ],
          "acceptance_criteria": [
            "Grid layout with all 8 exercise types",
            "Each item shows icon and Korean name",
            "Visual feedback for selected type",
            "Tappable with animation"
          ]
        },
        {
          "id": "4.3",
          "title": "Create IntensityPickerView component",
          "description": "Create a segmented control or picker for intensity selection (\uc800\uac15\ub3c4/\uc911\uac15\ub3c4/\uace0\uac15\ub3c4).",
          "status": "pending",
          "notes": "",
          "files": [
            "Bodii/Presentation/Features/Exercise/Views/Components/IntensityPickerView.swift"
          ],
          "acceptance_criteria": [
            "Three options: \uc800\uac15\ub3c4, \uc911\uac15\ub3c4, \uace0\uac15\ub3c4",
            "Segmented control or horizontal buttons",
            "Default selection: \uc911\uac15\ub3c4",
            "Shows MET multiplier info (optional)"
          ]
        },
        {
          "id": "4.4",
          "title": "Create DurationInputView component",
          "description": "Create duration input with stepper or slider. Show duration in minutes with quick increment buttons.",
          "status": "pending",
          "notes": "",
          "files": [
            "Bodii/Presentation/Features/Exercise/Views/Components/DurationInputView.swift"
          ],
          "acceptance_criteria": [
            "Numeric input for minutes",
            "Quick buttons for common durations (15, 30, 45, 60 min)",
            "Stepper for fine adjustment",
            "Minimum 1 minute validation"
          ]
        },
        {
          "id": "4.5",
          "title": "Create ExerciseInputView modal",
          "description": "Implement the full exercise input modal combining all components. Show real-time calorie preview as user makes selections.",
          "status": "pending",
          "notes": "",
          "files": [
            "Bodii/Presentation/Features/Exercise/Views/ExerciseInputView.swift"
          ],
          "acceptance_criteria": [
            "Sheet modal presentation",
            "Exercise type grid selection",
            "Duration input with validation",
            "Intensity picker",
            "Optional note input",
            "Real-time calorie preview",
            "Save and Cancel buttons",
            "Loading state during save"
          ]
        }
      ]
    },
    {
      "id": "phase-5",
      "name": "Integration & Testing",
      "description": "Integrate with DI container, add to tab navigation, and write tests",
      "subtasks": [
        {
          "id": "5.1",
          "title": "Register exercise services in DIContainer",
          "description": "Register all exercise-related services, repositories, and use cases in DIContainer for dependency injection.",
          "status": "pending",
          "notes": "",
          "files": [
            "Bodii/App/DIContainer.swift"
          ],
          "acceptance_criteria": [
            "ExerciseCalcService registered",
            "ExerciseRecordRepository registered",
            "DailyLogService registered",
            "All use cases registered",
            "ViewModels can resolve dependencies"
          ]
        },
        {
          "id": "5.2",
          "title": "Integrate ExerciseListView into TabView",
          "description": "Add ExerciseListView to the main tab navigation with appropriate icon and label.",
          "status": "pending",
          "notes": "",
          "files": [
            "Bodii/App/ContentView.swift"
          ],
          "acceptance_criteria": [
            "Exercise tab visible in TabView",
            "Appropriate icon (figure.run or similar)",
            "Korean label: \uc6b4\ub3d9",
            "Correct tab order per design"
          ]
        },
        {
          "id": "5.3",
          "title": "Write unit tests for ExerciseCalcService",
          "description": "Test MET-based calorie calculations for all exercise types and intensity levels.",
          "status": "pending",
          "notes": "",
          "files": [
            "BodiiTests/ExerciseCalcServiceTests.swift"
          ],
          "acceptance_criteria": [
            "Test walking at all intensity levels",
            "Test running at all intensity levels",
            "Test all 8 exercise types",
            "Verify formula: MET \u00d7 weight \u00d7 hours",
            "Edge cases: 1 minute, large durations"
          ]
        },
        {
          "id": "5.4",
          "title": "Write unit tests for DailyLog exercise updates",
          "description": "Test that DailyLog correctly updates when exercises are added, updated, or deleted.",
          "status": "pending",
          "notes": "",
          "files": [
            "BodiiTests/DailyLogServiceTests.swift"
          ],
          "acceptance_criteria": [
            "Test adding exercise updates totals correctly",
            "Test removing exercise decrements totals",
            "Test updating exercise adjusts difference",
            "Test exerciseCount increments/decrements"
          ]
        },
        {
          "id": "5.5",
          "title": "Add exercise validation to ValidationService",
          "description": "Add validation rules for exercise input (duration, intensity) to existing ValidationService.",
          "status": "pending",
          "notes": "",
          "files": [
            "Bodii/Shared/Utils/ValidationService.swift",
            "BodiiTests/ValidationServiceTests.swift"
          ],
          "acceptance_criteria": [
            "validateExerciseDuration method (min 1 minute)",
            "validateExerciseIntensity method (0, 1, or 2)",
            "Add tests for exercise validation"
          ]
        }
      ]
    }
  ],
  "qa_sign_off": {
    "status": "pending",
    "tests_passed": "",
    "issues": ""
  },
  "last_updated": "2026-01-14T03:11:20.800218+00:00",
  "recoveryNote": "Task recovered from stuck state at 2026-01-14T00:38:20.701Z"
}