{
  "file_path": "Bodii/Domain/Entities/MetabolismSnapshot.swift",
  "main_branch_history": [],
  "task_views": {
    "002-project-foundation-core-data-model": {
      "task_id": "002-project-foundation-core-data-model",
      "branch_point": {
        "commit_hash": "2abdae73fb6199bcbf4f21f6deeb7952225f81e6",
        "content": "",
        "timestamp": "2026-01-14T13:34:17.674713"
      },
      "worktree_state": {
        "content": "//\n//  MetabolismSnapshot.swift\n//  Bodii\n//\n//  Created by Auto-Claude on 2026-01-11.\n//\n\n// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: 1:1 Relationship Entity Pattern\n// MetabolismSnapshot\uc740 BodyRecord\uc640 1:1 \uad00\uacc4\ub85c \uc2e0\uccb4 \uae30\ub85d \uc2dc\uc810\uc758 \ub300\uc0ac\ub7c9\uc744 \uc2a4\ub0c5\uc0f7\uc73c\ub85c \ubcf4\uc874\n// \ud83d\udca1 Java \ube44\uad50: JPA\uc758 @OneToOne \uad00\uacc4\uc640 \uc720\uc0ac\ud558\uc9c0\ub9cc \ubcc4\ub3c4 \ud14c\uc774\ube14\ub85c \uad00\ub9ac\ud558\uc5ec \uc774\ub825 \uc870\ud68c \ucd5c\uc801\ud654\n\nimport Foundation\n\n// MARK: - MetabolismSnapshot\n\n/// \ub300\uc0ac\ub7c9 \uc2a4\ub0c5\uc0f7 \ub3c4\uba54\uc778 \uc5d4\ud2f0\ud2f0\n/// - BodyRecord\uc640 1:1 \uad00\uacc4\ub85c \uc2e0\uccb4 \uae30\ub85d \uc2dc\uc810\uc758 BMR/TDEE\ub97c \uc800\uc7a5\n/// - \uc2dc\uac04\uc5d0 \ub530\ub978 \ub300\uc0ac\ub7c9 \ubcc0\ud654 \ucd94\uc801 \ubc0f \ub300\uc2dc\ubcf4\ub4dc \ucc28\ud2b8 \ud45c\uc2dc\uc5d0 \uc0ac\uc6a9\n/// - Core Data\uc758 MetabolismSnapshotEntity\uc640 1:1 \ub9e4\ud551\ub418\uc9c0\ub9cc \uc21c\uc218 Swift \ud0c0\uc785\uc73c\ub85c \ube44\uc988\ub2c8\uc2a4 \ub85c\uc9c1\uc5d0\uc11c \uc0ac\uc6a9\n///\n/// ## \uc8fc\uc694 \uae30\ub2a5\n/// - \ud2b9\uc815 \uc2dc\uc810\uc758 \ub300\uc0ac\ub7c9 \uc815\ubcf4 \uc2a4\ub0c5\uc0f7 \ubcf4\uc874\n/// - BMR(\uae30\ucd08\ub300\uc0ac\ub7c9)\uacfc TDEE(\ucd1d \uc5d0\ub108\uc9c0 \uc18c\ube44\ub7c9) \uacc4\uc0b0 \uacb0\uacfc \uc800\uc7a5\n/// - \ud65c\ub3d9 \uc218\uc900 \ubcc0\ud654\uc5d0 \ub530\ub978 \ub300\uc0ac\ub7c9 \ubcc0\ud654 \ucd94\uc801\n/// - BodyRecord\uc640 \ub3d9\uc77c\ud55c date\ub85c 1:1 \ub9e4\ud551\n///\n/// ## 1:1 \uad00\uacc4 \uc124\uba85\n/// ```\n/// BodyRecord (\uccb4\uc911 70kg, \uccb4\uc9c0\ubc29\ub960 18.5%)\n///     \u2193 (1:1, \uac19\uc740 date)\n/// MetabolismSnapshot (BMR 1650kcal, TDEE 2550kcal)\n/// ```\n///\n/// ## \uacc4\uc0b0 \uacf5\uc2dd\n/// ```\n/// BMR (Mifflin-St Jeor \uacf5\uc2dd):\n///   \ub0a8\uc131: (10 \u00d7 \uccb4\uc911kg) + (6.25 \u00d7 \ud0a4cm) - (5 \u00d7 \ub098\uc774) + 5\n///   \uc5ec\uc131: (10 \u00d7 \uccb4\uc911kg) + (6.25 \u00d7 \ud0a4cm) - (5 \u00d7 \ub098\uc774) - 161\n///\n/// TDEE (Total Daily Energy Expenditure):\n///   TDEE = BMR \u00d7 activityLevel.multiplier\n/// ```\n///\n/// ## \uc0ac\uc6a9 \uc608\uc2dc\n/// ```swift\n/// // BodyRecord \uc800\uc7a5 \uc2dc \uc790\ub3d9\uc73c\ub85c \uc0dd\uc131\ub428\n/// let snapshot = MetabolismSnapshot(\n///     id: UUID(),\n///     userId: userId,\n///     bodyRecordId: bodyRecord.id,\n///     date: bodyRecord.date,\n///     weight: 70.0,\n///     bodyFatPct: 18.5,\n///     bmr: 1650,\n///     tdee: 2550,\n///     activityLevel: .moderate,\n///     createdAt: Date()\n/// )\n///\n/// // \ub300\uc2dc\ubcf4\ub4dc \ucc28\ud2b8\uc5d0\uc11c \ub300\uc0ac\ub7c9 \ubcc0\ud654 \uc870\ud68c\n/// let recentSnapshots = await repository.fetchRecentSnapshots(userId: userId, days: 30)\n/// let bmrTrend = recentSnapshots.map { ($0.date, $0.bmr) }\n/// ```\nstruct MetabolismSnapshot: Identifiable, Codable, Equatable {\n\n    // MARK: - Properties\n\n    // MARK: Identifier\n\n    /// \ub300\uc0ac\ub7c9 \uc2a4\ub0c5\uc0f7 \uace0\uc720 \uc2dd\ubcc4\uc790\n    /// - UUID \ud0c0\uc785\uc73c\ub85c \uc804\uc5ed \uace0\uc720\uc131 \ubcf4\uc7a5\n    let id: UUID\n\n    /// \uc0ac\uc6a9\uc790 \uace0\uc720 \uc2dd\ubcc4\uc790\n    /// - User \uc5d4\ud2f0\ud2f0\uc640\uc758 \uc678\ub798 \ud0a4 \uad00\uacc4\n    let userId: UUID\n\n    /// \uc2e0\uccb4 \uae30\ub85d \uace0\uc720 \uc2dd\ubcc4\uc790\n    /// - BodyRecord \uc5d4\ud2f0\ud2f0\uc640 1:1 \uad00\uacc4\n    /// - \ub3d9\uc77c\ud55c date \uac12\uc744 \uac00\uc9c4 BodyRecord\uc640 \ub9e4\ud551\n    let bodyRecordId: UUID\n\n    // MARK: Snapshot Data\n\n    /// \uae30\ub85d \ub0a0\uc9dc\n    /// - BodyRecord\uc758 date\uc640 \ub3d9\uc77c\ud55c \uac12\n    /// - \ud558\ub8e8\uc5d0 \ud558\ub098\uc758 MetabolismSnapshot\ub9cc \uc874\uc7ac (unique constraint)\n    let date: Date\n\n    /// \uccb4\uc911 (kg)\n    /// - BodyRecord\uc758 weight \uac12\uc744 \uc2a4\ub0c5\uc0f7\uc73c\ub85c \ubcf4\uc874\n    /// - BMR \uacc4\uc0b0\uc5d0 \uc0ac\uc6a9\ub41c \uccb4\uc911 \uac12\n    /// - \ud5c8\uc6a9 \ubc94\uc704: 20-300kg\n    let weight: Decimal\n\n    /// \uccb4\uc9c0\ubc29\ub960 (%)\n    /// - BodyRecord\uc758 bodyFatPercent \uac12\uc744 \uc2a4\ub0c5\uc0f7\uc73c\ub85c \ubcf4\uc874\n    /// - \ub300\uc2dc\ubcf4\ub4dc\uc5d0\uc11c \uccb4\uc9c0\ubc29\ub960 \ubcc0\ud654 \ucd94\uc801\uc5d0 \uc0ac\uc6a9\n    /// - \ud5c8\uc6a9 \ubc94\uc704: 3-60%\n    let bodyFatPct: Decimal\n\n    // MARK: Metabolism Data\n\n    /// \uae30\ucd08\ub300\uc0ac\ub7c9 (kcal/day)\n    /// - Mifflin-St Jeor \uacf5\uc2dd\uc73c\ub85c \uacc4\uc0b0\ub41c BMR\n    /// - \uacc4\uc0b0\uc2dd: (10 \u00d7 \uccb4\uc911kg) + (6.25 \u00d7 \ud0a4cm) - (5 \u00d7 \ub098\uc774) + \uc131\ubcc4\uacc4\uc218\n    /// - \uc131\ubcc4\uacc4\uc218: \ub0a8\uc131 +5, \uc5ec\uc131 -161\n    /// - \uc544\ubb34 \ud65c\ub3d9\ub3c4 \ud558\uc9c0 \uc54a\uc744 \ub54c \ud558\ub8e8\uc5d0 \uc18c\ube44\ub418\ub294 \ucd5c\uc18c \uc5f4\ub7c9\n    let bmr: Int\n\n    /// \uc77c\uc77c \ucd1d \uc5d0\ub108\uc9c0 \uc18c\ube44\ub7c9 (kcal/day)\n    /// - \ud65c\ub3d9 \uc218\uc900\uc744 \uace0\ub824\ud55c \uc2e4\uc81c \ud558\ub8e8 \ucd1d \uc18c\ube44 \uc5f4\ub7c9\n    /// - \uacc4\uc0b0\uc2dd: BMR \u00d7 activityLevel.multiplier\n    /// - \ubaa9\ud45c \uce7c\ub85c\ub9ac \uc124\uc815\uc758 \uae30\uc900\uac12\n    let tdee: Int\n\n    /// \ud65c\ub3d9 \uc218\uc900\n    /// - TDEE \uacc4\uc0b0 \uc2dc \uc0ac\uc6a9\ub41c \ud65c\ub3d9 \uc218\uc900\n    /// - \ud65c\ub3d9 \uc218\uc900 \ubcc0\uacbd \uc2dc \ub300\uc0ac\ub7c9 \ubcc0\ud654 \ucd94\uc801 \uac00\ub2a5\n    /// - \ubc94\uc704: sedentary(1.2) ~ veryActive(1.9)\n    let activityLevel: ActivityLevel\n\n    // MARK: Timestamps\n\n    /// \uc0dd\uc131 \uc2dc\uac01\n    /// - \uc2a4\ub0c5\uc0f7\uc774 \uc0dd\uc131\ub41c \uc2dc\uac01\n    /// - BodyRecord \uc800\uc7a5 \uc2dc\uc810\uacfc \ub3d9\uc77c\n    let createdAt: Date\n}\n\n// MARK: - MetabolismSnapshot + CustomStringConvertible\n\nextension MetabolismSnapshot: CustomStringConvertible {\n    /// \ub514\ubc84\uae45\uc6a9 \ubb38\uc790\uc5f4 \ud45c\ud604\n    var description: String {\n        \"\"\"\n        MetabolismSnapshot(\n          id: \\(id.uuidString.prefix(8))...,\n          userId: \\(userId.uuidString.prefix(8))...,\n          bodyRecordId: \\(bodyRecordId.uuidString.prefix(8))...,\n          date: \\(date.formatted(style: .short)),\n          weight: \\(weight)kg,\n          bodyFatPct: \\(bodyFatPct)%,\n          bmr: \\(bmr)kcal,\n          tdee: \\(tdee)kcal,\n          activityLevel: \\(activityLevel.displayName)\n        )\n        \"\"\"\n    }\n}\n",
        "last_modified": "2026-01-14T13:34:18.075129"
      },
      "task_intent": {
        "title": "Project Foundation & Core Data Model",
        "description": "Set up Xcode project with SwiftUI, MVVM architecture, Core Data persistence layer with 9 entities (User, BodyRecord, MetabolismSnapshot, Food, FoodRecord, ExerciseRecord, SleepRecord, DailyLog, Goal), and utility services for date handling and input validation.",
        "from_plan": true
      },
      "commits_behind_main": 3,
      "status": "active",
      "merged_at": null
    },
    "004-project-foundation-core-data-model": {
      "task_id": "004-project-foundation-core-data-model",
      "branch_point": {
        "commit_hash": "2abdae73fb6199bcbf4f21f6deeb7952225f81e6",
        "content": "",
        "timestamp": "2026-01-12T19:14:54.682468"
      },
      "worktree_state": {
        "content": "//\n//  MetabolismSnapshot.swift\n//  Bodii\n//\n//  Created by Auto-Claude on 2024-01-12.\n//\n\nimport Foundation\n\n/// \ub300\uc0ac\ub7c9 \uc2a4\ub0c5\uc0f7 \ub3c4\uba54\uc778 \uc5d4\ud2f0\ud2f0\n///\n/// BodyRecord \uc785\ub825 \uc2dc \uc790\ub3d9\uc73c\ub85c \uc0dd\uc131\ub418\ub294 \ub300\uc0ac\ub7c9 \uacc4\uc0b0 \uacb0\uacfc\ub97c \uae30\ub85d\ud569\ub2c8\ub2e4.\n///\n/// - Note: BodyRecord\uc640 1:1 \uad00\uacc4\ub97c \uac00\uc9c0\uba70, \uccb4\uc131\ubd84 \ubcc0\ud654\uc5d0 \ub530\ub978 BMR/TDEE \ucd94\uc774 \ubd84\uc11d\uc5d0 \uc0ac\uc6a9\ub429\ub2c8\ub2e4.\n///\n/// - Note: BMR\uc740 \uccb4\uc9c0\ubc29\ub960 \uc720\ubb34\uc5d0 \ub530\ub77c \ub2e4\ub978 \uacf5\uc2dd\uc744 \uc0ac\uc6a9\ud569\ub2c8\ub2e4:\n///         - \uccb4\uc9c0\ubc29\ub960 \uc788\uc74c: Katch-McArdle \uacf5\uc2dd\n///         - \uccb4\uc9c0\ubc29\ub960 \uc5c6\uc74c: Mifflin-St Jeor \uacf5\uc2dd\n///\n/// - Example:\n/// ```swift\n/// let snapshot = MetabolismSnapshot(\n///     id: UUID(),\n///     userId: user.id,\n///     bodyRecordId: bodyRecord.id,\n///     date: Date(),\n///     weight: Decimal(70.5),\n///     bodyFatPct: Decimal(21.5),\n///     bmr: Decimal(1698.4),\n///     tdee: Decimal(2632.5),\n///     activityLevel: .moderatelyActive,\n///     createdAt: Date()\n/// )\n/// ```\nstruct MetabolismSnapshot {\n    // MARK: - Primary Key\n\n    /// \uace0\uc720 \uc2dd\ubcc4\uc790\n    let id: UUID\n\n    // MARK: - Foreign Keys\n\n    /// User \ucc38\uc870\n    let userId: UUID\n\n    /// BodyRecord \ucc38\uc870 (1:1 \uad00\uacc4)\n    let bodyRecordId: UUID\n\n    // MARK: - Snapshot Data\n\n    /// \uce21\uc815\uc77c\uc2dc\n    var date: Date\n\n    /// \uccb4\uc911 (kg)\n    ///\n    /// BodyRecord\uc758 weight \uac12\uc744 \ubcf5\uc0ac\ud558\uc5ec \uc800\uc7a5\ud569\ub2c8\ub2e4.\n    var weight: Decimal\n\n    /// \uccb4\uc9c0\ubc29\ub960 (%)\n    ///\n    /// BodyRecord\uc758 bodyFatPercent \uac12\uc744 \ubcf5\uc0ac\ud558\uc5ec \uc800\uc7a5\ud569\ub2c8\ub2e4.\n    /// BMR \uacc4\uc0b0 \uacf5\uc2dd \uc120\ud0dd\uc5d0 \uc0ac\uc6a9\ub429\ub2c8\ub2e4.\n    var bodyFatPct: Decimal?\n\n    /// \uae30\ucd08\ub300\uc0ac\ub7c9 (kcal)\n    ///\n    /// - \uccb4\uc9c0\ubc29\ub960 \uc788\uc74c: Katch-McArdle \uacf5\uc2dd (BMR = 370 + 21.6 \u00d7 LBM)\n    /// - \uccb4\uc9c0\ubc29\ub960 \uc5c6\uc74c: Mifflin-St Jeor \uacf5\uc2dd (\uc131\ubcc4, \ub098\uc774, \ud0a4, \uccb4\uc911 \uae30\ubc18)\n    var bmr: Decimal\n\n    /// \ud65c\ub3d9\ub300\uc0ac\ub7c9 (kcal)\n    ///\n    /// TDEE = BMR \u00d7 \ud65c\ub3d9\uacc4\uc218\n    var tdee: Decimal\n\n    /// \uacc4\uc0b0 \ub2f9\uc2dc \ud65c\ub3d9 \uc218\uc900 (1~5)\n    ///\n    /// - 1: \ube44\ud65c\ub3d9\uc801 (Sedentary) - \uc88c\uc2dd \uc0dd\ud65c, \uacc4\uc218 1.2\n    /// - 2: \uac00\ubcbc\uc6b4 \ud65c\ub3d9 (Light) - \uc8fc 1-3\uc77c \uc6b4\ub3d9, \uacc4\uc218 1.375\n    /// - 3: \ubcf4\ud1b5 \ud65c\ub3d9 (Moderate) - \uc8fc 3-5\uc77c \uc6b4\ub3d9, \uacc4\uc218 1.55\n    /// - 4: \ud65c\ub3d9\uc801 (Active) - \uc8fc 6-7\uc77c \uc6b4\ub3d9, \uacc4\uc218 1.725\n    /// - 5: \ub9e4\uc6b0 \ud65c\ub3d9\uc801 (Very Active) - \uace0\uac15\ub3c4 \ub9e4\uc77c, \uacc4\uc218 1.9\n    var activityLevel: ActivityLevel\n\n    // MARK: - Metadata\n\n    /// \uc0dd\uc131\uc77c\uc2dc\n    let createdAt: Date\n}\n\n// MARK: - Identifiable\n\nextension MetabolismSnapshot: Identifiable {}\n\n// MARK: - Equatable\n\nextension MetabolismSnapshot: Equatable {\n    static func == (lhs: MetabolismSnapshot, rhs: MetabolismSnapshot) -> Bool {\n        lhs.id == rhs.id\n    }\n}\n\n// MARK: - Hashable\n\nextension MetabolismSnapshot: Hashable {\n    func hash(into hasher: inout Hasher) {\n        hasher.combine(id)\n    }\n}\n",
        "last_modified": "2026-01-14T22:57:13.076000"
      },
      "task_intent": {
        "title": "004-project-foundation-core-data-model",
        "description": "",
        "from_plan": false
      },
      "commits_behind_main": 0,
      "status": "active",
      "merged_at": null
    }
  },
  "created_at": "2026-01-11T21:28:24.017369",
  "last_updated": "2026-01-14T13:34:17.859986"
}