{
  "file_path": "Bodii/Domain/UseCases/Exercise/GetExerciseRecordsUseCase.swift",
  "main_branch_history": [],
  "task_views": {
    "008-exercise-tracking-with-met-calculations": {
      "task_id": "008-exercise-tracking-with-met-calculations",
      "branch_point": {
        "commit_hash": "4e56d606f7b0d4cb74120dd392544f3fe2d4f5b4",
        "content": "",
        "timestamp": "2026-01-14T11:45:41.765455"
      },
      "worktree_state": {
        "content": "//\n//  GetExerciseRecordsUseCase.swift\n//  Bodii\n//\n//  Created by Auto-Claude on 2026-01-14.\n//\n\nimport Foundation\n\n/// \uc6b4\ub3d9 \uae30\ub85d \uc870\ud68c \uc720\uc2a4\ucf00\uc774\uc2a4\n///\n/// \ud2b9\uc815 \ub0a0\uc9dc \ub610\ub294 \ub0a0\uc9dc \ubc94\uc704\uc758 \uc6b4\ub3d9 \uae30\ub85d\uc744 \uc870\ud68c\ud569\ub2c8\ub2e4.\n///\n/// ## \ucc45\uc784\n/// - \ub0a0\uc9dc \uae30\ubc18 \uc6b4\ub3d9 \uae30\ub85d \uc870\ud68c\n/// - \ub0a0\uc9dc \ubc94\uc704 \uae30\ubc18 \uc6b4\ub3d9 \uae30\ub85d \uc870\ud68c\n/// - \uc815\ub82c\ub41c \uacb0\uacfc \ubc18\ud658 (\ucd5c\uc2e0\uc21c)\n///\n/// ## \uc758\uc874\uc131\n/// - ExerciseRecordRepository: \uc6b4\ub3d9 \uae30\ub85d \uc870\ud68c\n///\n/// ## \uc0ac\uc6a9 \uc2dc\ub098\ub9ac\uc624\n/// ```swift\n/// let useCase = GetExerciseRecordsUseCase(\n///     exerciseRepository: exerciseRepository\n/// )\n///\n/// // \ud2b9\uc815 \ub0a0\uc9dc \uc870\ud68c\n/// let todayRecords = try await useCase.execute(\n///     forDate: Date(),\n///     userId: userId\n/// )\n///\n/// // \ub0a0\uc9dc \ubc94\uc704 \uc870\ud68c\n/// let weekRecords = try await useCase.execute(\n///     startDate: weekAgo,\n///     endDate: today,\n///     userId: userId\n/// )\n/// ```\nfinal class GetExerciseRecordsUseCase {\n\n    // MARK: - Properties\n\n    /// \uc6b4\ub3d9 \uae30\ub85d \uc800\uc7a5\uc18c\n    private let exerciseRepository: ExerciseRecordRepository\n\n    // MARK: - Initialization\n\n    /// GetExerciseRecordsUseCase \ucd08\uae30\ud654\n    ///\n    /// - Parameter exerciseRepository: \uc6b4\ub3d9 \uae30\ub85d \uc800\uc7a5\uc18c\n    init(exerciseRepository: ExerciseRecordRepository) {\n        self.exerciseRepository = exerciseRepository\n    }\n\n    // MARK: - Public Methods\n\n    /// \ud2b9\uc815 \ub0a0\uc9dc\uc758 \uc6b4\ub3d9 \uae30\ub85d\uc744 \uc870\ud68c\ud569\ub2c8\ub2e4.\n    ///\n    /// ## \uc2e4\ud589 \uc21c\uc11c\n    /// 1. ExerciseRecordRepository\ub97c \ud1b5\ud574 \ud574\ub2f9 \ub0a0\uc9dc\uc758 \uae30\ub85d \uc870\ud68c\n    /// 2. \uc815\ub82c\ub41c \uacb0\uacfc \ubc18\ud658 (\ucd5c\uc2e0\uc21c)\n    ///\n    /// - Parameters:\n    ///   - date: \uc870\ud68c\ud560 \ub0a0\uc9dc\n    ///   - userId: \uc0ac\uc6a9\uc790 ID\n    ///\n    /// - Throws: RepositoryError - \uc870\ud68c \uc2e4\ud328 \uc2dc\n    ///\n    /// - Returns: \uc6b4\ub3d9 \uae30\ub85d \ubc30\uc5f4 (\uc5c6\uc73c\uba74 \ube48 \ubc30\uc5f4)\n    ///\n    /// - Example:\n    /// ```swift\n    /// do {\n    ///     let todayRecords = try await useCase.execute(\n    ///         forDate: Date(),\n    ///         userId: user.id\n    ///     )\n    ///     print(\"\\(todayRecords.count)\uac1c\uc758 \uc6b4\ub3d9 \uae30\ub85d\")\n    /// } catch {\n    ///     print(\"\uc870\ud68c \uc2e4\ud328: \\(error)\")\n    /// }\n    /// ```\n    func execute(\n        forDate date: Date,\n        userId: UUID\n    ) async throws -> [ExerciseRecord] {\n        // ExerciseRecordRepository\ub97c \ud1b5\ud574 \ud574\ub2f9 \ub0a0\uc9dc\uc758 \uae30\ub85d \uc870\ud68c\n        // Repository\uac00 \uc774\ubbf8 \ucd5c\uc2e0\uc21c(createdAt desc)\uc73c\ub85c \uc815\ub82c\ud558\uc5ec \ubc18\ud658\n        let records = try await exerciseRepository.fetchByDate(date, userId: userId)\n\n        return records\n    }\n\n    /// \ub0a0\uc9dc \ubc94\uc704\uc758 \uc6b4\ub3d9 \uae30\ub85d\uc744 \uc870\ud68c\ud569\ub2c8\ub2e4.\n    ///\n    /// ## \uc2e4\ud589 \uc21c\uc11c\n    /// 1. ExerciseRecordRepository\ub97c \ud1b5\ud574 \ub0a0\uc9dc \ubc94\uc704\uc758 \uae30\ub85d \uc870\ud68c\n    /// 2. \uc815\ub82c\ub41c \uacb0\uacfc \ubc18\ud658 (\ucd5c\uc2e0\uc21c)\n    ///\n    /// - Parameters:\n    ///   - startDate: \uc2dc\uc791 \ub0a0\uc9dc (\ud3ec\ud568)\n    ///   - endDate: \uc885\ub8cc \ub0a0\uc9dc (\ud3ec\ud568)\n    ///   - userId: \uc0ac\uc6a9\uc790 ID\n    ///\n    /// - Throws: RepositoryError - \uc870\ud68c \uc2e4\ud328 \uc2dc\n    ///\n    /// - Returns: \uc6b4\ub3d9 \uae30\ub85d \ubc30\uc5f4 (\uc5c6\uc73c\uba74 \ube48 \ubc30\uc5f4)\n    ///\n    /// - Example:\n    /// ```swift\n    /// do {\n    ///     let calendar = Calendar.current\n    ///     let today = Date()\n    ///     let weekAgo = calendar.date(byAdding: .day, value: -7, to: today)!\n    ///\n    ///     let weekRecords = try await useCase.execute(\n    ///         startDate: weekAgo,\n    ///         endDate: today,\n    ///         userId: user.id\n    ///     )\n    ///     print(\"\ucd5c\uadfc 7\uc77c\uac04 \\(weekRecords.count)\uac1c\uc758 \uc6b4\ub3d9 \uae30\ub85d\")\n    /// } catch {\n    ///     print(\"\uc870\ud68c \uc2e4\ud328: \\(error)\")\n    /// }\n    /// ```\n    func execute(\n        startDate: Date,\n        endDate: Date,\n        userId: UUID\n    ) async throws -> [ExerciseRecord] {\n        // ExerciseRecordRepository\ub97c \ud1b5\ud574 \ub0a0\uc9dc \ubc94\uc704\uc758 \uae30\ub85d \uc870\ud68c\n        // Repository\uac00 \uc774\ubbf8 \ucd5c\uc2e0\uc21c(date desc, createdAt desc)\uc73c\ub85c \uc815\ub82c\ud558\uc5ec \ubc18\ud658\n        let records = try await exerciseRepository.fetchByDateRange(\n            startDate: startDate,\n            endDate: endDate,\n            userId: userId\n        )\n\n        return records\n    }\n}\n\n// MARK: - Read UseCase Pattern \uc124\uba85\n\n/// ## Read UseCase Pattern\n///\n/// Read (\uc870\ud68c) UseCase\ub294 \ub2e4\ub978 UseCase(Create, Update, Delete)\uc640 \ub2ec\ub9ac \ub9e4\uc6b0 \ub2e8\uc21c\ud55c \ud328\ud134\uc744 \ub530\ub985\ub2c8\ub2e4:\n///\n/// ### 1. \ub2e8\uc21c \uc870\ud68c\uc758 \ud2b9\uc9d5\n///\n/// ```swift\n/// func execute(...) async throws -> [ExerciseRecord] {\n///     // Repository \ud638\ucd9c\ub9cc \ud558\uace0 \ubc14\ub85c \ubc18\ud658\n///     return try await repository.fetchByDate(date, userId: userId)\n/// }\n/// ```\n///\n/// ### 2. \uc65c UseCase\uac00 \ud544\uc694\ud55c\uac00?\n///\n/// \ub2e8\uc21c \uc870\ud68c\uc758 \uacbd\uc6b0 \"Repository\ub97c \uc9c1\uc811 \ud638\ucd9c\ud558\uba74 \ub418\uc9c0 \uc54a\ub098?\" \ub77c\ub294 \uc9c8\ubb38\uc774 \uc0dd\uae38 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\n/// \ud558\uc9c0\ub9cc UseCase\ub294 \ub2e4\uc74c\uacfc \uac19\uc740 \uc774\uc720\ub85c \uc5ec\uc804\ud788 \uc720\uc6a9\ud569\ub2c8\ub2e4:\n///\n/// **\uc77c\uad00\uc131**:\n/// - \ubaa8\ub4e0 \ube44\uc988\ub2c8\uc2a4 \ub85c\uc9c1\uc774 UseCase\ub97c \ud1b5\ud574 \uc2e4\ud589\n/// - ViewModel\uc740 Repository\ub97c \uc9c1\uc811 \uc54c\uc9c0 \ubabb\ud568 (\uc758\uc874\uc131 \uc5ed\uc804)\n///\n/// **\ud655\uc7a5\uc131**:\n/// - \ud604\uc7ac\ub294 \ub2e8\uc21c\ud558\uc9c0\ub9cc, \ub098\uc911\uc5d0 \ube44\uc988\ub2c8\uc2a4 \ub85c\uc9c1 \ucd94\uac00 \uac00\ub2a5\n/// - \uc608: \uc870\ud68c \uc2dc \ud544\ud130\ub9c1, \uce90\uc2f1, \uad8c\ud55c \uccb4\ud06c \ub4f1\n///\n/// **\ud14c\uc2a4\ud2b8 \uc6a9\uc774\uc131**:\n/// - UseCase\ub97c Mock\uc73c\ub85c \ub300\uccb4\ud558\uc5ec ViewModel \ud14c\uc2a4\ud2b8\n/// - Repository \uad6c\ud604\uacfc \ub3c5\ub9bd\uc801\uc73c\ub85c \ube44\uc988\ub2c8\uc2a4 \ub85c\uc9c1 \ud14c\uc2a4\ud2b8\n///\n/// **\uc9c4\uc785\uc810 \ud1b5\uc77c**:\n/// - UI, \uc704\uc82f, \ubc31\uadf8\ub77c\uc6b4\ub4dc \uc791\uc5c5 \ub4f1 \ubaa8\ub4e0 \uc9c4\uc785\uc810\uc774 \ub3d9\uc77c\ud55c UseCase \uc0ac\uc6a9\n/// - \uc77c\uad00\ub41c \uc5d0\ub7ec \ucc98\ub9ac \ubc0f \ub85c\uae45\n///\n/// ### 3. Read vs Write UseCase\n///\n/// **Read UseCase (\uc870\ud68c)**:\n/// ```swift\n/// func execute(...) async throws -> [ExerciseRecord] {\n///     return try await repository.fetchByDate(...)\n/// }\n/// ```\n/// - \ub2e8\uc21c\ud558\uace0 \uc9c1\uad00\uc801\n/// - Repository\ub97c \uc587\uac8c \uac10\uc2f8\ub294 \ub798\ud37c\n/// - \uc8fc\ub85c \ub370\uc774\ud130\ub97c \uc788\ub294 \uadf8\ub300\ub85c \ubc18\ud658\n///\n/// **Write UseCase (\uc0dd\uc131/\uc218\uc815/\uc0ad\uc81c)**:\n/// ```swift\n/// func execute(...) async throws -> ExerciseRecord {\n///     // 1. \uc785\ub825 \uac80\uc99d\n///     try validateInput(duration: duration)\n///\n///     // 2. \ube44\uc988\ub2c8\uc2a4 \ub85c\uc9c1 (\uacc4\uc0b0, \ubcc0\ud658 \ub4f1)\n///     let calories = ExerciseCalcService.calculateCalories(...)\n///\n///     // 3. Repository \ud638\ucd9c\n///     let record = try await repository.create(...)\n///\n///     // 4. \ubd80\uac00 \uc791\uc5c5 (DailyLog \uc5c5\ub370\uc774\ud2b8 \ub4f1)\n///     try await dailyLogService.addExercise(...)\n///\n///     return record\n/// }\n/// ```\n/// - \ubcf5\uc7a1\ud55c \ube44\uc988\ub2c8\uc2a4 \ub85c\uc9c1\n/// - \uc5ec\ub7ec Service\uc640 Repository \uc870\uc728\n/// - \uc785\ub825 \uac80\uc99d, \uc5d0\ub7ec \ucc98\ub9ac, \ud2b8\ub79c\uc7ad\uc158 \uad00\ub9ac\n///\n/// ### 4. \uc5b8\uc81c Read UseCase\ub97c \uc0dd\ub7b5\ud560 \uc218 \uc788\ub098?\n///\n/// \ud504\ub85c\uc81d\ud2b8 \uaddc\ubaa8\uac00 \uc791\uace0 \ube44\uc988\ub2c8\uc2a4 \ub85c\uc9c1\uc774 \uac70\uc758 \uc5c6\ub2e4\uba74, Read UseCase\ub97c \uc0dd\ub7b5\ud558\uace0\n/// ViewModel\uc5d0\uc11c Repository\ub97c \uc9c1\uc811 \ud638\ucd9c\ud558\ub294 \uac83\ub3c4 \uace0\ub824\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4:\n///\n/// ```swift\n/// // UseCase \uc0ac\uc6a9 (\uad8c\uc7a5)\n/// final class ExerciseListViewModel: ObservableObject {\n///     let getExerciseRecordsUseCase: GetExerciseRecordsUseCase\n///\n///     func loadRecords() async {\n///         records = try await getExerciseRecordsUseCase.execute(...)\n///     }\n/// }\n///\n/// // Repository \uc9c1\uc811 \uc0ac\uc6a9 (\uc18c\uaddc\ubaa8 \ud504\ub85c\uc81d\ud2b8\uc5d0\uc11c \uace0\ub824)\n/// final class ExerciseListViewModel: ObservableObject {\n///     let exerciseRepository: ExerciseRecordRepository\n///\n///     func loadRecords() async {\n///         records = try await exerciseRepository.fetchByDate(...)\n///     }\n/// }\n/// ```\n///\n/// \ud558\uc9c0\ub9cc \ub300\ubd80\ubd84\uc758 \uacbd\uc6b0, **\uc77c\uad00\uc131**\uacfc **\ud655\uc7a5\uc131**\uc744 \uc704\ud574 Read UseCase\ub97c \uc0ac\uc6a9\ud558\ub294 \uac83\uc774 \uc88b\uc2b5\ub2c8\ub2e4.\n///\n/// ### 5. \uc0ac\uc6a9 \uc608\uc2dc\n///\n/// ```swift\n/// // ViewModel\uc5d0\uc11c GetExerciseRecordsUseCase \uc0ac\uc6a9\n/// final class ExerciseListViewModel: ObservableObject {\n///     @Published var records: [ExerciseRecord] = []\n///     @Published var isLoading = false\n///     @Published var errorMessage: String?\n///\n///     private let getExerciseRecordsUseCase: GetExerciseRecordsUseCase\n///\n///     init(getExerciseRecordsUseCase: GetExerciseRecordsUseCase) {\n///         self.getExerciseRecordsUseCase = getExerciseRecordsUseCase\n///     }\n///\n///     func loadTodayRecords(userId: UUID) async {\n///         isLoading = true\n///         defer { isLoading = false }\n///\n///         do {\n///             // UseCase\ub97c \ud1b5\ud574 \uc870\ud68c\n///             records = try await getExerciseRecordsUseCase.execute(\n///                 forDate: Date(),\n///                 userId: userId\n///             )\n///         } catch {\n///             errorMessage = \"\uc6b4\ub3d9 \uae30\ub85d \uc870\ud68c \uc2e4\ud328: \\(error.localizedDescription)\"\n///         }\n///     }\n///\n///     func loadWeekRecords(userId: UUID) async {\n///         isLoading = true\n///         defer { isLoading = false }\n///\n///         do {\n///             let calendar = Calendar.current\n///             let today = Date()\n///             let weekAgo = calendar.date(byAdding: .day, value: -7, to: today)!\n///\n///             // \ub0a0\uc9dc \ubc94\uc704 \uc870\ud68c\n///             records = try await getExerciseRecordsUseCase.execute(\n///                 startDate: weekAgo,\n///                 endDate: today,\n///                 userId: userId\n///             )\n///         } catch {\n///             errorMessage = \"\uc6b4\ub3d9 \uae30\ub85d \uc870\ud68c \uc2e4\ud328: \\(error.localizedDescription)\"\n///         }\n///     }\n/// }\n/// ```\n///\n/// ### 6. \ud5a5\ud6c4 \ud655\uc7a5 \uac00\ub2a5\uc131\n///\n/// \ud604\uc7ac\ub294 \ub2e8\uc21c\ud55c \uc870\ud68c\uc9c0\ub9cc, \ub098\uc911\uc5d0 \ub2e4\uc74c\uacfc \uac19\uc740 \uae30\ub2a5\uc744 \ucd94\uac00\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4:\n///\n/// ```swift\n/// func execute(forDate date: Date, userId: UUID) async throws -> [ExerciseRecord] {\n///     // 1. \uad8c\ud55c \uccb4\ud06c (\uc608: \ud504\ub9ac\ubbf8\uc5c4 \uc0ac\uc6a9\uc790\ub9cc \uacfc\uac70 30\uc77c \uc774\uc0c1 \uc870\ud68c \uac00\ub2a5)\n///     try await checkUserPermission(userId: userId, date: date)\n///\n///     // 2. \uce90\uc2dc \ud655\uc778\n///     if let cached = cache.get(key: \"\\(userId)-\\(date)\") {\n///         return cached\n///     }\n///\n///     // 3. Repository \uc870\ud68c\n///     let records = try await exerciseRepository.fetchByDate(date, userId: userId)\n///\n///     // 4. \uce90\uc2dc \uc800\uc7a5\n///     cache.set(key: \"\\(userId)-\\(date)\", value: records)\n///\n///     // 5. \ub85c\uae45\n///     logger.log(\"Fetched \\(records.count) exercise records for date: \\(date)\")\n///\n///     return records\n/// }\n/// ```\n///\n/// UseCase\ub97c \ubbf8\ub9ac \uc815\uc758\ud574\ub450\uba74, \uc774\ub7f0 \ud655\uc7a5\uc774 \ud544\uc694\ud560 \ub54c ViewModel \uc218\uc815 \uc5c6\uc774\n/// UseCase\ub9cc \uc218\uc815\ud558\uba74 \ub429\ub2c8\ub2e4.\n",
        "last_modified": "2026-01-14T22:54:09.702604"
      },
      "task_intent": {
        "title": "008-exercise-tracking-with-met-calculations",
        "description": "Exercise logging with activity type selection, duration input, and automatic calorie burn calculation using MET (Metabolic Equivalent of Task) values. Track both cardio and strength training with appropriate calculations.",
        "from_plan": true
      },
      "commits_behind_main": 0,
      "status": "active",
      "merged_at": null
    }
  },
  "created_at": "2026-01-13T19:19:06.164217",
  "last_updated": "2026-01-14T11:45:41.903009"
}