{
  "file_path": "Bodii/Domain/UseCases/RecordSleepUseCase.swift",
  "main_branch_history": [],
  "task_views": {
    "009-sleep-tracking-with-5-status-system": {
      "task_id": "009-sleep-tracking-with-5-status-system",
      "branch_point": {
        "commit_hash": "4e56d606f7b0d4cb74120dd392544f3fe2d4f5b4",
        "content": "",
        "timestamp": "2026-01-14T21:03:40.462795"
      },
      "worktree_state": {
        "content": "//\n//  RecordSleepUseCase.swift\n//  Bodii\n//\n//  Created by Auto-Claude on 2026-01-14.\n//\n\n// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Sleep Recording Use Case\n// \uc218\uba74 \uae30\ub85d\uacfc \uc790\ub3d9 \uc0c1\ud0dc \uacc4\uc0b0\uc744 \ucc98\ub9ac\ud558\ub294 Use Case\n// \ud83d\udca1 Java \ube44\uad50: Service layer\uc758 \ub2e8\uc77c \uba54\uc11c\ub4dc\uc640 \uc720\uc0ac\n\nimport Foundation\n\n// MARK: - RecordSleepUseCase\n\n/// \uc218\uba74 \uae30\ub85d \uc800\uc7a5 Use Case\n/// \uc218\uba74 \uc2dc\uac04\uc744 \uc785\ub825\ubc1b\uc544 \uc0c1\ud0dc\ub97c \uc790\ub3d9\uc73c\ub85c \uacc4\uc0b0\ud558\uace0 \uc800\uc7a5\ud569\ub2c8\ub2e4.\n/// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Clean Architecture - Use Case Layer\n/// - \uc218\uba74 \uae30\ub85d\uc774\ub77c\ub294 \ud2b9\uc815 \ube44\uc988\ub2c8\uc2a4 \ub85c\uc9c1\uc744 \ub3c5\ub9bd\uc801\uc778 \uc720\ub2db\uc73c\ub85c \ucea1\uc290\ud654\n/// - 02:00 \uacbd\uacc4 \ub85c\uc9c1\uc744 \ud1b5\ud55c \ub0a0\uc9dc \ucc98\ub9ac\n/// - SleepStatus \uc790\ub3d9 \uacc4\uc0b0\n/// - DailyLog \uc790\ub3d9 \uc5c5\ub370\uc774\ud2b8 (Repository\ub97c \ud1b5\ud574)\n/// \ud83d\udca1 Java \ube44\uad50: Service \ud074\ub798\uc2a4\uc758 \ub2e8\uc77c \ucc45\uc784 \uba54\uc11c\ub4dc\nstruct RecordSleepUseCase {\n\n    // MARK: - Types\n\n    /// \uc218\uba74 \uae30\ub85d\uc5d0 \ud544\uc694\ud55c \uc785\ub825 \ub370\uc774\ud130\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Nested Type\n    /// - Use Case \ub0b4\ubd80\uc5d0 \uad00\ub828\ub41c \ud0c0\uc785\uc744 \uc911\ucca9\ud558\uc5ec \ub124\uc784\uc2a4\ud398\uc774\uc2a4 \uc815\ub9ac\n    /// - \uc678\ubd80\uc5d0\uc11c\ub294 RecordSleepUseCase.Input\uc73c\ub85c \uc811\uadfc\n    /// \ud83d\udca1 Java \ube44\uad50: static nested class\uc640 \uc720\uc0ac\n    struct Input {\n        /// \uc0ac\uc6a9\uc790 ID\n        let userId: UUID\n\n        /// \uc218\uba74 \uae30\uc900\uc77c (\uae30\ubcf8\uac12: \ud604\uc7ac \uc2dc\uac04)\n        /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: 02:00 Boundary Logic\n        /// - 02:00 ~ \uc775\uc77c 01:59\uae4c\uc9c0\ub97c \uac19\uc740 \ub0a0\ub85c \ucde8\uae09\n        /// - DateUtils.getLogicalDate\ub97c \ud1b5\ud574 \ucc98\ub9ac\ub428\n        let date: Date\n\n        /// \uc218\uba74 \uc2dc\uac04 (\ubd84 \ub2e8\uc704)\n        /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Duration in Minutes\n        /// - \ubc94\uc704: 0-1440\ubd84 (0-24\uc2dc\uac04)\n        /// - \ubc24\uc0d8\uc758 \uacbd\uc6b0 0\ubd84\ub3c4 \ud5c8\uc6a9\n        let duration: Int32\n\n        /// Input \uc720\ud6a8\uc131 \uac80\uc99d\n        /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Validation in Domain Layer\n        /// \ube44\uc988\ub2c8\uc2a4 \uaddc\uce59 \uac80\uc99d\uc744 \ub3c4\uba54\uc778 \ub808\uc774\uc5b4\uc5d0\uc11c \ucc98\ub9ac\n        /// - Returns: \uc720\ud6a8\ud558\uba74 true, \uadf8\ub807\uc9c0 \uc54a\uc73c\uba74 false\n        var isValid: Bool {\n            // \uc218\uba74 \uc2dc\uac04: 0-1440\ubd84 (0-24\uc2dc\uac04)\n            // 0\ubd84\ub3c4 \ud5c8\uc6a9 (\ubc24\uc0d8\uc758 \uacbd\uc6b0)\n            guard duration >= 0 && duration <= 1440 else { return false }\n\n            return true\n        }\n\n        /// \uc218\uba74 \uc2dc\uac04\uc744 \uc2dc:\ubd84 \ud615\uc2dd\uc73c\ub85c \ubc18\ud658\n        /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Convenience Property\n        /// UI\uc5d0\uc11c \ud45c\uc2dc\ud560 \ub54c \uc0ac\uc6a9\ud558\uae30 \uc26c\uc6b4 \ud615\ud0dc\ub85c \uc81c\uacf5\n        /// - Returns: (hours, minutes) \ud29c\ud50c\n        var durationFormatted: (hours: Int, minutes: Int) {\n            let hours = Int(duration) / 60\n            let minutes = Int(duration) % 60\n            return (hours, minutes)\n        }\n    }\n\n    /// \uc218\uba74 \uae30\ub85d \uc800\uc7a5 \uacb0\uacfc\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Result Type\n    /// \uc131\uacf5 \uc2dc \uc800\uc7a5\ub41c \uc218\uba74 \uae30\ub85d \uc815\ubcf4\ub97c \ubc18\ud658\n    /// \ud83d\udca1 Java \ube44\uad50: DTO (Data Transfer Object)\uc640 \uc720\uc0ac\n    struct Output {\n        /// \uc800\uc7a5\ub41c \uc218\uba74 \uae30\ub85d \ub370\uc774\ud130\n        let sleepRecord: SleepRecord\n\n        /// \uacc4\uc0b0\ub41c \uc218\uba74 \uc0c1\ud0dc\n        /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Convenience Property\n        /// sleepRecord\uc5d0\uc11c \ucd94\ucd9c\ud55c \uac12\uc744 \uc9c1\uc811 \uc811\uadfc \uac00\ub2a5\ud558\uac8c \ud568\n        var status: SleepStatus {\n            sleepRecord.status\n        }\n\n        /// \uc218\uba74 \uc2dc\uac04 (\ubd84)\n        var duration: Int32 {\n            sleepRecord.duration\n        }\n\n        /// \uc218\uba74 \uc2dc\uac04\uc744 \uc2dc:\ubd84 \ud615\uc2dd\uc73c\ub85c \ubc18\ud658\n        /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Computed Property\n        /// UI\uc5d0\uc11c \ud45c\uc2dc\ud560 \ub54c \uc0ac\uc6a9\ud558\uae30 \uc26c\uc6b4 \ud615\ud0dc\ub85c \uc81c\uacf5\n        /// - Returns: (hours, minutes) \ud29c\ud50c\n        var durationFormatted: (hours: Int, minutes: Int) {\n            let hours = Int(duration) / 60\n            let minutes = Int(duration) % 60\n            return (hours, minutes)\n        }\n\n        /// \ud3ec\ub9f7\ub41c \uc694\uc57d \uc815\ubcf4\n        /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Computed String Property\n        /// UI\uc5d0\uc11c \ubc14\ub85c \uc0ac\uc6a9\ud560 \uc218 \uc788\ub294 \ud3ec\ub9f7\ub41c \ubb38\uc790\uc5f4 \uc81c\uacf5\n        func summary() -> String {\n            let (hours, minutes) = durationFormatted\n            return \"\"\"\n            Duration: \\(hours)h \\(minutes)m\n            Status: \\(status.displayName) \\(status.iconName)\n            \"\"\"\n        }\n    }\n\n    // MARK: - Error\n\n    /// \uc218\uba74 \uae30\ub85d \uc911 \ubc1c\uc0dd\ud560 \uc218 \uc788\ub294 \uc5d0\ub7ec\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Custom Error Type\n    /// Swift\uc758 Error \ud504\ub85c\ud1a0\ucf5c\uc744 conform\ud558\uc5ec throw \uac00\ub2a5\ud55c \ud0c0\uc785 \uc815\uc758\n    /// \ud83d\udca1 Java \ube44\uad50: Custom Exception\uacfc \uc720\uc0ac\n    enum RecordError: Error, LocalizedError {\n        /// \uc720\ud6a8\ud558\uc9c0 \uc54a\uc740 \uc785\ub825 \uac12\n        case invalidInput(String)\n\n        /// \uc800\uc7a5 \uc2e4\ud328\n        case saveFailed(Error)\n\n        /// \uc5d0\ub7ec \uc124\uba85 (\uc0ac\uc6a9\uc790\uc5d0\uac8c \ud45c\uc2dc\ud560 \uba54\uc2dc\uc9c0)\n        /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: LocalizedError Protocol\n        /// errorDescription\uc744 \uad6c\ud604\ud558\uc5ec \uc0ac\uc6a9\uc790 \uce5c\ud654\uc801\uc778 \uc5d0\ub7ec \uba54\uc2dc\uc9c0 \uc81c\uacf5\n        var errorDescription: String? {\n            switch self {\n            case .invalidInput(let message):\n                return \"\uc720\ud6a8\ud558\uc9c0 \uc54a\uc740 \uc785\ub825: \\(message)\"\n            case .saveFailed(let error):\n                return \"\uc800\uc7a5 \uc2e4\ud328: \\(error.localizedDescription)\"\n            }\n        }\n    }\n\n    // MARK: - Dependencies\n\n    /// \uc218\uba74 \ub370\uc774\ud130 \uc800\uc7a5\uc18c\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Protocol-Oriented Programming\n    /// \uad6c\ud604\uccb4\uac00 \uc544\ub2cc \ud504\ub85c\ud1a0\ucf5c\uc5d0 \uc758\uc874\ud558\uc5ec \uc720\uc5f0\uc131 \ud655\ubcf4\n    /// \ud83d\udca1 Java \ube44\uad50: Interface\uc5d0 \uc758\uc874\ud558\ub294 \uac83\uacfc \ub3d9\uc77c\n    private let sleepRepository: SleepRepositoryProtocol\n\n    // MARK: - Initialization\n\n    /// RecordSleepUseCase \ucd08\uae30\ud654\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Dependency Injection via Constructor\n    /// - \ubaa8\ub4e0 \uc758\uc874\uc131\uc744 \uc0dd\uc131\uc790\ub97c \ud1b5\ud574 \uc8fc\uc785\ubc1b\uc74c\n    /// - \uc758\uc874\uc131 \uc5ed\uc804 \uc6d0\uce59 (Dependency Inversion Principle) \uc900\uc218\n    /// \ud83d\udca1 Java \ube44\uad50: @Autowired constructor injection\uacfc \uc720\uc0ac\n    ///\n    /// - Parameter sleepRepository: \uc218\uba74 \ub370\uc774\ud130 \uc800\uc7a5\uc18c (\ud544\uc218)\n    init(sleepRepository: SleepRepositoryProtocol) {\n        self.sleepRepository = sleepRepository\n    }\n\n    // MARK: - Execute\n\n    /// \uc218\uba74 \uae30\ub85d \uc800\uc7a5 \uc2e4\ud589\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Async/Await\n    /// - Swift 5.5+\uc758 \ub3d9\uc2dc\uc131 \ubaa8\ub378\n    /// - \ube44\ub3d9\uae30 \uc791\uc5c5\uc744 \ub3d9\uae30 \ucf54\ub4dc\ucc98\ub7fc \uc791\uc131 \uac00\ub2a5\n    /// \ud83d\udca1 Java \ube44\uad50: CompletableFuture \ub610\ub294 Kotlin Coroutines\uc640 \uc720\uc0ac\n    ///\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Business Logic Flow\n    /// \uc218\uba74 \uae30\ub85d \ube44\uc988\ub2c8\uc2a4 \ub85c\uc9c1\uc744 \uc21c\ucc28\uc801\uc73c\ub85c \uc2e4\ud589:\n    /// 1. \uc785\ub825 \uac80\uc99d\n    /// 2. \uc218\uba74 \uc0c1\ud0dc \uc790\ub3d9 \uacc4\uc0b0 (duration \u2192 status)\n    /// 3. SleepRecord \ub3c4\uba54\uc778 \uc5d4\ud2f0\ud2f0 \uc0dd\uc131\n    /// 4. Repository\ub97c \ud1b5\ud574 \uc800\uc7a5\n    /// 5. DailyLog \uc790\ub3d9 \uc5c5\ub370\uc774\ud2b8 (Repository/DataSource\uc5d0\uc11c \ucc98\ub9ac)\n    ///\n    /// - Parameter input: \uc218\uba74 \uae30\ub85d \uc785\ub825 \ub370\uc774\ud130\n    /// - Returns: \uc800\uc7a5\ub41c \uc218\uba74 \uae30\ub85d \uc815\ubcf4\n    /// - Throws: RecordError - \uac01 \ub2e8\uacc4\uc5d0\uc11c \uc2e4\ud328 \uc2dc\n    func execute(input: Input) async throws -> Output {\n        // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Guard Statement\n        // \uc870\uac74\uc774 false\uc77c \ub54c early return\n        // \ud83d\udca1 Java \ube44\uad50: if (!condition) throw\uc640 \uc720\uc0ac\ud558\uc9c0\ub9cc \ub354 \uba85\uc2dc\uc801\n        guard input.isValid else {\n            throw RecordError.invalidInput(\"\uc218\uba74 \uc2dc\uac04\uc740 0-1440\ubd84(0-24\uc2dc\uac04) \ubc94\uc704\uc5ec\uc57c \ud569\ub2c8\ub2e4.\")\n        }\n\n        // Step 1: \uc218\uba74 \uc0c1\ud0dc \uc790\ub3d9 \uacc4\uc0b0\n        // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Automatic Status Calculation\n        // duration \uac12\uc5d0 \ub530\ub77c SleepStatus\ub97c \uc790\ub3d9\uc73c\ub85c \uacb0\uc815\n        // - Bad: < 5.5h (330\ubd84)\n        // - Soso: 5.5-6.5h (330-390\ubd84)\n        // - Good: 6.5-7.5h (390-450\ubd84)\n        // - Excellent: 7.5-9h (450-540\ubd84)\n        // - Oversleep: > 9h (540\ubd84)\n        let status = SleepStatus.from(durationMinutes: input.duration)\n\n        // Step 2: SleepRecord \ub3c4\uba54\uc778 \uc5d4\ud2f0\ud2f0 \uc0dd\uc131\n        // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Domain Entity Creation\n        // \uacc4\uc0b0\ub41c status\ub97c \ud3ec\ud568\ud558\uc5ec \uc800\uc7a5\ud560 \uc5d4\ud2f0\ud2f0 \uc0dd\uc131\n        let now = Date()\n        let sleepRecord = SleepRecord(\n            id: UUID(),\n            userId: input.userId,\n            date: input.date,\n            duration: input.duration,\n            status: status,\n            createdAt: now,\n            updatedAt: now\n        )\n\n        // Step 3: Repository\ub97c \ud1b5\ud574 \uc800\uc7a5\n        // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Repository Pattern\n        // \ub370\uc774\ud130 \uc800\uc7a5 \uc138\ubd80\uc0ac\ud56d\uc744 \ucd94\uc0c1\ud654\ud558\uc5ec Use Case\ub294 \ube44\uc988\ub2c8\uc2a4 \ub85c\uc9c1\uc5d0\ub9cc \uc9d1\uc911\n        // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: 02:00 Boundary Logic\n        // Repository/DataSource\uc5d0\uc11c \uc790\ub3d9\uc73c\ub85c \ucc98\ub9ac:\n        // - 02:00 \uc774\uc804 \uc785\ub825 \uc2dc \uc804\ub0a0\ub85c \ucc98\ub9ac\n        // - DateUtils.getLogicalDate \uc0ac\uc6a9\n        // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: DailyLog Auto-Update\n        // Repository/DataSource\uc5d0\uc11c \uc790\ub3d9\uc73c\ub85c \ucc98\ub9ac:\n        // - \ud574\ub2f9 \ub0a0\uc9dc\uc758 DailyLog.sleepDuration \uc5c5\ub370\uc774\ud2b8\n        // - \ud574\ub2f9 \ub0a0\uc9dc\uc758 DailyLog.sleepStatus \uc5c5\ub370\uc774\ud2b8\n        // - DailyLog\uac00 \uc5c6\uc73c\uba74 \uc790\ub3d9 \uc0dd\uc131\n        let savedRecord: SleepRecord\n        do {\n            savedRecord = try await sleepRepository.save(sleepRecord: sleepRecord)\n        } catch {\n            throw RecordError.saveFailed(error)\n        }\n\n        // Step 4: \uacb0\uacfc \ubc18\ud658\n        // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Successful Completion\n        // \ubaa8\ub4e0 \uc791\uc5c5\uc774 \uc131\uacf5\ud558\uba74 \uc800\uc7a5\ub41c \uc218\uba74 \uae30\ub85d \uc815\ubcf4 \ubc18\ud658\n        return Output(sleepRecord: savedRecord)\n    }\n\n    // MARK: - Convenience Methods\n\n    /// \uac1c\ubcc4 \ud30c\ub77c\ubbf8\ud130\ub97c \uc0ac\uc6a9\ud55c \ud3b8\uc758 \uba54\uc11c\ub4dc\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Convenience Method\n    /// \uac1c\ubcc4 \ud30c\ub77c\ubbf8\ud130\ub97c \ubc1b\uc544\uc11c Input\uc73c\ub85c \ubcc0\ud658\ud558\ub294 \ud5ec\ud37c \uba54\uc11c\ub4dc\n    /// \ud83d\udca1 \uc0ac\uc6a9\ucc98: ViewModel\uc5d0\uc11c \uc27d\uac8c \ud638\ucd9c \uac00\ub2a5\n    ///\n    /// - Parameters:\n    ///   - userId: \uc0ac\uc6a9\uc790 ID\n    ///   - date: \uc218\uba74 \uae30\uc900\uc77c (\uae30\ubcf8\uac12: \ud604\uc7ac \uc2dc\uac04)\n    ///   - duration: \uc218\uba74 \uc2dc\uac04 (\ubd84 \ub2e8\uc704)\n    /// - Returns: \uc800\uc7a5\ub41c \uc218\uba74 \uae30\ub85d \uc815\ubcf4\n    /// - Throws: RecordError\n    func execute(\n        userId: UUID,\n        date: Date = Date(),\n        duration: Int32\n    ) async throws -> Output {\n        let input = Input(\n            userId: userId,\n            date: date,\n            duration: duration\n        )\n        return try await execute(input: input)\n    }\n\n    /// \uc2dc:\ubd84 \ud615\uc2dd\uc744 \ubc1b\ub294 \ud3b8\uc758 \uba54\uc11c\ub4dc\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Method Overloading\n    /// \ub2e4\ub978 \ud615\uc2dd\uc758 \uc785\ub825\uc744 \ubc1b\uc544 \ub3d9\uc77c\ud55c \uacb0\uacfc\ub97c \ubc18\ud658\n    /// \ud83d\udca1 \uc0ac\uc6a9\ucc98: UI \ud53c\ucee4\uc5d0\uc11c \uc2dc\uac04\uacfc \ubd84\uc744 \ub530\ub85c \ubc1b\uc744 \ub54c\n    ///\n    /// - Parameters:\n    ///   - userId: \uc0ac\uc6a9\uc790 ID\n    ///   - date: \uc218\uba74 \uae30\uc900\uc77c (\uae30\ubcf8\uac12: \ud604\uc7ac \uc2dc\uac04)\n    ///   - hours: \uc218\uba74 \uc2dc\uac04 (\uc2dc\uac04)\n    ///   - minutes: \uc218\uba74 \uc2dc\uac04 (\ubd84)\n    /// - Returns: \uc800\uc7a5\ub41c \uc218\uba74 \uae30\ub85d \uc815\ubcf4\n    /// - Throws: RecordError\n    func execute(\n        userId: UUID,\n        date: Date = Date(),\n        hours: Int,\n        minutes: Int\n    ) async throws -> Output {\n        let totalMinutes = Int32(hours * 60 + minutes)\n        let input = Input(\n            userId: userId,\n            date: date,\n            duration: totalMinutes\n        )\n        return try await execute(input: input)\n    }\n}\n\n// MARK: - Sample Usage\n\nextension RecordSleepUseCase {\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Sample Data for Testing\n    /// Use Case\uc758 \uc0ac\uc6a9 \uc608\uc2dc\uc640 \ud14c\uc2a4\ud2b8\ub97c \uc704\ud55c \uc0d8\ud50c \ub370\uc774\ud130\n    /// \ud83d\udca1 Java \ube44\uad50: JUnit\uc758 @Test fixture\uc640 \uc720\uc0ac\n\n    /// \uc0d8\ud50c \uc785\ub825 - 7\uc2dc\uac04 \uc218\uba74 (Good)\n    static func sampleInputGood(userId: UUID = UUID()) -> Input {\n        return Input(\n            userId: userId,\n            date: Date(),\n            duration: 420 // 7\uc2dc\uac04 = 420\ubd84\n        )\n    }\n\n    /// \uc0d8\ud50c \uc785\ub825 - 5\uc2dc\uac04 \uc218\uba74 (Bad)\n    static func sampleInputBad(userId: UUID = UUID()) -> Input {\n        return Input(\n            userId: userId,\n            date: Date(),\n            duration: 300 // 5\uc2dc\uac04 = 300\ubd84\n        )\n    }\n\n    /// \uc0d8\ud50c \uc785\ub825 - 8\uc2dc\uac04 \uc218\uba74 (Excellent)\n    static func sampleInputExcellent(userId: UUID = UUID()) -> Input {\n        return Input(\n            userId: userId,\n            date: Date(),\n            duration: 480 // 8\uc2dc\uac04 = 480\ubd84\n        )\n    }\n}\n\n// MARK: - Documentation\n\n/// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: RecordSleepUseCase \uc774\ud574\n///\n/// RecordSleepUseCase\uc758 \uc5ed\ud560:\n/// - \uc218\uba74 \uc2dc\uac04\uc744 \uc785\ub825\ubc1b\uc544 \uc218\uba74 \uc0c1\ud0dc\ub97c \uc790\ub3d9\uc73c\ub85c \uacc4\uc0b0\n/// - 02:00 \uacbd\uacc4 \ub85c\uc9c1\uc744 \uc801\uc6a9\ud55c \ub0a0\uc9dc \ucc98\ub9ac\n/// - SleepRecord \uc5d4\ud2f0\ud2f0 \uc0dd\uc131 \ubc0f \uc800\uc7a5\n/// - DailyLog \uc790\ub3d9 \uc5c5\ub370\uc774\ud2b8 (Repository\ub97c \ud1b5\ud574)\n///\n/// \ube44\uc988\ub2c8\uc2a4 \ud50c\ub85c\uc6b0:\n/// 1. \uc785\ub825 \uac80\uc99d: \uc218\uba74 \uc2dc\uac04\uc774 0-1440\ubd84(0-24\uc2dc\uac04) \ubc94\uc704\uc778\uc9c0 \ud655\uc778\n/// 2. \uc0c1\ud0dc \uacc4\uc0b0: SleepStatus.from(durationMinutes:)\ub97c \uc0ac\uc6a9\ud558\uc5ec \uc790\ub3d9 \uacc4\uc0b0\n/// 3. \uc5d4\ud2f0\ud2f0 \uc0dd\uc131: SleepRecord \ub3c4\uba54\uc778 \uc5d4\ud2f0\ud2f0 \uc0dd\uc131\n/// 4. \uc800\uc7a5: Repository\ub97c \ud1b5\ud574 Core Data\uc5d0 \uc800\uc7a5\n/// 5. DailyLog \uc5c5\ub370\uc774\ud2b8: \ud574\ub2f9 \ub0a0\uc9dc\uc758 DailyLog\uc5d0 \uc218\uba74 \uc815\ubcf4 \uc5c5\ub370\uc774\ud2b8\n///\n/// 02:00 \uacbd\uacc4 \ub85c\uc9c1:\n/// - 02:00 ~ \uc775\uc77c 01:59\uae4c\uc9c0\ub97c \uac19\uc740 \ub0a0\ub85c \ucde8\uae09\n/// - \uc608: 2026-01-11 03:00 \uc785\ub825 \u2192 date = 2026-01-11\n/// - \uc608: 2026-01-11 01:00 \uc785\ub825 \u2192 date = 2026-01-10\n/// - DateUtils.getLogicalDate\ub97c \ud1b5\ud574 \ucc98\ub9ac (Repository/DataSource\uc5d0\uc11c)\n///\n/// SleepStatus \uc790\ub3d9 \uacc4\uc0b0 \uae30\uc900:\n/// - Bad (\ud83d\udd34): 330\ubd84 \ubbf8\ub9cc (5\uc2dc\uac04 30\ubd84 \ubbf8\ub9cc)\n/// - Soso (\ud83d\udfe1): 330~390\ubd84 (5\uc2dc\uac04 30\ubd84 ~ 6\uc2dc\uac04 30\ubd84)\n/// - Good (\ud83d\udfe2): 390~450\ubd84 (6\uc2dc\uac04 30\ubd84 ~ 7\uc2dc\uac04 30\ubd84)\n/// - Excellent (\ud83d\udd35): 450~540\ubd84 (7\uc2dc\uac04 30\ubd84 ~ 9\uc2dc\uac04)\n/// - Oversleep (\ud83d\udfe0): 540\ubd84 \ucd08\uacfc (9\uc2dc\uac04 \ucd08\uacfc)\n///\n/// DailyLog \uc790\ub3d9 \uc5c5\ub370\uc774\ud2b8:\n/// - SleepRecord \uc800\uc7a5 \uc2dc \ud574\ub2f9 \ub0a0\uc9dc\uc758 DailyLog\uac00 \uc790\ub3d9\uc73c\ub85c \uc5c5\ub370\uc774\ud2b8\ub428\n/// - DailyLog.sleepDuration: \uc218\uba74 \uc2dc\uac04 (\ubd84)\n/// - DailyLog.sleepStatus: \uc218\uba74 \uc0c1\ud0dc\n/// - DailyLog\uac00 \uc5c6\uc73c\uba74 \uc790\ub3d9 \uc0dd\uc131\ub428\n///\n/// \uc5d0\ub7ec \ucc98\ub9ac:\n/// - \uc785\ub825 \uac80\uc99d \uc2e4\ud328: RecordError.invalidInput\n/// - \uc800\uc7a5 \uc2e4\ud328: RecordError.saveFailed\n///\n/// Clean Architecture\uc5d0\uc11c\uc758 \uc704\uce58:\n/// - Domain Layer\uc758 Use Case\n/// - SleepRepository\uc5d0 \uc758\uc874\n/// - Presentation Layer (ViewModel)\uc5d0\uc11c \ud638\ucd9c\ub428\n///\n/// \ud83d\udca1 Java Spring\uacfc\uc758 \ube44\uad50:\n/// - Spring: @Service class with @Transactional\n/// - Swift: Struct with async/await\n/// - Spring: Repository\ub97c @Autowired\ub85c \uc8fc\uc785\n/// - Swift: \uc0dd\uc131\uc790\ub85c \uc758\uc874\uc131 \uc8fc\uc785\n///\n/// \uc0ac\uc6a9 \uc608\uc2dc:\n/// ```swift\n/// let useCase = RecordSleepUseCase(sleepRepository: repository)\n///\n/// do {\n///     // 7\uc2dc\uac04 \uc218\uba74 \uae30\ub85d\n///     let result = try await useCase.execute(\n///         userId: user.id,\n///         duration: 420  // 7\uc2dc\uac04 = 420\ubd84\n///     )\n///\n///     print(\"\uc800\uc7a5 \uc644\ub8cc!\")\n///     print(\"\uc218\uba74 \uc2dc\uac04: \\(result.duration)\ubd84\")\n///     print(\"\uc218\uba74 \uc0c1\ud0dc: \\(result.status.displayName)\")\n///\n///     // \ub610\ub294 \uc2dc:\ubd84 \ud615\uc2dd\uc73c\ub85c\n///     let result2 = try await useCase.execute(\n///         userId: user.id,\n///         hours: 7,\n///         minutes: 30\n///     )\n/// } catch {\n///     print(\"\uc5d0\ub7ec \ubc1c\uc0dd: \\(error.localizedDescription)\")\n/// }\n/// ```\n///\n/// \ud83d\udca1 \uc2e4\ubb34 \ud301:\n/// - UI \ud53c\ucee4\uc5d0\uc11c \uc2dc\uac04\uacfc \ubd84\uc744 \ub530\ub85c \ubc1b\uc744 \ub54c\ub294 execute(hours:minutes:) \uc0ac\uc6a9\n/// - \uacc4\uc0b0\ub41c status\ub97c \ubbf8\ub9ac \ubcf4\uc5ec\uc8fc\uace0 \uc2f6\ub2e4\uba74 SleepStatus.from(durationMinutes:) \uc9c1\uc811 \ud638\ucd9c\n/// - 02:00 \uacbd\uacc4 \ub85c\uc9c1\uc740 Repository/DataSource\uc5d0\uc11c \uc790\ub3d9 \ucc98\ub9ac\ub418\ubbc0\ub85c Use Case\uc5d0\uc11c \uc2e0\uacbd\uc4f0\uc9c0 \uc54a\uc544\ub3c4 \ub428\n/// - DailyLog \uc5c5\ub370\uc774\ud2b8\ub3c4 \uc790\ub3d9\uc774\ubbc0\ub85c \ubcc4\ub3c4 \ub85c\uc9c1 \ubd88\ud544\uc694\n///\n/// RecordBodyCompositionUseCase\uc640\uc758 \ube44\uad50:\n/// - RecordBodyCompositionUseCase: \uc5ec\ub7ec Use Case\ub97c \uc870\ud569\ud558\ub294 \uc624\ucf00\uc2a4\ud2b8\ub808\uc774\uc158\n/// - RecordSleepUseCase: \ub2e8\uc77c \ube44\uc988\ub2c8\uc2a4 \ub85c\uc9c1 (\uc0c1\ud0dc \uacc4\uc0b0 + \uc800\uc7a5)\n/// - RecordBodyCompositionUseCase: BMR/TDEE \uacc4\uc0b0 \ud6c4 \uc800\uc7a5\n/// - RecordSleepUseCase: Status \uacc4\uc0b0 \ud6c4 \uc800\uc7a5 (\ub354 \ub2e8\uc21c)\n///\n",
        "last_modified": "2026-01-18T17:07:01.340473"
      },
      "task_intent": {
        "title": "009-sleep-tracking-with-5-status-system",
        "description": "Sleep logging with 5-status tracking (bad, soso, good, excellent, oversleep), duration input, wake time prompts, and correlation with other health metrics. Automatic morning prompt to log previous night's sleep.",
        "from_plan": true
      },
      "commits_behind_main": 0,
      "status": "active",
      "merged_at": null
    }
  },
  "created_at": "2026-01-14T18:01:05.070542",
  "last_updated": "2026-01-14T21:03:40.565429"
}