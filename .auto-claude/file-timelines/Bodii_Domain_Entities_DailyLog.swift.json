{
  "file_path": "Bodii/Domain/Entities/DailyLog.swift",
  "main_branch_history": [],
  "task_views": {
    "002-project-foundation-core-data-model": {
      "task_id": "002-project-foundation-core-data-model",
      "branch_point": {
        "commit_hash": "2abdae73fb6199bcbf4f21f6deeb7952225f81e6",
        "content": "",
        "timestamp": "2026-01-12T08:37:37.044484"
      },
      "worktree_state": {
        "content": "//\n//  DailyLog.swift\n//  Bodii\n//\n//  Created by Auto-Claude on 2026-01-11.\n//\n\n// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Daily Aggregation Pattern\n// DailyLog\ub294 \uc5ec\ub7ec Record \uc5d4\ud2f0\ud2f0\ub4e4\uc758 \ub370\uc774\ud130\ub97c \ub0a0\uc9dc\ubcc4\ub85c \uc9d1\uacc4\ud558\uc5ec \ub300\uc2dc\ubcf4\ub4dc \ud45c\uc2dc\uc6a9\uc73c\ub85c \ucd5c\uc801\ud654\n// \ud83d\udca1 Java \ube44\uad50: JPA\uc758 @Formula\ub098 View Entity\uc640 \uc720\uc0ac\ud558\uc9c0\ub9cc \uc2e4\uc81c \uc800\uc7a5\ub418\ub294 \uc5d4\ud2f0\ud2f0\n\nimport Foundation\n\n// MARK: - DailyLog\n\n/// \uc77c\uc77c \uc885\ud569 \ub85c\uadf8 \ub3c4\uba54\uc778 \uc5d4\ud2f0\ud2f0\n/// - \ud558\ub8e8 \ub3d9\uc548\uc758 \uc2dd\uc0ac, \uc6b4\ub3d9, \uc218\uba74, \uc2e0\uccb4 \ub370\uc774\ud130\ub97c \uc885\ud569\ud558\uc5ec \ub300\uc2dc\ubcf4\ub4dc\uc5d0 \ud45c\uc2dc\n/// - FoodRecord, ExerciseRecord, SleepRecord, BodyRecord\uc758 \uc9d1\uacc4 \ub370\uc774\ud130\n/// - \ub0a0\uc9dc\ubcc4\ub85c \ud558\ub098\uc758 DailyLog \uc0dd\uc131 (unique date)\n///\n/// ## \uc8fc\uc694 \uae30\ub2a5\n/// - \uc77c\uc77c \uc601\uc591 \uc12d\ucde8 \ud569\uacc4 (\uce7c\ub85c\ub9ac, \ud0c4\uc218\ud654\ubb3c, \ub2e8\ubc31\uc9c8, \uc9c0\ubc29)\n/// - \uc77c\uc77c \uc6b4\ub3d9 \uc18c\ubaa8 \uce7c\ub85c\ub9ac \ubc0f \uc2dc\uac04 \ud569\uacc4\n/// - \uc77c\uc77c \uc218\uba74 \uc2dc\uac04 \ubc0f \uc0c1\ud0dc\n/// - \ub2f9\uc77c \uc2e0\uccb4 \ub370\uc774\ud130 (\uccb4\uc911, \uccb4\uc9c0\ubc29\ub960)\n/// - \ub300\uc0ac \uc815\ubcf4 (BMR, TDEE) \ubc0f \uc21c \uce7c\ub85c\ub9ac \uacc4\uc0b0\n///\n/// ## \ub370\uc774\ud130 \uc9d1\uacc4 \uad00\uacc4\n/// ```\n/// DailyLog (1) \u2190 (N) FoodRecord: \uc77c\uc77c \uc601\uc591 \uc12d\ucde8 \ud569\uacc4\n/// DailyLog (1) \u2190 (N) ExerciseRecord: \uc77c\uc77c \uc6b4\ub3d9 \uc18c\ubaa8 \ud569\uacc4\n/// DailyLog (1) \u2190 (N) SleepRecord: \uc77c\uc77c \uc218\uba74 \ud569\uacc4\n/// DailyLog (1) \u2190 (1) BodyRecord: \ub2f9\uc77c \uc2e0\uccb4 \ub370\uc774\ud130 (\uc120\ud0dd\uc801)\n/// DailyLog (1) \u2190 (1) MetabolismSnapshot: \ub2f9\uc77c \ub300\uc0ac \uc815\ubcf4 (\uc120\ud0dd\uc801)\n/// ```\n///\n/// ## \uacc4\uc0b0 \uacf5\uc2dd\n/// ```\n/// \uc21c \uce7c\ub85c\ub9ac(netCalories) = \uc12d\ucde8 \uce7c\ub85c\ub9ac - \uc18c\ubaa8 \uce7c\ub85c\ub9ac - TDEE\n/// \ud0c4\uc218\ud654\ubb3c \ube44\uc728 = (totalCarbs \u00d7 4) / totalCaloriesIn \u00d7 100\n/// \ub2e8\ubc31\uc9c8 \ube44\uc728 = (totalProtein \u00d7 4) / totalCaloriesIn \u00d7 100\n/// \uc9c0\ubc29 \ube44\uc728 = (totalFat \u00d7 9) / totalCaloriesIn \u00d7 100\n/// ```\n///\n/// ## \uc0ac\uc6a9 \uc608\uc2dc\n/// ```swift\n/// // 1. \ube48 DailyLog \uc0dd\uc131 (\ub370\uc774\ud130 \uc5c6\ub294 \ub0a0)\n/// let emptyLog = DailyLog.empty(userId: userId, date: Date())\n///\n/// // 2. FoodRecord \uc9d1\uacc4 \ud6c4 DailyLog \uc5c5\ub370\uc774\ud2b8\n/// let updatedLog = emptyLog.withNutrition(\n///     totalCaloriesIn: 2000,\n///     totalCarbs: 250.0,\n///     totalProtein: 120.0,\n///     totalFat: 60.0\n/// )\n///\n/// // 3. \uc21c \uce7c\ub85c\ub9ac \ud655\uc778\n/// print(updatedLog.netCalories) // \uc12d\ucde8 - \uc18c\ubaa8 - TDEE\n/// ```\nstruct DailyLog: Identifiable, Codable, Equatable {\n\n    // MARK: - Properties\n\n    // MARK: Identifier\n\n    /// \uc77c\uc77c \ub85c\uadf8 \uace0\uc720 \uc2dd\ubcc4\uc790\n    /// - UUID \ud0c0\uc785\uc73c\ub85c \uc804\uc5ed \uace0\uc720\uc131 \ubcf4\uc7a5\n    let id: UUID\n\n    /// \uc0ac\uc6a9\uc790 \uace0\uc720 \uc2dd\ubcc4\uc790\n    /// - User \uc5d4\ud2f0\ud2f0\uc640\uc758 \uc678\ub798 \ud0a4 \uad00\uacc4\n    let userId: UUID\n\n    /// \ub85c\uadf8 \ub0a0\uc9dc\n    /// - 02:00 sleep boundary \ub85c\uc9c1 \uc801\uc6a9 (\ub17c\ub9ac\uc801 \ub0a0\uc9dc)\n    /// - \ud558\ub8e8\uc5d0 \ud558\ub098\uc758 DailyLog\ub9cc \uc874\uc7ac (unique constraint)\n    /// - \ubaa8\ub4e0 Record\uc758 \uc9d1\uacc4 \uae30\uc900 \ub0a0\uc9dc\n    let date: Date\n\n    // MARK: Intake Section (\uc12d\ucde8)\n\n    /// \uc77c\uc77c \ucd1d \uc12d\ucde8 \uce7c\ub85c\ub9ac (kcal)\n    /// - \ubaa8\ub4e0 FoodRecord\uc758 \uacc4\uc0b0\ub41c \uce7c\ub85c\ub9ac \ud569\uacc4\n    /// - \uae30\ubcf8\uac12: 0 (\uc12d\ucde8 \uae30\ub85d\uc774 \uc5c6\ub294 \uacbd\uc6b0)\n    var totalCaloriesIn: Int\n\n    /// \uc77c\uc77c \ucd1d \uc12d\ucde8 \ud0c4\uc218\ud654\ubb3c (g)\n    /// - \ubaa8\ub4e0 FoodRecord\uc758 \uacc4\uc0b0\ub41c \ud0c4\uc218\ud654\ubb3c \ud569\uacc4\n    /// - \uae30\ubcf8\uac12: 0.0\n    var totalCarbs: Decimal\n\n    /// \uc77c\uc77c \ucd1d \uc12d\ucde8 \ub2e8\ubc31\uc9c8 (g)\n    /// - \ubaa8\ub4e0 FoodRecord\uc758 \uacc4\uc0b0\ub41c \ub2e8\ubc31\uc9c8 \ud569\uacc4\n    /// - \uae30\ubcf8\uac12: 0.0\n    var totalProtein: Decimal\n\n    /// \uc77c\uc77c \ucd1d \uc12d\ucde8 \uc9c0\ubc29 (g)\n    /// - \ubaa8\ub4e0 FoodRecord\uc758 \uacc4\uc0b0\ub41c \uc9c0\ubc29 \ud569\uacc4\n    /// - \uae30\ubcf8\uac12: 0.0\n    var totalFat: Decimal\n\n    // MARK: Metabolism Section (\ub300\uc0ac)\n\n    /// \uae30\ucd08\ub300\uc0ac\ub7c9 (kcal/day)\n    /// - \ub2f9\uc77c MetabolismSnapshot\uc758 bmr \uac12\n    /// - \uc5c6\uc73c\uba74 User\uc758 currentBMR \uc0ac\uc6a9\n    /// - \uae30\ubcf8\uac12: 0 (\ub370\uc774\ud130 \uc5c6\uc74c)\n    var bmr: Int\n\n    /// \uc77c\uc77c \ucd1d \uc5d0\ub108\uc9c0 \uc18c\ube44\ub7c9 (kcal/day)\n    /// - \ub2f9\uc77c MetabolismSnapshot\uc758 tdee \uac12\n    /// - \uc5c6\uc73c\uba74 User\uc758 currentTDEE \uc0ac\uc6a9\n    /// - \uae30\ubcf8\uac12: 0 (\ub370\uc774\ud130 \uc5c6\uc74c)\n    var tdee: Int\n\n    // MARK: Exercise Section (\uc6b4\ub3d9)\n\n    /// \uc77c\uc77c \ucd1d \uc18c\ubaa8 \uce7c\ub85c\ub9ac (kcal)\n    /// - \ubaa8\ub4e0 ExerciseRecord\uc758 caloriesBurned \ud569\uacc4\n    /// - \uae30\ubcf8\uac12: 0 (\uc6b4\ub3d9 \uae30\ub85d\uc774 \uc5c6\ub294 \uacbd\uc6b0)\n    var totalCaloriesOut: Int\n\n    /// \uc77c\uc77c \ucd1d \uc6b4\ub3d9 \uc2dc\uac04 (\ubd84)\n    /// - \ubaa8\ub4e0 ExerciseRecord\uc758 duration \ud569\uacc4\n    /// - \uae30\ubcf8\uac12: 0\n    var exerciseMinutes: Int\n\n    /// \uc77c\uc77c \uc6b4\ub3d9 \ud69f\uc218\n    /// - ExerciseRecord\uc758 \uac1c\uc218\n    /// - \uae30\ubcf8\uac12: 0\n    var exerciseCount: Int\n\n    /// \uc77c\uc77c \uac78\uc74c \uc218 (\uc120\ud0dd \uc0ac\ud56d)\n    /// - HealthKit \uc5f0\ub3d9 \uc2dc \uc790\ub3d9 \uae30\ub85d\n    /// - \uae30\ubcf8\uac12: nil (\ub370\uc774\ud130 \uc5c6\uc74c)\n    var steps: Int?\n\n    // MARK: Body Section (\uc2e0\uccb4)\n\n    /// \ub2f9\uc77c \uccb4\uc911 (kg)\n    /// - \ub2f9\uc77c BodyRecord\uc758 weight \uac12\n    /// - \uae30\ubcf8\uac12: nil (\uccb4\uc911 \uce21\uc815 \uc548\ud568)\n    var weight: Decimal?\n\n    /// \ub2f9\uc77c \uccb4\uc9c0\ubc29\ub960 (%)\n    /// - \ub2f9\uc77c BodyRecord\uc758 bodyFatPercent \uac12\n    /// - \uae30\ubcf8\uac12: nil (\uccb4\uc9c0\ubc29 \uce21\uc815 \uc548\ud568)\n    var bodyFatPct: Decimal?\n\n    // MARK: Sleep Section (\uc218\uba74)\n\n    /// \uc77c\uc77c \ucd1d \uc218\uba74 \uc2dc\uac04 (\ubd84)\n    /// - \ubaa8\ub4e0 SleepRecord\uc758 duration \ud569\uacc4\n    /// - \uae30\ubcf8\uac12: nil (\uc218\uba74 \uae30\ub85d \uc5c6\uc74c)\n    var sleepDuration: Int?\n\n    /// \uc218\uba74 \uc0c1\ud0dc\n    /// - \ub2f9\uc77c \uc8fc\uc694 SleepRecord\uc758 status\n    /// - \uc5ec\ub7ec \uc218\uba74 \uae30\ub85d\uc774 \uc788\uc73c\uba74 \uac00\uc7a5 \uae34 \uc218\uba74\uc758 status \uc0ac\uc6a9\n    /// - \uae30\ubcf8\uac12: nil (\uc218\uba74 \uae30\ub85d \uc5c6\uc74c)\n    var sleepStatus: SleepStatus?\n\n    // MARK: Timestamps\n\n    /// \uc0dd\uc131 \uc2dc\uac01\n    /// - DailyLog\uac00 \ucc98\uc74c \uc0dd\uc131\ub41c \uc2dc\uac01\n    let createdAt: Date\n\n    /// \uc218\uc815 \uc2dc\uac01\n    /// - DailyLog\uac00 \ub9c8\uc9c0\ub9c9\uc73c\ub85c \uc5c5\ub370\uc774\ud2b8\ub41c \uc2dc\uac01\n    var updatedAt: Date\n\n    // MARK: - Computed Properties\n\n    /// \uc21c \uce7c\ub85c\ub9ac (kcal)\n    /// - \uacc4\uc0b0 \uacf5\uc2dd: \uc12d\ucde8 \uce7c\ub85c\ub9ac - \uc18c\ubaa8 \uce7c\ub85c\ub9ac - TDEE\n    /// - \uc591\uc218: \uce7c\ub85c\ub9ac \uc789\uc5ec (\uccb4\uc911 \uc99d\uac00 \uacbd\ud5a5)\n    /// - \uc74c\uc218: \uce7c\ub85c\ub9ac \ubd80\uc871 (\uccb4\uc911 \uac10\uc18c \uacbd\ud5a5)\n    ///\n    /// ## \uc608\uc2dc\n    /// ```swift\n    /// // \uc12d\ucde8 2000kcal, \uc18c\ubaa8 300kcal, TDEE 1800kcal\n    /// // netCalories = 2000 - 300 - 1800 = -100kcal (\uc801\uc790)\n    /// ```\n    var netCalories: Int {\n        return totalCaloriesIn - totalCaloriesOut - tdee\n    }\n\n    /// \ud0c4\uc218\ud654\ubb3c \ube44\uc728 (%)\n    /// - \uacc4\uc0b0 \uacf5\uc2dd: (\ud0c4\uc218\ud654\ubb3cg \u00d7 4kcal/g) / \ucd1d \uc12d\ucde8 \uce7c\ub85c\ub9ac \u00d7 100\n    /// - \uae30\ubcf8\uac12: 0.0 (\uc12d\ucde8 \uae30\ub85d \uc5c6\uc74c)\n    ///\n    /// ## \uc608\uc2dc\n    /// ```swift\n    /// // \ud0c4\uc218\ud654\ubb3c 250g, \ucd1d \uce7c\ub85c\ub9ac 2000kcal\n    /// // carbsRatio = (250 \u00d7 4) / 2000 \u00d7 100 = 50.0%\n    /// ```\n    var carbsRatio: Decimal {\n        guard totalCaloriesIn > 0 else { return 0.0 }\n        let carbsCalories = totalCarbs * 4 // \ud0c4\uc218\ud654\ubb3c 1g = 4kcal\n        return (carbsCalories / Decimal(totalCaloriesIn) * 100).rounded(scale: 1)\n    }\n\n    /// \ub2e8\ubc31\uc9c8 \ube44\uc728 (%)\n    /// - \uacc4\uc0b0 \uacf5\uc2dd: (\ub2e8\ubc31\uc9c8g \u00d7 4kcal/g) / \ucd1d \uc12d\ucde8 \uce7c\ub85c\ub9ac \u00d7 100\n    /// - \uae30\ubcf8\uac12: 0.0 (\uc12d\ucde8 \uae30\ub85d \uc5c6\uc74c)\n    ///\n    /// ## \uc608\uc2dc\n    /// ```swift\n    /// // \ub2e8\ubc31\uc9c8 120g, \ucd1d \uce7c\ub85c\ub9ac 2000kcal\n    /// // proteinRatio = (120 \u00d7 4) / 2000 \u00d7 100 = 24.0%\n    /// ```\n    var proteinRatio: Decimal {\n        guard totalCaloriesIn > 0 else { return 0.0 }\n        let proteinCalories = totalProtein * 4 // \ub2e8\ubc31\uc9c8 1g = 4kcal\n        return (proteinCalories / Decimal(totalCaloriesIn) * 100).rounded(scale: 1)\n    }\n\n    /// \uc9c0\ubc29 \ube44\uc728 (%)\n    /// - \uacc4\uc0b0 \uacf5\uc2dd: (\uc9c0\ubc29g \u00d7 9kcal/g) / \ucd1d \uc12d\ucde8 \uce7c\ub85c\ub9ac \u00d7 100\n    /// - \uae30\ubcf8\uac12: 0.0 (\uc12d\ucde8 \uae30\ub85d \uc5c6\uc74c)\n    ///\n    /// ## \uc608\uc2dc\n    /// ```swift\n    /// // \uc9c0\ubc29 60g, \ucd1d \uce7c\ub85c\ub9ac 2000kcal\n    /// // fatRatio = (60 \u00d7 9) / 2000 \u00d7 100 = 27.0%\n    /// ```\n    var fatRatio: Decimal {\n        guard totalCaloriesIn > 0 else { return 0.0 }\n        let fatCalories = totalFat * 9 // \uc9c0\ubc29 1g = 9kcal\n        return (fatCalories / Decimal(totalCaloriesIn) * 100).rounded(scale: 1)\n    }\n\n    // MARK: - Factory Methods\n\n    /// \ube48 DailyLog \uc0dd\uc131 (\ucd08\uae30 \uc0c1\ud0dc)\n    /// - Parameters:\n    ///   - userId: \uc0ac\uc6a9\uc790 \uace0\uc720 \uc2dd\ubcc4\uc790\n    ///   - date: \ub85c\uadf8 \ub0a0\uc9dc\n    /// - Returns: \ubaa8\ub4e0 \uc9d1\uacc4 \uac12\uc774 0 \ub610\ub294 nil\uc778 DailyLog\n    ///\n    /// ## \uc0ac\uc6a9 \uc2dc\ub098\ub9ac\uc624\n    /// \uc0c8\ub85c\uc6b4 \ub0a0\uc9dc\uc5d0 \uccab Record\uac00 \uc0dd\uc131\ub420 \ub54c \ube48 DailyLog \uc0dd\uc131 \ud6c4 \uc5c5\ub370\uc774\ud2b8\n    ///\n    /// ## \uc608\uc2dc\n    /// ```swift\n    /// let emptyLog = DailyLog.empty(userId: userId, date: Date())\n    /// // totalCaloriesIn = 0, totalCaloriesOut = 0, weight = nil, etc.\n    /// ```\n    static func empty(userId: UUID, date: Date) -> DailyLog {\n        let now = Date()\n        return DailyLog(\n            id: UUID(),\n            userId: userId,\n            date: date,\n            totalCaloriesIn: 0,\n            totalCarbs: 0.0,\n            totalProtein: 0.0,\n            totalFat: 0.0,\n            bmr: 0,\n            tdee: 0,\n            totalCaloriesOut: 0,\n            exerciseMinutes: 0,\n            exerciseCount: 0,\n            steps: nil,\n            weight: nil,\n            bodyFatPct: nil,\n            sleepDuration: nil,\n            sleepStatus: nil,\n            createdAt: now,\n            updatedAt: now\n        )\n    }\n\n    // MARK: - Update Methods\n\n    /// \uc601\uc591 \uc12d\ucde8 \ub370\uc774\ud130 \uc5c5\ub370\uc774\ud2b8\n    /// - Parameters:\n    ///   - totalCaloriesIn: \ucd1d \uc12d\ucde8 \uce7c\ub85c\ub9ac\n    ///   - totalCarbs: \ucd1d \uc12d\ucde8 \ud0c4\uc218\ud654\ubb3c\n    ///   - totalProtein: \ucd1d \uc12d\ucde8 \ub2e8\ubc31\uc9c8\n    ///   - totalFat: \ucd1d \uc12d\ucde8 \uc9c0\ubc29\n    /// - Returns: \uc601\uc591 \ub370\uc774\ud130\uac00 \uc5c5\ub370\uc774\ud2b8\ub41c DailyLog\n    ///\n    /// ## \uc0ac\uc6a9 \uc2dc\ub098\ub9ac\uc624\n    /// FoodRecord\uac00 \ucd94\uac00/\uc218\uc815/\uc0ad\uc81c\ub420 \ub54c DailyLog\uc758 \uc601\uc591 \ud569\uacc4 \uc7ac\uacc4\uc0b0\n    ///\n    /// ## \uc608\uc2dc\n    /// ```swift\n    /// let updatedLog = dailyLog.withNutrition(\n    ///     totalCaloriesIn: 2000,\n    ///     totalCarbs: 250.0,\n    ///     totalProtein: 120.0,\n    ///     totalFat: 60.0\n    /// )\n    /// ```\n    func withNutrition(\n        totalCaloriesIn: Int,\n        totalCarbs: Decimal,\n        totalProtein: Decimal,\n        totalFat: Decimal\n    ) -> DailyLog {\n        DailyLog(\n            id: id,\n            userId: userId,\n            date: date,\n            totalCaloriesIn: totalCaloriesIn,\n            totalCarbs: totalCarbs,\n            totalProtein: totalProtein,\n            totalFat: totalFat,\n            bmr: bmr,\n            tdee: tdee,\n            totalCaloriesOut: totalCaloriesOut,\n            exerciseMinutes: exerciseMinutes,\n            exerciseCount: exerciseCount,\n            steps: steps,\n            weight: weight,\n            bodyFatPct: bodyFatPct,\n            sleepDuration: sleepDuration,\n            sleepStatus: sleepStatus,\n            createdAt: createdAt,\n            updatedAt: Date()\n        )\n    }\n\n    /// \uc6b4\ub3d9 \ub370\uc774\ud130 \uc5c5\ub370\uc774\ud2b8\n    /// - Parameters:\n    ///   - totalCaloriesOut: \ucd1d \uc18c\ubaa8 \uce7c\ub85c\ub9ac\n    ///   - exerciseMinutes: \ucd1d \uc6b4\ub3d9 \uc2dc\uac04\n    ///   - exerciseCount: \uc6b4\ub3d9 \ud69f\uc218\n    ///   - steps: \uac78\uc74c \uc218 (\uc120\ud0dd \uc0ac\ud56d)\n    /// - Returns: \uc6b4\ub3d9 \ub370\uc774\ud130\uac00 \uc5c5\ub370\uc774\ud2b8\ub41c DailyLog\n    ///\n    /// ## \uc0ac\uc6a9 \uc2dc\ub098\ub9ac\uc624\n    /// ExerciseRecord\uac00 \ucd94\uac00/\uc218\uc815/\uc0ad\uc81c\ub420 \ub54c DailyLog\uc758 \uc6b4\ub3d9 \ud569\uacc4 \uc7ac\uacc4\uc0b0\n    ///\n    /// ## \uc608\uc2dc\n    /// ```swift\n    /// let updatedLog = dailyLog.withExercise(\n    ///     totalCaloriesOut: 300,\n    ///     exerciseMinutes: 60,\n    ///     exerciseCount: 2,\n    ///     steps: 10000\n    /// )\n    /// ```\n    func withExercise(\n        totalCaloriesOut: Int,\n        exerciseMinutes: Int,\n        exerciseCount: Int,\n        steps: Int? = nil\n    ) -> DailyLog {\n        DailyLog(\n            id: id,\n            userId: userId,\n            date: date,\n            totalCaloriesIn: totalCaloriesIn,\n            totalCarbs: totalCarbs,\n            totalProtein: totalProtein,\n            totalFat: totalFat,\n            bmr: bmr,\n            tdee: tdee,\n            totalCaloriesOut: totalCaloriesOut,\n            exerciseMinutes: exerciseMinutes,\n            exerciseCount: exerciseCount,\n            steps: steps,\n            weight: weight,\n            bodyFatPct: bodyFatPct,\n            sleepDuration: sleepDuration,\n            sleepStatus: sleepStatus,\n            createdAt: createdAt,\n            updatedAt: Date()\n        )\n    }\n\n    /// \ub300\uc0ac \ub370\uc774\ud130 \uc5c5\ub370\uc774\ud2b8\n    /// - Parameters:\n    ///   - bmr: \uae30\ucd08\ub300\uc0ac\ub7c9\n    ///   - tdee: \uc77c\uc77c \ucd1d \uc5d0\ub108\uc9c0 \uc18c\ube44\ub7c9\n    /// - Returns: \ub300\uc0ac \ub370\uc774\ud130\uac00 \uc5c5\ub370\uc774\ud2b8\ub41c DailyLog\n    ///\n    /// ## \uc0ac\uc6a9 \uc2dc\ub098\ub9ac\uc624\n    /// MetabolismSnapshot\uc774 \uc0dd\uc131\ub420 \ub54c DailyLog\uc5d0 BMR/TDEE \ubc18\uc601\n    ///\n    /// ## \uc608\uc2dc\n    /// ```swift\n    /// let updatedLog = dailyLog.withMetabolism(bmr: 1650, tdee: 2550)\n    /// ```\n    func withMetabolism(bmr: Int, tdee: Int) -> DailyLog {\n        DailyLog(\n            id: id,\n            userId: userId,\n            date: date,\n            totalCaloriesIn: totalCaloriesIn,\n            totalCarbs: totalCarbs,\n            totalProtein: totalProtein,\n            totalFat: totalFat,\n            bmr: bmr,\n            tdee: tdee,\n            totalCaloriesOut: totalCaloriesOut,\n            exerciseMinutes: exerciseMinutes,\n            exerciseCount: exerciseCount,\n            steps: steps,\n            weight: weight,\n            bodyFatPct: bodyFatPct,\n            sleepDuration: sleepDuration,\n            sleepStatus: sleepStatus,\n            createdAt: createdAt,\n            updatedAt: Date()\n        )\n    }\n\n    /// \uc2e0\uccb4 \ub370\uc774\ud130 \uc5c5\ub370\uc774\ud2b8\n    /// - Parameters:\n    ///   - weight: \uccb4\uc911\n    ///   - bodyFatPct: \uccb4\uc9c0\ubc29\ub960\n    /// - Returns: \uc2e0\uccb4 \ub370\uc774\ud130\uac00 \uc5c5\ub370\uc774\ud2b8\ub41c DailyLog\n    ///\n    /// ## \uc0ac\uc6a9 \uc2dc\ub098\ub9ac\uc624\n    /// BodyRecord\uac00 \uc0dd\uc131/\uc218\uc815\ub420 \ub54c DailyLog\uc5d0 \ub2f9\uc77c \uccb4\uc911/\uccb4\uc9c0\ubc29 \ubc18\uc601\n    ///\n    /// ## \uc608\uc2dc\n    /// ```swift\n    /// let updatedLog = dailyLog.withBody(weight: 70.0, bodyFatPct: 18.5)\n    /// ```\n    func withBody(weight: Decimal?, bodyFatPct: Decimal?) -> DailyLog {\n        DailyLog(\n            id: id,\n            userId: userId,\n            date: date,\n            totalCaloriesIn: totalCaloriesIn,\n            totalCarbs: totalCarbs,\n            totalProtein: totalProtein,\n            totalFat: totalFat,\n            bmr: bmr,\n            tdee: tdee,\n            totalCaloriesOut: totalCaloriesOut,\n            exerciseMinutes: exerciseMinutes,\n            exerciseCount: exerciseCount,\n            steps: steps,\n            weight: weight,\n            bodyFatPct: bodyFatPct,\n            sleepDuration: sleepDuration,\n            sleepStatus: sleepStatus,\n            createdAt: createdAt,\n            updatedAt: Date()\n        )\n    }\n\n    /// \uc218\uba74 \ub370\uc774\ud130 \uc5c5\ub370\uc774\ud2b8\n    /// - Parameters:\n    ///   - sleepDuration: \ucd1d \uc218\uba74 \uc2dc\uac04 (\ubd84)\n    ///   - sleepStatus: \uc218\uba74 \uc0c1\ud0dc\n    /// - Returns: \uc218\uba74 \ub370\uc774\ud130\uac00 \uc5c5\ub370\uc774\ud2b8\ub41c DailyLog\n    ///\n    /// ## \uc0ac\uc6a9 \uc2dc\ub098\ub9ac\uc624\n    /// SleepRecord\uac00 \ucd94\uac00/\uc218\uc815/\uc0ad\uc81c\ub420 \ub54c DailyLog\uc758 \uc218\uba74 \ud569\uacc4 \uc7ac\uacc4\uc0b0\n    ///\n    /// ## \uc608\uc2dc\n    /// ```swift\n    /// let updatedLog = dailyLog.withSleep(sleepDuration: 420, sleepStatus: .good)\n    /// ```\n    func withSleep(sleepDuration: Int?, sleepStatus: SleepStatus?) -> DailyLog {\n        DailyLog(\n            id: id,\n            userId: userId,\n            date: date,\n            totalCaloriesIn: totalCaloriesIn,\n            totalCarbs: totalCarbs,\n            totalProtein: totalProtein,\n            totalFat: totalFat,\n            bmr: bmr,\n            tdee: tdee,\n            totalCaloriesOut: totalCaloriesOut,\n            exerciseMinutes: exerciseMinutes,\n            exerciseCount: exerciseCount,\n            steps: steps,\n            weight: weight,\n            bodyFatPct: bodyFatPct,\n            sleepDuration: sleepDuration,\n            sleepStatus: sleepStatus,\n            createdAt: createdAt,\n            updatedAt: Date()\n        )\n    }\n}\n\n// MARK: - DailyLog + CustomStringConvertible\n\nextension DailyLog: CustomStringConvertible {\n    /// \ub514\ubc84\uae45\uc6a9 \ubb38\uc790\uc5f4 \ud45c\ud604\n    var description: String {\n        let weightText = weight.map { \"\\($0)kg\" } ?? \"\ubbf8\uce21\uc815\"\n        let bodyFatText = bodyFatPct.map { \"\\($0)%\" } ?? \"\ubbf8\uce21\uc815\"\n        let sleepText = sleepDuration.map { \"\\($0)\ubd84\" } ?? \"\uae30\ub85d \uc5c6\uc74c\"\n        let sleepStatusText = sleepStatus?.displayName ?? \"-\"\n        let stepsText = steps.map { \"\\($0)\uac78\uc74c\" } ?? \"\uae30\ub85d \uc5c6\uc74c\"\n\n        return \"\"\"\n        DailyLog(\n          id: \\(id.uuidString.prefix(8))...,\n          userId: \\(userId.uuidString.prefix(8))...,\n          date: \\(date.formatted(style: .short)),\n          \uc601\uc591 \uc12d\ucde8: \uce7c\ub85c\ub9ac \\(totalCaloriesIn)kcal, \ud0c4\uc218\ud654\ubb3c \\(totalCarbs)g (\\(carbsRatio)%), \ub2e8\ubc31\uc9c8 \\(totalProtein)g (\\(proteinRatio)%), \uc9c0\ubc29 \\(totalFat)g (\\(fatRatio)%),\n          \ub300\uc0ac: BMR \\(bmr)kcal, TDEE \\(tdee)kcal, \uc21c \uce7c\ub85c\ub9ac \\(netCalories)kcal,\n          \uc6b4\ub3d9: \uc18c\ubaa8 \\(totalCaloriesOut)kcal, \uc2dc\uac04 \\(exerciseMinutes)\ubd84, \ud69f\uc218 \\(exerciseCount)\ud68c, \uac78\uc74c \\(stepsText),\n          \uc2e0\uccb4: \uccb4\uc911 \\(weightText), \uccb4\uc9c0\ubc29 \\(bodyFatText),\n          \uc218\uba74: \\(sleepText) (\\(sleepStatusText)),\n          updatedAt: \\(updatedAt.formatted(style: .dateTime))\n        )\n        \"\"\"\n    }\n}\n",
        "last_modified": "2026-01-12T08:37:37.428223"
      },
      "task_intent": {
        "title": "Project Foundation & Core Data Model",
        "description": "Set up Xcode project with SwiftUI, MVVM architecture, Core Data persistence layer with 9 entities (User, BodyRecord, MetabolismSnapshot, Food, FoodRecord, ExerciseRecord, SleepRecord, DailyLog, Goal), and utility services for date handling and input validation.",
        "from_plan": true
      },
      "commits_behind_main": 0,
      "status": "active",
      "merged_at": null
    },
    "004-project-foundation-core-data-model": {
      "task_id": "004-project-foundation-core-data-model",
      "branch_point": {
        "commit_hash": "2abdae73fb6199bcbf4f21f6deeb7952225f81e6",
        "content": "",
        "timestamp": "2026-01-12T19:14:54.682468"
      },
      "worktree_state": {
        "content": "//\n//  DailyLog.swift\n//  Bodii\n//\n//  Created by Auto-Claude on 2024-01-12.\n//\n\nimport Foundation\n\n/// \uc77c\uc77c \uc9d1\uacc4 \ub3c4\uba54\uc778 \uc5d4\ud2f0\ud2f0\n///\n/// \uc0ac\uc6a9\uc790\uc758 \ud558\ub8e8 \ub3d9\uc548\uc758 \uc2dd\ub2e8, \uc6b4\ub3d9, \uccb4\uc131\ubd84, \uc218\uba74 \ub4f1 \ubaa8\ub4e0 \ub370\uc774\ud130\ub97c \uc9d1\uacc4\ud569\ub2c8\ub2e4.\n/// \uac01 \ub0a0\uc9dc\ubcc4\ub85c \uace0\uc720\ud55c \ub808\ucf54\ub4dc\uac00 \uc0dd\uc131\ub418\uba70, \uad00\ub828 \uc774\ubca4\ud2b8 \ubc1c\uc0dd \uc2dc \uc790\ub3d9\uc73c\ub85c \uc5c5\ub370\uc774\ud2b8\ub429\ub2c8\ub2e4.\n///\n/// - Note: \uc12d\ucde8 \ub370\uc774\ud130\ub294 FoodRecord \ucd94\uac00/\uc0ad\uc81c \uc2dc \uc790\ub3d9\uc73c\ub85c \uc5c5\ub370\uc774\ud2b8\ub429\ub2c8\ub2e4.\n/// - Note: \uc6b4\ub3d9 \ub370\uc774\ud130\ub294 ExerciseRecord \ucd94\uac00/\uc0ad\uc81c \uc2dc \uc790\ub3d9\uc73c\ub85c \uc5c5\ub370\uc774\ud2b8\ub429\ub2c8\ub2e4.\n/// - Note: \uccb4\uc131\ubd84 \ub370\uc774\ud130\ub294 \ud574\ub2f9\uc77c BodyRecord \uc785\ub825 \uc2dc \uc790\ub3d9\uc73c\ub85c \uc5c5\ub370\uc774\ud2b8\ub429\ub2c8\ub2e4.\n/// - Note: \uc218\uba74 \ub370\uc774\ud130\ub294 SleepRecord \uc785\ub825 \uc2dc \uc790\ub3d9\uc73c\ub85c \uc5c5\ub370\uc774\ud2b8\ub429\ub2c8\ub2e4.\n/// - Note: bmr, tdee\ub294 DailyLog \uc0dd\uc131 \uc2dc User.current* \uac12\uc5d0\uc11c \ubcf5\uc0ac\ub429\ub2c8\ub2e4.\n///\n/// - Example:\n/// ```swift\n/// let dailyLog = DailyLog(\n///     id: UUID(),\n///     userId: user.id,\n///     date: Date(),\n///     totalCaloriesIn: 2100,\n///     totalCarbs: Decimal(260.5),\n///     totalProtein: Decimal(105.2),\n///     totalFat: Decimal(58.3),\n///     carbsRatio: Decimal(49.6),\n///     proteinRatio: Decimal(20.0),\n///     fatRatio: Decimal(25.0),\n///     bmr: 1650,\n///     tdee: 2310,\n///     netCalories: -210,\n///     totalCaloriesOut: 450,\n///     exerciseMinutes: 60,\n///     exerciseCount: 2,\n///     steps: 8500,\n///     weight: Decimal(70.5),\n///     bodyFatPct: Decimal(21.5),\n///     sleepDuration: 420,\n///     sleepStatus: .good,\n///     createdAt: Date(),\n///     updatedAt: Date()\n/// )\n/// ```\nstruct DailyLog {\n    // MARK: - Primary Key\n\n    /// \uace0\uc720 \uc2dd\ubcc4\uc790\n    let id: UUID\n\n    // MARK: - Foreign Key\n\n    /// User \ucc38\uc870\n    let userId: UUID\n\n    // MARK: - Date\n\n    /// \ub0a0\uc9dc (UNIQUE per user)\n    ///\n    /// \uc0ac\uc6a9\uc790\ubcc4\ub85c \ud558\ub8e8\uc5d0 \ud558\ub098\uc758 DailyLog\ub9cc \uc874\uc7ac\ud569\ub2c8\ub2e4.\n    var date: Date\n\n    // MARK: - \uc12d\ucde8 (Calorie Intake)\n\n    /// \ucd1d \uc12d\ucde8 \uce7c\ub85c\ub9ac (kcal)\n    ///\n    /// FoodRecord \ucd94\uac00/\uc0ad\uc81c \uc2dc \uc790\ub3d9\uc73c\ub85c \uc5c5\ub370\uc774\ud2b8\ub429\ub2c8\ub2e4.\n    var totalCaloriesIn: Int32\n\n    /// \ucd1d \ud0c4\uc218\ud654\ubb3c (g)\n    ///\n    /// FoodRecord \ucd94\uac00/\uc0ad\uc81c \uc2dc \uc790\ub3d9\uc73c\ub85c \uc5c5\ub370\uc774\ud2b8\ub429\ub2c8\ub2e4.\n    var totalCarbs: Decimal\n\n    /// \ucd1d \ub2e8\ubc31\uc9c8 (g)\n    ///\n    /// FoodRecord \ucd94\uac00/\uc0ad\uc81c \uc2dc \uc790\ub3d9\uc73c\ub85c \uc5c5\ub370\uc774\ud2b8\ub429\ub2c8\ub2e4.\n    var totalProtein: Decimal\n\n    /// \ucd1d \uc9c0\ubc29 (g)\n    ///\n    /// FoodRecord \ucd94\uac00/\uc0ad\uc81c \uc2dc \uc790\ub3d9\uc73c\ub85c \uc5c5\ub370\uc774\ud2b8\ub429\ub2c8\ub2e4.\n    var totalFat: Decimal\n\n    /// \ud0c4\uc218\ud654\ubb3c \ube44\uc728 (%)\n    ///\n    /// FoodRecord \ucd94\uac00/\uc0ad\uc81c \uc2dc \uc790\ub3d9\uc73c\ub85c \uc7ac\uacc4\uc0b0\ub429\ub2c8\ub2e4.\n    /// \uc12d\ucde8\ud55c \uc74c\uc2dd\uc774 \uc5c6\ub294 \uacbd\uc6b0 nil\uc785\ub2c8\ub2e4.\n    var carbsRatio: Decimal?\n\n    /// \ub2e8\ubc31\uc9c8 \ube44\uc728 (%)\n    ///\n    /// FoodRecord \ucd94\uac00/\uc0ad\uc81c \uc2dc \uc790\ub3d9\uc73c\ub85c \uc7ac\uacc4\uc0b0\ub429\ub2c8\ub2e4.\n    /// \uc12d\ucde8\ud55c \uc74c\uc2dd\uc774 \uc5c6\ub294 \uacbd\uc6b0 nil\uc785\ub2c8\ub2e4.\n    var proteinRatio: Decimal?\n\n    /// \uc9c0\ubc29 \ube44\uc728 (%)\n    ///\n    /// FoodRecord \ucd94\uac00/\uc0ad\uc81c \uc2dc \uc790\ub3d9\uc73c\ub85c \uc7ac\uacc4\uc0b0\ub429\ub2c8\ub2e4.\n    /// \uc12d\ucde8\ud55c \uc74c\uc2dd\uc774 \uc5c6\ub294 \uacbd\uc6b0 nil\uc785\ub2c8\ub2e4.\n    var fatRatio: Decimal?\n\n    // MARK: - \ub300\uc0ac\ub7c9 \uc2a4\ub0c5\uc0f7 (Metabolism Snapshot)\n\n    /// \ud574\ub2f9\uc77c BMR (\uae30\ucd08\ub300\uc0ac\ub7c9, kcal)\n    ///\n    /// DailyLog \uc0dd\uc131 \uc2dc User.currentBMR \ub610\ub294 \ud574\ub2f9\uc77c \uc774\uc804 MetabolismSnapshot\uc5d0\uc11c \ubcf5\uc0ac\ub429\ub2c8\ub2e4.\n    /// \ud574\ub2f9\uc77c \uccb4\uc131\ubd84 \uc785\ub825 \uc2dc \uc5c5\ub370\uc774\ud2b8\ub420 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\n    var bmr: Int32\n\n    /// \ud574\ub2f9\uc77c TDEE (\ud65c\ub3d9\ub300\uc0ac\ub7c9, kcal)\n    ///\n    /// DailyLog \uc0dd\uc131 \uc2dc User.currentTDEE \ub610\ub294 \ud574\ub2f9\uc77c \uc774\uc804 MetabolismSnapshot\uc5d0\uc11c \ubcf5\uc0ac\ub429\ub2c8\ub2e4.\n    /// \ud574\ub2f9\uc77c \uccb4\uc131\ubd84 \uc785\ub825 \uc2dc \uc5c5\ub370\uc774\ud2b8\ub420 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\n    var tdee: Int32\n\n    /// \uc21c \uce7c\ub85c\ub9ac (\uc12d\ucde8 - TDEE, kcal)\n    ///\n    /// totalCaloriesIn - tdee \ub85c \uacc4\uc0b0\ub429\ub2c8\ub2e4.\n    /// FoodRecord \ucd94\uac00/\uc0ad\uc81c \uc2dc \uc790\ub3d9\uc73c\ub85c \uc7ac\uacc4\uc0b0\ub429\ub2c8\ub2e4.\n    var netCalories: Int32\n\n    // MARK: - \uc18c\ubaa8 & \uc6b4\ub3d9 (Exercise & Activity)\n\n    /// \uc6b4\ub3d9 \uc18c\ubaa8 \uce7c\ub85c\ub9ac (kcal)\n    ///\n    /// ExerciseRecord \ucd94\uac00/\uc0ad\uc81c \uc2dc \uc790\ub3d9\uc73c\ub85c \uc5c5\ub370\uc774\ud2b8\ub429\ub2c8\ub2e4.\n    var totalCaloriesOut: Int32\n\n    /// \ucd1d \uc6b4\ub3d9 \uc2dc\uac04 (\ubd84)\n    ///\n    /// ExerciseRecord \ucd94\uac00/\uc0ad\uc81c \uc2dc \uc790\ub3d9\uc73c\ub85c \uc5c5\ub370\uc774\ud2b8\ub429\ub2c8\ub2e4.\n    var exerciseMinutes: Int32\n\n    /// \uc6b4\ub3d9 \ud69f\uc218\n    ///\n    /// ExerciseRecord \ucd94\uac00/\uc0ad\uc81c \uc2dc \uc790\ub3d9\uc73c\ub85c \uc5c5\ub370\uc774\ud2b8\ub429\ub2c8\ub2e4.\n    var exerciseCount: Int16\n\n    /// \uac78\uc74c \uc218 (HealthKit)\n    ///\n    /// HealthKit \ub3d9\uae30\ud654 \uc2dc \uc5c5\ub370\uc774\ud2b8\ub429\ub2c8\ub2e4.\n    /// \ub3d9\uae30\ud654\ub418\uc9c0 \uc54a\uc558\uac70\ub098 \ub370\uc774\ud130\uac00 \uc5c6\uc73c\uba74 nil\uc785\ub2c8\ub2e4.\n    var steps: Int32?\n\n    // MARK: - \uccb4\uc131\ubd84 \uc2a4\ub0c5\uc0f7 (Body Composition Snapshot)\n\n    /// \ud574\ub2f9\uc77c \uccb4\uc911 (kg)\n    ///\n    /// \ud574\ub2f9\uc77c BodyRecord \uc785\ub825 \uc2dc \uc790\ub3d9\uc73c\ub85c \uc5c5\ub370\uc774\ud2b8\ub429\ub2c8\ub2e4.\n    /// \uccb4\uc131\ubd84 \uae30\ub85d\uc774 \uc5c6\uc73c\uba74 nil\uc785\ub2c8\ub2e4.\n    var weight: Decimal?\n\n    /// \ud574\ub2f9\uc77c \uccb4\uc9c0\ubc29\ub960 (%)\n    ///\n    /// \ud574\ub2f9\uc77c BodyRecord \uc785\ub825 \uc2dc \uc790\ub3d9\uc73c\ub85c \uc5c5\ub370\uc774\ud2b8\ub429\ub2c8\ub2e4.\n    /// \uccb4\uc131\ubd84 \uae30\ub85d\uc774 \uc5c6\uac70\ub098 \uccb4\uc9c0\ubc29\ub960\uc744 \uce21\uc815\ud558\uc9c0 \uc54a\uc558\uc73c\uba74 nil\uc785\ub2c8\ub2e4.\n    var bodyFatPct: Decimal?\n\n    // MARK: - \uc218\uba74 (Sleep)\n\n    /// \uc218\uba74 \uc2dc\uac04 (\ubd84)\n    ///\n    /// SleepRecord \uc785\ub825 \uc2dc \uc790\ub3d9\uc73c\ub85c \uc5c5\ub370\uc774\ud2b8\ub429\ub2c8\ub2e4.\n    /// \uc218\uba74 \uae30\ub85d\uc774 \uc5c6\uc73c\uba74 nil\uc785\ub2c8\ub2e4.\n    var sleepDuration: Int32?\n\n    /// \uc218\uba74 \uc0c1\ud0dc (0: Bad, 1: Soso, 2: Good, 3: Excellent, 4: Oversleep)\n    ///\n    /// SleepRecord \uc785\ub825 \uc2dc \uc790\ub3d9\uc73c\ub85c \uc5c5\ub370\uc774\ud2b8\ub429\ub2c8\ub2e4.\n    /// \uc218\uba74 \uae30\ub85d\uc774 \uc5c6\uc73c\uba74 nil\uc785\ub2c8\ub2e4.\n    var sleepStatus: SleepStatus?\n\n    // MARK: - Metadata\n\n    /// \uc0dd\uc131\uc77c\uc2dc\n    let createdAt: Date\n\n    /// \uc218\uc815\uc77c\uc2dc\n    var updatedAt: Date\n}\n\n// MARK: - Identifiable\n\nextension DailyLog: Identifiable {}\n\n// MARK: - Equatable\n\nextension DailyLog: Equatable {\n    static func == (lhs: DailyLog, rhs: DailyLog) -> Bool {\n        lhs.id == rhs.id\n    }\n}\n\n// MARK: - Hashable\n\nextension DailyLog: Hashable {\n    func hash(into hasher: inout Hasher) {\n        hasher.combine(id)\n    }\n}\n",
        "last_modified": "2026-01-12T19:28:09.041171"
      },
      "task_intent": {
        "title": "004-project-foundation-core-data-model",
        "description": "",
        "from_plan": false
      },
      "commits_behind_main": 0,
      "status": "active",
      "merged_at": null
    }
  },
  "created_at": "2026-01-11T21:28:23.962004",
  "last_updated": "2026-01-12T19:14:54.965432"
}