{
  "file_path": "Bodii/Domain/Entities/UserProfile.swift",
  "main_branch_history": [],
  "task_views": {
    "003-body-composition-tracking-with-bmr-tdee": {
      "task_id": "003-body-composition-tracking-with-bmr-tdee",
      "branch_point": {
        "commit_hash": "2abdae73fb6199bcbf4f21f6deeb7952225f81e6",
        "content": "",
        "timestamp": "2026-01-13T07:46:22.394743"
      },
      "worktree_state": {
        "content": "//\n//  UserProfile.swift\n//  Bodii\n//\n//  Created by Auto-Claude on 2026-01-12.\n//\n\n// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: User Profile Domain Entity\n// Core Data\uc640 \ub3c5\ub9bd\uc801\uc778 \uc21c\uc218 \ub3c4\uba54\uc778 \uc5d4\ud2f0\ud2f0\n// \ud83d\udca1 Java \ube44\uad50: POJO (Plain Old Java Object)\uc640 \uc720\uc0ac\ud558\uc9c0\ub9cc Swift\uc758 value type (struct) \uc0ac\uc6a9\n\nimport Foundation\n\n// MARK: - UserProfile\n\n/// \uc0ac\uc6a9\uc790 \ud504\ub85c\ud544 \ub3c4\uba54\uc778 \uc5d4\ud2f0\ud2f0\n/// BMR/TDEE \uacc4\uc0b0\uc5d0 \ud544\uc694\ud55c \uc0ac\uc6a9\uc790\uc758 \uae30\ubcf8 \uc815\ubcf4\ub97c \ub098\ud0c0\ub0c5\ub2c8\ub2e4.\n/// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Clean Architecture\uc758 Domain Layer\n/// - Core Data\ub098 \ub2e4\ub978 infrastructure \uc758\uc874\uc131\uc774 \uc5c6\ub294 \uc21c\uc218\ud55c \ube44\uc988\ub2c8\uc2a4 \uc5d4\ud2f0\ud2f0\n/// - Decimal\uc744 \uc0ac\uc6a9\ud558\uc5ec \uc815\ubc00\ub3c4 \ubcf4\uc7a5 (Double\uc758 \ubd80\ub3d9\uc18c\uc218\uc810 \uc624\ucc28 \ubc29\uc9c0)\n/// - BMR \uacc4\uc0b0\uc5d0 \ud544\uc218\uc801\uc778 \uc815\ubcf4: \uc2e0\uc7a5, \ub098\uc774, \uc131\ubcc4, \ud65c\ub3d9 \uc218\uc900\nstruct UserProfile: Codable, Identifiable, Equatable {\n\n    // MARK: - Properties\n\n    /// \uace0\uc720 \uc2dd\ubcc4\uc790\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: UUID vs Int\n    /// - UUID: \ubd84\uc0b0 \uc2dc\uc2a4\ud15c\uc5d0\uc11c \ucda9\ub3cc \uc5c6\uc774 \uace0\uc720 ID \uc0dd\uc131 \uac00\ub2a5\n    /// - SwiftUI\uc758 Identifiable \ud504\ub85c\ud1a0\ucf5c \uc694\uad6c\uc0ac\ud56d\n    let id: UUID\n\n    /// \uc2e0\uc7a5 (cm)\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Decimal Type\n    /// - \uc815\ubc00\ud55c \uc22b\uc790 \uacc4\uc0b0\uc744 \uc704\ud574 Decimal \uc0ac\uc6a9\n    /// - Double \ub300\uc2e0 Decimal\uc744 \uc0ac\uc6a9\ud558\uc5ec \ubd80\ub3d9\uc18c\uc218\uc810 \uc624\ucc28 \ubc29\uc9c0\n    /// \ud83d\udca1 Java \ube44\uad50: java.math.BigDecimal\uacfc \uc720\uc0ac\n    /// BMR \uacc4\uc0b0 \uacf5\uc2dd\uc5d0\uc11c \uc2e0\uc7a5\uc740 cm \ub2e8\uc704\ub85c \uc0ac\uc6a9\ub428\n    let height: Decimal\n\n    /// \uc0dd\ub144\uc6d4\uc77c\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Date Type\n    /// - \uc2dc\uac04\ub300\uc640 \ubb34\uad00\ud55c \uc808\ub300 \uc2dc\uac04 \ud45c\ud604\n    /// - \ub098\uc774 \uacc4\uc0b0 \uc2dc \ud604\uc7ac \ub0a0\uc9dc\uc640 \ube44\uad50\ud558\uc5ec \uc815\ud655\ud55c \ub9cc \ub098\uc774 \uc0b0\ucd9c\n    let birthDate: Date\n\n    /// \uc131\ubcc4\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Enum as Property\n    /// - Mifflin-St Jeor \uacf5\uc2dd\uc5d0\uc11c \ub0a8\uc131\uacfc \uc5ec\uc131\uc758 \uacc4\uc218\uac00 \ub2e4\ub984\n    /// - \ub0a8\uc131: +5, \uc5ec\uc131: -161\n    let gender: Gender\n\n    /// \ud65c\ub3d9 \uc218\uc900\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: ActivityLevel Enum\n    /// - TDEE \uacc4\uc0b0\uc5d0 \uc0ac\uc6a9\ub418\ub294 \ud65c\ub3d9 \uacc4\uc218\n    /// - sedentary(1.2) ~ extraActive(1.9)\n    let activityLevel: ActivityLevel\n\n    // MARK: - Initialization\n\n    /// UserProfile \uc0dd\uc131\uc790\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Memberwise Initializer\n    /// - Struct\ub294 \uae30\ubcf8\uc801\uc73c\ub85c memberwise initializer \uc81c\uacf5\n    /// - \uba85\uc2dc\uc801\uc73c\ub85c \uc791\uc131\ud558\uc5ec \ubb38\uc11c\ud654 \ubc0f validation \ucd94\uac00 \uac00\ub2a5\n    /// - Parameter id: \uace0\uc720 \uc2dd\ubcc4\uc790 (\uae30\ubcf8\uac12: \uc0c8 UUID)\n    /// - Parameter height: \uc2e0\uc7a5 (cm)\n    /// - Parameter birthDate: \uc0dd\ub144\uc6d4\uc77c\n    /// - Parameter gender: \uc131\ubcc4\n    /// - Parameter activityLevel: \ud65c\ub3d9 \uc218\uc900\n    init(\n        id: UUID = UUID(),\n        height: Decimal,\n        birthDate: Date,\n        gender: Gender,\n        activityLevel: ActivityLevel\n    ) {\n        self.id = id\n        self.height = height\n        self.birthDate = birthDate\n        self.gender = gender\n        self.activityLevel = activityLevel\n    }\n\n    // MARK: - Computed Properties\n\n    /// \ud604\uc7ac \ub9cc \ub098\uc774 \uacc4\uc0b0\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Computed Property\n    /// - \uc800\uc7a5\ub418\uc9c0 \uc54a\uace0 \ub9e4\ubc88 \uacc4\uc0b0\ub418\ub294 \ud504\ub85c\ud37c\ud2f0\n    /// - get-only property (\uc77d\uae30 \uc804\uc6a9)\n    /// \ud83d\udca1 Java \ube44\uad50: getter \uba54\uc11c\ub4dc\uc640 \uc720\uc0ac\ud558\uc9c0\ub9cc \ud504\ub85c\ud37c\ud2f0\ucc98\ub7fc \uc811\uadfc\n    ///\n    /// Calendar\ub97c \uc0ac\uc6a9\ud558\uc5ec \uc0dd\ub144\uc6d4\uc77c\uacfc \ud604\uc7ac \ub0a0\uc9dc\uc758 \ucc28\uc774\ub97c \uacc4\uc0b0\n    /// BMR \uacc4\uc0b0 \uacf5\uc2dd\uc5d0\uc11c \ub098\uc774\ub294 \ub9cc \ub098\uc774(\uc815\uc218)\ub85c \uc0ac\uc6a9\ub428\n    var age: Int {\n        let calendar = Calendar.current\n        let components = calendar.dateComponents([.year], from: birthDate, to: Date())\n        return components.year ?? 0\n    }\n\n    /// \uc2e0\uc7a5\uc744 \ubbf8\ud130 \ub2e8\uc704\ub85c \ubcc0\ud658\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Unit Conversion\n    /// - BMI\ub098 \ub2e4\ub978 \uacc4\uc0b0\uc5d0\uc11c \ubbf8\ud130 \ub2e8\uc704\uac00 \ud544\uc694\ud55c \uacbd\uc6b0 \uc0ac\uc6a9\n    /// - 1m = 100cm\n    var heightInMeters: Decimal {\n        return height / 100\n    }\n\n    /// \uc2e0\uc7a5\uc744 \ud53c\ud2b8/\uc778\uce58 \ub2e8\uc704\ub85c \ubcc0\ud658 (\ucc38\uace0\uc6a9)\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Tuple Return Type\n    /// - \uc5ec\ub7ec \uac12\uc744 \ud558\ub098\uc758 \ud29c\ud50c\ub85c \ubc18\ud658\n    /// - 1cm \u2248 0.393701 inch\n    /// \ud83d\udca1 Java \ube44\uad50: \ubcc4\ub3c4\uc758 \ud074\ub798\uc2a4\ub97c \ub9cc\ub4e4\uc5b4\uc57c \ud558\uc9c0\ub9cc Swift\ub294 \ud29c\ud50c \uc0ac\uc6a9 \uac00\ub2a5\n    ///\n    /// - Returns: (feet: Int, inches: Double) \ud615\ud0dc\uc758 \ud29c\ud50c\n    var heightInFeetAndInches: (feet: Int, inches: Double) {\n        let totalInches = Double(truncating: height as NSNumber) * 0.393701\n        let feet = Int(totalInches / 12)\n        let inches = totalInches.truncatingRemainder(dividingBy: 12)\n        return (feet: feet, inches: inches)\n    }\n\n    // MARK: - Helper Methods\n\n    /// \ud2b9\uc815 \ub0a0\uc9dc \uae30\uc900\uc73c\ub85c \ub098\uc774 \uacc4\uc0b0\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Instance Method with Parameter\n    /// - \uacfc\uac70 \ub610\ub294 \ubbf8\ub798\uc758 \ud2b9\uc815 \uc2dc\uc810\uc5d0\uc11c\uc758 \ub098\uc774\ub97c \uacc4\uc0b0\ud560 \ub54c \uc0ac\uc6a9\n    /// - \uc608: \uacfc\uac70 \uae30\ub85d \uc870\ud68c \uc2dc \ub2f9\uc2dc\uc758 \ub098\uc774\ub97c \uc54c\uace0 \uc2f6\uc744 \ub54c\n    ///\n    /// - Parameter date: \uae30\uc900 \ub0a0\uc9dc\n    /// - Returns: \ud574\ub2f9 \ub0a0\uc9dc \uae30\uc900 \ub9cc \ub098\uc774\n    func age(at date: Date) -> Int {\n        let calendar = Calendar.current\n        let components = calendar.dateComponents([.year], from: birthDate, to: date)\n        return components.year ?? 0\n    }\n\n    /// \uc2e0\uc7a5\uc744 \ud2b9\uc815 \ub2e8\uc704\ub85c \ud3ec\ub9f7\ud305\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: String Formatting\n    /// - UI \ud45c\uc2dc\ub97c \uc704\ud55c \ud3ec\ub9f7\ud305 \ud5ec\ud37c \uba54\uc11c\ub4dc\n    ///\n    /// - Parameter unit: \ub2e8\uc704 \ubb38\uc790\uc5f4 (\uae30\ubcf8\uac12: \"cm\")\n    /// - Returns: \ud3ec\ub9f7\ub41c \uc2e0\uc7a5 \ubb38\uc790\uc5f4 (\uc608: \"175.5 cm\")\n    func formattedHeight(unit: String = \"cm\") -> String {\n        let formatter = NumberFormatter()\n        formatter.minimumFractionDigits = 0\n        formatter.maximumFractionDigits = 1\n\n        let heightString = formatter.string(from: height as NSNumber) ?? \"\\(height)\"\n        return \"\\(heightString) \\(unit)\"\n    }\n}\n\n// MARK: - Sample Data\n\nextension UserProfile {\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Preview Helper\n    /// SwiftUI Preview \ubc0f \ud14c\uc2a4\ud2b8\ub97c \uc704\ud55c \uc0d8\ud50c \ub370\uc774\ud130\n    /// \ud83d\udca1 Java \ube44\uad50: Test fixture\uc640 \uc720\uc0ac\n    static let sample = UserProfile(\n        height: Decimal(175.5),\n        birthDate: Calendar.current.date(from: DateComponents(year: 1990, month: 6, day: 15))!,\n        gender: .male,\n        activityLevel: .moderatelyActive\n    )\n\n    /// \ub2e4\uc591\ud55c \uc2dc\ub098\ub9ac\uc624\ub97c \uc704\ud55c \uc0d8\ud50c \ub370\uc774\ud130 \ubc30\uc5f4\n    static let samples = [\n        UserProfile(\n            height: Decimal(175.5),\n            birthDate: Calendar.current.date(from: DateComponents(year: 1990, month: 6, day: 15))!,\n            gender: .male,\n            activityLevel: .moderatelyActive\n        ),\n        UserProfile(\n            height: Decimal(162.0),\n            birthDate: Calendar.current.date(from: DateComponents(year: 1995, month: 3, day: 22))!,\n            gender: .female,\n            activityLevel: .lightlyActive\n        ),\n        UserProfile(\n            height: Decimal(180.0),\n            birthDate: Calendar.current.date(from: DateComponents(year: 1985, month: 12, day: 8))!,\n            gender: .male,\n            activityLevel: .veryActive\n        )\n    ]\n}\n",
        "last_modified": "2026-01-13T19:18:50.332024"
      },
      "task_intent": {
        "title": "Body Composition Tracking with BMR/TDEE",
        "description": "Complete body composition logging system including height, weight, body fat percentage, muscle mass, with automatic BMR (Mifflin-St Jeor) and TDEE calculations. Visualize changes over time with Swift Charts graphs showing trends and goal progress.",
        "from_plan": true
      },
      "commits_behind_main": 1,
      "status": "active",
      "merged_at": null
    }
  },
  "created_at": "2026-01-12T11:58:31.193551",
  "last_updated": "2026-01-13T07:46:22.787778"
}