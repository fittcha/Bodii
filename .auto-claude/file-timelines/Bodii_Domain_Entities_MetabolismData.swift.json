{
  "file_path": "Bodii/Domain/Entities/MetabolismData.swift",
  "main_branch_history": [],
  "task_views": {
    "003-body-composition-tracking-with-bmr-tdee": {
      "task_id": "003-body-composition-tracking-with-bmr-tdee",
      "branch_point": {
        "commit_hash": "2abdae73fb6199bcbf4f21f6deeb7952225f81e6",
        "content": "",
        "timestamp": "2026-01-13T07:46:22.394743"
      },
      "worktree_state": {
        "content": "//\n//  MetabolismData.swift\n//  Bodii\n//\n//  Created by Auto-Claude on 2026-01-12.\n//\n\n// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Domain Entity for Metabolism Calculations\n// Core Data\uc640 \ub3c5\ub9bd\uc801\uc778 \uc21c\uc218 \ub3c4\uba54\uc778 \uc5d4\ud2f0\ud2f0\n// \ud83d\udca1 Java \ube44\uad50: POJO (Plain Old Java Object)\uc640 \uc720\uc0ac\ud558\uc9c0\ub9cc Swift\uc758 value type (struct) \uc0ac\uc6a9\n\nimport Foundation\n\n// MARK: - MetabolismData\n\n/// \ub300\uc0ac\uc728 \ub370\uc774\ud130 \ub3c4\uba54\uc778 \uc5d4\ud2f0\ud2f0\n/// BMR(\uae30\ucd08\ub300\uc0ac\ub7c9)\uacfc TDEE(\ucd1d \uc77c\uc77c \uc5d0\ub108\uc9c0 \uc18c\ube44\ub7c9) \uacc4\uc0b0 \uacb0\uacfc\ub97c \ub098\ud0c0\ub0c5\ub2c8\ub2e4.\n/// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Clean Architecture\uc758 Domain Layer\n/// - Core Data\ub098 \ub2e4\ub978 infrastructure \uc758\uc874\uc131\uc774 \uc5c6\ub294 \uc21c\uc218\ud55c \ube44\uc988\ub2c8\uc2a4 \uc5d4\ud2f0\ud2f0\n/// - Decimal\uc744 \uc0ac\uc6a9\ud558\uc5ec \uc815\ubc00\ub3c4 \ubcf4\uc7a5 (Double\uc758 \ubd80\ub3d9\uc18c\uc218\uc810 \uc624\ucc28 \ubc29\uc9c0)\n/// - \uac01 \uc2e0\uccb4 \uae30\ub85d\uacfc \ud568\uaed8 \uc800\uc7a5\ub418\uc5b4 \uc2dc\uac04\uc5d0 \ub530\ub978 \ub300\uc0ac\uc728 \ubcc0\ud654 \ucd94\uc801 \uac00\ub2a5\nstruct MetabolismData: Codable, Identifiable, Equatable {\n\n    // MARK: - Properties\n\n    /// \uace0\uc720 \uc2dd\ubcc4\uc790\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: UUID vs Int\n    /// - UUID: \ubd84\uc0b0 \uc2dc\uc2a4\ud15c\uc5d0\uc11c \ucda9\ub3cc \uc5c6\uc774 \uace0\uc720 ID \uc0dd\uc131 \uac00\ub2a5\n    /// - SwiftUI\uc758 Identifiable \ud504\ub85c\ud1a0\ucf5c \uc694\uad6c\uc0ac\ud56d\n    let id: UUID\n\n    /// \uce21\uc815 \ub0a0\uc9dc \ubc0f \uc2dc\uac04\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Date Type\n    /// - \uc2dc\uac04\ub300\uc640 \ubb34\uad00\ud55c \uc808\ub300 \uc2dc\uac04 \ud45c\ud604\n    /// - \ub300\uc0ac\uc728\uc758 \uc2dc\uacc4\uc5f4 \ucd94\uc801\uc5d0 \ud544\uc218\n    let date: Date\n\n    /// \uae30\ucd08\ub300\uc0ac\ub7c9 (Basal Metabolic Rate) (kcal/day)\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: BMR\n    /// - \uc0dd\uba85 \uc720\uc9c0\ub97c \uc704\ud574 \ud544\uc694\ud55c \ucd5c\uc18c\ud55c\uc758 \uc5d0\ub108\uc9c0\n    /// - Mifflin-St Jeor \uacf5\uc2dd\uc73c\ub85c \uacc4\uc0b0: (10 \u00d7 weight) + (6.25 \u00d7 height) - (5 \u00d7 age) + gender adjustment\n    /// - \uc544\ubb34 \ud65c\ub3d9\ub3c4 \ud558\uc9c0 \uc54a\uace0 \ud558\ub8e8 \uc885\uc77c \ub204\uc6cc\uc788\uc5b4\ub3c4 \uc18c\ube44\ub418\ub294 \uce7c\ub85c\ub9ac\n    let bmr: Decimal\n\n    /// \ucd1d \uc77c\uc77c \uc5d0\ub108\uc9c0 \uc18c\ube44\ub7c9 (Total Daily Energy Expenditure) (kcal/day)\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: TDEE\n    /// - BMR\uc5d0 \ud65c\ub3d9 \uc218\uc900\uc744 \uacf1\ud55c \uac12\n    /// - TDEE = BMR \u00d7 Activity Level Multiplier\n    /// - \uc2e4\uc81c\ub85c \ud558\ub8e8\uc5d0 \uc18c\ube44\ud558\ub294 \ucd1d \uce7c\ub85c\ub9ac (\ud65c\ub3d9\ub7c9 \ud3ec\ud568)\n    let tdee: Decimal\n\n    /// \uce21\uc815 \ub2f9\uc2dc\uc758 \uccb4\uc911 (kg)\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Decimal Type\n    /// - \uc815\ubc00\ud55c \uc22b\uc790 \uacc4\uc0b0\uc744 \uc704\ud574 Decimal \uc0ac\uc6a9\n    /// - Double \ub300\uc2e0 Decimal\uc744 \uc0ac\uc6a9\ud558\uc5ec \ubd80\ub3d9\uc18c\uc218\uc810 \uc624\ucc28 \ubc29\uc9c0\n    /// \ud83d\udca1 Java \ube44\uad50: java.math.BigDecimal\uacfc \uc720\uc0ac\n    let weight: Decimal\n\n    /// \uce21\uc815 \ub2f9\uc2dc\uc758 \uccb4\uc9c0\ubc29\ub960 (%)\n    /// \uc804\uccb4 \uccb4\uc911\uc5d0\uc11c \uccb4\uc9c0\ubc29\uc774 \ucc28\uc9c0\ud558\ub294 \ube44\uc728 (1-60% \ubc94\uc704)\n    let bodyFatPercent: Decimal\n\n    /// \ud65c\ub3d9 \uc218\uc900\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Enum as Property\n    /// - TDEE \uacc4\uc0b0\uc5d0 \uc0ac\uc6a9\ub41c \ud65c\ub3d9 \uc218\uc900 \uc800\uc7a5\n    /// - \uacfc\uac70 \uacc4\uc0b0 \uc2dc\uc810\uc758 \uc124\uc815\uc744 \ubcf4\uc874\ud558\uc5ec \ub370\uc774\ud130 \uc77c\uad00\uc131 \uc720\uc9c0\n    let activityLevel: ActivityLevel\n\n    // MARK: - Initialization\n\n    /// MetabolismData \uc0dd\uc131\uc790\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Memberwise Initializer\n    /// - Struct\ub294 \uae30\ubcf8\uc801\uc73c\ub85c memberwise initializer \uc81c\uacf5\n    /// - \uba85\uc2dc\uc801\uc73c\ub85c \uc791\uc131\ud558\uc5ec \ubb38\uc11c\ud654 \ubc0f validation \ucd94\uac00 \uac00\ub2a5\n    /// - Parameter id: \uace0\uc720 \uc2dd\ubcc4\uc790 (\uae30\ubcf8\uac12: \uc0c8 UUID)\n    /// - Parameter date: \uce21\uc815 \ub0a0\uc9dc (\uae30\ubcf8\uac12: \ud604\uc7ac \uc2dc\uac04)\n    /// - Parameter bmr: \uae30\ucd08\ub300\uc0ac\ub7c9 (kcal/day)\n    /// - Parameter tdee: \ucd1d \uc77c\uc77c \uc5d0\ub108\uc9c0 \uc18c\ube44\ub7c9 (kcal/day)\n    /// - Parameter weight: \uccb4\uc911 (kg)\n    /// - Parameter bodyFatPercent: \uccb4\uc9c0\ubc29\ub960 (%)\n    /// - Parameter activityLevel: \ud65c\ub3d9 \uc218\uc900\n    init(\n        id: UUID = UUID(),\n        date: Date = Date(),\n        bmr: Decimal,\n        tdee: Decimal,\n        weight: Decimal,\n        bodyFatPercent: Decimal,\n        activityLevel: ActivityLevel\n    ) {\n        self.id = id\n        self.date = date\n        self.bmr = bmr\n        self.tdee = tdee\n        self.weight = weight\n        self.bodyFatPercent = bodyFatPercent\n        self.activityLevel = activityLevel\n    }\n\n    // MARK: - Computed Properties\n\n    /// \ud65c\ub3d9\uc73c\ub85c \uc778\ud55c \ucd94\uac00 \uce7c\ub85c\ub9ac \uc18c\ube44\ub7c9 (kcal/day)\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Computed Property\n    /// - \uc800\uc7a5\ub418\uc9c0 \uc54a\uace0 \ub9e4\ubc88 \uacc4\uc0b0\ub418\ub294 \ud504\ub85c\ud37c\ud2f0\n    /// - get-only property (\uc77d\uae30 \uc804\uc6a9)\n    /// \ud83d\udca1 Java \ube44\uad50: getter \uba54\uc11c\ub4dc\uc640 \uc720\uc0ac\ud558\uc9c0\ub9cc \ud504\ub85c\ud37c\ud2f0\ucc98\ub7fc \uc811\uadfc\n    ///\n    /// \ud65c\ub3d9 \uce7c\ub85c\ub9ac = TDEE - BMR\n    /// BMR \uc678\uc5d0 \ud65c\ub3d9\uc73c\ub85c \uc778\ud574 \ucd94\uac00\ub85c \uc18c\ube44\ub418\ub294 \uce7c\ub85c\ub9ac\n    var activityCalories: Decimal {\n        tdee - bmr\n    }\n\n    /// \uce7c\ub85c\ub9ac \uacb0\ud54d/\uc789\uc5ec \uacc4\uc0b0 \ud5ec\ud37c \uba54\uc11c\ub4dc\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Instance Method\n    /// - \uc12d\ucde8 \uce7c\ub85c\ub9ac\uc640 \ube44\uad50\ud558\uc5ec \uce7c\ub85c\ub9ac \uade0\ud615 \uacc4\uc0b0\n    /// - \uc591\uc218: \uce7c\ub85c\ub9ac \uc789\uc5ec (\uccb4\uc911 \uc99d\uac00 \uacbd\ud5a5)\n    /// - \uc74c\uc218: \uce7c\ub85c\ub9ac \uacb0\ud54d (\uccb4\uc911 \uac10\uc18c \uacbd\ud5a5)\n    ///\n    /// - Parameter calorieIntake: \uc77c\uc77c \uc12d\ucde8 \uce7c\ub85c\ub9ac (kcal)\n    /// - Returns: \uce7c\ub85c\ub9ac \uade0\ud615 (\uc12d\ucde8 - TDEE)\n    func calculateCalorieBalance(calorieIntake: Decimal) -> Decimal {\n        return calorieIntake - tdee\n    }\n\n    /// \uc8fc\uac04 \uccb4\uc911 \ubcc0\ud654 \uc608\uce21 (kg/week)\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Business Logic in Domain\n    /// - 7,700 kcal \u2248 1 kg \uccb4\uc9c0\ubc29\n    /// - \ud558\ub8e8 \uce7c\ub85c\ub9ac \ucc28\uc774 \u00d7 7\uc77c = \uc8fc\uac04 \ucd1d \uce7c\ub85c\ub9ac \ucc28\uc774\n    /// - \uc8fc\uac04 \ucd1d \uce7c\ub85c\ub9ac \ucc28\uc774 / 7,700 = \uc8fc\uac04 \uccb4\uc911 \ubcc0\ud654 (kg)\n    ///\n    /// - Parameter calorieIntake: \uc77c\uc77c \uc12d\ucde8 \uce7c\ub85c\ub9ac (kcal)\n    /// - Returns: \uc608\uc0c1 \uc8fc\uac04 \uccb4\uc911 \ubcc0\ud654 (kg/week), \uc591\uc218\ub294 \uc99d\uac00, \uc74c\uc218\ub294 \uac10\uc18c\n    func estimatedWeeklyWeightChange(calorieIntake: Decimal) -> Decimal {\n        let dailyBalance = calculateCalorieBalance(calorieIntake: calorieIntake)\n        let weeklyBalance = dailyBalance * 7\n        // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Magic Number\n        // 7700 kcal \u2248 1 kg body fat (\uacfc\ud559\uc801\uc73c\ub85c \uc99d\uba85\ub41c \uc0c1\uc218)\n        return weeklyBalance / 7700\n    }\n}\n\n// MARK: - Sample Data\n\nextension MetabolismData {\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Preview Helper\n    /// SwiftUI Preview \ubc0f \ud14c\uc2a4\ud2b8\ub97c \uc704\ud55c \uc0d8\ud50c \ub370\uc774\ud130\n    /// \ud83d\udca1 Java \ube44\uad50: Test fixture\uc640 \uc720\uc0ac\n    static let sample = MetabolismData(\n        bmr: Decimal(1650),\n        tdee: Decimal(2280),\n        weight: Decimal(70.5),\n        bodyFatPercent: Decimal(18.5),\n        activityLevel: .moderatelyActive\n    )\n\n    /// \ub2e4\uc591\ud55c \uc2dc\ub098\ub9ac\uc624\ub97c \uc704\ud55c \uc0d8\ud50c \ub370\uc774\ud130 \ubc30\uc5f4\n    static let samples = [\n        MetabolismData(\n            date: Calendar.current.date(byAdding: .day, value: -7, to: Date())!,\n            bmr: Decimal(1680),\n            tdee: Decimal(2016),\n            weight: Decimal(72.0),\n            bodyFatPercent: Decimal(20.0),\n            activityLevel: .sedentary\n        ),\n        MetabolismData(\n            date: Calendar.current.date(byAdding: .day, value: -3, to: Date())!,\n            bmr: Decimal(1665),\n            tdee: Decimal(2290),\n            weight: Decimal(71.2),\n            bodyFatPercent: Decimal(19.3),\n            activityLevel: .lightlyActive\n        ),\n        MetabolismData(\n            date: Date(),\n            bmr: Decimal(1650),\n            tdee: Decimal(2280),\n            weight: Decimal(70.5),\n            bodyFatPercent: Decimal(18.5),\n            activityLevel: .moderatelyActive\n        )\n    ]\n}\n",
        "last_modified": "2026-01-13T19:18:50.331773"
      },
      "task_intent": {
        "title": "Body Composition Tracking with BMR/TDEE",
        "description": "Complete body composition logging system including height, weight, body fat percentage, muscle mass, with automatic BMR (Mifflin-St Jeor) and TDEE calculations. Visualize changes over time with Swift Charts graphs showing trends and goal progress.",
        "from_plan": true
      },
      "commits_behind_main": 1,
      "status": "active",
      "merged_at": null
    }
  },
  "created_at": "2026-01-12T11:58:31.182067",
  "last_updated": "2026-01-13T07:46:22.778097"
}