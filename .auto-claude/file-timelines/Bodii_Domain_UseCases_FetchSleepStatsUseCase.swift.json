{
  "file_path": "Bodii/Domain/UseCases/FetchSleepStatsUseCase.swift",
  "main_branch_history": [],
  "task_views": {
    "009-sleep-tracking-with-5-status-system": {
      "task_id": "009-sleep-tracking-with-5-status-system",
      "branch_point": {
        "commit_hash": "4e56d606f7b0d4cb74120dd392544f3fe2d4f5b4",
        "content": "",
        "timestamp": "2026-01-14T21:03:40.462795"
      },
      "worktree_state": {
        "content": "//\n//  FetchSleepStatsUseCase.swift\n//  Bodii\n//\n//  Created by Auto-Claude on 2026-01-14.\n//\n\n// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Statistics Use Case Pattern\n// \uc218\uba74 \ud1b5\uacc4 \ubc0f \ucc28\ud2b8 \ub370\uc774\ud130 \uacc4\uc0b0\uc744 \ucea1\uc290\ud654\ud558\ub294 Use Case \ud328\ud134\n// \ud83d\udca1 Java \ube44\uad50: Service layer\uc758 \ud1b5\uacc4 \uacc4\uc0b0 \uba54\uc11c\ub4dc\uc640 \uc720\uc0ac\n\nimport Foundation\n\n// MARK: - FetchSleepStatsUseCase\n\n/// \uc218\uba74 \ud1b5\uacc4 \uc870\ud68c Use Case\n/// \ucc28\ud2b8 \ubc0f \ub300\uc2dc\ubcf4\ub4dc \ud45c\uc2dc\ub97c \uc704\ud574 \uc218\uba74 \ud1b5\uacc4 \ub370\uc774\ud130\ub97c \uacc4\uc0b0\ud569\ub2c8\ub2e4.\n/// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Clean Architecture - Use Case Layer\n/// - \ud2b9\uc815 \ube44\uc988\ub2c8\uc2a4 \ub85c\uc9c1(\ud1b5\uacc4 \ub370\uc774\ud130 \uacc4\uc0b0)\uc744 \ub3c5\ub9bd\uc801\uc778 \uc720\ub2db\uc73c\ub85c \ucea1\uc290\ud654\n/// - Repository\uc758 raw data\ub97c \ud1b5\uacc4 \ubc0f \ucc28\ud2b8\uc5d0 \ucd5c\uc801\ud654\ub41c \ud615\ud0dc\ub85c \ubcc0\ud658\n/// - UI\ub098 \ub370\uc774\ud130\ubca0\uc774\uc2a4\uc5d0 \uc758\uc874\ud558\uc9c0 \uc54a\ub294 \uc21c\uc218\ud55c \ube44\uc988\ub2c8\uc2a4 \ub85c\uc9c1\n/// \ud83d\udca1 Java \ube44\uad50: Interactor \ub610\ub294 Service \ud074\ub798\uc2a4\uc758 \ub2e8\uc77c \ucc45\uc784 \uba54\uc11c\ub4dc\nstruct FetchSleepStatsUseCase {\n\n    // MARK: - Types\n\n    /// \ud1b5\uacc4 \uae30\uac04 \uc5f4\uac70\ud615\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Enum with Associated Values\n    /// - \uc0ac\uc6a9\uc790\uac00 \uc120\ud0dd\ud560 \uc218 \uc788\ub294 \ucc28\ud2b8 \uae30\uac04 \uc815\uc758\n    /// - \uac01 \ucf00\uc774\uc2a4\uac00 days \uac12\uc744 \uac00\uc9d0\n    /// \ud83d\udca1 Java \ube44\uad50: Enum with fields\uc640 \uc720\uc0ac\n    enum StatsPeriod: Int, CaseIterable, Codable {\n        /// \ucd5c\uadfc 7\uc77c\n        case week = 7\n\n        /// \ucd5c\uadfc 30\uc77c\n        case month = 30\n\n        /// \ucd5c\uadfc 90\uc77c\n        case quarter = 90\n\n        /// \uc77c\uc218 \uac12\n        /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Computed Property\n        /// rawValue\ub97c days\ub85c \uba85\uc2dc\uc801\uc73c\ub85c \ud45c\ud604\n        var days: Int {\n            return self.rawValue\n        }\n\n        /// \ud45c\uc2dc \uc774\ub984\n        /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Localization\n        /// UI\uc5d0 \ud45c\uc2dc\ud560 \ud55c\uae00 \uc774\ub984\n        var displayName: String {\n            switch self {\n            case .week:\n                return \"7\uc77c\"\n            case .month:\n                return \"30\uc77c\"\n            case .quarter:\n                return \"90\uc77c\"\n            }\n        }\n\n        /// \uc2dc\uc791 \ub0a0\uc9dc \uacc4\uc0b0\n        /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Date Manipulation\n        /// \ud604\uc7ac \ub0a0\uc9dc\uc5d0\uc11c days\ub9cc\ud07c \uc774\uc804 \ub0a0\uc9dc \uacc4\uc0b0\n        /// - Parameter from: \uae30\uc900 \ub0a0\uc9dc (\uae30\ubcf8\uac12: \ud604\uc7ac)\n        /// - Returns: \uc2dc\uc791 \ub0a0\uc9dc\n        func startDate(from date: Date = Date()) -> Date {\n            Calendar.current.date(byAdding: .day, value: -days, to: date) ?? date\n        }\n    }\n\n    /// \ucc28\ud2b8 \ub370\uc774\ud130 \ud3ec\uc778\ud2b8\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Value Object\n    /// - \ucc28\ud2b8\uc5d0 \ud45c\uc2dc\ud560 \ub2e8\uc77c \ub370\uc774\ud130 \ud3ec\uc778\ud2b8\n    /// - \ub0a0\uc9dc\uc640 \uc218\uba74 \ub370\uc774\ud130\ub97c \uadf8\ub8f9\ud654\n    /// \ud83d\udca1 Java \ube44\uad50: Record (Java 14+) \ub610\ub294 DTO\uc640 \uc720\uc0ac\n    struct SleepDataPoint: Codable, Identifiable, Equatable {\n        /// \uace0\uc720 \uc2dd\ubcc4\uc790 (\ucc28\ud2b8 \ub80c\ub354\ub9c1 \ucd5c\uc801\ud654)\n        let id: UUID\n\n        /// \uce21\uc815 \ub0a0\uc9dc\n        let date: Date\n\n        /// \uc218\uba74 \uc2dc\uac04 (\ubd84)\n        let duration: Int32\n\n        /// \uc218\uba74 \uc0c1\ud0dc\n        let status: SleepStatus\n\n        /// \uc218\uba74 \uc2dc\uac04\uc744 \uc2dc:\ubd84 \ud615\uc2dd\uc73c\ub85c \ubc18\ud658\n        /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Computed Property\n        /// UI\uc5d0\uc11c \ud45c\uc2dc\ud560 \ub54c \uc0ac\uc6a9\ud558\uae30 \uc26c\uc6b4 \ud615\ud0dc\ub85c \uc81c\uacf5\n        /// - Returns: (hours, minutes) \ud29c\ud50c\n        var durationFormatted: (hours: Int, minutes: Int) {\n            let hours = Int(duration) / 60\n            let minutes = Int(duration) % 60\n            return (hours, minutes)\n        }\n\n        /// \ud45c\uc2dc\uc6a9 \ub0a0\uc9dc \ubb38\uc790\uc5f4\n        /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Date Formatting\n        /// UI\uc5d0\uc11c \uc0ac\uc6a9\ud560 \uc218 \uc788\ub294 \ud3ec\ub9f7\ub41c \ub0a0\uc9dc \ubb38\uc790\uc5f4\n        func formattedDate(style: DateFormatter.Style = .short) -> String {\n            let formatter = DateFormatter()\n            formatter.dateStyle = style\n            formatter.timeStyle = .none\n            formatter.locale = Locale(identifier: \"ko_KR\")\n            return formatter.string(from: date)\n        }\n    }\n\n    /// \uc218\uba74 \uc0c1\ud0dc\ubcc4 \ud1b5\uacc4\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Nested Statistics Type\n    /// \uac01 \uc218\uba74 \uc0c1\ud0dc\ubcc4 \ubc1c\uc0dd \ube48\ub3c4\uc640 \ube44\uc728\uc744 \ub2f4\ub294 \ud0c0\uc785\n    struct StatusStats: Codable, Equatable {\n        /// \uc218\uba74 \uc0c1\ud0dc\n        let status: SleepStatus\n\n        /// \ubc1c\uc0dd \ud69f\uc218\n        let count: Int\n\n        /// \uc804\uccb4 \ub300\ube44 \ube44\uc728 (0.0 ~ 1.0)\n        /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Percentage Calculation\n        /// \ucc28\ud2b8\ub098 \ud1b5\uacc4 \ud45c\uc2dc\uc5d0 \uc0ac\uc6a9\n        let percentage: Double\n\n        /// \ube44\uc728\uc744 \ubc31\ubd84\uc728 \ubb38\uc790\uc5f4\ub85c \ubc18\ud658\n        /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Formatted String\n        /// UI\uc5d0\uc11c \ubc14\ub85c \uc0ac\uc6a9\ud560 \uc218 \uc788\ub294 \ud3ec\ub9f7\ub41c \ubb38\uc790\uc5f4\n        func percentageFormatted() -> String {\n            return String(format: \"%.1f%%\", percentage * 100)\n        }\n    }\n\n    /// \ud1b5\uacc4 \uc870\ud68c\uc5d0 \ud544\uc694\ud55c \uc785\ub825 \ub370\uc774\ud130\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Nested Type\n    /// - Use Case \ub0b4\ubd80\uc5d0 \uad00\ub828\ub41c \ud0c0\uc785\uc744 \uc911\ucca9\ud558\uc5ec \ub124\uc784\uc2a4\ud398\uc774\uc2a4 \uc815\ub9ac\n    /// - \uc678\ubd80\uc5d0\uc11c\ub294 FetchSleepStatsUseCase.Input\uc73c\ub85c \uc811\uadfc\n    /// \ud83d\udca1 Java \ube44\uad50: static nested class\uc640 \uc720\uc0ac\n    struct Input {\n        /// \uc870\ud68c \uae30\uac04\n        let period: StatsPeriod\n\n        /// \uc885\ub8cc \ub0a0\uc9dc (\uae30\ubcf8\uac12: \ud604\uc7ac)\n        /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Default Parameter\n        /// \ub300\ubd80\ubd84\uc758 \uacbd\uc6b0 \ud604\uc7ac\uae4c\uc9c0\uc758 \ub370\uc774\ud130\ub97c \uc870\ud68c\ud558\uc9c0\ub9cc, \ud2b9\uc815 \uc2dc\uc810\uae4c\uc9c0\uc758 \ub370\uc774\ud130\ub3c4 \uc870\ud68c \uac00\ub2a5\n        let endDate: Date\n\n        /// \uc2dc\uc791 \ub0a0\uc9dc \uacc4\uc0b0\n        /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Computed Property\n        /// period\uc640 endDate\ub97c \uae30\ubc18\uc73c\ub85c \uc2dc\uc791 \ub0a0\uc9dc \uc790\ub3d9 \uacc4\uc0b0\n        var startDate: Date {\n            period.startDate(from: endDate)\n        }\n\n        /// \ucd08\uae30\ud654\n        /// - Parameters:\n        ///   - period: \uc870\ud68c \uae30\uac04\n        ///   - endDate: \uc885\ub8cc \ub0a0\uc9dc (\uae30\ubcf8\uac12: \ud604\uc7ac)\n        init(period: StatsPeriod, endDate: Date = Date()) {\n            self.period = period\n            self.endDate = endDate\n        }\n    }\n\n    /// \ud1b5\uacc4 \uc870\ud68c \uacb0\uacfc\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Result Type\n    /// \uc870\ud68c\ub41c \ub370\uc774\ud130\uc640 \ud1b5\uacc4 \uc815\ubcf4\ub97c \ud568\uaed8 \ubc18\ud658\n    /// \ud83d\udca1 Java \ube44\uad50: DTO (Data Transfer Object)\uc640 \uc720\uc0ac\n    struct Output {\n        /// \ucc28\ud2b8 \ub370\uc774\ud130 \ud3ec\uc778\ud2b8 \ubc30\uc5f4 (\ub0a0\uc9dc \uc624\ub984\ucc28\uc21c \uc815\ub82c)\n        /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Collection Type\n        /// - \ucc28\ud2b8 \ub77c\uc774\ube0c\ub7ec\ub9ac\uac00 \uc694\uad6c\ud558\ub294 \ud615\ud0dc\ub85c \uc815\ub82c\n        /// - Swift Charts\ub294 \ub0a0\uc9dc\uc21c \uc815\ub82c\uc744 \uad8c\uc7a5\n        let dataPoints: [SleepDataPoint]\n\n        /// \uc870\ud68c \uae30\uac04\n        let period: StatsPeriod\n\n        /// \uc2dc\uc791 \ub0a0\uc9dc\n        let startDate: Date\n\n        /// \uc885\ub8cc \ub0a0\uc9dc\n        let endDate: Date\n\n        /// \ub370\uc774\ud130 \uc874\uc7ac \uc5ec\ubd80\n        /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Computed Property\n        /// UI\uc5d0\uc11c empty state \ud45c\uc2dc \uc5ec\ubd80 \ud310\ub2e8\uc5d0 \uc0ac\uc6a9\n        var isEmpty: Bool {\n            dataPoints.isEmpty\n        }\n\n        /// \ub370\uc774\ud130 \ud3ec\uc778\ud2b8 \uac1c\uc218 (\ucd1d \uc218\uba74 \uae30\ub85d \ud69f\uc218)\n        var count: Int {\n            dataPoints.count\n        }\n\n        // MARK: - Duration Statistics\n\n        /// \ucd1d \uc218\uba74 \uc2dc\uac04 (\ubd84)\n        /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Aggregate Calculation\n        /// \uae30\uac04 \ub0b4 \uc804\uccb4 \uc218\uba74 \uc2dc\uac04 \ud569\uacc4\n        var totalDuration: Int32 {\n            dataPoints.reduce(0) { $0 + $1.duration }\n        }\n\n        /// \ud3c9\uade0 \uc218\uba74 \uc2dc\uac04 (\ubd84)\n        /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Average Calculation\n        /// \ucc28\ud2b8 \uc694\uc57d \uc815\ubcf4\ub85c \ud45c\uc2dc\n        var averageDuration: Int32? {\n            guard !isEmpty else { return nil }\n            return totalDuration / Int32(count)\n        }\n\n        /// \ud3c9\uade0 \uc218\uba74 \uc2dc\uac04\uc744 \uc2dc:\ubd84 \ud615\uc2dd\uc73c\ub85c \ubc18\ud658\n        /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Computed Property\n        /// UI\uc5d0\uc11c \ud45c\uc2dc\ud560 \ub54c \uc0ac\uc6a9\ud558\uae30 \uc26c\uc6b4 \ud615\ud0dc\ub85c \uc81c\uacf5\n        var averageDurationFormatted: (hours: Int, minutes: Int)? {\n            guard let avg = averageDuration else { return nil }\n            let hours = Int(avg) / 60\n            let minutes = Int(avg) % 60\n            return (hours, minutes)\n        }\n\n        /// \ucd5c\uc18c \uc218\uba74 \uc2dc\uac04 (\ubd84)\n        var minDuration: Int32? {\n            dataPoints.map { $0.duration }.min()\n        }\n\n        /// \ucd5c\ub300 \uc218\uba74 \uc2dc\uac04 (\ubd84)\n        var maxDuration: Int32? {\n            dataPoints.map { $0.duration }.max()\n        }\n\n        /// \uc911\uac04\uac12 \uc218\uba74 \uc2dc\uac04 (\ubd84)\n        /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Median Calculation\n        /// \ud3c9\uade0\ubcf4\ub2e4 \uc774\uc0c1\uce58\uc5d0 \ub35c \ubbfc\uac10\ud55c \uc911\uc2ec \uacbd\ud5a5\uce58\n        var medianDuration: Int32? {\n            guard !isEmpty else { return nil }\n            let sorted = dataPoints.map { $0.duration }.sorted()\n            let middleIndex = sorted.count / 2\n            if sorted.count % 2 == 0 {\n                // \uc9dd\uc218 \uac1c\uc778 \uacbd\uc6b0 \uc911\uac04 \ub450 \uac12\uc758 \ud3c9\uade0\n                return (sorted[middleIndex - 1] + sorted[middleIndex]) / 2\n            } else {\n                // \ud640\uc218 \uac1c\uc778 \uacbd\uc6b0 \uc911\uac04\uac12\n                return sorted[middleIndex]\n            }\n        }\n\n        /// \uc218\uba74 \uc2dc\uac04 \ubcc0\ud654\ub7c9 (\ubd84) - \uae30\uac04 \ub0b4 \uccab \uae30\ub85d\uacfc \ub9c8\uc9c0\ub9c9 \uae30\ub85d\uc758 \ucc28\uc774\n        /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Trend Calculation\n        /// \uc591\uc218: \uc218\uba74 \uc2dc\uac04 \uc99d\uac00, \uc74c\uc218: \uc218\uba74 \uc2dc\uac04 \uac10\uc18c\n        var durationChange: Int32? {\n            guard let first = dataPoints.first?.duration,\n                  let last = dataPoints.last?.duration else {\n                return nil\n            }\n            return last - first\n        }\n\n        /// \uc218\uba74 \uc2dc\uac04 \ud45c\uc900\ud3b8\ucc28 (\ubd84)\n        /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Standard Deviation\n        /// \uc218\uba74 \uc2dc\uac04\uc758 \uc77c\uad00\uc131\uc744 \uce21\uc815 (\ub0ae\uc744\uc218\ub85d \uaddc\uce59\uc801)\n        var durationStandardDeviation: Double? {\n            guard !isEmpty, let avg = averageDuration else { return nil }\n            let variance = dataPoints.reduce(0.0) { result, point in\n                let diff = Double(point.duration) - Double(avg)\n                return result + (diff * diff)\n            } / Double(count)\n            return sqrt(variance)\n        }\n\n        // MARK: - Status Statistics\n\n        /// \uc218\uba74 \uc0c1\ud0dc\ubcc4 \ubd84\ud3ec (\uc6d0\uc2dc \ub370\uc774\ud130)\n        /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Dictionary Grouping\n        /// \ucc28\ud2b8\ub098 \ud1b5\uacc4 \ud45c\uc2dc\uc5d0 \uc0ac\uc6a9\n        /// - Returns: [SleepStatus: \uac1c\uc218]\n        var statusDistribution: [SleepStatus: Int] {\n            Dictionary(grouping: dataPoints) { $0.status }\n                .mapValues { $0.count }\n        }\n\n        /// \uc218\uba74 \uc0c1\ud0dc\ubcc4 \ud1b5\uacc4 (\ube44\uc728 \ud3ec\ud568)\n        /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Complex Statistics\n        /// UI\uc5d0\uc11c \ubc14\ub85c \uc0ac\uc6a9\ud560 \uc218 \uc788\ub294 \ud3ec\ub9f7\ub41c \ud1b5\uacc4\n        var statusStats: [StatusStats] {\n            guard !isEmpty else { return [] }\n            return statusDistribution.map { status, count in\n                StatusStats(\n                    status: status,\n                    count: count,\n                    percentage: Double(count) / Double(self.count)\n                )\n            }.sorted { $0.count > $1.count } // \ube48\ub3c4 \ub192\uc740 \uc21c\uc73c\ub85c \uc815\ub82c\n        }\n\n        /// \uac00\uc7a5 \ub9ce\uc740 \uc218\uba74 \uc0c1\ud0dc\n        /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Max By Value\n        /// \uc0ac\uc6a9\uc790\uc758 \uc8fc\ub41c \uc218\uba74 \uc0c1\ud0dc \ud45c\uc2dc\n        var mostCommonStatus: SleepStatus? {\n            statusDistribution.max(by: { $0.value < $1.value })?.key\n        }\n\n        /// \uac00\uc7a5 \uc801\uc740 \uc218\uba74 \uc0c1\ud0dc\n        var leastCommonStatus: SleepStatus? {\n            statusDistribution.min(by: { $0.value < $1.value })?.key\n        }\n\n        /// \uc88b\uc740 \uc218\uba74 \ube44\uc728 (good + excellent)\n        /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Quality Metric\n        /// \uc218\uba74 \ud488\uc9c8\uc758 \uc804\ubc18\uc801\uc778 \ud3c9\uac00 \uc9c0\ud45c\n        var goodSleepPercentage: Double {\n            guard !isEmpty else { return 0.0 }\n            let goodCount = (statusDistribution[.good] ?? 0) + (statusDistribution[.excellent] ?? 0)\n            return Double(goodCount) / Double(count)\n        }\n\n        /// \ub098\uc05c \uc218\uba74 \ube44\uc728 (bad)\n        var poorSleepPercentage: Double {\n            guard !isEmpty else { return 0.0 }\n            let badCount = statusDistribution[.bad] ?? 0\n            return Double(badCount) / Double(count)\n        }\n\n        // MARK: - Trend Analysis\n\n        /// \ucd5c\uadfc 7\uc77c vs \uc774\uc804 7\uc77c \ud3c9\uade0 \uc218\uba74 \uc2dc\uac04 \ube44\uad50\n        /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Comparative Analysis\n        /// \uc218\uba74 \ud328\ud134\uc758 \uac1c\uc120/\uc545\ud654 \ucd94\uc138 \ubd84\uc11d\n        /// - Returns: (\ucd5c\uadfc \ud3c9\uade0, \uc774\uc804 \ud3c9\uade0, \ubcc0\ud654\ub7c9) \ub610\ub294 nil\n        func recentTrend() -> (recent: Int32, previous: Int32, change: Int32)? {\n            guard count >= 14 else { return nil } // \ucd5c\uc18c 14\uc77c \ub370\uc774\ud130 \ud544\uc694\n\n            let midPoint = count / 2\n            let recentPoints = Array(dataPoints.suffix(midPoint))\n            let previousPoints = Array(dataPoints.prefix(midPoint))\n\n            let recentAvg = recentPoints.reduce(0) { $0 + $1.duration } / Int32(recentPoints.count)\n            let previousAvg = previousPoints.reduce(0) { $0 + $1.duration } / Int32(previousPoints.count)\n\n            return (recent: recentAvg, previous: previousAvg, change: recentAvg - previousAvg)\n        }\n\n        /// \uc218\uba74 \uc77c\uad00\uc131 \uc810\uc218 (0.0 ~ 1.0, \ub192\uc744\uc218\ub85d \uaddc\uce59\uc801)\n        /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Consistency Score\n        /// \ud45c\uc900\ud3b8\ucc28\ub97c \uc815\uaddc\ud654\ud558\uc5ec 0~1 \uc810\uc218\ub85c \ubcc0\ud658\n        var consistencyScore: Double? {\n            guard let stdDev = durationStandardDeviation,\n                  let avg = averageDuration else { return nil }\n\n            // \ud45c\uc900\ud3b8\ucc28\uac00 \ud3c9\uade0\uc758 25% \uc774\ud558\uba74 1.0 (\ub9e4\uc6b0 \uc77c\uad00\uc801)\n            // \ud45c\uc900\ud3b8\ucc28\uac00 \ud3c9\uade0\uc758 50% \uc774\uc0c1\uc774\uba74 0.0 (\ub9e4\uc6b0 \ubd88\uaddc\uce59\uc801)\n            let coefficientOfVariation = stdDev / Double(avg)\n            let normalizedScore = max(0.0, min(1.0, 1.0 - (coefficientOfVariation / 0.5)))\n            return normalizedScore\n        }\n\n        // MARK: - Summary\n\n        /// \uc694\uc57d \ubb38\uc790\uc5f4\n        /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: UI Helper Method\n        /// UI\uc5d0\uc11c \ubc14\ub85c \uc0ac\uc6a9\ud560 \uc218 \uc788\ub294 \uc694\uc57d \uc815\ubcf4\n        func summary() -> String {\n            guard !isEmpty else {\n                return \"\uc218\uba74 \uae30\ub85d\uc774 \uc5c6\uc2b5\ub2c8\ub2e4.\"\n            }\n\n            var summary = \"\"\"\n            \uae30\uac04: \\(period.displayName)\n            \ucd1d \\(count)\ud68c \uc218\uba74 \uae30\ub85d\n            \"\"\"\n\n            if let avg = averageDurationFormatted {\n                summary += \"\\n\ud3c9\uade0 \uc218\uba74: \\(avg.hours)\uc2dc\uac04 \\(avg.minutes)\ubd84\"\n            }\n\n            if let median = medianDuration {\n                let hours = Int(median) / 60\n                let minutes = Int(median) % 60\n                summary += \"\\n\uc911\uac04\uac12: \\(hours)\uc2dc\uac04 \\(minutes)\ubd84\"\n            }\n\n            if let mostCommon = mostCommonStatus {\n                let countForStatus = statusDistribution[mostCommon] ?? 0\n                let percentage = Double(countForStatus) / Double(count) * 100\n                summary += \"\\n\uac00\uc7a5 \ub9ce\uc740 \uc0c1\ud0dc: \\(mostCommon.displayName) (\\(String(format: \"%.0f\", percentage))%)\"\n            }\n\n            if let consistency = consistencyScore {\n                let consistencyPercent = consistency * 100\n                summary += \"\\n\uc77c\uad00\uc131 \uc810\uc218: \\(String(format: \"%.0f\", consistencyPercent))%\"\n            }\n\n            let goodPercent = goodSleepPercentage * 100\n            summary += \"\\n\uc88b\uc740 \uc218\uba74 \ube44\uc728: \\(String(format: \"%.0f\", goodPercent))%\"\n\n            if let trend = recentTrend() {\n                let trendHours = abs(trend.change) / 60\n                let trendMinutes = abs(trend.change) % 60\n                let direction = trend.change >= 0 ? \"\uc99d\uac00\" : \"\uac10\uc18c\"\n                summary += \"\\n\ucd5c\uadfc \ucd94\uc138: \\(trendHours)\uc2dc\uac04 \\(trendMinutes)\ubd84 \\(direction)\"\n            }\n\n            return summary\n        }\n    }\n\n    // MARK: - Error\n\n    /// \ud1b5\uacc4 \uc870\ud68c \uc911 \ubc1c\uc0dd\ud560 \uc218 \uc788\ub294 \uc5d0\ub7ec\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Custom Error Type\n    /// Swift\uc758 Error \ud504\ub85c\ud1a0\ucf5c\uc744 conform\ud558\uc5ec throw \uac00\ub2a5\ud55c \ud0c0\uc785 \uc815\uc758\n    /// \ud83d\udca1 Java \ube44\uad50: Custom Exception\uacfc \uc720\uc0ac\n    enum StatsError: Error, LocalizedError {\n        /// \uc870\ud68c \uc2e4\ud328\n        case fetchFailed(Error)\n\n        /// \uc720\ud6a8\ud558\uc9c0 \uc54a\uc740 \ub0a0\uc9dc \ubc94\uc704\n        case invalidDateRange\n\n        /// \uc5d0\ub7ec \uc124\uba85 (\uc0ac\uc6a9\uc790\uc5d0\uac8c \ud45c\uc2dc\ud560 \uba54\uc2dc\uc9c0)\n        /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: LocalizedError Protocol\n        /// errorDescription\uc744 \uad6c\ud604\ud558\uc5ec \uc0ac\uc6a9\uc790 \uce5c\ud654\uc801\uc778 \uc5d0\ub7ec \uba54\uc2dc\uc9c0 \uc81c\uacf5\n        var errorDescription: String? {\n            switch self {\n            case .fetchFailed(let error):\n                return \"\ud1b5\uacc4 \ub370\uc774\ud130 \uc870\ud68c \uc2e4\ud328: \\(error.localizedDescription)\"\n            case .invalidDateRange:\n                return \"\uc720\ud6a8\ud558\uc9c0 \uc54a\uc740 \ub0a0\uc9dc \ubc94\uc704\uc785\ub2c8\ub2e4.\"\n            }\n        }\n    }\n\n    // MARK: - Dependencies\n\n    /// \uc218\uba74 \ub370\uc774\ud130 \uc800\uc7a5\uc18c\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Dependency Injection\n    /// \uc678\ubd80\uc5d0\uc11c \uc8fc\uc785\ubc1b\uc544 \uc0ac\uc6a9 (\ud14c\uc2a4\ud2b8 \uac00\ub2a5\uc131 \ud5a5\uc0c1)\n    /// \ud83d\udca1 Java \ube44\uad50: @Autowired Repository\uc640 \uc720\uc0ac\n    private let sleepRepository: SleepRepositoryProtocol\n\n    // MARK: - Initialization\n\n    /// FetchSleepStatsUseCase \ucd08\uae30\ud654\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Dependency Injection via Constructor\n    /// - \ubaa8\ub4e0 \uc758\uc874\uc131\uc744 \uc0dd\uc131\uc790\ub97c \ud1b5\ud574 \uc8fc\uc785\ubc1b\uc74c\n    /// - \uc758\uc874\uc131 \uc5ed\uc804 \uc6d0\uce59 (Dependency Inversion Principle) \uc900\uc218\n    /// \ud83d\udca1 Java \ube44\uad50: @Autowired constructor injection\uacfc \uc720\uc0ac\n    ///\n    /// - Parameter sleepRepository: \uc218\uba74 \ub370\uc774\ud130 \uc800\uc7a5\uc18c (\ud544\uc218)\n    init(sleepRepository: SleepRepositoryProtocol) {\n        self.sleepRepository = sleepRepository\n    }\n\n    // MARK: - Execute\n\n    /// \ud1b5\uacc4 \ub370\uc774\ud130 \uc870\ud68c \uc2e4\ud589\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Async/Await\n    /// - Swift 5.5+\uc758 \ub3d9\uc2dc\uc131 \ubaa8\ub378\n    /// - \ube44\ub3d9\uae30 \uc791\uc5c5\uc744 \ub3d9\uae30 \ucf54\ub4dc\ucc98\ub7fc \uc791\uc131 \uac00\ub2a5\n    /// \ud83d\udca1 Java \ube44\uad50: CompletableFuture \ub610\ub294 Kotlin Coroutines\uc640 \uc720\uc0ac\n    ///\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Statistics Calculation Flow\n    /// 1. Repository\uc5d0\uc11c \uae30\uac04 \ub0b4 \ub370\uc774\ud130 \uc870\ud68c\n    /// 2. \ucc28\ud2b8 \ub370\uc774\ud130 \ud3ec\uc778\ud2b8\ub85c \ubcc0\ud658\n    /// 3. \ub0a0\uc9dc \uc624\ub984\ucc28\uc21c \uc815\ub82c (\ucc28\ud2b8 \ub77c\uc774\ube0c\ub7ec\ub9ac \uc694\uad6c\uc0ac\ud56d)\n    /// 4. Output\uc5d0\uc11c \uc790\ub3d9\uc73c\ub85c \ud1b5\uacc4 \uacc4\uc0b0 (computed properties)\n    ///\n    /// - Parameter input: \ud1b5\uacc4 \uc870\ud68c \uc785\ub825 \ub370\uc774\ud130\n    /// - Returns: \uc218\uba74 \ud1b5\uacc4 \ub370\uc774\ud130\n    /// - Throws: StatsError - \uc870\ud68c \uc2e4\ud328 \uc2dc\n    func execute(input: Input) async throws -> Output {\n        // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Date Range Validation\n        // \uc2dc\uc791 \ub0a0\uc9dc\uac00 \uc885\ub8cc \ub0a0\uc9dc\ubcf4\ub2e4 \uc774\ud6c4\uc778 \uacbd\uc6b0 \uc5d0\ub7ec\n        guard input.startDate <= input.endDate else {\n            throw StatsError.invalidDateRange\n        }\n\n        // Step 1: Repository\uc5d0\uc11c \uae30\uac04 \ub0b4 \ub370\uc774\ud130 \uc870\ud68c\n        // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Error Handling with do-catch\n        // Repository \uc5d0\ub7ec\ub97c StatsError\ub85c \ub798\ud551\ud558\uc5ec \uacc4\uce35\ubcc4 \uc5d0\ub7ec \ubd84\ub9ac\n        let records: [SleepRecord]\n        do {\n            records = try await sleepRepository.fetch(from: input.startDate, to: input.endDate)\n        } catch {\n            throw StatsError.fetchFailed(error)\n        }\n\n        // Step 2: \ucc28\ud2b8 \ub370\uc774\ud130 \ud3ec\uc778\ud2b8\ub85c \ubcc0\ud658\n        // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Map Transformation\n        // Domain entity\ub97c View\uc5d0 \ucd5c\uc801\ud654\ub41c \ud615\ud0dc\ub85c \ubcc0\ud658\n        let dataPoints = records.map { record -> SleepDataPoint in\n            SleepDataPoint(\n                id: record.id,\n                date: record.date,\n                duration: record.duration,\n                status: record.status\n            )\n        }\n\n        // Step 3: \ub0a0\uc9dc \uc624\ub984\ucc28\uc21c \uc815\ub82c\n        // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Sorting\n        // Swift Charts\ub294 \ub370\uc774\ud130\uac00 \uc2dc\uac04\uc21c\uc73c\ub85c \uc815\ub82c\ub418\uc5b4 \uc788\uc5b4\uc57c \uc62c\ubc14\ub974\uac8c \ud45c\uc2dc\ub428\n        let sortedDataPoints = dataPoints.sorted { $0.date < $1.date }\n\n        // Step 4: \uacb0\uacfc \ubc18\ud658\n        // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Computed Statistics\n        // Output\uc758 computed properties\uac00 \uc790\ub3d9\uc73c\ub85c \ud1b5\uacc4\ub97c \uacc4\uc0b0\n        return Output(\n            dataPoints: sortedDataPoints,\n            period: input.period,\n            startDate: input.startDate,\n            endDate: input.endDate\n        )\n    }\n\n    // MARK: - Convenience Methods\n\n    /// \uae30\uac04\ub9cc \uc9c0\uc815\ud55c \uac04\ud3b8 \uc870\ud68c \uba54\uc11c\ub4dc\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Convenience Method\n    /// \uac00\uc7a5 \uc77c\ubc18\uc801\uc778 \uc0ac\uc6a9 \ucf00\uc774\uc2a4\ub97c \uc704\ud55c \uac04\ud3b8 \uba54\uc11c\ub4dc\n    /// \ud83d\udca1 \uc0ac\uc6a9\ucc98: ViewModel\uc5d0\uc11c \uc27d\uac8c \ud638\ucd9c \uac00\ub2a5\n    ///\n    /// - Parameter period: \uc870\ud68c \uae30\uac04\n    /// - Returns: \uc218\uba74 \ud1b5\uacc4 \ub370\uc774\ud130\n    /// - Throws: StatsError\n    func execute(period: StatsPeriod) async throws -> Output {\n        let input = Input(period: period)\n        return try await execute(input: input)\n    }\n\n    /// \uc77c\uc218\ub97c \uc9c1\uc811 \uc9c0\uc815\ud55c \uc870\ud68c \uba54\uc11c\ub4dc\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Flexible API\n    /// \ud45c\uc900 \uae30\uac04 \uc678\uc758 \ucee4\uc2a4\ud140 \uae30\uac04 \uc870\ud68c \uac00\ub2a5\n    ///\n    /// - Parameters:\n    ///   - days: \uc870\ud68c\ud560 \uc77c\uc218\n    ///   - endDate: \uc885\ub8cc \ub0a0\uc9dc (\uae30\ubcf8\uac12: \ud604\uc7ac)\n    /// - Returns: \uc218\uba74 \ud1b5\uacc4 \ub370\uc774\ud130\n    /// - Throws: StatsError\n    func execute(days: Int, endDate: Date = Date()) async throws -> Output {\n        // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Dynamic Period Creation\n        // StatsPeriod enum\uc5d0 \uc5c6\ub294 \ucee4\uc2a4\ud140 \uae30\uac04\ub3c4 \uc9c0\uc6d0\n        let startDate = Calendar.current.date(byAdding: .day, value: -days, to: endDate) ?? endDate\n        let records = try await sleepRepository.fetch(from: startDate, to: endDate)\n\n        let dataPoints = records.map { record -> SleepDataPoint in\n            SleepDataPoint(\n                id: record.id,\n                date: record.date,\n                duration: record.duration,\n                status: record.status\n            )\n        }.sorted { $0.date < $1.date }\n\n        // \ucee4\uc2a4\ud140 \uae30\uac04\uc744 \uc704\ud574 \uac00\uc7a5 \uac00\uae4c\uc6b4 StatsPeriod \uc0ac\uc6a9\n        let period: StatsPeriod = {\n            if days <= 7 { return .week }\n            if days <= 30 { return .month }\n            return .quarter\n        }()\n\n        return Output(\n            dataPoints: dataPoints,\n            period: period,\n            startDate: startDate,\n            endDate: endDate\n        )\n    }\n}\n\n// MARK: - Sample Usage\n\nextension FetchSleepStatsUseCase {\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Sample Data for Testing\n    /// Use Case\uc758 \uc0ac\uc6a9 \uc608\uc2dc\uc640 \ud14c\uc2a4\ud2b8\ub97c \uc704\ud55c \uc0d8\ud50c \ub370\uc774\ud130\n    /// \ud83d\udca1 Java \ube44\uad50: JUnit\uc758 @Test fixture\uc640 \uc720\uc0ac\n\n    /// \uc0d8\ud50c \uc785\ub825 - \ucd5c\uadfc 7\uc77c\n    static let sampleInputWeek = Input(period: .week)\n\n    /// \uc0d8\ud50c \uc785\ub825 - \ucd5c\uadfc 30\uc77c\n    static let sampleInputMonth = Input(period: .month)\n\n    /// \uc0d8\ud50c \ucd9c\ub825 - 7\uc77c \ub370\uc774\ud130\n    static func sampleOutput() -> Output {\n        let now = Date()\n        let dataPoints = [\n            SleepDataPoint(\n                id: UUID(),\n                date: Calendar.current.date(byAdding: .day, value: -6, to: now)!,\n                duration: 420, // 7\uc2dc\uac04\n                status: .good\n            ),\n            SleepDataPoint(\n                id: UUID(),\n                date: Calendar.current.date(byAdding: .day, value: -5, to: now)!,\n                duration: 480, // 8\uc2dc\uac04\n                status: .excellent\n            ),\n            SleepDataPoint(\n                id: UUID(),\n                date: Calendar.current.date(byAdding: .day, value: -4, to: now)!,\n                duration: 360, // 6\uc2dc\uac04\n                status: .soso\n            ),\n            SleepDataPoint(\n                id: UUID(),\n                date: Calendar.current.date(byAdding: .day, value: -3, to: now)!,\n                duration: 450, // 7.5\uc2dc\uac04\n                status: .excellent\n            ),\n            SleepDataPoint(\n                id: UUID(),\n                date: Calendar.current.date(byAdding: .day, value: -2, to: now)!,\n                duration: 390, // 6.5\uc2dc\uac04\n                status: .good\n            ),\n            SleepDataPoint(\n                id: UUID(),\n                date: Calendar.current.date(byAdding: .day, value: -1, to: now)!,\n                duration: 300, // 5\uc2dc\uac04\n                status: .bad\n            ),\n            SleepDataPoint(\n                id: UUID(),\n                date: now,\n                duration: 420, // 7\uc2dc\uac04\n                status: .good\n            )\n        ]\n\n        let startDate = Calendar.current.date(byAdding: .day, value: -7, to: now)!\n\n        return Output(\n            dataPoints: dataPoints,\n            period: .week,\n            startDate: startDate,\n            endDate: now\n        )\n    }\n}\n\n// MARK: - Documentation\n\n/// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: FetchSleepStatsUseCase \uc774\ud574\n///\n/// FetchSleepStatsUseCase\uc758 \uc5ed\ud560:\n/// - Repository\uc758 raw data\ub97c \ud1b5\uacc4 \ubc0f \ucc28\ud2b8\uc5d0 \ucd5c\uc801\ud654\ub41c \ud615\ud0dc\ub85c \ubcc0\ud658\n/// - \ub2e4\uc591\ud55c \ud1b5\uacc4 \uc9c0\ud45c \uc790\ub3d9 \uacc4\uc0b0 (\ud3c9\uade0, \uc911\uac04\uac12, \ud45c\uc900\ud3b8\ucc28, \ubd84\ud3ec \ub4f1)\n/// - \ucd94\uc138 \ubd84\uc11d \ubc0f \uc218\uba74 \ud488\uc9c8 \ud3c9\uac00\n/// - \ucc28\ud2b8 \ub80c\ub354\ub9c1\uc5d0 \ucd5c\uc801\ud654\ub41c \ub370\uc774\ud130 \uc81c\uacf5\n///\n/// \uc81c\uacf5\ud558\ub294 \ud1b5\uacc4:\n/// 1. Duration Statistics (\uc218\uba74 \uc2dc\uac04 \ud1b5\uacc4):\n///    - \ud3c9\uade0, \ucd5c\uc18c, \ucd5c\ub300, \uc911\uac04\uac12\n///    - \ucd1d \uc218\uba74 \uc2dc\uac04\n///    - \uc2dc\uac04 \ubcc0\ud654\ub7c9 (\uccab \uae30\ub85d vs \ub9c8\uc9c0\ub9c9 \uae30\ub85d)\n///    - \ud45c\uc900\ud3b8\ucc28 (\uc77c\uad00\uc131 \uce21\uc815)\n///\n/// 2. Status Statistics (\uc218\uba74 \uc0c1\ud0dc \ud1b5\uacc4):\n///    - \uc0c1\ud0dc\ubcc4 \ubd84\ud3ec (\uac1c\uc218 \ubc0f \ube44\uc728)\n///    - \uac00\uc7a5 \ub9ce\uc740/\uc801\uc740 \uc0c1\ud0dc\n///    - \uc88b\uc740 \uc218\uba74 \ube44\uc728 (good + excellent)\n///    - \ub098\uc05c \uc218\uba74 \ube44\uc728 (bad)\n///\n/// 3. Trend Analysis (\ucd94\uc138 \ubd84\uc11d):\n///    - \ucd5c\uadfc vs \uc774\uc804 \uae30\uac04 \ube44\uad50\n///    - \uc77c\uad00\uc131 \uc810\uc218 (0~1, \ub192\uc744\uc218\ub85d \uaddc\uce59\uc801)\n///    - \uc218\uba74 \ud328\ud134 \uac1c\uc120/\uc545\ud654 \uc5ec\ubd80\n///\n/// \uc9c0\uc6d0\ud558\ub294 \uae30\uac04:\n/// - 7\uc77c: \uc8fc\uac04 \ud1b5\uacc4 (\ube60\ub978 \ubcc0\ud654 \ucd94\uc801)\n/// - 30\uc77c: \uc6d4\uac04 \ud1b5\uacc4 (\uc911\uae30 \ubcc0\ud654 \ucd94\uc801)\n/// - 90\uc77c: \ubd84\uae30 \ud1b5\uacc4 (\uc7a5\uae30 \ubcc0\ud654 \ucd94\uc801)\n/// - \ucee4\uc2a4\ud140: execute(days:) \uba54\uc11c\ub4dc\ub85c \uc784\uc758 \uae30\uac04 \uc870\ud68c\n///\n/// FetchSleepHistoryUseCase\uc640\uc758 \ucc28\uc774:\n/// - FetchSleepHistoryUseCase: \ub9ac\uc2a4\ud2b8 \ud45c\uc2dc\uc6a9 (\ub0a0\uc9dc \ub0b4\ub9bc\ucc28\uc21c)\n/// - FetchSleepStatsUseCase: \ucc28\ud2b8/\ud1b5\uacc4 \ud45c\uc2dc\uc6a9 (\ub0a0\uc9dc \uc624\ub984\ucc28\uc21c)\n/// - FetchSleepHistoryUseCase: \uae30\ubcf8 \ud1b5\uacc4\ub9cc \uc81c\uacf5\n/// - FetchSleepStatsUseCase: \uace0\uae09 \ud1b5\uacc4 \ubc0f \ucd94\uc138 \ubd84\uc11d \uc81c\uacf5\n///\n/// FetchBodyTrendsUseCase\uc640\uc758 \uc720\uc0ac\uc810:\n/// - \ub458 \ub2e4 \ucc28\ud2b8 \ub370\uc774\ud130\uc5d0 \ucd5c\uc801\ud654\n/// - \ub0a0\uc9dc \uc624\ub984\ucc28\uc21c \uc815\ub82c\n/// - \uae30\uac04\ubcc4 \uc870\ud68c (week/month/quarter)\n/// - \ud1b5\uacc4 \uc815\ubcf4 \uc790\ub3d9 \uacc4\uc0b0\n///\n/// Clean Architecture\uc5d0\uc11c\uc758 \uc704\uce58:\n/// - Domain Layer\uc758 Use Case\n/// - SleepRepositoryProtocol\uc5d0 \uc758\uc874\n/// - Presentation Layer (ViewModel)\uc5d0\uc11c \ud638\ucd9c\ub428\n///\n/// \ud83d\udca1 Java Spring\uacfc\uc758 \ube44\uad50:\n/// - Spring: @Service class with statistics method\n/// - Swift: Struct with async/await\n/// - Spring: Repository\ub97c @Autowired\ub85c \uc8fc\uc785\n/// - Swift: \uc0dd\uc131\uc790\ub85c \uc758\uc874\uc131 \uc8fc\uc785\n///\n/// \uc0ac\uc6a9 \uc608\uc2dc:\n/// ```swift\n/// let useCase = FetchSleepStatsUseCase(sleepRepository: repository)\n///\n/// // \uac04\ub2e8\ud55c \uc870\ud68c\n/// let stats = try await useCase.execute(period: .week)\n/// print(stats.summary())\n///\n/// // \ucc28\ud2b8\uc5d0 \ud45c\uc2dc\n/// Chart(stats.dataPoints) { dataPoint in\n///     BarMark(\n///         x: .value(\"Date\", dataPoint.date),\n///         y: .value(\"Duration\", dataPoint.duration)\n///     )\n///     .foregroundStyle(by: .value(\"Status\", dataPoint.status.displayName))\n/// }\n///\n/// // \ub300\uc2dc\ubcf4\ub4dc\uc5d0 \ud1b5\uacc4 \ud45c\uc2dc\n/// if let avg = stats.averageDurationFormatted {\n///     Text(\"\ud3c9\uade0 \uc218\uba74: \\(avg.hours)\uc2dc\uac04 \\(avg.minutes)\ubd84\")\n/// }\n/// Text(\"\uc88b\uc740 \uc218\uba74 \ube44\uc728: \\(String(format: \"%.0f\", stats.goodSleepPercentage * 100))%\")\n/// if let consistency = stats.consistencyScore {\n///     Text(\"\uc77c\uad00\uc131: \\(String(format: \"%.0f\", consistency * 100))%\")\n/// }\n///\n/// // \uc0c1\ud0dc\ubcc4 \ubd84\ud3ec \ud45c\uc2dc\n/// ForEach(stats.statusStats) { stat in\n///     HStack {\n///         Image(systemName: stat.status.iconName)\n///             .foregroundColor(stat.status.color)\n///         Text(stat.status.displayName)\n///         Spacer()\n///         Text(\"\\(stat.count)\ud68c (\\(stat.percentageFormatted()))\")\n///     }\n/// }\n/// ```\n///\n/// \ud83d\udca1 \uc2e4\ubb34 \ud301:\n/// - \ucc28\ud2b8 \ubdf0\uc5d0\uc11c\ub294 FetchSleepStatsUseCase \uc0ac\uc6a9\n/// - \ub9ac\uc2a4\ud2b8 \ubdf0\uc5d0\uc11c\ub294 FetchSleepHistoryUseCase \uc0ac\uc6a9\n/// - \ub300\uc2dc\ubcf4\ub4dc\uc5d0\uc11c\ub294 FetchSleepStatsUseCase\ub85c \uc694\uc57d \uc815\ubcf4 \ud45c\uc2dc\n/// - \uc77c\uad00\uc131 \uc810\uc218\ub97c \ud65c\uc6a9\ud558\uc5ec \uc218\uba74 \ud328\ud134 \uaddc\uce59\uc131 \ud3c9\uac00\n/// - \ucd94\uc138 \ubd84\uc11d\uc73c\ub85c \uc218\uba74 \uac1c\uc120/\uc545\ud654 \uc5ec\ubd80 \ud310\ub2e8\n/// - statusStats\ub97c \ud65c\uc6a9\ud558\uc5ec \uc0c1\ud0dc\ubcc4 \ubd84\ud3ec \ucc28\ud2b8 \uad6c\uc131\n///\n",
        "last_modified": "2026-01-14T22:52:08.910051"
      },
      "task_intent": {
        "title": "009-sleep-tracking-with-5-status-system",
        "description": "Sleep logging with 5-status tracking (bad, soso, good, excellent, oversleep), duration input, wake time prompts, and correlation with other health metrics. Automatic morning prompt to log previous night's sleep.",
        "from_plan": true
      },
      "commits_behind_main": 0,
      "status": "active",
      "merged_at": null
    }
  },
  "created_at": "2026-01-14T18:01:05.082293",
  "last_updated": "2026-01-14T21:03:40.623898"
}