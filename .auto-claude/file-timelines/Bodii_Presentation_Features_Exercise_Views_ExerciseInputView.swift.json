{
  "file_path": "Bodii/Presentation/Features/Exercise/Views/ExerciseInputView.swift",
  "main_branch_history": [],
  "task_views": {
    "008-exercise-tracking-with-met-calculations": {
      "task_id": "008-exercise-tracking-with-met-calculations",
      "branch_point": {
        "commit_hash": "4e56d606f7b0d4cb74120dd392544f3fe2d4f5b4",
        "content": "",
        "timestamp": "2026-01-14T11:45:41.765455"
      },
      "worktree_state": {
        "content": "//\n//  ExerciseInputView.swift\n//  Bodii\n//\n//  Created by Auto-Claude on 2026-01-14.\n//\n\n// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Form Sheet Modal Pattern\n// \ubaa8\ub2ec \uc2dc\ud2b8\ub85c \ud45c\uc2dc\ub418\ub294 \uc785\ub825 \ud3fc \uad6c\ud604\n// \ud83d\udca1 Java \ube44\uad50: Android\uc758 BottomSheetDialogFragment + DataBinding\uacfc \uc720\uc0ac\n\nimport SwiftUI\n\n// MARK: - Exercise Input View\n\n/// \uc6b4\ub3d9 \uc785\ub825 \ubaa8\ub2ec \ubdf0\n///\n/// \uc0c8\ub85c\uc6b4 \uc6b4\ub3d9 \uae30\ub85d\uc744 \ucd94\uac00\ud558\uae30 \uc704\ud55c \uc785\ub825 \ud3fc\uc744 \uc81c\uacf5\ud569\ub2c8\ub2e4.\n///\n/// **\uc8fc\uc694 \uae30\ub2a5:**\n/// - \uc6b4\ub3d9 \uc885\ub958 \uc120\ud0dd (8\uac00\uc9c0)\n/// - \uc6b4\ub3d9 \uc2dc\uac04 \uc785\ub825 (\ubd84)\n/// - \uc6b4\ub3d9 \uac15\ub3c4 \uc120\ud0dd (\uc800/\uc911/\uace0)\n/// - \uba54\ubaa8 \uc785\ub825 (\uc120\ud0dd\uc0ac\ud56d)\n/// - \uc2e4\uc2dc\uac04 \uce7c\ub85c\ub9ac \ubbf8\ub9ac\ubcf4\uae30\n/// - \uc800\uc7a5/\ucde8\uc18c \uc561\uc158\n///\n/// **\uc2e4\uc2dc\uac04 \ubbf8\ub9ac\ubcf4\uae30:**\n/// - \uc0ac\uc6a9\uc790\uac00 \uc785\ub825\uc744 \ubcc0\uacbd\ud560 \ub54c\ub9c8\ub2e4 \uc608\uc0c1 \uc18c\ubaa8 \uce7c\ub85c\ub9ac\uac00 \uc790\ub3d9\uc73c\ub85c \uacc4\uc0b0\ub429\ub2c8\ub2e4.\n/// - ExerciseCalcService\uc758 MET \uacf5\uc2dd\uc744 \uc0ac\uc6a9\ud569\ub2c8\ub2e4.\n///\n/// - Example:\n/// ```swift\n/// .sheet(isPresented: $isShowingAddSheet) {\n///     ExerciseInputView(\n///         viewModel: viewModel,\n///         onSaveSuccess: {\n///             isShowingAddSheet = false\n///             listViewModel.refresh()\n///         }\n///     )\n/// }\n/// ```\nstruct ExerciseInputView: View {\n\n    // MARK: - Properties\n\n    // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: @Observable ViewModel (iOS 17+)\n    // \uc774\uc804: @StateObject, @ObservedObject \uc0ac\uc6a9\n    // \ud604\uc7ac: var\ub85c \uc120\uc5b8\ud558\uba74 \uc790\ub3d9\uc73c\ub85c \uad00\ucc30\ub428\n    // \ud83d\udca1 Java \ube44\uad50: ViewModel + LiveData \uc790\ub3d9 \uad6c\ub3c5\uacfc \uc720\uc0ac\n\n    /// \ubdf0 \ubaa8\ub378\n    var viewModel: ExerciseInputViewModel\n\n    /// \uc800\uc7a5 \uc131\uacf5 \uc2dc \uc2e4\ud589\ud560 \ucf5c\ubc31\n    let onSaveSuccess: (() -> Void)?\n\n    // MARK: - Environment\n\n    // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Environment for Dismiss\n    // SwiftUI \ud658\uacbd \ubcc0\uc218\ub85c \ubaa8\ub2ec \ub2eb\uae30 \uc561\uc158\uc5d0 \uc811\uadfc\n    // \ud83d\udca1 Java \ube44\uad50: Activity.finish() \ub610\ub294 Fragment.dismiss()\uc640 \uc720\uc0ac\n\n    /// \ubaa8\ub2ec \ub2eb\uae30 \uc561\uc158\n    @Environment(\\.dismiss) private var dismiss\n\n    // MARK: - State\n\n    /// \uba54\ubaa8 \uc785\ub825 \ud3ec\ucee4\uc2a4 \uc0c1\ud0dc\n    @FocusState private var isNoteFocused: Bool\n\n    // MARK: - Initialization\n\n    /// ExerciseInputView \ucd08\uae30\ud654\n    ///\n    /// - Parameters:\n    ///   - viewModel: \uc785\ub825 \ud3fc \ubdf0 \ubaa8\ub378\n    ///   - onSaveSuccess: \uc800\uc7a5 \uc131\uacf5 \uc2dc \uc2e4\ud589\ud560 \ucf5c\ubc31 (\uc635\uc154\ub110)\n    init(\n        viewModel: ExerciseInputViewModel,\n        onSaveSuccess: (() -> Void)? = nil\n    ) {\n        self.viewModel = viewModel\n        self.onSaveSuccess = onSaveSuccess\n    }\n\n    // MARK: - Body\n\n    var body: some View {\n        NavigationStack {\n            // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: ScrollView for Keyboard Avoidance\n            // ScrollView\ub97c \uc0ac\uc6a9\ud558\uba74 \ud0a4\ubcf4\ub4dc\uac00 \ub098\ud0c0\ub0a0 \ub54c \uc790\ub3d9\uc73c\ub85c \uc2a4\ud06c\ub864\n            // \ud83d\udca1 Java \ube44\uad50: ScrollView + adjustResize\uc640 \uc720\uc0ac\n            ScrollView {\n                VStack(spacing: 24) {\n                    // \uc6b4\ub3d9 \uc885\ub958 \uc120\ud0dd\n                    exerciseTypeSection\n\n                    // \uc6b4\ub3d9 \uc2dc\uac04 \uc785\ub825\n                    durationSection\n\n                    // \uc6b4\ub3d9 \uac15\ub3c4 \uc120\ud0dd\n                    intensitySection\n\n                    // \uba54\ubaa8 \uc785\ub825 (\uc120\ud0dd\uc0ac\ud56d)\n                    noteSection\n\n                    // \uc2e4\uc2dc\uac04 \uce7c\ub85c\ub9ac \ubbf8\ub9ac\ubcf4\uae30\n                    caloriePreviewCard\n\n                    // \ubc84\ud2bc\ub4e4 (\uc800\uc7a5/\ucde8\uc18c)\n                    actionButtons\n                }\n                .padding()\n            }\n            .background(Color(.systemGroupedBackground))\n            // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Conditional Title\n            // \ud3b8\uc9d1 \ubaa8\ub4dc\uc77c \ub54c\ub294 \"\uc6b4\ub3d9 \uc218\uc815\", \ucd94\uac00 \ubaa8\ub4dc\uc77c \ub54c\ub294 \"\uc6b4\ub3d9 \ucd94\uac00\" \ud45c\uc2dc\n            .navigationTitle(viewModel.isEditMode ? \"\uc6b4\ub3d9 \uc218\uc815\" : \"\uc6b4\ub3d9 \ucd94\uac00\")\n            .navigationBarTitleDisplayMode(.inline)\n            .toolbar {\n                ToolbarItem(placement: .topBarLeading) {\n                    cancelButton\n                }\n            }\n            // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: onChange for Side Effects\n            // ViewModel\uc758 \uc0c1\ud0dc \ubcc0\uacbd\uc744 \uac10\uc9c0\ud558\uc5ec \ubd80\uc218 \ud6a8\uacfc \uc2e4\ud589\n            // \ud83d\udca1 Java \ube44\uad50: LiveData.observe()\uc640 \uc720\uc0ac\n            .onChange(of: viewModel.isSaveSuccess) { _, success in\n                if success {\n                    // \uc800\uc7a5 \uc131\uacf5 \uc2dc\n                    onSaveSuccess?()\n                    dismiss()\n                }\n            }\n            .alert(\"\uc624\ub958\", isPresented: .constant(viewModel.hasError)) {\n                Button(\"\ud655\uc778\") {\n                    viewModel.clearError()\n                }\n            } message: {\n                if let errorMessage = viewModel.errorMessage {\n                    Text(errorMessage)\n                }\n            }\n        }\n    }\n\n    // MARK: - View Components\n\n    // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Section-based Form Layout\n    // \uac01 \uc139\uc158\uc744 \ub3c5\ub9bd\uc801\uc778 computed property\ub85c \ubd84\ub9ac\n    // \uac00\ub3c5\uc131\uacfc \uc7ac\uc0ac\uc6a9\uc131 \ud5a5\uc0c1\n\n    /// \uc6b4\ub3d9 \uc885\ub958 \uc120\ud0dd \uc139\uc158\n    @ViewBuilder\n    private var exerciseTypeSection: some View {\n        VStack(alignment: .leading, spacing: 12) {\n            sectionHeader(\n                title: \"\uc6b4\ub3d9 \uc885\ub958\",\n                icon: \"figure.run\"\n            )\n\n            ExerciseTypeGridView(\n                selectedType: $viewModel.selectedExerciseType,\n                onSelect: { type in\n                    // \uc120\ud0dd \uc2dc \ucd94\uac00 \ub85c\uc9c1 (\uc635\uc154\ub110)\n                    // \ud604\uc7ac\ub294 @Binding\uc73c\ub85c \uc790\ub3d9 \uc5c5\ub370\uc774\ud2b8\ub418\ubbc0\ub85c \ubcc4\ub3c4 \ucc98\ub9ac \ubd88\ud544\uc694\n                }\n            )\n        }\n        .padding()\n        .background(\n            RoundedRectangle(cornerRadius: 12)\n                .fill(Color(.systemBackground))\n        )\n    }\n\n    /// \uc6b4\ub3d9 \uc2dc\uac04 \uc785\ub825 \uc139\uc158\n    @ViewBuilder\n    private var durationSection: some View {\n        VStack(alignment: .leading, spacing: 12) {\n            sectionHeader(\n                title: \"\uc6b4\ub3d9 \uc2dc\uac04\",\n                icon: \"clock\"\n            )\n\n            DurationInputView(\n                duration: $viewModel.duration,\n                onChange: { minutes in\n                    // \uc2dc\uac04 \ubcc0\uacbd \uc2dc \ucd94\uac00 \ub85c\uc9c1 (\uc635\uc154\ub110)\n                    // previewCalories\uac00 \uc790\ub3d9\uc73c\ub85c \uc7ac\uacc4\uc0b0\ub428\n                }\n            )\n        }\n        .padding()\n        .background(\n            RoundedRectangle(cornerRadius: 12)\n                .fill(Color(.systemBackground))\n        )\n    }\n\n    /// \uc6b4\ub3d9 \uac15\ub3c4 \uc120\ud0dd \uc139\uc158\n    @ViewBuilder\n    private var intensitySection: some View {\n        VStack(alignment: .leading, spacing: 12) {\n            sectionHeader(\n                title: \"\uc6b4\ub3d9 \uac15\ub3c4\",\n                icon: \"bolt.fill\"\n            )\n\n            IntensityPickerView(\n                selectedIntensity: $viewModel.selectedIntensity,\n                showMetMultiplier: true,\n                onSelect: { intensity in\n                    // \uac15\ub3c4 \ubcc0\uacbd \uc2dc \ucd94\uac00 \ub85c\uc9c1 (\uc635\uc154\ub110)\n                    // previewCalories\uac00 \uc790\ub3d9\uc73c\ub85c \uc7ac\uacc4\uc0b0\ub428\n                }\n            )\n        }\n        .padding()\n        .background(\n            RoundedRectangle(cornerRadius: 12)\n                .fill(Color(.systemBackground))\n        )\n    }\n\n    /// \uba54\ubaa8 \uc785\ub825 \uc139\uc158\n    @ViewBuilder\n    private var noteSection: some View {\n        VStack(alignment: .leading, spacing: 12) {\n            sectionHeader(\n                title: \"\uba54\ubaa8\",\n                icon: \"note.text\",\n                isOptional: true\n            )\n\n            // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: TextField with Focus State\n            // @FocusState\ub85c \ud0a4\ubcf4\ub4dc \ud45c\uc2dc/\uc228\uae40 \uc81c\uc5b4\n            // \ud83d\udca1 Java \ube44\uad50: EditText.requestFocus()\uc640 \uc720\uc0ac\n            TextField(\"\uc608: \uc544\uce68 \ub7ec\ub2dd, \uccb4\uc721\uad00 \uc6b4\ub3d9 \ub4f1\", text: $viewModel.note, axis: .vertical)\n                .textFieldStyle(.plain)\n                .padding()\n                .background(\n                    RoundedRectangle(cornerRadius: 8)\n                        .fill(Color(.systemGray6))\n                )\n                .focused($isNoteFocused)\n                .lineLimit(3...6)\n        }\n        .padding()\n        .background(\n            RoundedRectangle(cornerRadius: 12)\n                .fill(Color(.systemBackground))\n        )\n    }\n\n    /// \uc2e4\uc2dc\uac04 \uce7c\ub85c\ub9ac \ubbf8\ub9ac\ubcf4\uae30 \uce74\ub4dc\n    ///\n    /// \uc0ac\uc6a9\uc790\uac00 \uc785\ub825\uc744 \ubcc0\uacbd\ud560 \ub54c\ub9c8\ub2e4 \uc790\ub3d9\uc73c\ub85c \uc5c5\ub370\uc774\ud2b8\ub429\ub2c8\ub2e4.\n    @ViewBuilder\n    private var caloriePreviewCard: some View {\n        VStack(spacing: 16) {\n            // \ud5e4\ub354\n            HStack {\n                Image(systemName: \"flame.fill\")\n                    .font(.title3)\n                    .foregroundStyle(.orange)\n\n                Text(\"\uc608\uc0c1 \uc18c\ubaa8 \uce7c\ub85c\ub9ac\")\n                    .font(.headline)\n\n                Spacer()\n            }\n\n            // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Real-time Preview\n            // ViewModel\uc758 computed property\uac00 \uc790\ub3d9\uc73c\ub85c \uc7ac\uacc4\uc0b0\n            // @Observable \ub355\ubd84\uc5d0 View\uac00 \uc790\ub3d9\uc73c\ub85c \uc5c5\ub370\uc774\ud2b8\ub428\n            HStack(alignment: .lastTextBaseline, spacing: 4) {\n                Text(\"\\(viewModel.previewCalories)\")\n                    .font(.system(size: 48, weight: .bold, design: .rounded))\n                    .foregroundStyle(.orange)\n                    .contentTransition(.numericText())\n\n                Text(\"kcal\")\n                    .font(.title2)\n                    .foregroundStyle(.secondary)\n            }\n            .frame(maxWidth: .infinity)\n            .animation(.spring(response: 0.3, dampingFraction: 0.7), value: viewModel.previewCalories)\n\n            // \uacc4\uc0b0 \uc815\ubcf4 \ud45c\uc2dc\n            VStack(spacing: 4) {\n                calculationDetailRow(\n                    label: \"\uc6b4\ub3d9\",\n                    value: viewModel.selectedExerciseType.displayName\n                )\n\n                calculationDetailRow(\n                    label: \"\uc2dc\uac04\",\n                    value: \"\\(viewModel.duration)\ubd84\"\n                )\n\n                calculationDetailRow(\n                    label: \"\uac15\ub3c4\",\n                    value: viewModel.selectedIntensity.displayName\n                )\n\n                calculationDetailRow(\n                    label: \"MET\",\n                    value: String(format: \"%.1f\", viewModel.selectedExerciseType.baseMET * viewModel.selectedIntensity.metMultiplier)\n                )\n            }\n            .font(.caption)\n            .foregroundStyle(.secondary)\n        }\n        .padding()\n        .background(\n            RoundedRectangle(cornerRadius: 12)\n                .fill(Color.orange.opacity(0.1))\n        )\n        .overlay(\n            RoundedRectangle(cornerRadius: 12)\n                .stroke(Color.orange.opacity(0.3), lineWidth: 1)\n        )\n    }\n\n    /// \uacc4\uc0b0 \uc0c1\uc138 \uc815\ubcf4 \ud589\n    ///\n    /// - Parameters:\n    ///   - label: \ub808\uc774\ube14\n    ///   - value: \uac12\n    /// - Returns: \ud589 \ubdf0\n    @ViewBuilder\n    private func calculationDetailRow(label: String, value: String) -> some View {\n        HStack {\n            Text(label)\n            Spacer()\n            Text(value)\n                .fontWeight(.medium)\n        }\n    }\n\n    /// \uc561\uc158 \ubc84\ud2bc\ub4e4 (\uc800\uc7a5)\n    @ViewBuilder\n    private var actionButtons: some View {\n        VStack(spacing: 12) {\n            // \uc800\uc7a5 \ubc84\ud2bc\n            Button(action: {\n                // \ud0a4\ubcf4\ub4dc \uc228\uae30\uae30\n                isNoteFocused = false\n\n                // \uc800\uc7a5 \uc2e4\ud589\n                Task {\n                    await viewModel.save()\n                }\n            }) {\n                HStack {\n                    if viewModel.isSaving {\n                        ProgressView()\n                            .progressViewStyle(.circular)\n                            .tint(.white)\n                    } else {\n                        Image(systemName: \"checkmark.circle.fill\")\n                            .font(.title3)\n                    }\n\n                    Text(viewModel.isSaving ? \"\uc800\uc7a5 \uc911...\" : \"\uc800\uc7a5\")\n                        .font(.headline)\n                }\n                .frame(maxWidth: .infinity)\n                .padding()\n                .background(\n                    RoundedRectangle(cornerRadius: 12)\n                        .fill(viewModel.isFormValid ? Color.blue : Color.gray)\n                )\n                .foregroundStyle(.white)\n            }\n            .disabled(!viewModel.isFormValid || viewModel.isSaving)\n\n            // \ud3fc \uac80\uc99d \uc5d0\ub7ec \uba54\uc2dc\uc9c0\n            if let validationError = viewModel.durationValidationError {\n                HStack {\n                    Image(systemName: \"exclamationmark.triangle.fill\")\n                        .foregroundStyle(.orange)\n\n                    Text(validationError)\n                        .font(.caption)\n                        .foregroundStyle(.orange)\n                }\n            }\n        }\n    }\n\n    /// \ucde8\uc18c \ubc84\ud2bc\n    @ViewBuilder\n    private var cancelButton: some View {\n        Button(\"\ucde8\uc18c\") {\n            viewModel.reset()\n            dismiss()\n        }\n        .disabled(viewModel.isSaving)\n    }\n\n    /// \uc139\uc158 \ud5e4\ub354\n    ///\n    /// - Parameters:\n    ///   - title: \uc139\uc158 \uc81c\ubaa9\n    ///   - icon: SF Symbol \uc544\uc774\ucf58 \uc774\ub984\n    ///   - isOptional: \uc120\ud0dd\uc0ac\ud56d \uc5ec\ubd80 (\uae30\ubcf8\uac12: false)\n    /// - Returns: \ud5e4\ub354 \ubdf0\n    @ViewBuilder\n    private func sectionHeader(\n        title: String,\n        icon: String,\n        isOptional: Bool = false\n    ) -> some View {\n        HStack(spacing: 8) {\n            Image(systemName: icon)\n                .font(.headline)\n                .foregroundStyle(.blue)\n\n            Text(title)\n                .font(.headline)\n\n            if isOptional {\n                Text(\"(\uc120\ud0dd\uc0ac\ud56d)\")\n                    .font(.caption)\n                    .foregroundStyle(.secondary)\n            }\n\n            Spacer()\n        }\n    }\n}\n\n// MARK: - Preview\n\n#Preview(\"Exercise Input\") {\n    // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Preview with Dependencies\n    // \uc758\uc874\uc131\uc774 \ub9ce\uc740 View\uc758 Preview \uc791\uc131 \ubc29\ubc95\n\n    // Mock UseCase\n    struct MockAddExerciseRecordUseCase: AddExerciseRecordUseCase {\n        func execute(\n            userId: UUID,\n            date: Date,\n            exerciseType: ExerciseType,\n            duration: Int32,\n            intensity: Intensity,\n            note: String?,\n            userWeight: Decimal,\n            userBMR: Decimal,\n            userTDEE: Decimal\n        ) async throws -> ExerciseRecord {\n            // \uac04\ub2e8\ud55c Mock \uad6c\ud604\n            // \uc2e4\uc81c \ud14c\uc2a4\ud2b8\uc5d0\uc11c\ub294 \ub354 \uc815\uad50\ud55c Mock \uc0ac\uc6a9\n            return ExerciseRecord(\n                id: UUID(),\n                userId: userId,\n                date: date,\n                exerciseType: exerciseType,\n                duration: duration,\n                intensity: intensity,\n                caloriesBurned: ExerciseCalcService.calculateCalories(\n                    exerciseType: exerciseType,\n                    duration: duration,\n                    intensity: intensity,\n                    weight: userWeight\n                ),\n                note: note,\n                createdAt: Date(),\n                updatedAt: Date()\n            )\n        }\n    }\n\n    let mockUseCase = MockAddExerciseRecordUseCase()\n    let viewModel = ExerciseInputViewModel(\n        addExerciseRecordUseCase: mockUseCase,\n        userId: UUID(),\n        userWeight: 70.0,\n        userBMR: 1650,\n        userTDEE: 2310\n    )\n\n    return ExerciseInputView(\n        viewModel: viewModel,\n        onSaveSuccess: {\n            print(\"\u2705 \uc800\uc7a5 \uc131\uacf5!\")\n        }\n    )\n}\n\n#Preview(\"Exercise Input - Saving State\") {\n    struct MockAddExerciseRecordUseCase: AddExerciseRecordUseCase {\n        func execute(\n            userId: UUID,\n            date: Date,\n            exerciseType: ExerciseType,\n            duration: Int32,\n            intensity: Intensity,\n            note: String?,\n            userWeight: Decimal,\n            userBMR: Decimal,\n            userTDEE: Decimal\n        ) async throws -> ExerciseRecord {\n            // 2\ucd08 \uc9c0\uc5f0 \uc2dc\ubbac\ub808\uc774\uc158\n            try await Task.sleep(nanoseconds: 2_000_000_000)\n\n            return ExerciseRecord(\n                id: UUID(),\n                userId: userId,\n                date: date,\n                exerciseType: exerciseType,\n                duration: duration,\n                intensity: intensity,\n                caloriesBurned: ExerciseCalcService.calculateCalories(\n                    exerciseType: exerciseType,\n                    duration: duration,\n                    intensity: intensity,\n                    weight: userWeight\n                ),\n                note: note,\n                createdAt: Date(),\n                updatedAt: Date()\n            )\n        }\n    }\n\n    let mockUseCase = MockAddExerciseRecordUseCase()\n    let viewModel = ExerciseInputViewModel(\n        addExerciseRecordUseCase: mockUseCase,\n        userId: UUID(),\n        userWeight: 70.0,\n        userBMR: 1650,\n        userTDEE: 2310\n    )\n\n    // \uc800\uc7a5 \uc911 \uc0c1\ud0dc\ub85c \uc124\uc815\n    Task {\n        await viewModel.save()\n    }\n\n    return ExerciseInputView(\n        viewModel: viewModel,\n        onSaveSuccess: {\n            print(\"\u2705 \uc800\uc7a5 \uc131\uacf5!\")\n        }\n    )\n}\n\n#Preview(\"Exercise Input - Different Exercise Types\") {\n    struct PreviewWrapper: View {\n        @State private var selectedExerciseType: ExerciseType = .cycling\n\n        var body: some View {\n            VStack(spacing: 16) {\n                Text(\"\uc6b4\ub3d9 \uc885\ub958\ubcc4 \uce7c\ub85c\ub9ac \ubbf8\ub9ac\ubcf4\uae30\")\n                    .font(.headline)\n                    .padding()\n\n                TabView {\n                    ForEach(ExerciseType.allCases, id: \\.self) { exerciseType in\n                        createPreview(for: exerciseType)\n                            .tabItem {\n                                Label(\n                                    exerciseType.displayName,\n                                    systemImage: exerciseType.systemIconName\n                                )\n                            }\n                    }\n                }\n            }\n        }\n\n        private func createPreview(for exerciseType: ExerciseType) -> some View {\n            struct MockAddExerciseRecordUseCase: AddExerciseRecordUseCase {\n                func execute(\n                    userId: UUID,\n                    date: Date,\n                    exerciseType: ExerciseType,\n                    duration: Int32,\n                    intensity: Intensity,\n                    note: String?,\n                    userWeight: Decimal,\n                    userBMR: Decimal,\n                    userTDEE: Decimal\n                ) async throws -> ExerciseRecord {\n                    return ExerciseRecord(\n                        id: UUID(),\n                        userId: userId,\n                        date: date,\n                        exerciseType: exerciseType,\n                        duration: duration,\n                        intensity: intensity,\n                        caloriesBurned: ExerciseCalcService.calculateCalories(\n                            exerciseType: exerciseType,\n                            duration: duration,\n                            intensity: intensity,\n                            weight: userWeight\n                        ),\n                        note: note,\n                        createdAt: Date(),\n                        updatedAt: Date()\n                    )\n                }\n            }\n\n            let mockUseCase = MockAddExerciseRecordUseCase()\n            let viewModel = ExerciseInputViewModel(\n                addExerciseRecordUseCase: mockUseCase,\n                userId: UUID(),\n                userWeight: 70.0,\n                userBMR: 1650,\n                userTDEE: 2310\n            )\n\n            // \uc120\ud0dd\ub41c \uc6b4\ub3d9 \uc885\ub958\ub85c \uc124\uc815\n            viewModel.selectedExerciseType = exerciseType\n\n            return ExerciseInputView(\n                viewModel: viewModel,\n                onSaveSuccess: {\n                    print(\"\u2705 \uc800\uc7a5 \uc131\uacf5: \\(exerciseType.displayName)\")\n                }\n            )\n        }\n    }\n\n    return PreviewWrapper()\n}\n\n// MARK: - Learning Notes\n\n/// ## Form Sheet Modal Pattern\n///\n/// \ubaa8\ub2ec \uc2dc\ud2b8\ub85c \ud45c\uc2dc\ub418\ub294 \uc785\ub825 \ud3fc\uc740 SwiftUI\uc5d0\uc11c \ub9e4\uc6b0 \uc77c\ubc18\uc801\uc778 \ud328\ud134\uc785\ub2c8\ub2e4.\n///\n/// ### \uc8fc\uc694 \uad6c\uc131 \uc694\uc18c\n///\n/// 1. **NavigationStack**:\n///    - \ubaa8\ub2ec \ub0b4\ubd80\uc5d0\uc11c\ub3c4 \ub124\ube44\uac8c\uc774\uc158 \ubc14 \uc81c\uacf5\n///    - \uc81c\ubaa9, \ud234\ubc14 \ubc84\ud2bc \ud45c\uc2dc\n///\n/// 2. **ScrollView**:\n///    - \ud0a4\ubcf4\ub4dc\uac00 \ub098\ud0c0\ub0a0 \ub54c \uc790\ub3d9 \uc2a4\ud06c\ub864\n///    - \uae34 \ud3fc\ub3c4 \uc218\uc6a9 \uac00\ub2a5\n///\n/// 3. **Section-based Layout**:\n///    - \uac01 \uc785\ub825 \ud544\ub4dc\ub97c \uc139\uc158\uc73c\ub85c \ubd84\ub9ac\n///    - \uba85\ud655\ud55c \uc2dc\uac01\uc801 \uad6c\ubd84\n///\n/// 4. **Real-time Preview**:\n///    - \uc0ac\uc6a9\uc790 \uc785\ub825\uc5d0 \uc989\uac01 \ubc18\uc751\n///    - \uacb0\uacfc\ub97c \ubbf8\ub9ac \ubcf4\uc5ec\uc8fc\uc5b4 \uc0ac\uc6a9\uc790 \uc774\ud574\ub3c4 \ud5a5\uc0c1\n///\n/// ### Sheet Presentation Pattern\n///\n/// **\ubd80\ubaa8 View (ExerciseListView)**:\n/// ```swift\n/// @State private var isShowingAddSheet = false\n///\n/// .toolbar {\n///     ToolbarItem(placement: .topBarTrailing) {\n///         Button {\n///             isShowingAddSheet = true\n///         } label: {\n///             Image(systemName: \"plus\")\n///         }\n///     }\n/// }\n/// .sheet(isPresented: $isShowingAddSheet) {\n///     ExerciseInputView(\n///         viewModel: inputViewModel,\n///         onSaveSuccess: {\n///             isShowingAddSheet = false\n///             listViewModel.refresh()\n///         }\n///     )\n/// }\n/// ```\n///\n/// **\uc790\uc2dd View (ExerciseInputView)**:\n/// ```swift\n/// @Environment(\\.dismiss) private var dismiss\n///\n/// Button(\"\ucde8\uc18c\") {\n///     dismiss()\n/// }\n///\n/// .onChange(of: viewModel.isSaveSuccess) { _, success in\n///     if success {\n///         onSaveSuccess?()\n///         dismiss()\n///     }\n/// }\n/// ```\n///\n/// ### Real-time Calculation Pattern\n///\n/// **ViewModel\uc758 Computed Property**:\n/// ```swift\n/// var previewCalories: Int32 {\n///     ExerciseCalcService.calculateCalories(\n///         exerciseType: selectedExerciseType,\n///         duration: duration,\n///         intensity: selectedIntensity,\n///         weight: userWeight\n///     )\n/// }\n/// ```\n///\n/// **View\uc758 \uc790\ub3d9 \uc5c5\ub370\uc774\ud2b8**:\n/// ```swift\n/// Text(\"\\(viewModel.previewCalories)\")\n///     .contentTransition(.numericText())\n///     .animation(.spring(response: 0.3, dampingFraction: 0.7), value: viewModel.previewCalories)\n/// ```\n///\n/// @Observable \ub355\ubd84\uc5d0:\n/// - selectedExerciseType \ubcc0\uacbd \u2192 previewCalories \uc7ac\uacc4\uc0b0 \u2192 View \uc5c5\ub370\uc774\ud2b8\n/// - duration \ubcc0\uacbd \u2192 previewCalories \uc7ac\uacc4\uc0b0 \u2192 View \uc5c5\ub370\uc774\ud2b8\n/// - selectedIntensity \ubcc0\uacbd \u2192 previewCalories \uc7ac\uacc4\uc0b0 \u2192 View \uc5c5\ub370\uc774\ud2b8\n///\n/// ### Form Validation Pattern\n///\n/// **ViewModel\uc758 Validation**:\n/// ```swift\n/// var isFormValid: Bool {\n///     duration >= 1\n/// }\n///\n/// var durationValidationError: String? {\n///     if duration < 1 {\n///         return \"\ucd5c\uc18c 1\ubd84 \uc774\uc0c1 \uc785\ub825\ud574\uc8fc\uc138\uc694\"\n///     }\n///     return nil\n/// }\n/// ```\n///\n/// **View\uc758 Validation Feedback**:\n/// ```swift\n/// Button(\"\uc800\uc7a5\") {\n///     Task { await viewModel.save() }\n/// }\n/// .disabled(!viewModel.isFormValid || viewModel.isSaving)\n///\n/// if let validationError = viewModel.durationValidationError {\n///     Text(validationError)\n///         .foregroundStyle(.orange)\n/// }\n/// ```\n///\n/// ### Loading State Pattern\n///\n/// **\ubc84\ud2bc\uc5d0 \ub85c\ub529 \uc0c1\ud0dc \ud45c\uc2dc**:\n/// ```swift\n/// Button(action: { Task { await viewModel.save() } }) {\n///     HStack {\n///         if viewModel.isSaving {\n///             ProgressView()\n///                 .tint(.white)\n///         } else {\n///             Image(systemName: \"checkmark.circle.fill\")\n///         }\n///\n///         Text(viewModel.isSaving ? \"\uc800\uc7a5 \uc911...\" : \"\uc800\uc7a5\")\n///     }\n/// }\n/// .disabled(viewModel.isSaving)\n/// ```\n///\n/// ### Keyboard Management\n///\n/// **@FocusState for Keyboard Control**:\n/// ```swift\n/// @FocusState private var isNoteFocused: Bool\n///\n/// TextField(\"\uba54\ubaa8\", text: $viewModel.note)\n///     .focused($isNoteFocused)\n///\n/// Button(\"\uc800\uc7a5\") {\n///     isNoteFocused = false  // \ud0a4\ubcf4\ub4dc \uc228\uae30\uae30\n///     Task { await viewModel.save() }\n/// }\n/// ```\n///\n/// ### Component Integration\n///\n/// \uc774 View\ub294 4\uac1c\uc758 \ucee4\uc2a4\ud140 \ucef4\ud3ec\ub10c\ud2b8\ub97c \ud1b5\ud569\ud569\ub2c8\ub2e4:\n///\n/// 1. **ExerciseTypeGridView**:\n///    - 8\uac00\uc9c0 \uc6b4\ub3d9 \uc885\ub958 \uc120\ud0dd\n///    - LazyVGrid \ub808\uc774\uc544\uc6c3\n///\n/// 2. **DurationInputView**:\n///    - Quick Selection + Fine Adjustment\n///    - \ud558\uc774\ube0c\ub9ac\ub4dc \uc785\ub825 \ubc29\uc2dd\n///\n/// 3. **IntensityPickerView**:\n///    - 3\uac00\uc9c0 \uac15\ub3c4 \uc120\ud0dd\n///    - \uc138\uadf8\uba3c\ud2b8 \ucee8\ud2b8\ub864 \uc2a4\ud0c0\uc77c\n///\n/// 4. **TextField**:\n///    - \uc120\ud0dd\uc801 \uba54\ubaa8 \uc785\ub825\n///    - Multi-line \uc9c0\uc6d0\n///\n/// \ubaa8\ub4e0 \ucef4\ud3ec\ub10c\ud2b8\uac00 @Binding\uc744 \ud1b5\ud574 ViewModel\uc758 \uc0c1\ud0dc\uc640 \uc5f0\uacb0\ub418\uc5b4\n/// \uc2e4\uc2dc\uac04\uc73c\ub85c \uce7c\ub85c\ub9ac \ubbf8\ub9ac\ubcf4\uae30\uac00 \uc5c5\ub370\uc774\ud2b8\ub429\ub2c8\ub2e4.\n///\n/// ### Error Handling\n///\n/// **Alert\ub85c \uc5d0\ub7ec \ud45c\uc2dc**:\n/// ```swift\n/// .alert(\"\uc624\ub958\", isPresented: .constant(viewModel.hasError)) {\n///     Button(\"\ud655\uc778\") {\n///         viewModel.clearError()\n///     }\n/// } message: {\n///     if let errorMessage = viewModel.errorMessage {\n///         Text(errorMessage)\n///     }\n/// }\n/// ```\n///\n/// ### Best Practices\n///\n/// 1. **Section-based Organization**:\n///    - \uac01 \uc139\uc158\uc744 computed property\ub85c \ubd84\ub9ac\n///    - \uac00\ub3c5\uc131\uacfc \uc720\uc9c0\ubcf4\uc218\uc131 \ud5a5\uc0c1\n///\n/// 2. **Real-time Feedback**:\n///    - \uc0ac\uc6a9\uc790 \uc785\ub825\uc5d0 \uc989\uac01 \ubc18\uc751\ud558\ub294 \ubbf8\ub9ac\ubcf4\uae30\n///    - \uc0ac\uc6a9\uc790 \uc2e0\ub8b0\ub3c4\uc640 \uc774\ud574\ub3c4 \ud5a5\uc0c1\n///\n/// 3. **Clear Visual Hierarchy**:\n///    - \uc139\uc158 \ud5e4\ub354\ub85c \uba85\ud655\ud55c \uad6c\ubd84\n///    - \uc544\uc774\ucf58\uc73c\ub85c \uc2dc\uac01\uc801 \ub2e8\uc11c \uc81c\uacf5\n///\n/// 4. **Validation Feedback**:\n///    - \ubc84\ud2bc disable\ub85c \uc989\uac01\uc801\uc778 \ud53c\ub4dc\ubc31\n///    - \uc5d0\ub7ec \uba54\uc2dc\uc9c0\ub85c \uba85\ud655\ud55c \uac00\uc774\ub4dc\n///\n/// 5. **Loading State**:\n///    - \uc800\uc7a5 \uc911 \uc0c1\ud0dc \uba85\ud655\ud788 \ud45c\uc2dc\n///    - \uc911\ubcf5 \uc81c\ucd9c \ubc29\uc9c0\n///\n/// 6. **Keyboard Management**:\n///    - @FocusState\ub85c \ud0a4\ubcf4\ub4dc \uc81c\uc5b4\n///    - \uc800\uc7a5 \uc2dc \ud0a4\ubcf4\ub4dc \uc790\ub3d9 \uc228\uae40\n///\n/// 7. **Callback Pattern**:\n///    - onSaveSuccess \ucf5c\ubc31\uc73c\ub85c \ubd80\ubaa8 View\uc640 \ud1b5\uc2e0\n///    - \ub9ac\uc2a4\ud2b8 \uc0c8\ub85c\uace0\uce68 \ub4f1\uc758 \ud6c4\uc18d \uc791\uc5c5 \ucc98\ub9ac\n///\n",
        "last_modified": "2026-01-14T22:54:09.705101"
      },
      "task_intent": {
        "title": "008-exercise-tracking-with-met-calculations",
        "description": "Exercise logging with activity type selection, duration input, and automatic calorie burn calculation using MET (Metabolic Equivalent of Task) values. Track both cardio and strength training with appropriate calculations.",
        "from_plan": true
      },
      "commits_behind_main": 0,
      "status": "active",
      "merged_at": null
    }
  },
  "created_at": "2026-01-13T19:19:05.974164",
  "last_updated": "2026-01-14T11:45:42.058938"
}