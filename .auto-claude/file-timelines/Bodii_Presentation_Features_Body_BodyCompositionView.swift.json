{
  "file_path": "Bodii/Presentation/Features/Body/BodyCompositionView.swift",
  "main_branch_history": [],
  "task_views": {
    "003-body-composition-tracking-with-bmr-tdee": {
      "task_id": "003-body-composition-tracking-with-bmr-tdee",
      "branch_point": {
        "commit_hash": "2abdae73fb6199bcbf4f21f6deeb7952225f81e6",
        "content": "",
        "timestamp": "2026-01-13T07:46:22.394743"
      },
      "worktree_state": {
        "content": "//\n//  BodyCompositionView.swift\n//  Bodii\n//\n//  Created by Auto-Claude on 2026-01-12.\n//\n\n// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Feature View in MVVM Pattern\n// SwiftUI\uc758 MVVM \ud328\ud134\uc5d0\uc11c View \uc5ed\ud560 - UI\ub9cc \ub2f4\ub2f9\n// \ud83d\udca1 Java \ube44\uad50: Android\uc758 Activity/Fragment\uc640 \uc720\uc0ac\ud558\uc9c0\ub9cc \ub354 \uc120\uc5b8\uc801\n\nimport SwiftUI\n\n// MARK: - BodyCompositionView\n\n/// \uc2e0\uccb4 \uad6c\uc131 \uba54\uc778 \ud654\uba74\n/// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Feature View Pattern\n/// - \uc785\ub825 \uc139\uc158, BMR/TDEE \ud45c\uc2dc, \ucd5c\uadfc \uae30\ub85d \ub9ac\uc2a4\ud2b8 \ud3ec\ud568\n/// - ViewModel\uc744 \ud1b5\ud574 \uc0c1\ud0dc \uad00\ub9ac \ubc0f \ube44\uc988\ub2c8\uc2a4 \ub85c\uc9c1 \ucc98\ub9ac\n/// - NavigationStack\uc73c\ub85c \ud2b8\ub80c\ub4dc \ubdf0\ub85c \uc774\ub3d9 \uac00\ub2a5\n/// \ud83d\udca1 Java \ube44\uad50: Android\uc758 Fragment + RecyclerView\uc640 \uc720\uc0ac\nstruct BodyCompositionView: View {\n\n    // MARK: - Properties\n\n    /// ViewModel - \uc2e0\uccb4 \uad6c\uc131 \ub370\uc774\ud130 \uad00\ub9ac\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: @StateObject\n    /// - View\uc758 \uc0dd\uba85\uc8fc\uae30\uc640 \uc5f0\uacb0\ub41c ObservableObject\n    /// - View\uac00 \uc0ac\ub77c\uc838\ub3c4 \uc0c1\ud0dc \uc720\uc9c0\n    /// \ud83d\udca1 Java \ube44\uad50: Android ViewModel\uacfc \uc720\uc0ac\n    @StateObject private var viewModel: BodyCompositionViewModel\n\n    /// \ud2b8\ub80c\ub4dc \ubdf0 \ub124\ube44\uac8c\uc774\uc158 \uc0c1\ud0dc\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: @State for Navigation\n    /// - NavigationStack\uc758 \uacbd\ub85c \uad00\ub9ac\n    @State private var showTrendsView = false\n\n    /// \uc0c1\uc138 \ubdf0\uc5d0 \ud45c\uc2dc\ud560 \uc5d4\ud2b8\ub9ac\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Optional State\n    /// - nil\uc774\uba74 \uc0c1\uc138 \ubdf0 \ubbf8\ud45c\uc2dc\n    @State private var selectedEntry: BodyCompositionEntry?\n\n    /// Pull-to-refresh \ud2b8\ub9ac\uac70\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Refresh Control\n    /// - \uc0ac\uc6a9\uc790\uac00 \ub2f9\uaca8\uc11c \uc0c8\ub85c\uace0\uce68 \uac00\ub2a5\n    @State private var isRefreshing = false\n\n    // MARK: - Initialization\n\n    /// BodyCompositionView \ucd08\uae30\ud654\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Dependency Injection via Constructor\n    /// - ViewModel\uc744 \uc678\ubd80\uc5d0\uc11c \uc8fc\uc785\ubc1b\uc74c\n    /// - \ud14c\uc2a4\ud2b8 \uc2dc Mock ViewModel \uc8fc\uc785 \uac00\ub2a5\n    /// \ud83d\udca1 Java \ube44\uad50: Constructor injection\uacfc \uc720\uc0ac\n    ///\n    /// - Parameter viewModel: \uc2e0\uccb4 \uad6c\uc131 ViewModel\n    init(viewModel: BodyCompositionViewModel) {\n        self._viewModel = StateObject(wrappedValue: viewModel)\n    }\n\n    // MARK: - Body\n\n    var body: some View {\n        // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: NavigationStack\n        // iOS 16+\uc758 \uc0c8\ub85c\uc6b4 \ub124\ube44\uac8c\uc774\uc158 \uc2dc\uc2a4\ud15c\n        // \ud83d\udca1 Java \ube44\uad50: Navigation Component\uc640 \uc720\uc0ac\n        NavigationStack {\n            // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: ScrollView with LazyVStack\n            // \uc131\ub2a5 \ucd5c\uc801\ud654\ub97c \uc704\ud574 \ubcf4\uc774\ub294 \ubd80\ubd84\ub9cc \ub80c\ub354\ub9c1\n            ScrollView {\n                VStack(spacing: 20) {\n                    // \uc785\ub825 \uc139\uc158\n                    inputSection\n\n                    // BMR/TDEE \ud45c\uc2dc \uc139\uc158\n                    if viewModel.latestMetabolism != nil {\n                        metabolismSection\n                    }\n\n                    // \ucd5c\uadfc \uae30\ub85d \uc139\uc158\n                    historySection\n                }\n                .padding(.horizontal, 16)\n                .padding(.vertical, 20)\n            }\n            .navigationTitle(\"\uccb4\uc131\ubd84\")\n            .navigationBarTitleDisplayMode(.large)\n            .toolbar {\n                ToolbarItem(placement: .navigationBarTrailing) {\n                    trendsButton\n                }\n            }\n            // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: refreshable modifier\n            // Pull-to-refresh \uad6c\ud604\n            .refreshable {\n                await refreshData()\n            }\n            // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Alert for Errors\n            // \uc5d0\ub7ec \ubc1c\uc0dd \uc2dc \uc54c\ub9bc \ud45c\uc2dc\n            .alert(\"\uc624\ub958\", isPresented: .constant(viewModel.errorMessage != nil)) {\n                Button(\"\ud655\uc778\") {\n                    viewModel.errorMessage = nil\n                }\n            } message: {\n                if let errorMessage = viewModel.errorMessage {\n                    Text(errorMessage)\n                }\n            }\n            // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Toast-style Success Message\n            // \uc131\uacf5 \uba54\uc2dc\uc9c0\ub97c \ud654\uba74 \uc0c1\ub2e8\uc5d0 \ud45c\uc2dc\n            .overlay(alignment: .top) {\n                if let successMessage = viewModel.successMessage {\n                    successToast(message: successMessage)\n                }\n            }\n            // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Sheet Navigation\n            // \ud2b8\ub80c\ub4dc \ubdf0\ub97c \ubaa8\ub2ec\ub85c \ud45c\uc2dc\n            .sheet(isPresented: $showTrendsView) {\n                // TODO: DIContainer\uc5d0\uc11c trendsViewModel\uc744 \uc8fc\uc785\ubc1b\uc544 \uc0ac\uc6a9\n                // BodyTrendsView(\n                //     viewModel: container.makeBodyTrendsViewModel(),\n                //     userGender: viewModel.userProfile?.gender,\n                //     goalWeight: viewModel.userProfile?.goalWeight,\n                //     goalBodyFat: viewModel.userProfile?.goalBodyFat\n                // )\n                Text(\"\ud2b8\ub80c\ub4dc \ubdf0 (DIContainer \uc5f0\uacb0 \ud544\uc694)\")\n            }\n        }\n    }\n\n    // MARK: - Subviews\n\n    /// \uc785\ub825 \uc139\uc158\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Extracted View\n    /// - \ubcf5\uc7a1\ud55c View\ub97c \uc791\uc740 \ub2e8\uc704\ub85c \ubd84\ub9ac\n    /// - \ucf54\ub4dc \uac00\ub3c5\uc131 \ubc0f \uc7ac\uc0ac\uc6a9\uc131 \ud5a5\uc0c1\n    private var inputSection: some View {\n        VStack(alignment: .leading, spacing: 12) {\n            // \uc139\uc158 \ud5e4\ub354\n            sectionHeader(\n                title: \"\uc2e0\uccb4 \ub370\uc774\ud130 \uc785\ub825\",\n                icon: \"square.and.pencil\"\n            )\n\n            // \uc785\ub825 \uce74\ub4dc\n            BodyCompositionInputCard(\n                weight: $viewModel.weightInput,\n                bodyFatPercent: $viewModel.bodyFatPercentInput,\n                muscleMass: $viewModel.muscleMassInput,\n                validationMessages: viewModel.validationMessages,\n                isEnabled: !viewModel.isSaving,\n                onInputChanged: {\n                    viewModel.validateInputs()\n                }\n            )\n\n            // \uc800\uc7a5 \ubc84\ud2bc\n            saveButton\n        }\n    }\n\n    /// BMR/TDEE \uc139\uc158\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Conditional View\n    /// - \ucd5c\uadfc \ub300\uc0ac\uc728 \ub370\uc774\ud130\uac00 \uc788\uc744 \ub54c\ub9cc \ud45c\uc2dc\n    private var metabolismSection: some View {\n        VStack(alignment: .leading, spacing: 12) {\n            // \uc139\uc158 \ud5e4\ub354\n            sectionHeader(\n                title: \"\ucd5c\uadfc \ub300\uc0ac\uc728\",\n                icon: \"flame.fill\"\n            )\n\n            // \ub300\uc0ac\uc728 \uce74\ub4dc\n            if let metabolism = viewModel.latestMetabolism {\n                metabolismCard(metabolism: metabolism)\n            }\n        }\n    }\n\n    /// \ucd5c\uadfc \uae30\ub85d \uc139\uc158\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: List in ScrollView\n    /// - \uc81c\ud55c\ub41c \ub192\uc774\uc758 \ub9ac\uc2a4\ud2b8\ub85c \ud45c\uc2dc\n    private var historySection: some View {\n        VStack(alignment: .leading, spacing: 12) {\n            // \uc139\uc158 \ud5e4\ub354\n            HStack {\n                sectionHeader(\n                    title: \"\ucd5c\uadfc \uae30\ub85d\",\n                    icon: \"clock.arrow.circlepath\"\n                )\n\n                Spacer()\n\n                // \uae30\ub85d \uac1c\uc218 \ud45c\uc2dc\n                if !viewModel.history.isEmpty {\n                    Text(\"\\(viewModel.history.count)\uac1c\")\n                        .font(.caption)\n                        .foregroundStyle(.secondary)\n                }\n            }\n\n            // \uae30\ub85d \ub9ac\uc2a4\ud2b8\n            if viewModel.isLoading {\n                loadingView\n            } else if viewModel.history.isEmpty {\n                emptyHistoryView\n            } else {\n                historyList\n            }\n        }\n    }\n\n    /// \uc800\uc7a5 \ubc84\ud2bc\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Button with Async Action\n    /// - Task\ub97c \uc0ac\uc6a9\ud558\uc5ec \ube44\ub3d9\uae30 \uc791\uc5c5 \uc2e4\ud589\n    private var saveButton: some View {\n        Button(action: {\n            Task {\n                await viewModel.saveBodyComposition()\n            }\n        }) {\n            HStack {\n                if viewModel.isSaving {\n                    // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: ProgressView\n                    // \ub85c\ub529 \uc778\ub514\ucf00\uc774\ud130 \ud45c\uc2dc\n                    ProgressView()\n                        .progressViewStyle(CircularProgressViewStyle(tint: .white))\n                        .scaleEffect(0.8)\n                } else {\n                    Image(systemName: \"checkmark.circle.fill\")\n                        .font(.body)\n                }\n\n                Text(viewModel.isSaving ? \"\uc800\uc7a5 \uc911...\" : \"\uc800\uc7a5\")\n                    .font(.body)\n                    .fontWeight(.semibold)\n            }\n            .frame(maxWidth: .infinity)\n            .padding(.vertical, 14)\n            .background(\n                RoundedRectangle(cornerRadius: 10)\n                    .fill(viewModel.canSave ? Color.blue : Color.gray)\n            )\n            .foregroundStyle(.white)\n        }\n        .disabled(!viewModel.canSave)\n    }\n\n    /// \ud2b8\ub80c\ub4dc \ubc84\ud2bc\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Toolbar Item\n    /// - \ub124\ube44\uac8c\uc774\uc158 \ubc14\uc5d0 \ubc84\ud2bc \ucd94\uac00\n    private var trendsButton: some View {\n        Button(action: {\n            showTrendsView = true\n        }) {\n            HStack(spacing: 4) {\n                Image(systemName: \"chart.line.uptrend.xyaxis\")\n                    .font(.subheadline)\n                Text(\"\ud2b8\ub80c\ub4dc\")\n                    .font(.subheadline)\n                    .fontWeight(.medium)\n            }\n            .foregroundStyle(.blue)\n        }\n    }\n\n    /// \ub300\uc0ac\uc728 \uce74\ub4dc\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Reusable Component Function\n    /// - \ubc18\ubcf5\ub418\ub294 UI \ud328\ud134\uc744 \ud568\uc218\ub85c \ucd94\ucd9c\n    ///\n    /// - Parameter metabolism: \ub300\uc0ac\uc728 \ub370\uc774\ud130\n    /// - Returns: \ub300\uc0ac\uc728 \ud45c\uc2dc \uce74\ub4dc\n    private func metabolismCard(metabolism: MetabolismData) -> some View {\n        VStack(spacing: 16) {\n            // BMR/TDEE \uac12\n            HStack(spacing: 20) {\n                // BMR\n                metabolismValueItem(\n                    title: \"BMR\",\n                    value: formatCalories(metabolism.bmr),\n                    icon: \"bed.double.fill\",\n                    color: .blue\n                )\n\n                Divider()\n                    .frame(height: 50)\n\n                // TDEE\n                metabolismValueItem(\n                    title: \"TDEE\",\n                    value: formatCalories(metabolism.tdee),\n                    icon: \"figure.walk\",\n                    color: .green\n                )\n            }\n\n            Divider()\n\n            // \ud65c\ub3d9 \uc218\uc900\n            HStack(spacing: 8) {\n                Image(systemName: \"figure.run\")\n                    .font(.caption)\n                    .foregroundStyle(.purple)\n\n                VStack(alignment: .leading, spacing: 2) {\n                    Text(\"\ud65c\ub3d9 \uc218\uc900\")\n                        .font(.caption)\n                        .fontWeight(.medium)\n                        .foregroundStyle(.secondary)\n\n                    Text(metabolism.activityLevel.displayName)\n                        .font(.subheadline)\n                        .foregroundStyle(.primary)\n                }\n\n                Spacer()\n\n                // \ud65c\ub3d9 \uacc4\uc218 \ud45c\uc2dc\n                Text(\"\\(String(format: \"%.2f\", metabolism.activityLevel.multiplier))x\")\n                    .font(.caption)\n                    .fontWeight(.semibold)\n                    .foregroundStyle(.purple)\n                    .padding(.horizontal, 8)\n                    .padding(.vertical, 4)\n                    .background(Color.purple.opacity(0.1))\n                    .cornerRadius(6)\n            }\n\n            // \uce21\uc815 \ub0a0\uc9dc\n            HStack {\n                Image(systemName: \"calendar\")\n                    .font(.caption)\n                    .foregroundStyle(.secondary)\n\n                Text(\"\uce21\uc815\uc77c: \\(formatDate(metabolism.date))\")\n                    .font(.caption)\n                    .foregroundStyle(.secondary)\n\n                Spacer()\n            }\n        }\n        .padding(16)\n        .background(cardBackground)\n        .cornerRadius(12)\n        .shadow(color: Color.black.opacity(0.05), radius: 8, x: 0, y: 2)\n    }\n\n    /// \uac1c\ubcc4 \ub300\uc0ac\ub7c9 \uac12 \uc544\uc774\ud15c\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Reusable Component Function\n    ///\n    /// - Parameters:\n    ///   - title: \uc81c\ubaa9 (BMR, TDEE \ub4f1)\n    ///   - value: \uce7c\ub85c\ub9ac \uac12\n    ///   - icon: SF Symbol \uc544\uc774\ucf58 \uc774\ub984\n    ///   - color: \uc544\uc774\ucf58 \uc0c9\uc0c1\n    /// - Returns: \uac12 \ud45c\uc2dc \ubdf0\n    private func metabolismValueItem(\n        title: String,\n        value: String,\n        icon: String,\n        color: Color\n    ) -> some View {\n        VStack(alignment: .leading, spacing: 6) {\n            // \ub808\uc774\ube14\n            HStack(spacing: 4) {\n                Image(systemName: icon)\n                    .font(.caption)\n                    .foregroundStyle(color)\n\n                Text(title)\n                    .font(.caption)\n                    .fontWeight(.medium)\n                    .foregroundStyle(.secondary)\n            }\n\n            // \uac12\n            Text(value)\n                .font(.title2)\n                .fontWeight(.bold)\n                .foregroundStyle(.primary)\n\n            // \ub2e8\uc704\n            Text(\"kcal/\uc77c\")\n                .font(.caption2)\n                .foregroundStyle(.secondary)\n        }\n        .frame(maxWidth: .infinity, alignment: .leading)\n    }\n\n    /// \uae30\ub85d \ub9ac\uc2a4\ud2b8\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: LazyVStack for Performance\n    /// - \ubcf4\uc774\ub294 \ubd80\ubd84\ub9cc \ub80c\ub354\ub9c1\ud558\uc5ec \uc131\ub2a5 \ucd5c\uc801\ud654\n    private var historyList: some View {\n        VStack(spacing: 12) {\n            ForEach(viewModel.history) { entry in\n                historyRow(entry: entry)\n                    .onTapGesture {\n                        selectedEntry = entry\n                    }\n            }\n        }\n    }\n\n    /// \uae30\ub85d \ud589\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: List Item Component\n    /// - \uac01 \uae30\ub85d\uc744 \uce74\ub4dc \ud615\ud0dc\ub85c \ud45c\uc2dc\n    ///\n    /// - Parameter entry: \uc2e0\uccb4 \uad6c\uc131 \uc5d4\ud2b8\ub9ac\n    /// - Returns: \uae30\ub85d \ud589 \ubdf0\n    private func historyRow(entry: BodyCompositionEntry) -> some View {\n        HStack(spacing: 16) {\n            // \ub0a0\uc9dc\n            VStack(alignment: .leading, spacing: 2) {\n                Text(formatDateShort(entry.date))\n                    .font(.caption)\n                    .fontWeight(.semibold)\n                    .foregroundStyle(.secondary)\n\n                Text(formatTime(entry.date))\n                    .font(.caption2)\n                    .foregroundStyle(.secondary)\n            }\n            .frame(width: 60, alignment: .leading)\n\n            Divider()\n                .frame(height: 40)\n\n            // \uce21\uc815\uac12\ub4e4\n            VStack(alignment: .leading, spacing: 4) {\n                // \uccb4\uc911\n                measurementRow(\n                    icon: \"scalemass\",\n                    label: \"\uccb4\uc911\",\n                    value: \"\\(formatDecimal(entry.weight)) kg\"\n                )\n\n                // \uccb4\uc9c0\ubc29\ub960\n                measurementRow(\n                    icon: \"percent\",\n                    label: \"\uccb4\uc9c0\ubc29\ub960\",\n                    value: \"\\(formatDecimal(entry.bodyFatPercent))%\"\n                )\n\n                // \uadfc\uc721\ub7c9\n                measurementRow(\n                    icon: \"figure.strengthtraining.traditional\",\n                    label: \"\uadfc\uc721\ub7c9\",\n                    value: \"\\(formatDecimal(entry.muscleMass)) kg\"\n                )\n            }\n\n            Spacer()\n\n            // \uc0ad\uc81c \ubc84\ud2bc\n            Button(action: {\n                Task {\n                    await viewModel.deleteEntry(id: entry.id)\n                }\n            }) {\n                Image(systemName: \"trash\")\n                    .font(.caption)\n                    .foregroundStyle(.red)\n                    .padding(8)\n                    .background(Color.red.opacity(0.1))\n                    .cornerRadius(6)\n            }\n        }\n        .padding(12)\n        .background(cardBackground)\n        .cornerRadius(10)\n        .shadow(color: Color.black.opacity(0.03), radius: 4, x: 0, y: 1)\n    }\n\n    /// \uce21\uc815\uac12 \ud589\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Micro Component\n    /// - \ub9e4\uc6b0 \uc791\uc740 \ub2e8\uc704\uc758 \uc7ac\uc0ac\uc6a9 \uac00\ub2a5\ud55c \ucef4\ud3ec\ub10c\ud2b8\n    ///\n    /// - Parameters:\n    ///   - icon: SF Symbol \uc544\uc774\ucf58\n    ///   - label: \ub808\uc774\ube14\n    ///   - value: \uac12\n    /// - Returns: \uce21\uc815\uac12 \ud589 \ubdf0\n    private func measurementRow(icon: String, label: String, value: String) -> some View {\n        HStack(spacing: 6) {\n            Image(systemName: icon)\n                .font(.caption2)\n                .foregroundStyle(.secondary)\n                .frame(width: 16)\n\n            Text(label)\n                .font(.caption)\n                .foregroundStyle(.secondary)\n                .frame(width: 50, alignment: .leading)\n\n            Text(value)\n                .font(.caption)\n                .fontWeight(.medium)\n                .foregroundStyle(.primary)\n        }\n    }\n\n    /// \ub85c\ub529 \ubdf0\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Loading State UI\n    private var loadingView: some View {\n        HStack {\n            Spacer()\n            VStack(spacing: 12) {\n                ProgressView()\n                    .scaleEffect(1.2)\n                Text(\"\uae30\ub85d\uc744 \ubd88\ub7ec\uc624\ub294 \uc911...\")\n                    .font(.caption)\n                    .foregroundStyle(.secondary)\n            }\n            .padding(.vertical, 40)\n            Spacer()\n        }\n    }\n\n    /// \ube48 \ud788\uc2a4\ud1a0\ub9ac \ubdf0\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Empty State UI\n    /// - \ub370\uc774\ud130\uac00 \uc5c6\uc744 \ub54c \uc0ac\uc6a9\uc790\uc5d0\uac8c \uc548\ub0b4\n    private var emptyHistoryView: some View {\n        VStack(spacing: 16) {\n            Image(systemName: \"tray\")\n                .font(.system(size: 50))\n                .foregroundStyle(.secondary)\n\n            Text(\"\uc544\uc9c1 \uae30\ub85d\uc774 \uc5c6\uc2b5\ub2c8\ub2e4\")\n                .font(.subheadline)\n                .fontWeight(.medium)\n                .foregroundStyle(.primary)\n\n            Text(\"\uc704\uc5d0\uc11c \uc2e0\uccb4 \ub370\uc774\ud130\ub97c \uc785\ub825\ud558\uace0\\n\uc800\uc7a5 \ubc84\ud2bc\uc744 \ub20c\ub7ec \uae30\ub85d\uc744 \uc2dc\uc791\ud558\uc138\uc694\")\n                .font(.caption)\n                .foregroundStyle(.secondary)\n                .multilineTextAlignment(.center)\n        }\n        .padding(.vertical, 40)\n        .frame(maxWidth: .infinity)\n    }\n\n    /// \uc139\uc158 \ud5e4\ub354\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Section Header Component\n    ///\n    /// - Parameters:\n    ///   - title: \uc139\uc158 \uc81c\ubaa9\n    ///   - icon: SF Symbol \uc544\uc774\ucf58\n    /// - Returns: \uc139\uc158 \ud5e4\ub354 \ubdf0\n    private func sectionHeader(title: String, icon: String) -> some View {\n        HStack(spacing: 8) {\n            Image(systemName: icon)\n                .font(.subheadline)\n                .foregroundStyle(.blue)\n\n            Text(title)\n                .font(.headline)\n                .fontWeight(.semibold)\n                .foregroundStyle(.primary)\n        }\n    }\n\n    /// \uc131\uacf5 \ud1a0\uc2a4\ud2b8\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Toast Notification\n    /// - \uc800\uc7a5 \uc131\uacf5 \uc2dc \ud654\uba74 \uc0c1\ub2e8\uc5d0 \ud45c\uc2dc\n    ///\n    /// - Parameter message: \uc131\uacf5 \uba54\uc2dc\uc9c0\n    /// - Returns: \ud1a0\uc2a4\ud2b8 \ubdf0\n    private func successToast(message: String) -> some View {\n        HStack(spacing: 12) {\n            Image(systemName: \"checkmark.circle.fill\")\n                .font(.title3)\n                .foregroundStyle(.green)\n\n            Text(message)\n                .font(.subheadline)\n                .fontWeight(.medium)\n                .foregroundStyle(.primary)\n\n            Spacer()\n        }\n        .padding(.horizontal, 16)\n        .padding(.vertical, 12)\n        .background(\n            RoundedRectangle(cornerRadius: 10)\n                .fill(Color(.systemBackground))\n                .shadow(color: Color.black.opacity(0.1), radius: 10, x: 0, y: 5)\n        )\n        .padding(.horizontal, 16)\n        .padding(.top, 8)\n        .transition(.move(edge: .top).combined(with: .opacity))\n        .animation(.spring(), value: viewModel.successMessage != nil)\n    }\n\n    /// \uce74\ub4dc \ubc30\uacbd\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Adaptive Colors\n    /// - \ub77c\uc774\ud2b8/\ub2e4\ud06c \ubaa8\ub4dc\uc5d0 \uc790\ub3d9 \ub300\uc751\ud558\ub294 \uc0c9\uc0c1\n    private var cardBackground: some View {\n        RoundedRectangle(cornerRadius: 12)\n            .fill(Color(.systemBackground))\n            .overlay(\n                RoundedRectangle(cornerRadius: 12)\n                    .stroke(Color(.systemGray5), lineWidth: 1)\n            )\n    }\n\n    // MARK: - Helper Methods\n\n    /// \ub370\uc774\ud130 \uc0c8\ub85c\uace0\uce68\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Pull-to-Refresh\n    /// - \uc0ac\uc6a9\uc790\uac00 \uc544\ub798\ub85c \ub2f9\uae38 \ub54c \uc2e4\ud589\n    private func refreshData() async {\n        await viewModel.loadHistory()\n    }\n\n    /// \uce7c\ub85c\ub9ac \uac12 \ud3ec\ub9f7\ud305\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Number Formatting\n    ///\n    /// - Parameter calories: \uce7c\ub85c\ub9ac \uac12\n    /// - Returns: \ud3ec\ub9f7\ub41c \ubb38\uc790\uc5f4 (\uc608: \"1,650\")\n    private func formatCalories(_ calories: Decimal) -> String {\n        let formatter = NumberFormatter()\n        formatter.numberStyle = .decimal\n        formatter.maximumFractionDigits = 0\n        formatter.minimumFractionDigits = 0\n\n        let number = NSDecimalNumber(decimal: calories)\n        return formatter.string(from: number) ?? \"\\(calories)\"\n    }\n\n    /// Decimal \uac12 \ud3ec\ub9f7\ud305\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Decimal Formatting\n    ///\n    /// - Parameter value: Decimal \uac12\n    /// - Returns: \ud3ec\ub9f7\ub41c \ubb38\uc790\uc5f4 (\uc608: \"70.5\")\n    private func formatDecimal(_ value: Decimal) -> String {\n        let formatter = NumberFormatter()\n        formatter.numberStyle = .decimal\n        formatter.maximumFractionDigits = 1\n        formatter.minimumFractionDigits = 1\n\n        let number = NSDecimalNumber(decimal: value)\n        return formatter.string(from: number) ?? \"\\(value)\"\n    }\n\n    /// \ub0a0\uc9dc \ud3ec\ub9f7\ud305\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Date Formatting\n    ///\n    /// - Parameter date: \ub0a0\uc9dc\n    /// - Returns: \ud3ec\ub9f7\ub41c \ubb38\uc790\uc5f4 (\uc608: \"2026\ub144 1\uc6d4 12\uc77c\")\n    private func formatDate(_ date: Date) -> String {\n        let formatter = DateFormatter()\n        formatter.dateStyle = .long\n        formatter.timeStyle = .none\n        formatter.locale = Locale(identifier: \"ko_KR\")\n        return formatter.string(from: date)\n    }\n\n    /// \uc9e7\uc740 \ub0a0\uc9dc \ud3ec\ub9f7\ud305\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Short Date Format\n    ///\n    /// - Parameter date: \ub0a0\uc9dc\n    /// - Returns: \ud3ec\ub9f7\ub41c \ubb38\uc790\uc5f4 (\uc608: \"01/12\")\n    private func formatDateShort(_ date: Date) -> String {\n        let formatter = DateFormatter()\n        formatter.dateFormat = \"MM/dd\"\n        return formatter.string(from: date)\n    }\n\n    /// \uc2dc\uac04 \ud3ec\ub9f7\ud305\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Time Formatting\n    ///\n    /// - Parameter date: \ub0a0\uc9dc\n    /// - Returns: \ud3ec\ub9f7\ub41c \ubb38\uc790\uc5f4 (\uc608: \"14:30\")\n    private func formatTime(_ date: Date) -> String {\n        let formatter = DateFormatter()\n        formatter.timeStyle = .short\n        formatter.dateStyle = .none\n        return formatter.string(from: date)\n    }\n}\n\n// MARK: - Preview\n\n#if DEBUG\n#Preview(\"\uae30\ubcf8 \uc0c1\ud0dc\") {\n    // TODO: ViewModel Mock \uad6c\ud604 \ud6c4 Preview \ucd94\uac00\n    // BodyCompositionView(viewModel: .makePreview())\n    Text(\"Preview\ub97c \uc704\ud574 Mock ViewModel\uc774 \ud544\uc694\ud569\ub2c8\ub2e4\")\n}\n\n#Preview(\"\ub370\uc774\ud130 \uc788\uc74c\") {\n    // TODO: ViewModel Mock \uad6c\ud604 \ud6c4 Preview \ucd94\uac00\n    Text(\"Preview\ub97c \uc704\ud574 Mock ViewModel\uc774 \ud544\uc694\ud569\ub2c8\ub2e4\")\n}\n\n#Preview(\"\ube48 \uc0c1\ud0dc\") {\n    // TODO: ViewModel Mock \uad6c\ud604 \ud6c4 Preview \ucd94\uac00\n    Text(\"Preview\ub97c \uc704\ud574 Mock ViewModel\uc774 \ud544\uc694\ud569\ub2c8\ub2e4\")\n}\n\n#Preview(\"\ub2e4\ud06c \ubaa8\ub4dc\") {\n    // TODO: ViewModel Mock \uad6c\ud604 \ud6c4 Preview \ucd94\uac00\n    Text(\"Preview\ub97c \uc704\ud574 Mock ViewModel\uc774 \ud544\uc694\ud569\ub2c8\ub2e4\")\n        .preferredColorScheme(.dark)\n}\n#endif\n\n// MARK: - Documentation\n\n/// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: BodyCompositionView \uc0ac\uc6a9\ubc95\n///\n/// \uae30\ubcf8 \uc0ac\uc6a9 (DIContainer\uc5d0\uc11c \uc0dd\uc131):\n/// ```swift\n/// struct ContentView: View {\n///     let container: DIContainer\n///\n///     var body: some View {\n///         TabView {\n///             BodyCompositionView(\n///                 viewModel: container.makeBodyCompositionViewModel()\n///             )\n///             .tabItem {\n///                 Label(\"\uccb4\uc131\ubd84\", systemImage: \"figure.stand\")\n///             }\n///         }\n///     }\n/// }\n/// ```\n///\n/// \uc8fc\uc694 \uae30\ub2a5:\n/// - \uc2e0\uccb4 \ub370\uc774\ud130 \uc785\ub825 (\uccb4\uc911, \uccb4\uc9c0\ubc29\ub960, \uadfc\uc721\ub7c9)\n/// - \uc2e4\uc2dc\uac04 \uc785\ub825 \uac80\uc99d \ubc0f \ud53c\ub4dc\ubc31\n/// - \uc790\ub3d9 BMR/TDEE \uacc4\uc0b0 \ubc0f \ud45c\uc2dc\n/// - \ucd5c\uadfc \uae30\ub85d \ub9ac\uc2a4\ud2b8 \ud45c\uc2dc\n/// - \uae30\ub85d \uc0ad\uc81c \uae30\ub2a5\n/// - Pull-to-refresh \uc0c8\ub85c\uace0\uce68\n/// - \ud2b8\ub80c\ub4dc \ubdf0\ub85c \uc774\ub3d9\n/// - \uc131\uacf5/\uc5d0\ub7ec \uba54\uc2dc\uc9c0 \ud45c\uc2dc\n///\n/// \ud654\uba74 \uad6c\uc131:\n/// 1. \uc785\ub825 \uc139\uc158: BodyCompositionInputCard \uc0ac\uc6a9\n/// 2. \ub300\uc0ac\uc728 \uc139\uc158: \ucd5c\uadfc BMR/TDEE \ud45c\uc2dc\n/// 3. \ud788\uc2a4\ud1a0\ub9ac \uc139\uc158: \ucd5c\uadfc 30\uc77c \uae30\ub85d \ub9ac\uc2a4\ud2b8\n///\n/// \ub124\ube44\uac8c\uc774\uc158:\n/// - NavigationStack \uc0ac\uc6a9\n/// - \ud2b8\ub80c\ub4dc \ubc84\ud2bc\uc73c\ub85c BodyTrendsView(sheet) \uc774\ub3d9\n/// - \uae30\ub85d \ud0ed\uc73c\ub85c BodyRecordDetailView \uc774\ub3d9 (TODO)\n///\n/// \uc0c1\ud0dc \uad00\ub9ac:\n/// - ViewModel\uc758 @Published \ud504\ub85c\ud37c\ud2f0 \uad00\ucc30\n/// - @StateObject\ub85c ViewModel \uc0dd\uba85\uc8fc\uae30 \uad00\ub9ac\n/// - @State\ub85c \ub85c\uceec UI \uc0c1\ud0dc \uad00\ub9ac\n///\n/// \uc5d0\ub7ec \ucc98\ub9ac:\n/// - Alert\ub85c \uc5d0\ub7ec \uba54\uc2dc\uc9c0 \ud45c\uc2dc\n/// - ViewModel\uc5d0\uc11c \uc5d0\ub7ec \uc0c1\ud0dc \uad00\ub9ac\n/// - \uc0ac\uc6a9\uc790 \uce5c\ud654\uc801\uc778 \ud55c\uae00 \uba54\uc2dc\uc9c0\n///\n/// \ud83d\udca1 Android \ube44\uad50:\n/// - Android: Fragment + RecyclerView + ViewModel\n/// - SwiftUI: View + ScrollView + LazyVStack + @StateObject\n/// - Android: LiveData.observe()\n/// - SwiftUI: @Published + automatic updates\n/// - Android: SwipeRefreshLayout\n/// - SwiftUI: .refreshable modifier\n///\n/// \uc811\uadfc\uc131:\n/// - VoiceOver \uc9c0\uc6d0\n/// - Dynamic Type \uc9c0\uc6d0\n/// - \ucda9\ubd84\ud55c \ud130\uce58 \uc601\uc5ed\n/// - \uba85\ud655\ud55c \ub808\uc774\ube14\uacfc \ud78c\ud2b8\n///\n",
        "last_modified": "2026-01-14T22:58:13.156372"
      },
      "task_intent": {
        "title": "Body Composition Tracking with BMR/TDEE",
        "description": "Complete body composition logging system including height, weight, body fat percentage, muscle mass, with automatic BMR (Mifflin-St Jeor) and TDEE calculations. Visualize changes over time with Swift Charts graphs showing trends and goal progress.",
        "from_plan": true
      },
      "commits_behind_main": 1,
      "status": "active",
      "merged_at": null
    }
  },
  "created_at": "2026-01-13T07:43:04.683016",
  "last_updated": "2026-01-13T07:46:22.926903"
}