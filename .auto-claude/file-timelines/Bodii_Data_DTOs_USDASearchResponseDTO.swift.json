{
  "file_path": "Bodii/Data/DTOs/USDASearchResponseDTO.swift",
  "main_branch_history": [],
  "task_views": {
    "005-korean-food-database-integration": {
      "task_id": "005-korean-food-database-integration",
      "branch_point": {
        "commit_hash": "c44bfbcd7c1699b176a8bb155e8c35f43ebd4ad9",
        "content": "",
        "timestamp": "2026-01-13T07:46:23.878686"
      },
      "worktree_state": {
        "content": "//\n//  USDASearchResponseDTO.swift\n//  Bodii\n//\n//  Created by Auto-Claude on 2026-01-12.\n//\n\n// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: USDA API Response Wrapper\n// USDA API\uc758 \uac80\uc0c9 \uc751\ub2f5 \uad6c\uc870 (KFDA\uc758 Header+Body\uc640 \ub2e4\ub978 \ub2e8\uc21c \uad6c\uc870)\n// \ud83d\udca1 Java \ube44\uad50: Page<T> wrapper - \ud398\uc774\uc9d5 \uc815\ubcf4\uac00 \ud3ec\ud568\ub41c \uc751\ub2f5 \ub798\ud37c\n\nimport Foundation\n\n/// USDA FoodData Central API \uac80\uc0c9 \uc751\ub2f5 DTO\n///\n/// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Simple Response Structure\n/// USDA API\ub294 KFDA\uc758 Header+Body \uad6c\uc870\uc640 \ub2ec\ub9ac \ub2e8\uc21c\ud55c \uc751\ub2f5 \uad6c\uc870 \uc0ac\uc6a9\n/// \uc5d0\ub7ec\ub294 HTTP \uc0c1\ud0dc \ucf54\ub4dc\ub85c \ucc98\ub9ac\n/// \ud83d\udca1 Java \ube44\uad50: REST API\uc758 \ud45c\uc900 \ud398\uc774\uc9d5 \uc751\ub2f5 \ud615\uc2dd\n///\n/// **API \uc751\ub2f5 \uad6c\uc870:**\n/// ```json\n/// {\n///   \"totalHits\": 156,\n///   \"currentPage\": 1,\n///   \"totalPages\": 16,\n///   \"pageList\": [1, 2, 3, 4, 5],\n///   \"foodSearchCriteria\": {\n///     \"query\": \"apple\",\n///     \"pageSize\": 10,\n///     \"pageNumber\": 1\n///   },\n///   \"foods\": [\n///     { \"fdcId\": 123456, \"description\": \"Apple, raw\", ... },\n///     ...\n///   ]\n/// }\n/// ```\n///\n/// **\uc0ac\uc6a9 \uc608\uc2dc:**\n/// ```swift\n/// let response: USDASearchResponseDTO = try await networkManager.request(\n///     url: usdaSearchURL,\n///     method: .get\n/// )\n///\n/// let foods = response.foods ?? []\n/// print(\"Found \\(response.totalHits) foods, showing page \\(response.currentPage) of \\(response.totalPages)\")\n///\n/// if response.hasMorePages {\n///     // \ub2e4\uc74c \ud398\uc774\uc9c0 \ub85c\ub4dc\n/// }\n/// ```\n///\n/// **\ucc38\uace0:**\n/// - API \ubb38\uc11c: https://fdc.nal.usda.gov/api-guide.html\n/// - Search endpoint: GET /v1/foods/search\nstruct USDASearchResponseDTO: Codable {\n\n    // MARK: - \uac80\uc0c9 \uacb0\uacfc \uc815\ubcf4\n\n    /// \uc804\uccb4 \uac80\uc0c9 \uacb0\uacfc \uc218\n    ///\n    /// \uac80\uc0c9 \uc870\uac74\uc5d0 \ub9de\ub294 \ucd1d \uc2dd\ud488 \uac1c\uc218\n    /// \ud398\uc774\uc9d5 \ucc98\ub9ac\uc5d0 \uc0ac\uc6a9\n    let totalHits: Int\n\n    /// \ud604\uc7ac \ud398\uc774\uc9c0 \ubc88\ud638\n    ///\n    /// 1\ubd80\ud130 \uc2dc\uc791\ud558\ub294 \ud604\uc7ac \ud398\uc774\uc9c0 \ubc88\ud638\n    let currentPage: Int\n\n    /// \uc804\uccb4 \ud398\uc774\uc9c0 \uc218\n    ///\n    /// \uc804\uccb4 \uacb0\uacfc\ub97c \ud398\uc774\uc9c0\ub85c \ub098\ub208 \ucd1d \ud398\uc774\uc9c0 \uc218\n    let totalPages: Int\n\n    /// \ud398\uc774\uc9c0 \ubc88\ud638 \ubaa9\ub85d (\uc120\ud0dd\uc801)\n    ///\n    /// \uc0ac\uc6a9 \uac00\ub2a5\ud55c \ud398\uc774\uc9c0 \ubc88\ud638 \ubaa9\ub85d\n    /// UI\uc5d0\uc11c \ud398\uc774\uc9c0\ub124\uc774\uc158 \ubc84\ud2bc \ud45c\uc2dc\uc5d0 \uc0ac\uc6a9\n    let pageList: [Int]?\n\n    // MARK: - \uac80\uc0c9 \uc870\uac74\n\n    /// \uac80\uc0c9 \uc870\uac74 \uc815\ubcf4\n    ///\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Nested Object\n    /// \uc694\uccad \uc2dc \uc0ac\uc6a9\ud55c \uac80\uc0c9 \uc870\uac74\uc744 \uc751\ub2f5\uc5d0 \ud3ec\ud568\n    /// \ud83d\udca1 Java \ube44\uad50: Echo back pattern - \uc694\uccad \ud30c\ub77c\ubbf8\ud130 \ud655\uc778\uc6a9\n    let foodSearchCriteria: SearchCriteria?\n\n    // MARK: - \uac80\uc0c9 \uacb0\uacfc\n\n    /// \uc2dd\ud488 \ubaa9\ub85d\n    ///\n    /// \ud604\uc7ac \ud398\uc774\uc9c0\uc758 \uc2dd\ud488 \ub370\uc774\ud130 \ubc30\uc5f4\n    /// \uac80\uc0c9 \uacb0\uacfc\uac00 \uc5c6\uc73c\uba74 \ube48 \ubc30\uc5f4 \ub610\ub294 nil\n    let foods: [USDAFoodDTO]?\n\n    // MARK: - Nested Types\n\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Nested Struct for Related Data\n    /// \uac80\uc0c9 \uc870\uac74\uc744 \ubcc4\ub3c4 \uad6c\uc870\uccb4\ub85c \uc815\uc758\ud558\uc5ec \uc751\ub2f5 \uad6c\uc870 \uba85\ud655\ud654\n    /// \ud83d\udca1 Java \ube44\uad50: Inner Class\uc640 \uc720\uc0ac\n    ///\n    /// **\uac80\uc0c9 \uc870\uac74 \uad6c\uc870:**\n    /// - query: \uac80\uc0c9\uc5b4\n    /// - dataType: \uc2dd\ud488 \ud0c0\uc785 \ud544\ud130 (\uc120\ud0dd\uc801)\n    /// - pageSize: \ud398\uc774\uc9c0 \ud06c\uae30\n    /// - pageNumber: \ud398\uc774\uc9c0 \ubc88\ud638\n    /// - sortBy: \uc815\ub82c \uae30\uc900 (\uc120\ud0dd\uc801)\n    /// - sortOrder: \uc815\ub82c \uc21c\uc11c (\uc120\ud0dd\uc801)\n    struct SearchCriteria: Codable {\n        /// \uac80\uc0c9\uc5b4\n        let query: String?\n\n        /// \uc2dd\ud488 \ud0c0\uc785 \ud544\ud130\n        ///\n        /// \ud2b9\uc815 \ud0c0\uc785\uc73c\ub85c \ud544\ud130\ub9c1 (\uc608: [\"Branded\", \"Foundation\"])\n        let dataType: [String]?\n\n        /// \ud398\uc774\uc9c0 \ud06c\uae30\n        ///\n        /// \ud55c \ud398\uc774\uc9c0\uc5d0 \ud45c\uc2dc\ud560 \uacb0\uacfc \uc218\n        let pageSize: Int\n\n        /// \ud398\uc774\uc9c0 \ubc88\ud638\n        ///\n        /// \uc694\uccad\ud55c \ud398\uc774\uc9c0 \ubc88\ud638 (1\ubd80\ud130 \uc2dc\uc791)\n        let pageNumber: Int\n\n        /// \uc815\ub82c \uae30\uc900 (\uc120\ud0dd\uc801)\n        ///\n        /// \uc815\ub82c \ud544\ub4dc\uba85 (\uc608: \"dataType.keyword\", \"lowercaseDescription.keyword\")\n        let sortBy: String?\n\n        /// \uc815\ub82c \uc21c\uc11c (\uc120\ud0dd\uc801)\n        ///\n        /// \"asc\" \ub610\ub294 \"desc\"\n        let sortOrder: String?\n\n        /// \ube0c\ub79c\ub4dc \uc18c\uc720\uc790 \ud544\ud130 (\uc120\ud0dd\uc801)\n        ///\n        /// Branded \uc2dd\ud488\uc758 \ube0c\ub79c\ub4dc\ub85c \ud544\ud130\ub9c1\n        let brandOwner: String?\n\n        /// CodingKeys for API field mapping\n        enum CodingKeys: String, CodingKey {\n            case query = \"query\"\n            case dataType = \"dataType\"\n            case pageSize = \"pageSize\"\n            case pageNumber = \"pageNumber\"\n            case sortBy = \"sortBy\"\n            case sortOrder = \"sortOrder\"\n            case brandOwner = \"brandOwner\"\n        }\n    }\n\n    // MARK: - CodingKeys\n\n    enum CodingKeys: String, CodingKey {\n        case totalHits = \"totalHits\"\n        case currentPage = \"currentPage\"\n        case totalPages = \"totalPages\"\n        case pageList = \"pageList\"\n        case foodSearchCriteria = \"foodSearchCriteria\"\n        case foods = \"foods\"\n    }\n}\n\n// MARK: - Convenience Methods\n\nextension USDASearchResponseDTO {\n\n    /// \uac80\uc0c9 \uacb0\uacfc\uac00 \uc788\ub294\uc9c0 \ud655\uc778\n    ///\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Computed Property\n    /// \uc790\uc8fc \uc0ac\uc6a9\ud558\ub294 \uac80\uc99d \ub85c\uc9c1\uc744 \ud504\ub85c\ud37c\ud2f0\ub85c \uc81c\uacf5\n    /// \ud83d\udca1 Java \ube44\uad50: getter \uba54\uc11c\ub4dc\uc640 \ub3d9\uc77c\ud558\uc9c0\ub9cc \ub354 \uac04\uacb0\n    ///\n    /// - Returns: \uc2dd\ud488\uc774 \ud558\ub098\ub77c\ub3c4 \uc788\uc73c\uba74 true\n    ///\n    /// - Example:\n    /// ```swift\n    /// if response.hasResults {\n    ///     displayFoods(response.foods ?? [])\n    /// } else {\n    ///     showNoResultsMessage()\n    /// }\n    /// ```\n    var hasResults: Bool {\n        return totalHits > 0 && !(foods?.isEmpty ?? true)\n    }\n\n    /// \ub2e4\uc74c \ud398\uc774\uc9c0\uac00 \uc788\ub294\uc9c0 \ud655\uc778\n    ///\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Pagination Logic\n    /// \ub2e4\uc74c \ud398\uc774\uc9c0 \uc694\uccad \uc5ec\ubd80 \uacb0\uc815\n    /// \ud83d\udca1 Java \ube44\uad50: Page.hasNext()\uc640 \uc720\uc0ac\n    ///\n    /// - Returns: \ub2e4\uc74c \ud398\uc774\uc9c0\uac00 \uc788\uc73c\uba74 true\n    ///\n    /// - Example:\n    /// ```swift\n    /// if response.hasMorePages {\n    ///     loadNextPage()\n    /// }\n    /// ```\n    var hasMorePages: Bool {\n        return currentPage < totalPages\n    }\n\n    /// \uc774\uc804 \ud398\uc774\uc9c0\uac00 \uc788\ub294\uc9c0 \ud655\uc778\n    ///\n    /// - Returns: \uc774\uc804 \ud398\uc774\uc9c0\uac00 \uc788\uc73c\uba74 true\n    var hasPreviousPages: Bool {\n        return currentPage > 1\n    }\n\n    /// \ub2e4\uc74c \ud398\uc774\uc9c0 \ubc88\ud638 \ubc18\ud658\n    ///\n    /// - Returns: \ub2e4\uc74c \ud398\uc774\uc9c0 \ubc88\ud638 (\uc5c6\uc73c\uba74 nil)\n    var nextPage: Int? {\n        return hasMorePages ? currentPage + 1 : nil\n    }\n\n    /// \uc774\uc804 \ud398\uc774\uc9c0 \ubc88\ud638 \ubc18\ud658\n    ///\n    /// - Returns: \uc774\uc804 \ud398\uc774\uc9c0 \ubc88\ud638 (\uc5c6\uc73c\uba74 nil)\n    var previousPage: Int? {\n        return hasPreviousPages ? currentPage - 1 : nil\n    }\n\n    /// \ud604\uc7ac \ud398\uc774\uc9c0\uc758 \uc2dd\ud488 \uc218\n    ///\n    /// - Returns: \ud604\uc7ac \ud398\uc774\uc9c0\uc5d0 \uc788\ub294 \uc2dd\ud488 \uac1c\uc218\n    var foodCount: Int {\n        return foods?.count ?? 0\n    }\n\n    /// \uac80\uc0c9 \uacb0\uacfc \uc694\uc57d \ubb38\uc790\uc5f4\n    ///\n    /// UI\uc5d0 \ud45c\uc2dc\ud560 \uac80\uc0c9 \uacb0\uacfc \uc694\uc57d\n    ///\n    /// - Returns: \uac80\uc0c9 \uacb0\uacfc \uc694\uc57d (\uc608: \"156\uac1c \uacb0\uacfc \uc911 1-10\")\n    ///\n    /// - Example:\n    /// ```swift\n    /// print(response.resultSummary) // \"156\uac1c \uacb0\uacfc \uc911 1-10\"\n    /// ```\n    var resultSummary: String {\n        guard hasResults else {\n            return \"\uac80\uc0c9 \uacb0\uacfc \uc5c6\uc74c\"\n        }\n\n        let pageSize = foodSearchCriteria?.pageSize ?? 10\n        let startIndex = (currentPage - 1) * pageSize + 1\n        let endIndex = min(currentPage * pageSize, totalHits)\n\n        return \"\\(totalHits)\uac1c \uacb0\uacfc \uc911 \\(startIndex)-\\(endIndex)\"\n    }\n}\n\n// MARK: - Validation\n\nextension USDASearchResponseDTO {\n\n    /// \uc751\ub2f5 \ub370\uc774\ud130\uac00 \uc720\ud6a8\ud55c\uc9c0 \uac80\uc99d\n    ///\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Response Validation\n    /// API \uc751\ub2f5\uc758 \uc77c\uad00\uc131 \uac80\uc99d\n    /// \ud83d\udca1 Java \ube44\uad50: Response validation pattern\n    ///\n    /// - Returns: \uc720\ud6a8\ud558\uba74 true\n    ///\n    /// **\uac80\uc99d \ud56d\ubaa9:**\n    /// - \ud398\uc774\uc9c0 \ubc88\ud638\uac00 \uc804\uccb4 \ud398\uc774\uc9c0 \ubc94\uc704 \ub0b4\uc5d0 \uc788\ub294\uc9c0\n    /// - totalHits\uc640 \uc2e4\uc81c foods \ubc30\uc5f4\uc774 \uc77c\uce58\ud558\ub294\uc9c0 (\ub9c8\uc9c0\ub9c9 \ud398\uc774\uc9c0\ub294 \uc608\uc678)\n    var isValid: Bool {\n        // \ud398\uc774\uc9c0 \ubc88\ud638 \uc720\ud6a8\uc131 \uac80\uc99d\n        guard currentPage >= 1 && currentPage <= totalPages else {\n            return false\n        }\n\n        // totalHits\uac00 \uc74c\uc218\uac00 \uc544\ub2cc\uc9c0 \ud655\uc778\n        guard totalHits >= 0 else {\n            return false\n        }\n\n        // foods \ubc30\uc5f4\uc774 nil\uc774 \uc544\ub2cc\uc9c0 \ud655\uc778 (\uacb0\uacfc\uac00 \uc788\ub294 \uacbd\uc6b0)\n        if totalHits > 0 {\n            guard foods != nil else {\n                return false\n            }\n        }\n\n        return true\n    }\n}\n\n// MARK: - Error Handling\n\n/// USDA API \uc5d0\ub7ec \ud0c0\uc785\n///\n/// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Domain-Specific Error Types\n/// USDA API\ub294 HTTP \uc0c1\ud0dc \ucf54\ub4dc\ub85c \uc5d0\ub7ec\ub97c \uc804\ub2ec\ud558\uc9c0\ub9cc,\n/// \ube44\uc988\ub2c8\uc2a4 \ub85c\uc9c1\uc5d0\uc11c\ub294 \uc758\ubbf8 \uc788\ub294 \uc5d0\ub7ec \ud0c0\uc785\uc73c\ub85c \ubcc0\ud658\n/// \ud83d\udca1 Java \ube44\uad50: Custom Exception \uacc4\uce35 \uad6c\uc870\uc640 \uc720\uc0ac\n///\n/// - Note: USDA API\ub294 KFDA\ucc98\ub7fc \uc751\ub2f5 \ubcf8\ubb38\uc5d0 \uc5d0\ub7ec \ucf54\ub4dc\ub97c \ud3ec\ud568\ud558\uc9c0 \uc54a\uc74c\n///         HTTP \uc0c1\ud0dc \ucf54\ub4dc\uc640 \uba54\uc2dc\uc9c0\ub85c \uc5d0\ub7ec \ud310\ub2e8\nenum USDAAPIError: Error {\n    /// \uc798\ubabb\ub41c \uc694\uccad (400 Bad Request)\n    case badRequest(String)\n\n    /// \uc778\uc99d \uc2e4\ud328 (401/403)\n    case authenticationFailed(String)\n\n    /// \ub9ac\uc18c\uc2a4\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc74c (404)\n    case notFound\n\n    /// \uc694\uccad \uc81c\ud55c \ucd08\uacfc (429 Too Many Requests)\n    case rateLimitExceeded\n\n    /// \uc11c\ubc84 \uc5d0\ub7ec (500)\n    case serverError(String)\n\n    /// \ub370\uc774\ud130 \uc5c6\uc74c\n    case noData\n\n    /// \ud30c\uc2f1 \uc5d0\ub7ec\n    case parsingError(String)\n\n    /// \uae30\ud0c0 \uc5d0\ub7ec\n    case unknown(Int, String)\n\n    /// \uc0ac\uc6a9\uc790 \uce5c\ud654\uc801 \uc5d0\ub7ec \uba54\uc2dc\uc9c0\n    ///\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Localized Error Message\n    /// \uc0ac\uc6a9\uc790\uc5d0\uac8c \ud45c\uc2dc\ud560 \ud55c\uae00 \uc5d0\ub7ec \uba54\uc2dc\uc9c0\n    /// \ud83d\udca1 Java \ube44\uad50: getMessage()\uc640 \uc720\uc0ac\n    var localizedDescription: String {\n        switch self {\n        case .badRequest(let message):\n            return \"\uc798\ubabb\ub41c \uc694\uccad\uc785\ub2c8\ub2e4: \\(message)\"\n        case .authenticationFailed(let message):\n            return \"\uc778\uc99d\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4: \\(message)\"\n        case .notFound:\n            return \"\uc694\uccad\ud55c \uc2dd\ud488\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.\"\n        case .rateLimitExceeded:\n            return \"\uc694\uccad \ud69f\uc218 \uc81c\ud55c\uc744 \ucd08\uacfc\ud588\uc2b5\ub2c8\ub2e4. \uc7a0\uc2dc \ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.\"\n        case .serverError(let message):\n            return \"\uc11c\ubc84 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4: \\(message)\"\n        case .noData:\n            return \"\uac80\uc0c9 \uacb0\uacfc\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.\"\n        case .parsingError(let message):\n            return \"\ub370\uc774\ud130 \ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4: \\(message)\"\n        case .unknown(let code, let message):\n            return \"\uc54c \uc218 \uc5c6\ub294 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4 (\ucf54\ub4dc: \\(code)): \\(message)\"\n        }\n    }\n}\n",
        "last_modified": "2026-01-14T22:55:39.259766"
      },
      "task_intent": {
        "title": "005-korean-food-database-integration",
        "description": "Integrate Korean Food & Drug Administration (\uc2dd\uc57d\ucc98) food nutrition database API as primary source, with USDA FoodData Central as fallback for international foods. Prioritize Korean dishes (kimchi jjigae, bibimbap, tteokbokki) that are poorly covered by competitors.",
        "from_plan": true
      },
      "commits_behind_main": 0,
      "status": "active",
      "merged_at": null
    }
  },
  "created_at": "2026-01-13T07:43:31.531967",
  "last_updated": "2026-01-13T07:46:23.967312"
}