{
  "file_path": "Bodii/Data/DTOs/KFDAFoodDTO.swift",
  "main_branch_history": [],
  "task_views": {
    "005-korean-food-database-integration": {
      "task_id": "005-korean-food-database-integration",
      "branch_point": {
        "commit_hash": "c44bfbcd7c1699b176a8bb155e8c35f43ebd4ad9",
        "content": "",
        "timestamp": "2026-01-13T07:46:23.878686"
      },
      "worktree_state": {
        "content": "//\n//  KFDAFoodDTO.swift\n//  Bodii\n//\n//  Created by Auto-Claude on 2026-01-12.\n//\n\n// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Data Transfer Object (DTO)\n// API \uc751\ub2f5 \ub370\uc774\ud130\ub97c \ud30c\uc2f1\ud558\uae30 \uc704\ud55c \uc911\uac04 \uac1d\uccb4\n// \ud83d\udca1 Java \ube44\uad50: Retrofit\uc758 Response Model\uacfc \ub3d9\uc77c\ud55c \uc5ed\ud560\n\nimport Foundation\n\n/// \uc2dd\uc57d\ucc98 API \uc2dd\ud488 \uc601\uc591 \uc815\ubcf4 DTO\n///\n/// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: DTO vs Domain Entity\n/// DTO\ub294 API \uc751\ub2f5 \uad6c\uc870\ub97c \uadf8\ub300\ub85c \ubc18\uc601\ud558\uace0, Domain Entity\ub294 \ube44\uc988\ub2c8\uc2a4 \ub85c\uc9c1\uc5d0 \ucd5c\uc801\ud654\n/// \ud83d\udca1 Java \ube44\uad50: DTO pattern - \ub370\uc774\ud130 \uc804\uc1a1\uc744 \uc704\ud55c \uac1d\uccb4\n///\n/// **API \uc751\ub2f5 \ud544\ub4dc:**\n/// - \uc2dd\uc57d\ucc98 API\ub294 snake_case \ud544\ub4dc\uba85 \uc0ac\uc6a9 (\uc608: FOOD_CD, DESC_KOR)\n/// - JSONDecoder\uc758 convertFromSnakeCase \uc804\ub7b5\uc73c\ub85c \uc790\ub3d9 \ubcc0\ud658\n/// - \uc608: DESC_KOR \u2192 descKor, SERVING_SIZE \u2192 servingSize\n///\n/// **\uc0ac\uc6a9 \uc608\uc2dc:**\n/// ```swift\n/// let decoder = JSONDecoder()\n/// decoder.keyDecodingStrategy = .convertFromSnakeCase\n/// let foodDTO = try decoder.decode(KFDAFoodDTO.self, from: jsonData)\n/// ```\n///\n/// **\ucc38\uace0:**\n/// - API \ubb38\uc11c: https://www.data.go.kr/data/15127578/openapi.do\n/// - \uc2dd\ud488\uc601\uc591\uc131\ubd84DB: https://various.foodsafetykorea.go.kr/nutrient/\nstruct KFDAFoodDTO: Codable {\n\n    // MARK: - \uc2dd\ud488 \uae30\ubcf8 \uc815\ubcf4\n\n    /// \uc2dd\ud488 \ucf54\ub4dc\n    ///\n    /// API \ud544\ub4dc\uba85: FOOD_CD\n    /// \uc2dd\uc57d\ucc98\uc5d0\uc11c \ubd80\uc5ec\ud55c \uace0\uc720 \uc2dd\ud488 \ucf54\ub4dc (\uc608: \"D000001\")\n    let foodCd: String\n\n    /// \uc2dd\ud488\uba85 (\ud55c\uae00)\n    ///\n    /// API \ud544\ub4dc\uba85: DESC_KOR\n    /// \ud55c\uae00 \uc2dd\ud488\uba85 (\uc608: \"\ud604\ubbf8\ubc25\", \"\uae40\uce58\ucc0c\uac1c\")\n    let descKor: String\n\n    /// \uc2dd\ud488\uad70 \ucf54\ub4dc\n    ///\n    /// API \ud544\ub4dc\uba85: GROUP_CODE\n    /// \uc2dd\ud488 \ubd84\ub958 \ucf54\ub4dc (\uc608: \"01\" = \uace1\ub958, \"04\" = \ucc44\uc18c\ub958)\n    let groupCode: String?\n\n    /// \uc2dd\ud488\uad70\uba85\n    ///\n    /// API \ud544\ub4dc\uba85: GROUP_NAME\n    /// \uc2dd\ud488 \ubd84\ub958\uba85 (\uc608: \"\uace1\ub958\", \"\ucc44\uc18c\ub958\", \"\uc721\ub958\")\n    let groupName: String?\n\n    // MARK: - \uc601\uc591 \uc131\ubd84 \uc815\ubcf4\n\n    /// \uc5d0\ub108\uc9c0 (kcal)\n    ///\n    /// API \ud544\ub4dc\uba85: ENERC_KCAL\n    /// 1\ud68c \uc81c\uacf5\ub7c9 \uae30\uc900 \uce7c\ub85c\ub9ac\n    let enercKcal: String?\n\n    /// \ub2e8\ubc31\uc9c8 (g)\n    ///\n    /// API \ud544\ub4dc\uba85: PROT\n    /// 1\ud68c \uc81c\uacf5\ub7c9 \uae30\uc900 \ub2e8\ubc31\uc9c8 \ud568\ub7c9\n    let prot: String?\n\n    /// \uc9c0\ubc29 (g)\n    ///\n    /// API \ud544\ub4dc\uba85: FAT\n    /// 1\ud68c \uc81c\uacf5\ub7c9 \uae30\uc900 \uc9c0\ubc29 \ud568\ub7c9\n    let fat: String?\n\n    /// \ud0c4\uc218\ud654\ubb3c (g)\n    ///\n    /// API \ud544\ub4dc\uba85: CHOCDF\n    /// 1\ud68c \uc81c\uacf5\ub7c9 \uae30\uc900 \ud0c4\uc218\ud654\ubb3c \ud568\ub7c9\n    let chocdf: String?\n\n    /// \ub098\ud2b8\ub968 (mg)\n    ///\n    /// API \ud544\ub4dc\uba85: NA\n    /// 1\ud68c \uc81c\uacf5\ub7c9 \uae30\uc900 \ub098\ud2b8\ub968 \ud568\ub7c9\n    let na: String?\n\n    /// \uc2dd\uc774\uc12c\uc720 (g)\n    ///\n    /// API \ud544\ub4dc\uba85: FIBTG\n    /// 1\ud68c \uc81c\uacf5\ub7c9 \uae30\uc900 \uc2dd\uc774\uc12c\uc720 \ud568\ub7c9 (\uc120\ud0dd)\n    let fibtg: String?\n\n    /// \ub2f9\ub958 (g)\n    ///\n    /// API \ud544\ub4dc\uba85: SUGAR\n    /// 1\ud68c \uc81c\uacf5\ub7c9 \uae30\uc900 \ub2f9\ub958 \ud568\ub7c9 (\uc120\ud0dd)\n    let sugar: String?\n\n    // MARK: - \uc81c\uacf5\ub7c9 \uc815\ubcf4\n\n    /// 1\ud68c \uc81c\uacf5\ub7c9 (g)\n    ///\n    /// API \ud544\ub4dc\uba85: SERVING_SIZE\n    /// \uc601\uc591 \uc815\ubcf4\uc758 \uae30\uc900\uc774 \ub418\ub294 \uc81c\uacf5\ub7c9 (\ub2e8\uc704: \uadf8\ub7a8)\n    let servingSize: String?\n\n    /// \uc81c\uacf5\ub7c9 \ub2e8\uc704\n    ///\n    /// API \ud544\ub4dc\uba85: SERVING_UNIT\n    /// \uc0ac\uc6a9\uc790 \uce5c\ud654\uc801 \ub2e8\uc704 \ud45c\uc2dc (\uc608: \"1\uc778\ubd84\", \"1\uacf5\uae30\", \"1\uac1c\")\n    let servingUnit: String?\n\n    /// \uc2dd\ud488 \uc911\ub7c9 (g)\n    ///\n    /// API \ud544\ub4dc\uba85: SERVING_WT\n    /// \uc2e4\uc81c \uc2dd\ud488\uc758 \uc911\ub7c9 (servingSize\uc640 \ub3d9\uc77c\ud558\uac70\ub098 \ub2e4\ub97c \uc218 \uc788\uc74c)\n    let servingWt: String?\n\n    // MARK: - \uba54\ud0c0\ub370\uc774\ud130\n\n    /// \uc81c\uc870\uc0ac\uba85\n    ///\n    /// API \ud544\ub4dc\uba85: MAKER_NAME\n    /// \uc81c\uc870\uc0ac \ub610\ub294 \ube0c\ub79c\ub4dc\uba85 (\uac00\uacf5\uc2dd\ud488\uc758 \uacbd\uc6b0)\n    let makerName: String?\n\n    /// \uc5f0\uad6c \uc218\ud589 \uc5f0\uc6d4\uc77c\n    ///\n    /// API \ud544\ub4dc\uba85: RESEARCH_YMD\n    /// \ub370\uc774\ud130 \uc870\uc0ac/\uc218\uc9d1 \ub0a0\uc9dc\n    let researchYmd: String?\n\n    /// \ub370\uc774\ud130 \uc0dd\uc131 \ubc29\ubc95\n    ///\n    /// API \ud544\ub4dc\uba85: DATA_TYPE_NAME\n    /// \ub370\uc774\ud130 \uc218\uc9d1 \ubc29\ubc95 (\uc608: \"\uc601\uc591\uc131\ubd84\ud45c \uae30\ubc18\", \"\uc2e4\uce21\")\n    let dataTypeName: String?\n\n    // MARK: - Custom CodingKeys\n\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: CodingKeys\n    /// API\uc758 \ub300\ubb38\uc790 snake_case\ub97c Swift\uc758 camelCase\ub85c \ub9e4\ud551\n    /// \ud83d\udca1 Java \ube44\uad50: @SerializedName \uc5b4\ub178\ud14c\uc774\uc158\uacfc \uc720\uc0ac\n    ///\n    /// - Note: NetworkManager\uc758 JSONDecoder\uac00 convertFromSnakeCase\ub97c \uc0ac\uc6a9\ud558\uc9c0\ub9cc,\n    ///         \uc2dd\uc57d\ucc98 API\ub294 \ub300\ubb38\uc790\ub97c \uc0ac\uc6a9\ud558\ubbc0\ub85c \uba85\uc2dc\uc801\uc73c\ub85c \ub9e4\ud551\n    enum CodingKeys: String, CodingKey {\n        case foodCd = \"FOOD_CD\"\n        case descKor = \"DESC_KOR\"\n        case groupCode = \"GROUP_CODE\"\n        case groupName = \"GROUP_NAME\"\n        case enercKcal = \"ENERC_KCAL\"\n        case prot = \"PROT\"\n        case fat = \"FAT\"\n        case chocdf = \"CHOCDF\"\n        case na = \"NA\"\n        case fibtg = \"FIBTG\"\n        case sugar = \"SUGAR\"\n        case servingSize = \"SERVING_SIZE\"\n        case servingUnit = \"SERVING_UNIT\"\n        case servingWt = \"SERVING_WT\"\n        case makerName = \"MAKER_NAME\"\n        case researchYmd = \"RESEARCH_YMD\"\n        case dataTypeName = \"DATA_TYPE_NAME\"\n    }\n}\n\n// MARK: - Helper Extensions\n\nextension KFDAFoodDTO {\n\n    /// \uc601\uc591 \uc815\ubcf4 \ubb38\uc790\uc5f4\uc744 Decimal\ub85c \uc548\uc804\ud558\uac8c \ubcc0\ud658\n    ///\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Optional Chaining & Nil Coalescing\n    /// API \uc751\ub2f5\uc758 \ubb38\uc790\uc5f4 \uc22b\uc790\ub97c \uc548\uc804\ud558\uac8c Decimal\ub85c \ubcc0\ud658\n    /// \ud83d\udca1 Java \ube44\uad50: Optional.map()\uacfc \uc720\uc0ac\ud55c \ud328\ud134\n    ///\n    /// - Parameter value: \ubcc0\ud658\ud560 \ubb38\uc790\uc5f4 \uac12\n    ///\n    /// - Returns: Decimal \uac12 (\ubcc0\ud658 \uc2e4\ud328 \uc2dc nil)\n    ///\n    /// - Example:\n    /// ```swift\n    /// let calories = parseDecimal(enercKcal) // \"330.5\" \u2192 Decimal(330.5)\n    /// ```\n    func parseDecimal(_ value: String?) -> Decimal? {\n        guard let value = value, !value.isEmpty else {\n            return nil\n        }\n\n        // \uacf5\ubc31 \uc81c\uac70\n        let trimmed = value.trimmingCharacters(in: .whitespaces)\n\n        // Decimal \ubcc0\ud658\n        return Decimal(string: trimmed)\n    }\n\n    /// \uc601\uc591 \uc815\ubcf4 \ubb38\uc790\uc5f4\uc744 Int32\ub85c \uc548\uc804\ud558\uac8c \ubcc0\ud658\n    ///\n    /// - Parameter value: \ubcc0\ud658\ud560 \ubb38\uc790\uc5f4 \uac12\n    ///\n    /// - Returns: Int32 \uac12 (\ubcc0\ud658 \uc2e4\ud328 \uc2dc nil)\n    func parseInt32(_ value: String?) -> Int32? {\n        guard let decimal = parseDecimal(value) else {\n            return nil\n        }\n\n        return Int32(truncating: decimal as NSNumber)\n    }\n}\n\n// MARK: - Validation\n\nextension KFDAFoodDTO {\n\n    /// DTO\uc758 \ud544\uc218 \ud544\ub4dc\uac00 \uc720\ud6a8\ud55c\uc9c0 \uac80\uc99d\n    ///\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Data Validation\n    /// \ud30c\uc2f1 \ud6c4 \ud544\uc218 \ub370\uc774\ud130\uac00 \uc788\ub294\uc9c0 \uac80\uc99d\ud558\uc5ec \uc798\ubabb\ub41c \ub370\uc774\ud130 \uac78\ub7ec\ub0b4\uae30\n    /// \ud83d\udca1 Java \ube44\uad50: Bean Validation\uacfc \uc720\uc0ac\n    ///\n    /// - Returns: \uc720\ud6a8\ud558\uba74 true, \ud544\uc218 \ud544\ub4dc \ub204\ub77d \uc2dc false\n    ///\n    /// **\uac80\uc99d \ud56d\ubaa9:**\n    /// - \uc2dd\ud488 \ucf54\ub4dc \uc874\uc7ac \uc5ec\ubd80\n    /// - \uc2dd\ud488\uba85 \uc874\uc7ac \uc5ec\ubd80\n    /// - \ucd5c\uc18c \ud558\ub098 \uc774\uc0c1\uc758 \uc601\uc591 \uc815\ubcf4 \uc874\uc7ac \uc5ec\ubd80\n    var isValid: Bool {\n        // \ud544\uc218 \ud544\ub4dc \uac80\uc99d\n        guard !foodCd.isEmpty, !descKor.isEmpty else {\n            return false\n        }\n\n        // \ucd5c\uc18c \ud558\ub098 \uc774\uc0c1\uc758 \uc601\uc591 \uc815\ubcf4 \ud544\uc694\n        let hasNutritionInfo = enercKcal != nil ||\n                               prot != nil ||\n                               fat != nil ||\n                               chocdf != nil\n\n        return hasNutritionInfo\n    }\n}\n",
        "last_modified": "2026-01-14T22:55:39.257633"
      },
      "task_intent": {
        "title": "005-korean-food-database-integration",
        "description": "Integrate Korean Food & Drug Administration (\uc2dd\uc57d\ucc98) food nutrition database API as primary source, with USDA FoodData Central as fallback for international foods. Prioritize Korean dishes (kimchi jjigae, bibimbap, tteokbokki) that are poorly covered by competitors.",
        "from_plan": true
      },
      "commits_behind_main": 0,
      "status": "active",
      "merged_at": null
    }
  },
  "created_at": "2026-01-13T07:43:31.635545",
  "last_updated": "2026-01-13T07:46:24.166701"
}