{
  "file_path": "Bodii/Data/DTOs/KFDASearchResponseDTO.swift",
  "main_branch_history": [],
  "task_views": {
    "005-korean-food-database-integration": {
      "task_id": "005-korean-food-database-integration",
      "branch_point": {
        "commit_hash": "c44bfbcd7c1699b176a8bb155e8c35f43ebd4ad9",
        "content": "",
        "timestamp": "2026-01-13T07:46:23.878686"
      },
      "worktree_state": {
        "content": "//\n//  KFDASearchResponseDTO.swift\n//  Bodii\n//\n//  Created by Auto-Claude on 2026-01-12.\n//\n\n// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: API Response Wrapper\n// \ud55c\uad6d \uc815\ubd80 API\uc758 \ud45c\uc900 \uc751\ub2f5 \uad6c\uc870 (Header + Body)\n// \ud83d\udca1 Java \ube44\uad50: Spring Boot\uc758 ResponseEntity\uc640 \uc720\uc0ac\ud55c \uad6c\uc870\n\nimport Foundation\n\n/// \uc2dd\uc57d\ucc98 API \uac80\uc0c9 \uc751\ub2f5 \uc804\uccb4 \uad6c\uc870\n///\n/// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Nested DTO Structure\n/// \ud55c\uad6d \uacf5\uacf5\ub370\uc774\ud130 API\uc758 \ud45c\uc900 \uc751\ub2f5 \ud615\uc2dd\uc744 \ubc18\uc601\n/// \ud83d\udca1 Java \ube44\uad50: Wrapper DTO pattern\n///\n/// **API \uc751\ub2f5 \uad6c\uc870:**\n/// ```json\n/// {\n///   \"header\": {\n///     \"resultCode\": \"00\",\n///     \"resultMsg\": \"NORMAL SERVICE.\"\n///   },\n///   \"body\": {\n///     \"items\": [...],\n///     \"numOfRows\": 10,\n///     \"pageNo\": 1,\n///     \"totalCount\": 156\n///   }\n/// }\n/// ```\n///\n/// **\uc0ac\uc6a9 \uc608\uc2dc:**\n/// ```swift\n/// let response: KFDASearchResponseDTO = try await networkManager.request(\n///     url: kfdaSearchURL,\n///     method: .get\n/// )\n///\n/// if response.isSuccess {\n///     let foods = response.body?.items ?? []\n///     // foods \ucc98\ub9ac...\n/// } else {\n///     print(\"Error: \\(response.header.resultMsg)\")\n/// }\n/// ```\n///\n/// **\ucc38\uace0:**\n/// - \uacf5\uacf5\ub370\uc774\ud130\ud3ec\ud138 \ud45c\uc900 \uc751\ub2f5 \ud615\uc2dd\n/// - API \ubb38\uc11c: https://www.data.go.kr/data/15127578/openapi.do\nstruct KFDASearchResponseDTO: Codable {\n\n    // MARK: - Properties\n\n    /// \uc751\ub2f5 \ud5e4\ub354 \uc815\ubcf4\n    ///\n    /// API \ud638\ucd9c \uc131\uacf5/\uc2e4\ud328 \uc5ec\ubd80\uc640 \uba54\uc2dc\uc9c0 \ud3ec\ud568\n    let header: Header\n\n    /// \uc751\ub2f5 \ubc14\ub514 \uc815\ubcf4\n    ///\n    /// \uc2e4\uc81c \uc2dd\ud488 \ub370\uc774\ud130\uc640 \ud398\uc774\uc9d5 \uc815\ubcf4 \ud3ec\ud568\n    /// \uc5d0\ub7ec \ubc1c\uc0dd \uc2dc nil\uc77c \uc218 \uc788\uc74c\n    let body: Body?\n\n    // MARK: - Nested Types\n\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Nested Struct\n    /// \uad00\ub828\ub41c \ub370\uc774\ud130 \uad6c\uc870\ub97c \ub0b4\ubd80\uc5d0 \uc815\uc758\ud558\uc5ec \ub124\uc784\uc2a4\ud398\uc774\uc2a4 \uc815\ub9ac\n    /// \ud83d\udca1 Java \ube44\uad50: Inner Class\uc640 \uc720\uc0ac\n    ///\n    /// **API Header \uad6c\uc870:**\n    /// - resultCode: \uacb0\uacfc \ucf54\ub4dc (\"00\" = \uc815\uc0c1, \uae30\ud0c0 = \uc5d0\ub7ec)\n    /// - resultMsg: \uacb0\uacfc \uba54\uc2dc\uc9c0\n    struct Header: Codable {\n\n        /// \uacb0\uacfc \ucf54\ub4dc\n        ///\n        /// - \"00\": \uc815\uc0c1 \ucc98\ub9ac\n        /// - \"01\": \uc5b4\ud50c\ub9ac\ucf00\uc774\uc158 \uc5d0\ub7ec\n        /// - \"02\": \ub370\uc774\ud130\ubca0\uc774\uc2a4 \uc5d0\ub7ec\n        /// - \"03\": \ub370\uc774\ud130 \uc5c6\uc74c\n        /// - \"04\": HTTP \uc5d0\ub7ec\n        /// - \"05\": \uc11c\ube44\uc2a4 \uc5f0\uacb0 \uc2e4\ud328\n        /// - \"10\": \uc798\ubabb\ub41c \uc694\uccad \ud30c\ub77c\ubbf8\ud130\n        /// - \"11\": \ud544\uc218 \uc694\uccad \ud30c\ub77c\ubbf8\ud130 \ub204\ub77d\n        /// - \"12\": \ud574\ub2f9 \uc624\ud508 API \uc11c\ube44\uc2a4\uac00 \uc5c6\uac70\ub098 \ud3d0\uae30\n        /// - \"20\": \uc11c\ube44\uc2a4 \uc811\uadfc \uac70\ubd80\n        /// - \"21\": \uc77c\uc2dc\uc801\uc73c\ub85c \uc0ac\uc6a9\ud560 \uc218 \uc5c6\ub294 \uc11c\ube44\uc2a4 \ud0a4\n        /// - \"22\": \uc11c\ube44\uc2a4 \uc694\uccad \uc81c\ud55c \ud69f\uc218 \ucd08\uacfc\n        /// - \"30\": \ub4f1\ub85d\ub418\uc9c0 \uc54a\uc740 \uc11c\ube44\uc2a4 \ud0a4\n        /// - \"31\": \uae30\ud55c \ub9cc\ub8cc\ub41c \uc11c\ube44\uc2a4 \ud0a4\n        /// - \"32\": \ub4f1\ub85d\ub418\uc9c0 \uc54a\uc740 IP\n        /// - \"99\": \uae30\ud0c0 \uc5d0\ub7ec\n        let resultCode: String\n\n        /// \uacb0\uacfc \uba54\uc2dc\uc9c0\n        ///\n        /// \ud55c\uae00 \ub610\ub294 \uc601\ubb38 \uba54\uc2dc\uc9c0 (\uc608: \"NORMAL SERVICE.\", \"\ub370\uc774\ud130 \uc5c6\uc74c\")\n        let resultMsg: String\n\n        /// CodingKeys for API field mapping\n        ///\n        /// API\ub294 \ub300\ubb38\uc790 \ud544\ub4dc\uba85 \uc0ac\uc6a9\n        enum CodingKeys: String, CodingKey {\n            case resultCode = \"resultCode\"\n            case resultMsg = \"resultMsg\"\n        }\n    }\n\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Response Body Structure\n    /// \uc2e4\uc81c \ub370\uc774\ud130\uc640 \ud398\uc774\uc9d5 \uc815\ubcf4\ub97c \ud3ec\ud568\ud558\ub294 \ubc14\ub514 \uad6c\uc870\n    /// \ud83d\udca1 Java \ube44\uad50: Page<T> \ud615\uc2dd\uc758 \ud398\uc774\uc9d5 \uc751\ub2f5\uacfc \uc720\uc0ac\n    ///\n    /// **API Body \uad6c\uc870:**\n    /// - items: \uc2dd\ud488 \ub370\uc774\ud130 \ubc30\uc5f4\n    /// - numOfRows: \ud55c \ud398\uc774\uc9c0\uc758 \uacb0\uacfc \uc218\n    /// - pageNo: \ud604\uc7ac \ud398\uc774\uc9c0 \ubc88\ud638\n    /// - totalCount: \uc804\uccb4 \uacb0\uacfc \uc218\n    struct Body: Codable {\n\n        /// \uc2dd\ud488 \ub370\uc774\ud130 \ubc30\uc5f4\n        ///\n        /// \uac80\uc0c9 \uacb0\uacfc\ub85c \ubc18\ud658\ub41c \uc2dd\ud488 \ubaa9\ub85d\n        /// \ub370\uc774\ud130\uac00 \uc5c6\uc73c\uba74 \ube48 \ubc30\uc5f4\n        let items: [KFDAFoodDTO]?\n\n        /// \ud55c \ud398\uc774\uc9c0 \uacb0\uacfc \uc218\n        ///\n        /// \uc694\uccad \uc2dc \uc9c0\uc815\ud55c \ud398\uc774\uc9c0 \ub2f9 \uacb0\uacfc \uc218 (endIdx - startIdx + 1)\n        let numOfRows: Int?\n\n        /// \ud604\uc7ac \ud398\uc774\uc9c0 \ubc88\ud638\n        ///\n        /// \uc694\uccad \uc2dc \uc9c0\uc815\ud55c \ud398\uc774\uc9c0 \ubc88\ud638\n        let pageNo: Int?\n\n        /// \uc804\uccb4 \uacb0\uacfc \uc218\n        ///\n        /// \uac80\uc0c9 \uc870\uac74\uc5d0 \ub9de\ub294 \uc804\uccb4 \uc2dd\ud488 \uc218\n        /// \ud398\uc774\uc9d5 \ucc98\ub9ac\uc5d0 \uc0ac\uc6a9\n        let totalCount: Int?\n\n        /// CodingKeys for API field mapping\n        enum CodingKeys: String, CodingKey {\n            case items = \"items\"\n            case numOfRows = \"numOfRows\"\n            case pageNo = \"pageNo\"\n            case totalCount = \"totalCount\"\n        }\n\n        /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Custom Decoding for Array\n        /// API\uac00 \ub2e8\uc77c item\uacfc \ubc30\uc5f4 items\ub97c \ub2e4\ub974\uac8c \ubc18\ud658\ud560 \uc218 \uc788\uc5b4 \ucee4\uc2a4\ud140 \ub514\ucf54\ub529 \ucc98\ub9ac\n        /// \ud83d\udca1 Java \ube44\uad50: Custom Deserializer\uc640 \uc720\uc0ac\n        ///\n        /// **\uc2dd\uc57d\ucc98 API \ud2b9\uc774\uc0ac\ud56d:**\n        /// - \uacb0\uacfc\uac00 1\uac1c: `\"item\": { ... }` (\ub2e8\uc77c \uac1d\uccb4)\n        /// - \uacb0\uacfc\uac00 \uc5ec\ub7ec\uac1c: `\"item\": [ ... ]` (\ubc30\uc5f4)\n        /// - \uacb0\uacfc\uac00 \uc5c6\uc74c: `\"item\": \"\"` (\ube48 \ubb38\uc790\uc5f4) \ub610\ub294 \ud544\ub4dc \uc5c6\uc74c\n        init(from decoder: Decoder) throws {\n            let container = try decoder.container(keyedBy: CodingKeys.self)\n\n            // numOfRows, pageNo, totalCount \ud30c\uc2f1\n            numOfRows = try? container.decode(Int.self, forKey: .numOfRows)\n            pageNo = try? container.decode(Int.self, forKey: .pageNo)\n            totalCount = try? container.decode(Int.self, forKey: .totalCount)\n\n            // items \ud30c\uc2f1 - \ubc30\uc5f4 \ub610\ub294 \ub2e8\uc77c \uac1d\uccb4 \ucc98\ub9ac\n            if let itemsArray = try? container.decode([KFDAFoodDTO].self, forKey: .items) {\n                // \ubc30\uc5f4\uc778 \uacbd\uc6b0\n                items = itemsArray\n            } else if let singleItem = try? container.decode(KFDAFoodDTO.self, forKey: .items) {\n                // \ub2e8\uc77c \uac1d\uccb4\uc778 \uacbd\uc6b0 - \ubc30\uc5f4\ub85c \ub798\ud551\n                items = [singleItem]\n            } else {\n                // \ub370\uc774\ud130 \uc5c6\uc74c - \ube48 \ubc30\uc5f4\n                items = []\n            }\n        }\n    }\n\n    // MARK: - CodingKeys\n\n    enum CodingKeys: String, CodingKey {\n        case header = \"header\"\n        case body = \"body\"\n    }\n}\n\n// MARK: - Convenience Methods\n\nextension KFDASearchResponseDTO {\n\n    /// API \ud638\ucd9c\uc774 \uc131\uacf5\ud588\ub294\uc9c0 \ud655\uc778\n    ///\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Computed Property\n    /// \uc790\uc8fc \uc0ac\uc6a9\ud558\ub294 \uac80\uc99d \ub85c\uc9c1\uc744 \ud504\ub85c\ud37c\ud2f0\ub85c \uc81c\uacf5\n    /// \ud83d\udca1 Java \ube44\uad50: getter \uba54\uc11c\ub4dc\uc640 \ub3d9\uc77c\ud558\uc9c0\ub9cc \ub354 \uac04\uacb0\n    ///\n    /// - Returns: resultCode\uac00 \"00\"\uc774\uba74 true\n    ///\n    /// - Example:\n    /// ```swift\n    /// if response.isSuccess {\n    ///     // \uc815\uc0c1 \ucc98\ub9ac\n    /// } else {\n    ///     print(\"Error: \\(response.errorMessage)\")\n    /// }\n    /// ```\n    var isSuccess: Bool {\n        return header.resultCode == \"00\"\n    }\n\n    /// \uc5d0\ub7ec \uba54\uc2dc\uc9c0 \ubc18\ud658\n    ///\n    /// \uc5d0\ub7ec \ubc1c\uc0dd \uc2dc \uc0ac\uc6a9\uc790\uc5d0\uac8c \ud45c\uc2dc\ud560 \uba54\uc2dc\uc9c0\n    ///\n    /// - Returns: \uc5d0\ub7ec \uba54\uc2dc\uc9c0 (\uc131\uacf5 \uc2dc nil)\n    var errorMessage: String? {\n        return isSuccess ? nil : header.resultMsg\n    }\n\n    /// \uac80\uc0c9 \uacb0\uacfc \uc2dd\ud488 \ubaa9\ub85d \ubc18\ud658\n    ///\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Safe Unwrapping\n    /// Optional chaining\uacfc nil coalescing\uc73c\ub85c \uc548\uc804\ud558\uac8c \ubc30\uc5f4 \ubc18\ud658\n    /// \ud83d\udca1 Java \ube44\uad50: Optional.orElse()\uc640 \uc720\uc0ac\n    ///\n    /// - Returns: \uc2dd\ud488 \ubaa9\ub85d (\uacb0\uacfc \uc5c6\uc73c\uba74 \ube48 \ubc30\uc5f4)\n    ///\n    /// - Example:\n    /// ```swift\n    /// let foods = response.foods\n    /// print(\"Found \\(foods.count) foods\")\n    /// ```\n    var foods: [KFDAFoodDTO] {\n        return body?.items ?? []\n    }\n\n    /// \uc804\uccb4 \uacb0\uacfc \uc218 \ubc18\ud658\n    ///\n    /// \ud398\uc774\uc9d5 \ucc98\ub9ac\uc5d0 \uc0ac\uc6a9\n    ///\n    /// - Returns: \uc804\uccb4 \uacb0\uacfc \uc218 (\uc815\ubcf4 \uc5c6\uc73c\uba74 0)\n    var totalCount: Int {\n        return body?.totalCount ?? 0\n    }\n\n    /// \ud604\uc7ac \ud398\uc774\uc9c0\uc5d0 \ub354 \ub9ce\uc740 \uacb0\uacfc\uac00 \uc788\ub294\uc9c0 \ud655\uc778\n    ///\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Pagination Logic\n    /// \ub2e4\uc74c \ud398\uc774\uc9c0 \uc694\uccad \uc5ec\ubd80 \uacb0\uc815\n    /// \ud83d\udca1 Java \ube44\uad50: Page.hasNext()\uc640 \uc720\uc0ac\n    ///\n    /// - Parameter currentItemCount: \ud604\uc7ac\uae4c\uc9c0 \ub85c\ub4dc\ud55c \uc544\uc774\ud15c \uc218\n    ///\n    /// - Returns: \ub354 \ub9ce\uc740 \uacb0\uacfc\uac00 \uc788\uc73c\uba74 true\n    ///\n    /// - Example:\n    /// ```swift\n    /// var allFoods: [KFDAFoodDTO] = []\n    /// var currentIndex = 1\n    ///\n    /// repeat {\n    ///     let response = try await searchFoods(startIdx: currentIndex)\n    ///     allFoods.append(contentsOf: response.foods)\n    ///     currentIndex += response.foods.count\n    /// } while response.hasMoreResults(currentItemCount: allFoods.count)\n    /// ```\n    func hasMoreResults(currentItemCount: Int) -> Bool {\n        return currentItemCount < totalCount\n    }\n}\n\n// MARK: - Error Handling\n\nextension KFDASearchResponseDTO {\n\n    /// \uacb0\uacfc \ucf54\ub4dc\uc5d0 \ub530\ub978 \uc0c1\uc138 \uc5d0\ub7ec \ud0c0\uc785 \ubc18\ud658\n    ///\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Error Mapping\n    /// API \uc5d0\ub7ec \ucf54\ub4dc\ub97c \uc571 \ub0b4\ubd80 \uc5d0\ub7ec \ud0c0\uc785\uc73c\ub85c \ubcc0\ud658\n    /// \ud83d\udca1 Java \ube44\uad50: Exception mapping\uacfc \uc720\uc0ac\n    ///\n    /// - Returns: \uc5d0\ub7ec \ud0c0\uc785 (\uc131\uacf5 \uc2dc nil)\n    var errorType: KFDAAPIError? {\n        guard !isSuccess else { return nil }\n\n        switch header.resultCode {\n        case \"03\":\n            return .noData\n        case \"10\", \"11\":\n            return .invalidRequest(header.resultMsg)\n        case \"12\":\n            return .serviceNotAvailable\n        case \"20\", \"21\", \"30\", \"31\", \"32\":\n            return .authenticationFailed(header.resultMsg)\n        case \"22\":\n            return .rateLimitExceeded\n        default:\n            return .unknown(header.resultCode, header.resultMsg)\n        }\n    }\n}\n\n// MARK: - KFDA API Error Types\n\n/// \uc2dd\uc57d\ucc98 API \uc5d0\ub7ec \ud0c0\uc785\n///\n/// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Domain-Specific Error Types\n/// API \uc5d0\ub7ec\ub97c \uba85\ud655\ud55c \ud0c0\uc785\uc73c\ub85c \uc815\uc758\ud558\uc5ec \uc5d0\ub7ec \ucc98\ub9ac \uac1c\uc120\n/// \ud83d\udca1 Java \ube44\uad50: Custom Exception \uacc4\uce35 \uad6c\uc870\uc640 \uc720\uc0ac\nenum KFDAAPIError: Error {\n    /// \ub370\uc774\ud130 \uc5c6\uc74c\n    case noData\n\n    /// \uc798\ubabb\ub41c \uc694\uccad\n    case invalidRequest(String)\n\n    /// \uc11c\ube44\uc2a4 \uc0ac\uc6a9 \ubd88\uac00\n    case serviceNotAvailable\n\n    /// \uc778\uc99d \uc2e4\ud328 (API \ud0a4 \ubb38\uc81c)\n    case authenticationFailed(String)\n\n    /// \uc694\uccad \uc81c\ud55c \ucd08\uacfc\n    case rateLimitExceeded\n\n    /// \uae30\ud0c0 \uc5d0\ub7ec\n    case unknown(String, String)\n\n    /// \uc0ac\uc6a9\uc790 \uce5c\ud654\uc801 \uc5d0\ub7ec \uba54\uc2dc\uc9c0\n    ///\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Localized Error Message\n    /// \uc0ac\uc6a9\uc790\uc5d0\uac8c \ud45c\uc2dc\ud560 \ud55c\uae00 \uc5d0\ub7ec \uba54\uc2dc\uc9c0\n    /// \ud83d\udca1 Java \ube44\uad50: getMessage()\uc640 \uc720\uc0ac\n    var localizedDescription: String {\n        switch self {\n        case .noData:\n            return \"\uac80\uc0c9 \uacb0\uacfc\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.\"\n        case .invalidRequest(let message):\n            return \"\uc798\ubabb\ub41c \uc694\uccad\uc785\ub2c8\ub2e4: \\(message)\"\n        case .serviceNotAvailable:\n            return \"\uc11c\ube44\uc2a4\ub97c \uc0ac\uc6a9\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4. \uc7a0\uc2dc \ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.\"\n        case .authenticationFailed(let message):\n            return \"\uc778\uc99d\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4: \\(message)\"\n        case .rateLimitExceeded:\n            return \"\uc694\uccad \ud69f\uc218 \uc81c\ud55c\uc744 \ucd08\uacfc\ud588\uc2b5\ub2c8\ub2e4. \uc7a0\uc2dc \ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.\"\n        case .unknown(let code, let message):\n            return \"\uc54c \uc218 \uc5c6\ub294 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4 (\ucf54\ub4dc: \\(code)): \\(message)\"\n        }\n    }\n}\n",
        "last_modified": "2026-01-14T22:55:39.258380"
      },
      "task_intent": {
        "title": "005-korean-food-database-integration",
        "description": "Integrate Korean Food & Drug Administration (\uc2dd\uc57d\ucc98) food nutrition database API as primary source, with USDA FoodData Central as fallback for international foods. Prioritize Korean dishes (kimchi jjigae, bibimbap, tteokbokki) that are poorly covered by competitors.",
        "from_plan": true
      },
      "commits_behind_main": 0,
      "status": "active",
      "merged_at": null
    }
  },
  "created_at": "2026-01-13T07:43:31.589559",
  "last_updated": "2026-01-13T07:46:23.979221"
}