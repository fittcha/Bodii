{
  "file_path": "Bodii/Presentation/Features/Sleep/SleepHistoryView.swift",
  "main_branch_history": [],
  "task_views": {
    "009-sleep-tracking-with-5-status-system": {
      "task_id": "009-sleep-tracking-with-5-status-system",
      "branch_point": {
        "commit_hash": "4e56d606f7b0d4cb74120dd392544f3fe2d4f5b4",
        "content": "",
        "timestamp": "2026-01-14T21:03:40.462795"
      },
      "worktree_state": {
        "content": "//\n//  SleepHistoryView.swift\n//  Bodii\n//\n//  Created by Auto-Claude on 2026-01-14.\n//\n\n// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: List View with CRUD Operations\n// \uc218\uba74 \uae30\ub85d \ub9ac\uc2a4\ud2b8 \ud654\uba74 (\ud3b8\uc9d1/\uc0ad\uc81c \uae30\ub2a5 \ud3ec\ud568)\n// \ud83d\udca1 Java \ube44\uad50: Android\uc758 RecyclerView + CRUD Fragment\uc640 \uc720\uc0ac\n\nimport SwiftUI\n\n// MARK: - SleepHistoryView\n\n/// \uc218\uba74 \uae30\ub85d \ub9ac\uc2a4\ud2b8 \ud654\uba74\n/// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: List View with Edit/Delete\n/// - \uc218\uba74 \uae30\ub85d \ub9ac\uc2a4\ud2b8 \ud45c\uc2dc\n/// - \uc2a4\uc640\uc774\ud504\ub85c \uc0ad\uc81c \uae30\ub2a5\n/// - \ud0ed\uc73c\ub85c \ud3b8\uc9d1 \uae30\ub2a5\n/// - \ud50c\ub85c\ud305 \ucd94\uac00 \ubc84\ud2bc\n/// - \ube48 \uc0c1\ud0dc \ucc98\ub9ac\n/// - \ud1b5\uacc4 \uc694\uc57d \ud45c\uc2dc\n/// \ud83d\udca1 Java \ube44\uad50: Android\uc758 CRUD Fragment + RecyclerView\uc640 \uc720\uc0ac\nstruct SleepHistoryView: View {\n\n    // MARK: - Properties\n\n    /// ViewModel - \uc218\uba74 \uae30\ub85d \ub9ac\uc2a4\ud2b8 \uad00\ub9ac\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: @StateObject\n    /// - View\uc758 \uc0dd\uba85\uc8fc\uae30\uc640 \uc5f0\uacb0\ub41c ObservableObject\n    /// - View\uac00 \uc0ac\ub77c\uc838\ub3c4 \uc0c1\ud0dc \uc720\uc9c0\n    /// \ud83d\udca1 Java \ube44\uad50: Android ViewModel\uacfc \uc720\uc0ac\n    @StateObject private var viewModel: SleepHistoryViewModel\n\n    /// DIContainer for creating ViewModels\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Dependency Injection\n    /// - \uc0c8 \ub808\ucf54\ub4dc \ucd94\uac00/\ud3b8\uc9d1 \uc2dc ViewModel \uc0dd\uc131\uc5d0 \uc0ac\uc6a9\n    let container: DIContainer\n\n    /// \ucd94\uac00 \ubc84\ud2bc \ud45c\uc2dc \uc5ec\ubd80\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Optional Feature Toggle\n    /// - true: \ud50c\ub85c\ud305 \ucd94\uac00 \ubc84\ud2bc \ud45c\uc2dc (\uae30\ubcf8\uac12)\n    /// - false: \ucd94\uac00 \ubc84\ud2bc \uc228\uae40\n    var showAddButton: Bool = true\n\n    /// \uc0c8 \ub808\ucf54\ub4dc \ucd94\uac00 \uc2dc\ud2b8 \ud45c\uc2dc \uc5ec\ubd80\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Sheet State\n    /// - true\uc77c \ub54c SleepInputSheet \ud45c\uc2dc\n    @State private var showAddSheet: Bool = false\n\n    /// \ud654\uba74 \ub2eb\uae30 \uc561\uc158\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Environment Dismiss\n    /// - Sheet\ub098 NavigationStack\uc5d0\uc11c \ud654\uba74\uc744 \ub2eb\uc744 \ub54c \uc0ac\uc6a9\n    /// \ud83d\udca1 Java \ube44\uad50: finish() \ub610\ub294 popBackStack()\uacfc \uc720\uc0ac\n    @Environment(\\.dismiss) private var dismiss\n\n    // MARK: - Initialization\n\n    /// SleepHistoryView \ucd08\uae30\ud654\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Dependency Injection via Constructor\n    /// - ViewModel\uacfc DIContainer\ub97c \uc678\ubd80\uc5d0\uc11c \uc8fc\uc785\ubc1b\uc74c\n    /// - \ud14c\uc2a4\ud2b8 \uc2dc Mock\uc73c\ub85c \uad50\uccb4 \uac00\ub2a5\n    /// \ud83d\udca1 Java \ube44\uad50: Constructor injection\uacfc \uc720\uc0ac\n    ///\n    /// - Parameters:\n    ///   - viewModel: \uc218\uba74 \uae30\ub85d \ub9ac\uc2a4\ud2b8 ViewModel\n    ///   - container: DIContainer for creating ViewModels\n    ///   - showAddButton: \ucd94\uac00 \ubc84\ud2bc \ud45c\uc2dc \uc5ec\ubd80 (\uae30\ubcf8\uac12: true)\n    init(\n        viewModel: SleepHistoryViewModel,\n        container: DIContainer,\n        showAddButton: Bool = true\n    ) {\n        self._viewModel = StateObject(wrappedValue: viewModel)\n        self.container = container\n        self.showAddButton = showAddButton\n    }\n\n    // MARK: - Body\n\n    var body: some View {\n        // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: NavigationStack\n        // iOS 16+\uc758 \uc0c8\ub85c\uc6b4 \ub124\ube44\uac8c\uc774\uc158 \uc2dc\uc2a4\ud15c\n        // \ud83d\udca1 Java \ube44\uad50: Navigation Component\uc640 \uc720\uc0ac\n        NavigationStack {\n            ZStack {\n                // \uba54\uc778 \ub9ac\uc2a4\ud2b8\n                if viewModel.isLoading && viewModel.isEmpty {\n                    // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Loading State\n                    // \ucd08\uae30 \ub85c\ub529 \uc911\uc77c \ub54c\ub9cc \ud45c\uc2dc\n                    loadingView\n                } else if viewModel.isEmpty {\n                    // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Empty State\n                    // \ub370\uc774\ud130\uac00 \uc5c6\uc744 \ub54c \uc548\ub0b4 \uba54\uc2dc\uc9c0\n                    emptyStateView\n                } else {\n                    // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: List with Sections\n                    // \ud1b5\uacc4 \uc139\uc158 + \ub808\ucf54\ub4dc \ub9ac\uc2a4\ud2b8\n                    listView\n                }\n\n                // \ud50c\ub85c\ud305 \ucd94\uac00 \ubc84\ud2bc\n                if showAddButton {\n                    VStack {\n                        Spacer()\n                        HStack {\n                            Spacer()\n                            addButton\n                        }\n                    }\n                }\n            }\n            .navigationTitle(\"\uc218\uba74 \uae30\ub85d\")\n            .navigationBarTitleDisplayMode(.large)\n            .toolbar {\n                // \uc870\ud68c \ubaa8\ub4dc \uc120\ud0dd \uba54\ub274\n                ToolbarItem(placement: .navigationBarTrailing) {\n                    queryModeMenu\n                }\n            }\n            // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: refreshable modifier\n            // Pull-to-refresh \uad6c\ud604\n            .refreshable {\n                await viewModel.refresh()\n            }\n            // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Sheet for Adding New Record\n            // \uc0c8 \ub808\ucf54\ub4dc \ucd94\uac00 \uc2dc\ud2b8\n            .sheet(isPresented: $showAddSheet) {\n                SleepInputSheet(\n                    viewModel: container.makeSleepInputViewModel(),\n                    canSkip: true,\n                    onSkip: nil\n                )\n            }\n            // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Sheet for Editing Record\n            // \ub808\ucf54\ub4dc \ud3b8\uc9d1 \uc2dc\ud2b8\n            .sheet(item: $viewModel.recordToEdit) { record in\n                SleepInputSheet(\n                    viewModel: container.makeSleepInputViewModel(\n                        defaultHours: Int(record.duration / 60),\n                        defaultMinutes: Int(record.duration % 60)\n                    ),\n                    canSkip: true,\n                    onSkip: nil\n                )\n            }\n            // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Confirmation Dialog\n            // \uc0ad\uc81c \ud655\uc778 \ub300\ud654\uc0c1\uc790\n            .confirmationDialog(\n                \"\uc218\uba74 \uae30\ub85d\uc744 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?\",\n                isPresented: $viewModel.showDeleteConfirmation,\n                titleVisibility: .visible\n            ) {\n                Button(\"\uc0ad\uc81c\", role: .destructive) {\n                    Task {\n                        await viewModel.deleteRecord()\n                    }\n                }\n                Button(\"\ucde8\uc18c\", role: .cancel) {\n                    viewModel.cancelDelete()\n                }\n            } message: {\n                Text(\"\uc0ad\uc81c\ub41c \ub370\uc774\ud130\ub294 \ubcf5\uad6c\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.\")\n            }\n            // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Alert for Errors\n            // \uc5d0\ub7ec \ubc1c\uc0dd \uc2dc \uc54c\ub9bc \ud45c\uc2dc\n            .alert(\"\uc624\ub958\", isPresented: .constant(viewModel.errorMessage != nil)) {\n                Button(\"\ud655\uc778\") {\n                    viewModel.clearError()\n                }\n            } message: {\n                if let errorMessage = viewModel.errorMessage {\n                    Text(errorMessage)\n                }\n            }\n            // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Toast for Success\n            // \uc131\uacf5 \uba54\uc2dc\uc9c0 \ud45c\uc2dc (\uac04\ub2e8\ud55c \ubc29\ubc95)\n            .overlay(alignment: .top) {\n                if let successMessage = viewModel.successMessage {\n                    successToast(message: successMessage)\n                        .padding(.top, 60)\n                }\n            }\n        }\n    }\n\n    // MARK: - Subviews\n\n    /// \ub9ac\uc2a4\ud2b8 \ubdf0\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: List with Sections\n    /// - \ud1b5\uacc4 \uc139\uc158 + \ub808\ucf54\ub4dc \ub9ac\uc2a4\ud2b8\n    private var listView: some View {\n        List {\n            // \ud1b5\uacc4 \uc139\uc158\n            statisticsSection\n\n            // \ub808\ucf54\ub4dc \ub9ac\uc2a4\ud2b8 \uc139\uc158\n            recordsSection\n        }\n        .listStyle(.insetGrouped)\n    }\n\n    /// \ud1b5\uacc4 \uc139\uc158\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Statistics Summary Section\n    /// - \ud3c9\uade0 \uc218\uba74 \uc2dc\uac04, \uac00\uc7a5 \ub9ce\uc740 \uc0c1\ud0dc \ud45c\uc2dc\n    private var statisticsSection: some View {\n        Section {\n            VStack(spacing: 12) {\n                // \ud3c9\uade0 \uc218\uba74 \uc2dc\uac04\n                statisticRow(\n                    icon: \"clock.fill\",\n                    title: \"\ud3c9\uade0 \uc218\uba74 \uc2dc\uac04\",\n                    value: viewModel.averageDurationString,\n                    color: .blue\n                )\n\n                Divider()\n\n                // \uac00\uc7a5 \ub9ce\uc740 \uc0c1\ud0dc\n                statisticRow(\n                    icon: \"moon.stars.fill\",\n                    title: \"\uac00\uc7a5 \ub9ce\uc740 \uc0c1\ud0dc\",\n                    value: viewModel.mostCommonStatusString,\n                    color: .orange\n                )\n\n                Divider()\n\n                // \ucd1d \uae30\ub85d \uc218\n                statisticRow(\n                    icon: \"list.bullet\",\n                    title: \"\ucd1d \uae30\ub85d \uc218\",\n                    value: \"\\(viewModel.recordCount)\uac1c\",\n                    color: .green\n                )\n            }\n            .padding(.vertical, 8)\n        } header: {\n            Text(\"\ud1b5\uacc4 \uc694\uc57d\")\n        }\n    }\n\n    /// \uac1c\ubcc4 \ud1b5\uacc4 Row\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Reusable Statistic Row\n    /// - \ud1b5\uacc4 \uc815\ubcf4\ub97c \uc77c\uad00\ub41c \ud615\uc2dd\uc73c\ub85c \ud45c\uc2dc\n    ///\n    /// - Parameters:\n    ///   - icon: SF Symbol \uc544\uc774\ucf58\n    ///   - title: \ud1b5\uacc4 \uc81c\ubaa9\n    ///   - value: \ud1b5\uacc4 \uac12\n    ///   - color: \uc544\uc774\ucf58 \uc0c9\uc0c1\n    /// - Returns: \ud1b5\uacc4 Row \ubdf0\n    private func statisticRow(\n        icon: String,\n        title: String,\n        value: String,\n        color: Color\n    ) -> some View {\n        HStack(spacing: 12) {\n            // \uc544\uc774\ucf58\n            Image(systemName: icon)\n                .font(.title3)\n                .foregroundStyle(color)\n                .frame(width: 32)\n\n            // \uc81c\ubaa9\n            Text(title)\n                .font(.subheadline)\n                .foregroundStyle(.secondary)\n\n            Spacer()\n\n            // \uac12\n            Text(value)\n                .font(.body)\n                .fontWeight(.semibold)\n                .foregroundStyle(.primary)\n        }\n        // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Accessibility for Statistic Row\n        // \ud1b5\uacc4 \uc815\ubcf4\ub97c \ud558\ub098\uc758 \uc694\uc18c\ub85c \uadf8\ub8f9\ud654\ud558\uc5ec VoiceOver\uac00 \uc77d\uc5b4\uc90c\n        .accessibilityElement(children: .combine)\n        .accessibilityLabel(\"\\(title): \\(value)\")\n        .accessibilityAddTraits(.isStaticText)\n    }\n\n    /// \ub808\ucf54\ub4dc \ub9ac\uc2a4\ud2b8 \uc139\uc158\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: List Section with ForEach\n    /// - \ub808\ucf54\ub4dc\ub97c \ubc18\ubcf5\ud558\uc5ec Row \ud45c\uc2dc\n    /// - \uc2a4\uc640\uc774\ud504 \uc561\uc158\uc73c\ub85c \ud3b8\uc9d1/\uc0ad\uc81c\n    private var recordsSection: some View {\n        Section {\n            ForEach(viewModel.records) { record in\n                // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: SleepRecordRow Component\n                // \uc7ac\uc0ac\uc6a9 \uac00\ub2a5\ud55c Row \ucef4\ud3ec\ub10c\ud2b8\n                SleepRecordRow(record: record)\n                    .contentShape(Rectangle())\n                    .onTapGesture {\n                        // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Tap to Edit\n                        // \ud0ed\ud558\uc5ec \ud3b8\uc9d1 \uc2dc\ud2b8 \uc5f4\uae30\n                        viewModel.editRecord(record)\n                    }\n                    // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Swipe Actions\n                    // \uc67c\ucabd \uc2a4\uc640\uc774\ud504: \ud3b8\uc9d1\n                    .swipeActions(edge: .leading) {\n                        Button {\n                            viewModel.editRecord(record)\n                        } label: {\n                            Label(\"\ud3b8\uc9d1\", systemImage: \"pencil\")\n                        }\n                        .tint(.blue)\n                    }\n                    // \uc624\ub978\ucabd \uc2a4\uc640\uc774\ud504: \uc0ad\uc81c\n                    .swipeActions(edge: .trailing) {\n                        Button(role: .destructive) {\n                            viewModel.confirmDelete(record: record)\n                        } label: {\n                            Label(\"\uc0ad\uc81c\", systemImage: \"trash\")\n                        }\n                    }\n            }\n        } header: {\n            HStack {\n                Text(\"\uc218\uba74 \uae30\ub85d\")\n                Spacer()\n                Text(queryModeDescription)\n                    .font(.caption)\n                    .foregroundStyle(.secondary)\n            }\n        } footer: {\n            if !viewModel.isEmpty {\n                Text(\"\ub808\ucf54\ub4dc\ub97c \ud0ed\ud558\uba74 \ud3b8\uc9d1\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\\n\uc2a4\uc640\uc774\ud504\ud558\uc5ec \ud3b8\uc9d1 \ub610\ub294 \uc0ad\uc81c\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\")\n                    .font(.caption)\n            }\n        }\n    }\n\n    /// \uc870\ud68c \ubaa8\ub4dc \uc124\uba85\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Dynamic Description\n    /// - \ud604\uc7ac \uc120\ud0dd\ub41c \uc870\ud68c \ubaa8\ub4dc\uc5d0 \ub530\ub77c \ub2e4\ub978 \ubb38\uad6c \ud45c\uc2dc\n    private var queryModeDescription: String {\n        switch viewModel.selectedMode {\n        case .all:\n            return \"\uc804\uccb4\"\n        case .recent(let days):\n            return \"\ucd5c\uadfc \\(days)\uc77c\"\n        case .dateRange(let start, let end):\n            let formatter = DateFormatter()\n            formatter.dateStyle = .short\n            formatter.locale = Locale(identifier: \"ko_KR\")\n            return \"\\(formatter.string(from: start)) ~ \\(formatter.string(from: end))\"\n        }\n    }\n\n    /// \uc870\ud68c \ubaa8\ub4dc \uc120\ud0dd \uba54\ub274\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Menu for Query Mode Selection\n    /// - \uc804\uccb4, \ucd5c\uadfc 7\uc77c/30\uc77c/90\uc77c \uc120\ud0dd\n    private var queryModeMenu: some View {\n        Menu {\n            Button {\n                viewModel.changeMode(to: .all)\n            } label: {\n                Label(\"\uc804\uccb4 \uae30\ub85d\", systemImage: \"calendar\")\n            }\n\n            Divider()\n\n            Button {\n                viewModel.changeMode(to: .recent(days: 7))\n            } label: {\n                Label(\"\ucd5c\uadfc 7\uc77c\", systemImage: \"7.circle\")\n            }\n\n            Button {\n                viewModel.changeMode(to: .recent(days: 30))\n            } label: {\n                Label(\"\ucd5c\uadfc 30\uc77c\", systemImage: \"30.circle\")\n            }\n\n            Button {\n                viewModel.changeMode(to: .recent(days: 90))\n            } label: {\n                Label(\"\ucd5c\uadfc 90\uc77c\", systemImage: \"90.circle\")\n            }\n        } label: {\n            Image(systemName: \"line.3.horizontal.decrease.circle\")\n                .font(.body)\n                .foregroundStyle(.blue)\n        }\n        // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Accessibility for Menu\n        // VoiceOver\uac00 \uba54\ub274\uc758 \uae30\ub2a5\uc744 \uba85\ud655\ud788 \uc804\ub2ec\n        .accessibilityLabel(\"\uc870\ud68c \uae30\uac04 \ud544\ud130\")\n        .accessibilityHint(\"\ub450 \ubc88 \ud0ed\ud558\uc5ec \ud45c\uc2dc\ud560 \uae30\ub85d\uc758 \uae30\uac04\uc744 \uc120\ud0dd\ud569\ub2c8\ub2e4. \ud604\uc7ac \\(queryModeDescription)\")\n    }\n\n    /// \ud50c\ub85c\ud305 \ucd94\uac00 \ubc84\ud2bc\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Floating Action Button\n    /// - \ud654\uba74 \uc624\ub978\ucabd \ud558\ub2e8\uc5d0 \uace0\uc815\n    /// - \uc0c8 \ub808\ucf54\ub4dc \ucd94\uac00 \uc2dc\ud2b8 \uc5f4\uae30\n    private var addButton: some View {\n        Button(action: {\n            showAddSheet = true\n        }) {\n            HStack(spacing: 8) {\n                Image(systemName: \"plus.circle.fill\")\n                    .font(.title3)\n                Text(\"\ucd94\uac00\")\n                    .font(.body)\n                    .fontWeight(.semibold)\n            }\n            .foregroundStyle(.white)\n            .padding(.horizontal, 20)\n            .padding(.vertical, 12)\n            .background(\n                Capsule()\n                    .fill(Color.blue)\n                    .shadow(color: Color.black.opacity(0.2), radius: 8, x: 0, y: 4)\n            )\n        }\n        .padding(.trailing, 20)\n        .padding(.bottom, 20)\n        // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Accessibility for Floating Button\n        // VoiceOver\uac00 \ubc84\ud2bc\uc758 \uae30\ub2a5\uc744 \uba85\ud655\ud788 \uc804\ub2ec\n        .accessibilityLabel(\"\uc218\uba74 \uae30\ub85d \ucd94\uac00\")\n        .accessibilityHint(\"\ub450 \ubc88 \ud0ed\ud558\uc5ec \uc0c8\ub85c\uc6b4 \uc218\uba74 \uae30\ub85d\uc744 \ucd94\uac00\ud569\ub2c8\ub2e4\")\n    }\n\n    /// \ube48 \uc0c1\ud0dc \ubdf0\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Empty State UI\n    /// - \ub370\uc774\ud130\uac00 \uc5c6\uc744 \ub54c \uc0ac\uc6a9\uc790\uc5d0\uac8c \uc548\ub0b4\n    private var emptyStateView: some View {\n        VStack(spacing: 24) {\n            // \uc544\uc774\ucf58\n            Image(systemName: \"moon.zzz\")\n                .font(.system(size: 80))\n                .foregroundStyle(.gray.opacity(0.3))\n                .accessibilityHidden(true)\n\n            // \uba54\uc2dc\uc9c0\n            VStack(spacing: 12) {\n                Text(\"\uc218\uba74 \uae30\ub85d\uc774 \uc5c6\uc2b5\ub2c8\ub2e4\")\n                    .font(.title2)\n                    .fontWeight(.bold)\n                    .foregroundStyle(.primary)\n\n                Text(\"\uc218\uba74 \uc2dc\uac04\uc744 \uae30\ub85d\ud558\uba74\\n\uc5ec\uae30\uc5d0 \ud45c\uc2dc\ub429\ub2c8\ub2e4.\")\n                    .font(.body)\n                    .foregroundStyle(.secondary)\n                    .multilineTextAlignment(.center)\n            }\n\n            // \ucd94\uac00 \ubc84\ud2bc (\ud50c\ub85c\ud305 \ubc84\ud2bc\uc774 \uc5c6\uc744 \ub54c\ub9cc)\n            if !showAddButton {\n                Button(action: {\n                    showAddSheet = true\n                }) {\n                    HStack(spacing: 8) {\n                        Image(systemName: \"plus.circle.fill\")\n                        Text(\"\uc218\uba74 \uae30\ub85d \ucd94\uac00\ud558\uae30\")\n                            .fontWeight(.semibold)\n                    }\n                    .foregroundStyle(.white)\n                    .padding(.horizontal, 24)\n                    .padding(.vertical, 14)\n                    .background(\n                        Capsule()\n                            .fill(Color.blue)\n                    )\n                }\n                .padding(.top, 8)\n                .accessibilityLabel(\"\uc218\uba74 \uae30\ub85d \ucd94\uac00\ud558\uae30\")\n                .accessibilityHint(\"\ub450 \ubc88 \ud0ed\ud558\uc5ec \uccab \ubc88\uc9f8 \uc218\uba74 \uae30\ub85d\uc744 \ucd94\uac00\ud569\ub2c8\ub2e4\")\n            }\n        }\n        .frame(maxWidth: .infinity, maxHeight: .infinity)\n        .padding(.horizontal, 40)\n        // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Accessibility for Empty State\n        // \ube48 \uc0c1\ud0dc \uc804\uccb4\uc5d0 \ub300\ud55c \uc124\uba85 \ucd94\uac00\n        .accessibilityElement(children: .contain)\n    }\n\n    /// \ub85c\ub529 \ubdf0\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Loading State UI\n    private var loadingView: some View {\n        VStack(spacing: 16) {\n            ProgressView()\n                .scaleEffect(1.5)\n\n            Text(\"\uc218\uba74 \uae30\ub85d\uc744 \ubd88\ub7ec\uc624\ub294 \uc911...\")\n                .font(.subheadline)\n                .foregroundStyle(.secondary)\n        }\n        .frame(maxWidth: .infinity, maxHeight: .infinity)\n        // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Accessibility for Loading State\n        // VoiceOver\uac00 \ub85c\ub529 \uc0c1\ud0dc\ub97c \uba85\ud655\ud788 \uc804\ub2ec\n        .accessibilityElement(children: .combine)\n        .accessibilityLabel(\"\uc218\uba74 \uae30\ub85d\uc744 \ubd88\ub7ec\uc624\ub294 \uc911\uc785\ub2c8\ub2e4\")\n        .accessibilityAddTraits(.updatesFrequently)\n    }\n\n    /// \uc131\uacf5 \ud1a0\uc2a4\ud2b8\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Success Toast Message\n    /// - \uc0ad\uc81c \uc131\uacf5 \uc2dc \uc9e7\uc740 \uba54\uc2dc\uc9c0 \ud45c\uc2dc\n    ///\n    /// - Parameter message: \ud45c\uc2dc\ud560 \uba54\uc2dc\uc9c0\n    /// - Returns: \ud1a0\uc2a4\ud2b8 \ubdf0\n    private func successToast(message: String) -> some View {\n        HStack(spacing: 12) {\n            Image(systemName: \"checkmark.circle.fill\")\n                .font(.body)\n                .foregroundStyle(.white)\n\n            Text(message)\n                .font(.subheadline)\n                .fontWeight(.medium)\n                .foregroundStyle(.white)\n        }\n        .padding(.horizontal, 20)\n        .padding(.vertical, 12)\n        .background(\n            Capsule()\n                .fill(Color.green)\n                .shadow(color: Color.black.opacity(0.2), radius: 8, x: 0, y: 4)\n        )\n        .transition(.move(edge: .top).combined(with: .opacity))\n        .animation(.spring(), value: viewModel.successMessage != nil)\n        .onAppear {\n            // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Auto-dismiss Toast\n            // 2\ucd08 \ud6c4 \uc790\ub3d9\uc73c\ub85c \ud1a0\uc2a4\ud2b8 \uc81c\uac70\n            DispatchQueue.main.asyncAfter(deadline: .now() + 2) {\n                viewModel.clearSuccess()\n            }\n        }\n    }\n}\n\n// MARK: - Preview\n\n#Preview(\"\uae30\ubcf8 \uc0c1\ud0dc (\ub370\uc774\ud130 \uc788\uc74c)\") {\n    // Mock ViewModel \ud544\uc694\n    // SleepHistoryView(\n    //     viewModel: .makePreviewWithData(),\n    //     container: .shared\n    // )\n    Text(\"Preview\ub97c \uc704\ud574 Mock ViewModel\uc774 \ud544\uc694\ud569\ub2c8\ub2e4\")\n}\n\n#Preview(\"\ube48 \uc0c1\ud0dc\") {\n    // Mock ViewModel \ud544\uc694\n    Text(\"Preview\ub97c \uc704\ud574 Mock ViewModel\uc774 \ud544\uc694\ud569\ub2c8\ub2e4\")\n}\n\n#Preview(\"\ub85c\ub529 \uc911\") {\n    // Mock ViewModel \ud544\uc694\n    Text(\"Preview\ub97c \uc704\ud574 Mock ViewModel\uc774 \ud544\uc694\ud569\ub2c8\ub2e4\")\n}\n\n#Preview(\"\ub2e4\ud06c \ubaa8\ub4dc\") {\n    // Mock ViewModel \ud544\uc694\n    Text(\"Preview\ub97c \uc704\ud574 Mock ViewModel\uc774 \ud544\uc694\ud569\ub2c8\ub2e4\")\n        .preferredColorScheme(.dark)\n}\n\n// MARK: - Documentation\n\n/// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: SleepHistoryView \uc0ac\uc6a9\ubc95\n///\n/// \uae30\ubcf8 \uc0ac\uc6a9 (DIContainer\uc5d0\uc11c \uc0dd\uc131):\n/// ```swift\n/// struct ContentView: View {\n///     let container: DIContainer\n///\n///     var body: some View {\n///         SleepHistoryView(\n///             viewModel: container.makeSleepHistoryViewModel(),\n///             container: container\n///         )\n///     }\n/// }\n/// ```\n///\n/// NavigationLink\ub85c \ud45c\uc2dc:\n/// ```swift\n/// NavigationLink(\"\uc218\uba74 \uae30\ub85d\") {\n///     SleepHistoryView(\n///         viewModel: historyViewModel,\n///         container: container\n///     )\n/// }\n/// ```\n///\n/// Sheet\ub85c \ud45c\uc2dc:\n/// ```swift\n/// struct MyView: View {\n///     @State private var showHistory = false\n///\n///     var body: some View {\n///         Button(\"\uc218\uba74 \uae30\ub85d \ubcf4\uae30\") {\n///             showHistory = true\n///         }\n///         .sheet(isPresented: $showHistory) {\n///             SleepHistoryView(\n///                 viewModel: historyViewModel,\n///                 container: container\n///             )\n///         }\n///     }\n/// }\n/// ```\n///\n/// \ucd94\uac00 \ubc84\ud2bc \uc5c6\uc774 \uc0ac\uc6a9:\n/// ```swift\n/// SleepHistoryView(\n///     viewModel: historyViewModel,\n///     container: container,\n///     showAddButton: false\n/// )\n/// ```\n///\n/// \uc8fc\uc694 \uae30\ub2a5:\n/// - \uc218\uba74 \uae30\ub85d \ub9ac\uc2a4\ud2b8 \ud45c\uc2dc\n/// - \ud1b5\uacc4 \uc694\uc57d (\ud3c9\uade0 \uc218\uba74 \uc2dc\uac04, \uac00\uc7a5 \ub9ce\uc740 \uc0c1\ud0dc, \ucd1d \uae30\ub85d \uc218)\n/// - \uc870\ud68c \ubaa8\ub4dc \uc120\ud0dd (\uc804\uccb4, \ucd5c\uadfc 7/30/90\uc77c)\n/// - \ub808\ucf54\ub4dc \ud0ed\uc73c\ub85c \ud3b8\uc9d1\n/// - \ub808\ucf54\ub4dc \uc2a4\uc640\uc774\ud504\ub85c \ud3b8\uc9d1/\uc0ad\uc81c\n/// - \ud50c\ub85c\ud305 \ucd94\uac00 \ubc84\ud2bc\n/// - \uc0ad\uc81c \ud655\uc778 \ub300\ud654\uc0c1\uc790\n/// - Pull-to-refresh \uc0c8\ub85c\uace0\uce68\n/// - \ube48 \uc0c1\ud0dc \ucc98\ub9ac\n/// - \ub85c\ub529 \uc0c1\ud0dc \ucc98\ub9ac\n/// - \uc5d0\ub7ec \uc54c\ub9bc \ud45c\uc2dc\n/// - \uc131\uacf5 \ud1a0\uc2a4\ud2b8 \uba54\uc2dc\uc9c0\n///\n/// \ud654\uba74 \uad6c\uc131:\n/// 1. \ud1b5\uacc4 \uc694\uc57d \uc139\uc158: \ud3c9\uade0 \uc218\uba74 \uc2dc\uac04, \uac00\uc7a5 \ub9ce\uc740 \uc0c1\ud0dc, \ucd1d \uae30\ub85d \uc218\n/// 2. \uc218\uba74 \uae30\ub85d \uc139\uc158: SleepRecordRow\ub85c \uac01 \ub808\ucf54\ub4dc \ud45c\uc2dc\n/// 3. \ud50c\ub85c\ud305 \ucd94\uac00 \ubc84\ud2bc: \ud654\uba74 \uc624\ub978\ucabd \ud558\ub2e8 \uace0\uc815\n/// 4. \uc870\ud68c \ubaa8\ub4dc \uba54\ub274: \ub124\ube44\uac8c\uc774\uc158 \ubc14 \uc624\ub978\ucabd\n///\n/// \uc0ac\uc6a9\uc790 \uc778\ud130\ub799\uc158:\n/// - \ud0ed: \ub808\ucf54\ub4dc \ud3b8\uc9d1 \uc2dc\ud2b8 \uc5f4\uae30\n/// - \uc67c\ucabd \uc2a4\uc640\uc774\ud504: \ud3b8\uc9d1 \ubc84\ud2bc \ud45c\uc2dc\n/// - \uc624\ub978\ucabd \uc2a4\uc640\uc774\ud504: \uc0ad\uc81c \ubc84\ud2bc \ud45c\uc2dc\n/// - \ud50c\ub85c\ud305 \ubc84\ud2bc: \uc0c8 \ub808\ucf54\ub4dc \ucd94\uac00 \uc2dc\ud2b8 \uc5f4\uae30\n/// - Pull-to-refresh: \ub370\uc774\ud130 \uc0c8\ub85c\uace0\uce68\n/// - \uc870\ud68c \ubaa8\ub4dc \uba54\ub274: \ud45c\uc2dc \uae30\uac04 \ubcc0\uacbd\n///\n/// \ube44\uc988\ub2c8\uc2a4 \ud50c\ub85c\uc6b0:\n/// 1. ViewModel \ucd08\uae30\ud654 \uc2dc \uc790\ub3d9\uc73c\ub85c \ub370\uc774\ud130 \ub85c\ub4dc\n/// 2. \uc0ac\uc6a9\uc790\uac00 \uc870\ud68c \ubaa8\ub4dc \ubcc0\uacbd \u2192 \uc790\ub3d9 \ub9ac\ub85c\ub4dc\n/// 3. \ub808\ucf54\ub4dc \ud0ed \u2192 editRecord() \ud638\ucd9c \u2192 \ud3b8\uc9d1 \uc2dc\ud2b8 \ud45c\uc2dc\n/// 4. \ub808\ucf54\ub4dc \uc2a4\uc640\uc774\ud504 \uc0ad\uc81c \u2192 confirmDelete() \u2192 \ud655\uc778 \ub300\ud654\uc0c1\uc790 \u2192 deleteRecord()\n/// 5. \ud50c\ub85c\ud305 \ubc84\ud2bc \ud0ed \u2192 \ucd94\uac00 \uc2dc\ud2b8 \ud45c\uc2dc\n/// 6. \uc2dc\ud2b8\uc5d0\uc11c \uc800\uc7a5 \uc644\ub8cc \u2192 \uc2dc\ud2b8 \ub2eb\ud798 \u2192 didFinishEditing() \u2192 \ub370\uc774\ud130 \ub9ac\ub85c\ub4dc\n///\n/// \uc0ad\uc81c \ud50c\ub85c\uc6b0:\n/// 1. \uc0ac\uc6a9\uc790\uac00 \ub808\ucf54\ub4dc\ub97c \uc624\ub978\ucabd \uc2a4\uc640\uc774\ud504\n/// 2. \uc0ad\uc81c \ubc84\ud2bc \ud45c\uc2dc\n/// 3. \uc0ad\uc81c \ubc84\ud2bc \ud0ed \u2192 confirmDelete()\n/// 4. \ud655\uc778 \ub300\ud654\uc0c1\uc790 \ud45c\uc2dc\n/// 5. \"\uc0ad\uc81c\" \uc120\ud0dd \u2192 deleteRecord()\n/// 6. Repository\ub97c \ud1b5\ud574 \ub808\ucf54\ub4dc \uc0ad\uc81c\n/// 7. \uc131\uacf5 \ud1a0\uc2a4\ud2b8 \ud45c\uc2dc\n/// 8. \ub370\uc774\ud130 \ub9ac\ub85c\ub4dc\n///\n/// \ud3b8\uc9d1 \ud50c\ub85c\uc6b0:\n/// 1. \uc0ac\uc6a9\uc790\uac00 \ub808\ucf54\ub4dc\ub97c \ud0ed (\ub610\ub294 \uc67c\ucabd \uc2a4\uc640\uc774\ud504 \ud6c4 \ud3b8\uc9d1 \ubc84\ud2bc)\n/// 2. editRecord() \ud638\ucd9c\n/// 3. recordToEdit \uc124\uc815\n/// 4. .sheet(item:) \ud2b8\ub9ac\uac70\n/// 5. SleepInputSheet \ud45c\uc2dc (\uae30\uc874 \uac12\uc73c\ub85c \ucd08\uae30\ud654)\n/// 6. \ud3b8\uc9d1 \uc644\ub8cc \u2192 didFinishEditing()\n/// 7. recordToEdit = nil \u2192 \uc2dc\ud2b8 \ub2eb\ud798\n/// 8. \ub370\uc774\ud130 \ub9ac\ub85c\ub4dc\n///\n/// \uc0c1\ud0dc \uad00\ub9ac:\n/// - viewModel.historyOutput: \uc870\ud68c\ub41c \ub808\ucf54\ub4dc \ub9ac\uc2a4\ud2b8\n/// - viewModel.selectedMode: \ud604\uc7ac \uc870\ud68c \ubaa8\ub4dc\n/// - viewModel.isLoading: \ub85c\ub529 \uc911 \uc0c1\ud0dc\n/// - viewModel.isEmpty: \ube48 \uc0c1\ud0dc \uc5ec\ubd80\n/// - viewModel.recordToEdit: \ud3b8\uc9d1\ud560 \ub808\ucf54\ub4dc (\uc2dc\ud2b8 \ud2b8\ub9ac\uac70)\n/// - viewModel.showDeleteConfirmation: \uc0ad\uc81c \ud655\uc778 \ub300\ud654\uc0c1\uc790 \ud45c\uc2dc \uc5ec\ubd80\n/// - viewModel.errorMessage: \uc5d0\ub7ec \uba54\uc2dc\uc9c0\n/// - viewModel.successMessage: \uc131\uacf5 \uba54\uc2dc\uc9c0\n/// - showAddSheet: \ucd94\uac00 \uc2dc\ud2b8 \ud45c\uc2dc \uc5ec\ubd80\n///\n/// \uc870\ud68c \ubaa8\ub4dc:\n/// - .all: \uc804\uccb4 \uae30\ub85d\n/// - .recent(days: 7): \ucd5c\uadfc 7\uc77c\n/// - .recent(days: 30): \ucd5c\uadfc 30\uc77c (\uae30\ubcf8\uac12)\n/// - .recent(days: 90): \ucd5c\uadfc 90\uc77c\n/// - .dateRange(start, end): \ub0a0\uc9dc \ubc94\uc704 (\ud5a5\ud6c4 \uad6c\ud604)\n///\n/// \ud83d\udca1 Android \ube44\uad50:\n/// - Android: Fragment + RecyclerView + SwipeRefreshLayout\n/// - SwiftUI: View + List + .refreshable\n/// - Android: RecyclerView.ItemTouchHelper for swipe\n/// - SwiftUI: .swipeActions modifier\n/// - Android: FloatingActionButton\n/// - SwiftUI: Floating Button in ZStack\n/// - Android: Menu for filter options\n/// - SwiftUI: Menu for query mode selection\n/// - Android: BottomSheetDialogFragment for input\n/// - SwiftUI: .sheet for SleepInputSheet\n///\n/// \uc811\uadfc\uc131:\n/// - VoiceOver: \ubaa8\ub4e0 \ubc84\ud2bc\uacfc \ub808\ucf54\ub4dc\uc5d0 \uba85\ud655\ud55c \ub808\uc774\ube14\n/// - Dynamic Type: \uc790\ub3d9 \ud3f0\ud2b8 \ud06c\uae30 \uc870\uc815\n/// - \ucda9\ubd84\ud55c \ud130\uce58 \uc601\uc5ed: \ucd5c\uc18c 44pt\n/// - \uc0c9\uc0c1 + \uc544\uc774\ucf58: \uc774\uc911 \uc2dc\uac01\uc801 \ud45c\uc2dc\n/// - \uba85\ud655\ud55c \ud53c\ub4dc\ubc31: \ud1a0\uc2a4\ud2b8, \uc54c\ub9bc, \ud655\uc778 \ub300\ud654\uc0c1\uc790\n///\n/// \uc131\ub2a5 \ucd5c\uc801\ud654:\n/// - List\ub294 \uc790\ub3d9\uc73c\ub85c \ubcf4\uc774\ub294 \ubd80\ubd84\ub9cc \ub80c\ub354\ub9c1\n/// - ViewModel\uc5d0\uc11c \ub370\uc774\ud130 \uce90\uc2f1\n/// - selectedMode \ubcc0\uacbd \uc2dc debounce\ub85c \uc911\ubcf5 \ud638\ucd9c \ubc29\uc9c0\n/// - Pull-to-refresh\ub294 async/await\ub85c \uad6c\ud604\n///\n/// \uc2e4\ubb34 \ud301:\n/// - \uc0ad\uc81c\ub294 \ubc18\ub4dc\uc2dc \ud655\uc778 \ub300\ud654\uc0c1\uc790\ub85c \uc0ac\uc6a9\uc790 \ud655\uc778 \ubc1b\uae30\n/// - \uc131\uacf5/\uc5d0\ub7ec \uba54\uc2dc\uc9c0\ub85c \uba85\ud655\ud55c \ud53c\ub4dc\ubc31 \uc81c\uacf5\n/// - \ube48 \uc0c1\ud0dc\uc5d0\uc11c \uba85\ud655\ud55c \uc548\ub0b4\uc640 \uc561\uc158 \ubc84\ud2bc \uc81c\uacf5\n/// - \ud50c\ub85c\ud305 \ubc84\ud2bc\uc740 \ub9ac\uc2a4\ud2b8\uc640 \uacb9\uce58\uc9c0 \uc54a\ub3c4\ub85d padding \uc870\uc815\n/// - \uc2a4\uc640\uc774\ud504 \uc561\uc158\uc740 \uc9c1\uad00\uc801\uc778 \uc0c9\uc0c1\uacfc \uc544\uc774\ucf58 \uc0ac\uc6a9\n/// - \ud1b5\uacc4 \uc694\uc57d\uc73c\ub85c \ub370\uc774\ud130\uc5d0 \ub300\ud55c \uc778\uc0ac\uc774\ud2b8 \uc81c\uacf5\n/// - \uc870\ud68c \ubaa8\ub4dc\ub85c \uc0ac\uc6a9\uc790\uac00 \uc6d0\ud558\ub294 \ubc94\uc704\uc758 \ub370\uc774\ud130\ub9cc \uc870\ud68c\n///\n/// \uc758\uc874\uc131:\n/// - SleepHistoryViewModel: \ub370\uc774\ud130 \ub85c\ub4dc, \ud3b8\uc9d1/\uc0ad\uc81c \ub85c\uc9c1\n/// - SleepRecordRow: \uac1c\ubcc4 \ub808\ucf54\ub4dc \ud45c\uc2dc \ucef4\ud3ec\ub10c\ud2b8\n/// - SleepInputSheet: \ucd94\uac00/\ud3b8\uc9d1 \uc785\ub825 \uc2dc\ud2b8\n/// - DIContainer: ViewModel \uc0dd\uc131\uc744 \uc704\ud55c \ud329\ud1a0\ub9ac\n///\n",
        "last_modified": "2026-01-14T22:52:08.912451"
      },
      "task_intent": {
        "title": "009-sleep-tracking-with-5-status-system",
        "description": "Sleep logging with 5-status tracking (bad, soso, good, excellent, oversleep), duration input, wake time prompts, and correlation with other health metrics. Automatic morning prompt to log previous night's sleep.",
        "from_plan": true
      },
      "commits_behind_main": 0,
      "status": "active",
      "merged_at": null
    }
  },
  "created_at": "2026-01-14T18:01:05.118394",
  "last_updated": "2026-01-14T21:03:40.520195"
}