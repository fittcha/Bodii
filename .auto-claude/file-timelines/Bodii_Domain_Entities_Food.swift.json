{
  "file_path": "Bodii/Domain/Entities/Food.swift",
  "main_branch_history": [],
  "task_views": {
    "002-project-foundation-core-data-model": {
      "task_id": "002-project-foundation-core-data-model",
      "branch_point": {
        "commit_hash": "2abdae73fb6199bcbf4f21f6deeb7952225f81e6",
        "content": "",
        "timestamp": "2026-01-14T13:34:17.674713"
      },
      "worktree_state": {
        "content": "//\n//  Food.swift\n//  Bodii\n//\n//  Created by Auto-Claude on 2026-01-11.\n//\n\n// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Master Data Pattern\n// Food\ub294 \ub9c8\uc2a4\ud130 \ub370\uc774\ud130\ub85c \uc5ec\ub7ec FoodRecord\uc5d0\uc11c \ucc38\uc870\ub418\ub294 \ubd88\ubcc0 \uc601\uc591 \uc815\ubcf4 \uc800\uc7a5\n// \ud83d\udca1 Java \ube44\uad50: JPA\uc5d0\uc11c @OneToMany \uad00\uacc4\uc758 \ub9c8\uc2a4\ud130 \ud14c\uc774\ube14\uacfc \ub3d9\uc77c (Product - OrderItem \ud328\ud134)\n\nimport Foundation\n\n// MARK: - Food\n\n/// \uc74c\uc2dd \ub9c8\uc2a4\ud130 \ub370\uc774\ud130 \ub3c4\uba54\uc778 \uc5d4\ud2f0\ud2f0\n/// - \uc74c\uc2dd\uc758 \uc601\uc591 \uc815\ubcf4\uc640 \uae30\uc900 \uc81c\uacf5\ub7c9\uc744 \uad00\ub9ac\ud558\ub294 \ub9c8\uc2a4\ud130 \ub370\uc774\ud130\n/// - FoodRecord\uc5d0\uc11c \ucc38\uc870\ud558\uc5ec \uc12d\ucde8\ub7c9 \uacc4\uc0b0\uc5d0 \uc0ac\uc6a9\n/// - \ub370\uc774\ud130 \ucd9c\ucc98: \uc2dd\uc57d\ucc98 API, USDA API, \uc0ac\uc6a9\uc790 \uc9c1\uc811 \uc0dd\uc131\n///\n/// ## \uc8fc\uc694 \uae30\ub2a5\n/// - \uc74c\uc2dd\ubcc4 \uc601\uc591 \uc815\ubcf4 \uad00\ub9ac (\uce7c\ub85c\ub9ac, \ud0c4\uc218\ud654\ubb3c, \ub2e8\ubc31\uc9c8, \uc9c0\ubc29 \ub4f1)\n/// - \uae30\uc900 \uc81c\uacf5\ub7c9 \ubc0f \ub2e8\uc704 \uc815\ubcf4\n/// - \ub370\uc774\ud130 \ucd9c\ucc98 \ucd94\uc801 (API \ucf54\ub4dc \ud3ec\ud568)\n/// - \uc0ac\uc6a9\uc790 \uc0dd\uc131 \uc74c\uc2dd \uc9c0\uc6d0\n///\n/// ## \ub370\uc774\ud130 \ucd9c\ucc98\n/// - \uc2dd\ud488\uc758\uc57d\ud488\uc548\uc804\ucc98(KFDA) API: \ud55c\uad6d \uc74c\uc2dd \ub370\uc774\ud130\n/// - \ubbf8\uad6d \ub18d\ubb34\ubd80(USDA) API: \ubbf8\uad6d/\uad6d\uc81c \uc74c\uc2dd \ub370\uc774\ud130\n/// - \uc0ac\uc6a9\uc790 \uc0dd\uc131: \ucee4\uc2a4\ud140 \uc74c\uc2dd \ub4f1\ub85d\n///\n/// ## \uc0ac\uc6a9 \uc608\uc2dc\n/// ```swift\n/// // 1. API\uc5d0\uc11c \uac00\uc838\uc628 \uc74c\uc2dd\n/// let rice = Food(\n///     id: UUID(),\n///     name: \"\ubc31\ubbf8\ubc25\",\n///     calories: 130,\n///     carbohydrates: 28.7,\n///     protein: 2.5,\n///     fat: 0.2,\n///     sodium: 0,\n///     fiber: 0.3,\n///     sugar: 0.1,\n///     servingSize: 100.0,\n///     servingUnit: .gram,\n///     source: .kfdaAPI,\n///     apiCode: \"KFDA_12345\",\n///     createdByUserId: nil,\n///     createdAt: Date()\n/// )\n///\n/// // 2. \uc0ac\uc6a9\uc790\uac00 \uc9c1\uc811 \uc0dd\uc131\ud55c \uc74c\uc2dd\n/// let customMeal = Food(\n///     id: UUID(),\n///     name: \"\uc5c4\ub9c8\ud45c \ub41c\uc7a5\ucc0c\uac1c\",\n///     calories: 120,\n///     carbohydrates: 8.5,\n///     protein: 7.2,\n///     fat: 5.1,\n///     sodium: 980,\n///     fiber: 1.2,\n///     sugar: 2.1,\n///     servingSize: 1.0,\n///     servingUnit: .serving,\n///     source: .userCreated,\n///     apiCode: nil,\n///     createdByUserId: userId,\n///     createdAt: Date()\n/// )\n///\n/// // 3. FoodRecord\uc5d0\uc11c \uc601\uc591 \uc815\ubcf4 \uacc4\uc0b0\n/// let quantity: Decimal = 1.5 // 1.5\uc778\ubd84\n/// let totalCalories = rice.calories * Int(truncating: NSDecimalNumber(decimal: quantity))\n/// ```\nstruct Food: Identifiable, Codable, Equatable {\n\n    // MARK: - Properties\n\n    // MARK: Identifier\n\n    /// \uc74c\uc2dd \uace0\uc720 \uc2dd\ubcc4\uc790\n    /// - UUID \ud0c0\uc785\uc73c\ub85c \uc804\uc5ed \uace0\uc720\uc131 \ubcf4\uc7a5\n    let id: UUID\n\n    // MARK: Basic Information\n\n    /// \uc74c\uc2dd \uc774\ub984\n    /// - \ud55c\uad6d\uc5b4 \uc74c\uc2dd\uba85 \ub610\ub294 \uc601\ubb38 \uc74c\uc2dd\uba85\n    /// - \uac80\uc0c9 \ubc0f \ud45c\uc2dc\uc5d0 \uc0ac\uc6a9\n    var name: String\n\n    // MARK: Nutritional Information\n\n    /// \uc5f4\ub7c9 (kcal)\n    /// - \uae30\uc900 \uc81c\uacf5\ub7c9\ub2f9 \uce7c\ub85c\ub9ac\n    /// - FoodRecord\uc5d0\uc11c \uc12d\ucde8\ub7c9\uc5d0 \ub530\ub77c \uacc4\uc0b0\n    var calories: Int\n\n    /// \ud0c4\uc218\ud654\ubb3c (g)\n    /// - \uae30\uc900 \uc81c\uacf5\ub7c9\ub2f9 \ud0c4\uc218\ud654\ubb3c \ud568\ub7c9\n    /// - 3\ub300 \uc601\uc591\uc18c \uc911 \ud558\ub098\n    var carbohydrates: Decimal\n\n    /// \ub2e8\ubc31\uc9c8 (g)\n    /// - \uae30\uc900 \uc81c\uacf5\ub7c9\ub2f9 \ub2e8\ubc31\uc9c8 \ud568\ub7c9\n    /// - 3\ub300 \uc601\uc591\uc18c \uc911 \ud558\ub098\n    var protein: Decimal\n\n    /// \uc9c0\ubc29 (g)\n    /// - \uae30\uc900 \uc81c\uacf5\ub7c9\ub2f9 \uc9c0\ubc29 \ud568\ub7c9\n    /// - 3\ub300 \uc601\uc591\uc18c \uc911 \ud558\ub098\n    var fat: Decimal\n\n    /// \ub098\ud2b8\ub968 (mg)\n    /// - \uae30\uc900 \uc81c\uacf5\ub7c9\ub2f9 \ub098\ud2b8\ub968 \ud568\ub7c9\n    /// - \uc635\uc154\ub110: API\uc5d0 \ub370\uc774\ud130\uac00 \uc5c6\uc744 \uc218 \uc788\uc74c\n    var sodium: Decimal?\n\n    /// \uc2dd\uc774\uc12c\uc720 (g)\n    /// - \uae30\uc900 \uc81c\uacf5\ub7c9\ub2f9 \uc2dd\uc774\uc12c\uc720 \ud568\ub7c9\n    /// - \uc635\uc154\ub110: API\uc5d0 \ub370\uc774\ud130\uac00 \uc5c6\uc744 \uc218 \uc788\uc74c\n    var fiber: Decimal?\n\n    /// \ub2f9\ub958 (g)\n    /// - \uae30\uc900 \uc81c\uacf5\ub7c9\ub2f9 \ub2f9\ub958 \ud568\ub7c9\n    /// - \uc635\uc154\ub110: API\uc5d0 \ub370\uc774\ud130\uac00 \uc5c6\uc744 \uc218 \uc788\uc74c\n    var sugar: Decimal?\n\n    // MARK: Serving Information\n\n    /// \uae30\uc900 \uc81c\uacf5\ub7c9\n    /// - \uc601\uc591 \uc815\ubcf4\uc758 \uae30\uc900\uc774 \ub418\ub294 \uc591\n    /// - \uc608: 100g, 1\uc778\ubd84\n    var servingSize: Decimal\n\n    /// \uae30\uc900 \uc81c\uacf5\ub7c9 \ub2e8\uc704\n    /// - .gram: \uadf8\ub7a8 \ub2e8\uc704 (\uc608: 100g)\n    /// - .serving: \uc778\ubd84 \ub2e8\uc704 (\uc608: 1\uc778\ubd84)\n    /// - nil \uac00\ub2a5: \ub2e8\uc704 \uc815\ubcf4\uac00 \uc5c6\ub294 \uacbd\uc6b0\n    var servingUnit: QuantityUnit?\n\n    // MARK: Source Tracking\n\n    /// \ub370\uc774\ud130 \ucd9c\ucc98\n    /// - .kfdaAPI: \uc2dd\ud488\uc758\uc57d\ud488\uc548\uc804\ucc98 API\n    /// - .usdaAPI: \ubbf8\uad6d \ub18d\ubb34\ubd80 API\n    /// - .userCreated: \uc0ac\uc6a9\uc790 \uc9c1\uc811 \uc0dd\uc131\n    var source: FoodSource\n\n    /// API \uace0\uc720 \ucf54\ub4dc\n    /// - API \ucd9c\ucc98\uc758 \uc6d0\ubcf8 \ub370\uc774\ud130 \uc2dd\ubcc4\uc790\n    /// - \ub370\uc774\ud130 \ub3d9\uae30\ud654 \ubc0f \uc911\ubcf5 \ubc29\uc9c0\uc5d0 \uc0ac\uc6a9\n    /// - \uc635\uc154\ub110: \uc0ac\uc6a9\uc790 \uc0dd\uc131 \uc74c\uc2dd\uc740 nil\n    var apiCode: String?\n\n    /// \uc74c\uc2dd \uc0dd\uc131 \uc0ac\uc6a9\uc790 ID\n    /// - \uc0ac\uc6a9\uc790\uac00 \uc9c1\uc811 \uc0dd\uc131\ud55c \uc74c\uc2dd\uc77c \uacbd\uc6b0 \uc0dd\uc131\uc790 ID\n    /// - \uc635\uc154\ub110: API \uc74c\uc2dd\uc740 nil, userCreated\ub9cc \uac12 \uc874\uc7ac\n    var createdByUserId: UUID?\n\n    // MARK: Timestamps\n\n    /// \uc0dd\uc131 \uc2dc\uac01\n    /// - \uc74c\uc2dd \ub370\uc774\ud130\uac00 DB\uc5d0 \ucd94\uac00\ub41c \uc2dc\uac01\n    let createdAt: Date\n}\n\n// MARK: - Food + CustomStringConvertible\n\nextension Food: CustomStringConvertible {\n    /// \ub514\ubc84\uae45\uc6a9 \ubb38\uc790\uc5f4 \ud45c\ud604\n    var description: String {\n        let servingInfo: String\n        if let unit = servingUnit {\n            servingInfo = \"\\(servingSize)\\(unit.displayName)\"\n        } else {\n            servingInfo = \"\\(servingSize)\"\n        }\n\n        return \"\"\"\n        Food(\n          id: \\(id.uuidString.prefix(8))...,\n          name: \\(name),\n          calories: \\(calories)kcal,\n          carbs: \\(carbohydrates)g,\n          protein: \\(protein)g,\n          fat: \\(fat)g,\n          servingSize: \\(servingInfo),\n          source: \\(source.displayName)\\(apiCode.map { \" (\\($0))\" } ?? \"\")\n        )\n        \"\"\"\n    }\n}\n",
        "last_modified": "2026-01-14T13:34:18.073690"
      },
      "task_intent": {
        "title": "Project Foundation & Core Data Model",
        "description": "Set up Xcode project with SwiftUI, MVVM architecture, Core Data persistence layer with 9 entities (User, BodyRecord, MetabolismSnapshot, Food, FoodRecord, ExerciseRecord, SleepRecord, DailyLog, Goal), and utility services for date handling and input validation.",
        "from_plan": true
      },
      "commits_behind_main": 3,
      "status": "active",
      "merged_at": null
    },
    "004-project-foundation-core-data-model": {
      "task_id": "004-project-foundation-core-data-model",
      "branch_point": {
        "commit_hash": "2abdae73fb6199bcbf4f21f6deeb7952225f81e6",
        "content": "",
        "timestamp": "2026-01-12T19:14:54.682468"
      },
      "worktree_state": {
        "content": "//\n//  Food.swift\n//  Bodii\n//\n//  Created by Auto-Claude on 2024-01-12.\n//\n\nimport Foundation\n\n/// \uc74c\uc2dd \ub9c8\uc2a4\ud130 \ub3c4\uba54\uc778 \uc5d4\ud2f0\ud2f0\n///\n/// \uc74c\uc2dd\uc758 \uc601\uc591 \uc815\ubcf4\ub97c \uc800\uc7a5\ud558\ub294 \ub9c8\uc2a4\ud130 \ub370\uc774\ud130\uc785\ub2c8\ub2e4.\n/// \uc2dd\uc57d\ucc98 API, USDA API, \uc0ac\uc6a9\uc790 \uc9c1\uc811 \uc785\ub825 \ub4f1 \ub2e4\uc591\ud55c \ucd9c\ucc98\uc5d0\uc11c \uc81c\uacf5\ub429\ub2c8\ub2e4.\n///\n/// - Note: servingSize\ub294 1\ud68c \uc81c\uacf5\ub7c9\uc758 \uae30\uc900\uc774 \ub418\uba70, \ubaa8\ub4e0 \uc601\uc591 \uc815\ubcf4\ub294 \uc774 \uae30\uc900\ub7c9\uc5d0 \ub300\ud55c \uac12\uc785\ub2c8\ub2e4.\n///\n/// - Note: source\uac00 userDefined\uc77c \uacbd\uc6b0 createdByUserId\uac00 \uc124\uc815\ub429\ub2c8\ub2e4.\n///\n/// - Example:\n/// ```swift\n/// let food = Food(\n///     id: UUID(),\n///     name: \"\ud604\ubbf8\ubc25\",\n///     calories: 330,\n///     carbohydrates: Decimal(73.4),\n///     protein: Decimal(6.8),\n///     fat: Decimal(2.5),\n///     sodium: Decimal(5.0),\n///     fiber: Decimal(3.0),\n///     sugar: Decimal(0.5),\n///     servingSize: Decimal(210.0),\n///     servingUnit: \"1\uacf5\uae30\",\n///     source: .governmentAPI,\n///     apiCode: \"D000001\",\n///     createdByUserId: nil,\n///     createdAt: Date()\n/// )\n/// ```\nstruct Food {\n    // MARK: - Primary Key\n\n    /// \uace0\uc720 \uc2dd\ubcc4\uc790\n    let id: UUID\n\n    // MARK: - Basic Information\n\n    /// \uc74c\uc2dd\uba85\n    var name: String\n\n    // MARK: - Nutrition Information\n\n    /// \uce7c\ub85c\ub9ac (kcal)\n    ///\n    /// servingSize \uae30\uc900 \uce7c\ub85c\ub9ac \uc815\ubcf4\uc785\ub2c8\ub2e4.\n    var calories: Int32\n\n    /// \ud0c4\uc218\ud654\ubb3c (g)\n    ///\n    /// servingSize \uae30\uc900 \ud0c4\uc218\ud654\ubb3c \ud568\ub7c9\uc785\ub2c8\ub2e4.\n    var carbohydrates: Decimal\n\n    /// \ub2e8\ubc31\uc9c8 (g)\n    ///\n    /// servingSize \uae30\uc900 \ub2e8\ubc31\uc9c8 \ud568\ub7c9\uc785\ub2c8\ub2e4.\n    var protein: Decimal\n\n    /// \uc9c0\ubc29 (g)\n    ///\n    /// servingSize \uae30\uc900 \uc9c0\ubc29 \ud568\ub7c9\uc785\ub2c8\ub2e4.\n    var fat: Decimal\n\n    /// \ub098\ud2b8\ub968 (mg)\n    ///\n    /// servingSize \uae30\uc900 \ub098\ud2b8\ub968 \ud568\ub7c9\uc785\ub2c8\ub2e4.\n    var sodium: Decimal?\n\n    /// \uc2dd\uc774\uc12c\uc720 (g)\n    ///\n    /// servingSize \uae30\uc900 \uc2dd\uc774\uc12c\uc720 \ud568\ub7c9\uc785\ub2c8\ub2e4.\n    var fiber: Decimal?\n\n    /// \ub2f9\ub958 (g)\n    ///\n    /// servingSize \uae30\uc900 \ub2f9\ub958 \ud568\ub7c9\uc785\ub2c8\ub2e4.\n    var sugar: Decimal?\n\n    // MARK: - Serving Information\n\n    /// 1\ud68c \uc81c\uacf5\ub7c9 (g)\n    ///\n    /// \uc601\uc591 \uc815\ubcf4\uc758 \uae30\uc900\uc774 \ub418\ub294 \uc81c\uacf5\ub7c9\uc785\ub2c8\ub2e4.\n    var servingSize: Decimal\n\n    /// \ub2e8\uc704 (\uc608: \"1\uc778\ubd84\", \"1\uac1c\", \"1\uacf5\uae30\")\n    ///\n    /// \uc0ac\uc6a9\uc790\uc5d0\uac8c \ud45c\uc2dc\ud560 \uc81c\uacf5\ub7c9 \ub2e8\uc704\uc785\ub2c8\ub2e4.\n    var servingUnit: String?\n\n    // MARK: - Source Information\n\n    /// \ucd9c\ucc98 (0: \uc2dd\uc57d\ucc98 API, 1: USDA API, 2: \uc0ac\uc6a9\uc790 \uc9c1\uc811 \uc785\ub825)\n    ///\n    /// - 0: \uc2dd\uc57d\ucc98 API (\uacf5\uacf5\ub370\uc774\ud130) - \ud55c\uad6d \uc74c\uc2dd\n    /// - 1: USDA FoodData Central - \uc678\uad6d \uc74c\uc2dd\n    /// - 2: \uc0ac\uc6a9\uc790 \uc9c1\uc811 \uc785\ub825\n    var source: FoodSource\n\n    /// API \uc2dd\ud488\ucf54\ub4dc\n    ///\n    /// \uc678\ubd80 API\uc5d0\uc11c \uc81c\uacf5\ud558\ub294 \uace0\uc720 \uc2dd\ud488 \ucf54\ub4dc\uc785\ub2c8\ub2e4.\n    /// source\uac00 governmentAPI \ub610\ub294 usda\uc77c \uacbd\uc6b0 \uc124\uc815\ub429\ub2c8\ub2e4.\n    var apiCode: String?\n\n    // MARK: - Foreign Key\n\n    /// \uc0ac\uc6a9\uc790 \uc815\uc758 \uc74c\uc2dd \uc0dd\uc131\uc790\n    ///\n    /// source\uac00 userDefined\uc77c \uacbd\uc6b0 \uc0dd\uc131\ud55c \uc0ac\uc6a9\uc790\uc758 ID\uac00 \uc124\uc815\ub429\ub2c8\ub2e4.\n    var createdByUserId: UUID?\n\n    // MARK: - Metadata\n\n    /// \uc0dd\uc131\uc77c\uc2dc\n    let createdAt: Date\n}\n\n// MARK: - Identifiable\n\nextension Food: Identifiable {}\n\n// MARK: - Equatable\n\nextension Food: Equatable {\n    static func == (lhs: Food, rhs: Food) -> Bool {\n        lhs.id == rhs.id\n    }\n}\n\n// MARK: - Hashable\n\nextension Food: Hashable {\n    func hash(into hasher: inout Hasher) {\n        hasher.combine(id)\n    }\n}\n",
        "last_modified": "2026-01-14T22:57:13.075212"
      },
      "task_intent": {
        "title": "004-project-foundation-core-data-model",
        "description": "",
        "from_plan": false
      },
      "commits_behind_main": 0,
      "status": "active",
      "merged_at": null
    }
  },
  "created_at": "2026-01-11T21:28:23.984199",
  "last_updated": "2026-01-14T13:34:17.828098"
}