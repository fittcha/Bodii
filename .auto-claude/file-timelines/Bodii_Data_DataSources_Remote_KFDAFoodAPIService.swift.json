{
  "file_path": "Bodii/Data/DataSources/Remote/KFDAFoodAPIService.swift",
  "main_branch_history": [],
  "task_views": {
    "005-korean-food-database-integration": {
      "task_id": "005-korean-food-database-integration",
      "branch_point": {
        "commit_hash": "c44bfbcd7c1699b176a8bb155e8c35f43ebd4ad9",
        "content": "",
        "timestamp": "2026-01-13T07:46:23.878686"
      },
      "worktree_state": {
        "content": "//\n//  KFDAFoodAPIService.swift\n//  Bodii\n//\n//  Created by Auto-Claude on 2026-01-12.\n//\n\n// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: API Service Layer\n// \uc678\ubd80 API \ud638\ucd9c\uc744 \ucea1\uc290\ud654\ud558\ub294 \uc11c\ube44\uc2a4 \ud074\ub798\uc2a4\n// \ud83d\udca1 Java \ube44\uad50: Retrofit\uc758 Service Interface \uad6c\ud604\uccb4\uc640 \uc720\uc0ac\ud55c \uc5ed\ud560\n\nimport Foundation\n\n/// \uc2dd\uc57d\ucc98(KFDA) \uc2dd\ud488 \uc601\uc591 \uc815\ubcf4 API \uc11c\ube44\uc2a4\n///\n/// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Service Layer Pattern\n/// \ub124\ud2b8\uc6cc\ud06c \uc694\uccad \ub85c\uc9c1\uc744 \ubd84\ub9ac\ud558\uc5ec \uc7ac\uc0ac\uc6a9\uc131\uacfc \ud14c\uc2a4\ud2b8 \uc6a9\uc774\uc131 \ud5a5\uc0c1\n/// \ud83d\udca1 Java \ube44\uad50: Repository \ud328\ud134\uc758 Remote DataSource\uc640 \uc720\uc0ac\n///\n/// **\uc8fc\uc694 \uae30\ub2a5:**\n/// - \uc2dd\ud488\uba85\uc73c\ub85c \uac80\uc0c9\n/// - \ud398\uc774\uc9d5 \uc9c0\uc6d0 (startIdx/endIdx)\n/// - \uc2dd\ud488 \uc0c1\uc138 \uc815\ubcf4 \uc870\ud68c\n/// - API \uc751\ub2f5 \ud30c\uc2f1 \ubc0f \uc5d0\ub7ec \ucc98\ub9ac\n/// - Rate limit \uc900\uc218\n///\n/// **API \uc815\ubcf4:**\n/// - Provider: \uc2dd\ud488\uc758\uc57d\ud488\uc548\uc804\ucc98 (\uacf5\uacf5\ub370\uc774\ud130\ud3ec\ud138)\n/// - API \ubb38\uc11c: https://www.data.go.kr/data/15127578/openapi.do\n/// - Rate Limit: API \ud0a4\uc5d0 \ub530\ub77c \uc0c1\uc774 (\uc77c\ubc18\uc801\uc73c\ub85c 1000 requests/day)\n///\n/// **\uc0ac\uc6a9 \uc608\uc2dc:**\n/// ```swift\n/// let service = KFDAFoodAPIService()\n///\n/// // \uc2dd\ud488 \uac80\uc0c9\n/// let result = try await service.searchFoods(query: \"\uae40\uce58\ucc0c\uac1c\", startIdx: 1, endIdx: 10)\n/// print(\"Found \\(result.totalCount) foods\")\n/// result.foods.forEach { food in\n///     print(\"\\(food.descKor): \\(food.enercKcal ?? \"N/A\") kcal\")\n/// }\n///\n/// // \uc2dd\ud488 \uc0c1\uc138 \uc870\ud68c\n/// let detail = try await service.getFoodDetail(foodCode: \"D000001\")\n/// ```\nfinal class KFDAFoodAPIService {\n\n    // MARK: - Properties\n\n    /// \ub124\ud2b8\uc6cc\ud06c \ub9e4\ub2c8\uc800\n    ///\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Dependency Injection\n    /// NetworkManager\ub97c \uc8fc\uc785\ubc1b\uc544 \ud14c\uc2a4\ud2b8 \uc2dc Mock\uc73c\ub85c \uad50\uccb4 \uac00\ub2a5\n    /// \ud83d\udca1 Java \ube44\uad50: Constructor Injection \ud328\ud134\n    private let networkManager: NetworkManager\n\n    /// API \uc124\uc815\n    ///\n    /// API URL\uacfc \uc778\uc99d \ud0a4\ub97c \uc81c\uacf5\ud558\ub294 \uc124\uc815 \uac1d\uccb4\n    private let apiConfig: APIConfigProtocol\n\n    // MARK: - Initialization\n\n    /// KFDAFoodAPIService \ucd08\uae30\ud654\n    ///\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Dependency Injection\n    /// \uc678\ubd80\uc5d0\uc11c \uc758\uc874\uc131\uc744 \uc8fc\uc785\ubc1b\uc544 \ud14c\uc2a4\ud2b8\uc640 \uc720\uc5f0\uc131 \ud5a5\uc0c1\n    /// \ud83d\udca1 Java \ube44\uad50: @Inject \uc5b4\ub178\ud14c\uc774\uc158\uacfc \uc720\uc0ac\ud55c \ud328\ud134\n    ///\n    /// - Parameters:\n    ///   - networkManager: \ub124\ud2b8\uc6cc\ud06c \uc694\uccad\uc744 \ucc98\ub9ac\ud560 \ub9e4\ub2c8\uc800 (\uae30\ubcf8\uac12: shared URLSession \uc0ac\uc6a9)\n    ///   - apiConfig: API \uc124\uc815 (\uae30\ubcf8\uac12: APIConfig.shared)\n    init(\n        networkManager: NetworkManager = NetworkManager(\n            timeout: Constants.API.KFDA.timeout,\n            maxRetries: Constants.API.KFDA.maxRetries\n        ),\n        apiConfig: APIConfigProtocol = APIConfig.shared\n    ) {\n        self.networkManager = networkManager\n        self.apiConfig = apiConfig\n    }\n\n    // MARK: - Public Methods\n\n    /// \uc2dd\ud488\uba85\uc73c\ub85c \uac80\uc0c9\n    ///\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Async/Await Network Call\n    /// \ube44\ub3d9\uae30 \ub124\ud2b8\uc6cc\ud06c \uc694\uccad\uc744 \ub3d9\uae30 \ucf54\ub4dc\ucc98\ub7fc \uc791\uc131\n    /// \ud83d\udca1 Java \ube44\uad50: CompletableFuture\uc640 \uc720\uc0ac\ud558\uc9c0\ub9cc \ub354 \uac04\uacb0\n    ///\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: KFDA Pagination\n    /// KFDA API\ub294 \ud398\uc774\uc9c0 \ubc88\ud638\uac00 \uc544\ub2cc \uc778\ub371\uc2a4 \ubc94\uc704(startIdx, endIdx)\ub97c \uc0ac\uc6a9\n    /// \ud83d\udca1 \uc608: startIdx=1, endIdx=10 \u2192 1-10\ubc88 \uacb0\uacfc (10\uac1c)\n    ///       startIdx=11, endIdx=20 \u2192 11-20\ubc88 \uacb0\uacfc (10\uac1c)\n    ///\n    /// - Parameters:\n    ///   - query: \uac80\uc0c9\uc5b4 (\uc2dd\ud488\uba85, \uc608: \"\uae40\uce58\ucc0c\uac1c\", \"\ud604\ubbf8\ubc25\")\n    ///   - startIdx: \uc2dc\uc791 \uc778\ub371\uc2a4 (1\ubd80\ud130 \uc2dc\uc791, \uae30\ubcf8\uac12: 1)\n    ///   - endIdx: \uc885\ub8cc \uc778\ub371\uc2a4 (\uae30\ubcf8\uac12: startIdx + defaultPageSize - 1)\n    ///\n    /// - Returns: API \uc751\ub2f5 (\uc2dd\ud488 \ubaa9\ub85d\uacfc \ud398\uc774\uc9d5 \uc815\ubcf4 \ud3ec\ud568)\n    ///\n    /// - Throws:\n    ///   - NetworkError: \ub124\ud2b8\uc6cc\ud06c \uc694\uccad \uc2e4\ud328\n    ///   - KFDAAPIError: API \uc5d0\ub7ec (\uc778\uc99d \uc2e4\ud328, rate limit \ub4f1)\n    ///\n    /// - Example:\n    /// ```swift\n    /// // \uccab \ud398\uc774\uc9c0 \uac80\uc0c9 (1-10)\n    /// let page1 = try await service.searchFoods(query: \"\uae40\uce58\")\n    ///\n    /// // \ub2e4\uc74c \ud398\uc774\uc9c0 \uac80\uc0c9 (11-20)\n    /// let page2 = try await service.searchFoods(\n    ///     query: \"\uae40\uce58\",\n    ///     startIdx: 11,\n    ///     endIdx: 20\n    /// )\n    /// ```\n    func searchFoods(\n        query: String,\n        startIdx: Int = 1,\n        endIdx: Int? = nil\n    ) async throws -> KFDASearchResponseDTO {\n\n        // \uc785\ub825 \uac80\uc99d\n        guard !query.trimmingCharacters(in: .whitespaces).isEmpty else {\n            throw KFDAAPIError.invalidRequest(\"\uac80\uc0c9\uc5b4\uac00 \ube44\uc5b4\uc788\uc2b5\ub2c8\ub2e4.\")\n        }\n\n        guard startIdx > 0 else {\n            throw KFDAAPIError.invalidRequest(\"\uc2dc\uc791 \uc778\ub371\uc2a4\ub294 1 \uc774\uc0c1\uc774\uc5b4\uc57c \ud569\ub2c8\ub2e4.\")\n        }\n\n        // endIdx \uae30\ubcf8\uac12 \uacc4\uc0b0\n        let calculatedEndIdx = endIdx ?? (startIdx + Constants.API.KFDA.defaultPageSize - 1)\n\n        // \ud398\uc774\uc9c0 \ud06c\uae30 \uac80\uc99d\n        let pageSize = calculatedEndIdx - startIdx + 1\n        guard pageSize <= Constants.API.KFDA.maxPageSize else {\n            throw KFDAAPIError.invalidRequest(\n                \"\ud398\uc774\uc9c0 \ud06c\uae30\uac00 \ub108\ubb34 \ud07d\ub2c8\ub2e4. \ucd5c\ub300 \\(Constants.API.KFDA.maxPageSize)\uac1c\uae4c\uc9c0 \uc694\uccad \uac00\ub2a5\ud569\ub2c8\ub2e4.\"\n            )\n        }\n\n        // URL \uc0dd\uc131\n        let endpoint = APIConfig.KFDAEndpoint.search(\n            query: query,\n            startIdx: startIdx,\n            endIdx: calculatedEndIdx\n        )\n\n        guard let url = apiConfig.buildKFDAURL(endpoint: endpoint) else {\n            throw NetworkError.invalidURL(\"KFDA API URL \uc0dd\uc131 \uc2e4\ud328\")\n        }\n\n        // API \uc694\uccad\n        do {\n            let response: KFDASearchResponseDTO = try await networkManager.request(\n                url: url.absoluteString,\n                method: .get,\n                timeout: Constants.API.KFDA.timeout\n            )\n\n            // API \uc751\ub2f5 \uac80\uc99d\n            guard response.isSuccess else {\n                // API \uc5d0\ub7ec \ubc1c\uc0dd\n                if let error = response.errorType {\n                    throw error\n                } else {\n                    throw KFDAAPIError.unknown(\n                        response.header.resultCode,\n                        response.header.resultMsg\n                    )\n                }\n            }\n\n            return response\n\n        } catch let error as KFDAAPIError {\n            // KFDA API \uc5d0\ub7ec\ub294 \uadf8\ub300\ub85c \uc804\ub2ec\n            throw error\n\n        } catch let error as NetworkError {\n            // \ub124\ud2b8\uc6cc\ud06c \uc5d0\ub7ec \ucc98\ub9ac\n            throw error\n\n        } catch {\n            // \uae30\ud0c0 \uc5d0\ub7ec\n            throw NetworkError.unknown(error)\n        }\n    }\n\n    /// \uc2dd\ud488 \ucf54\ub4dc\ub85c \uc0c1\uc138 \uc815\ubcf4 \uc870\ud68c\n    ///\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Single Item API Call\n    /// \ud2b9\uc815 \uc2dd\ud488\uc758 \uc0c1\uc138 \uc815\ubcf4\ub97c \uc870\ud68c\ud558\ub294 \uba54\uc11c\ub4dc\n    /// \ud83d\udca1 Java \ube44\uad50: findById()\uc640 \uc720\uc0ac\ud55c \ud328\ud134\n    ///\n    /// - Parameter foodCode: \uc2dd\ud488 \ucf54\ub4dc (\uc608: \"D000001\")\n    ///\n    /// - Returns: \uc2dd\ud488 \uc0c1\uc138 \uc815\ubcf4\n    ///\n    /// - Throws:\n    ///   - NetworkError: \ub124\ud2b8\uc6cc\ud06c \uc694\uccad \uc2e4\ud328\n    ///   - KFDAAPIError: API \uc5d0\ub7ec \ub610\ub294 \uc2dd\ud488\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc74c\n    ///\n    /// - Example:\n    /// ```swift\n    /// let food = try await service.getFoodDetail(foodCode: \"D000001\")\n    /// print(\"\\(food.descKor): \\(food.enercKcal ?? \"N/A\") kcal\")\n    /// ```\n    func getFoodDetail(foodCode: String) async throws -> KFDAFoodDTO {\n\n        // \uc785\ub825 \uac80\uc99d\n        guard !foodCode.trimmingCharacters(in: .whitespaces).isEmpty else {\n            throw KFDAAPIError.invalidRequest(\"\uc2dd\ud488 \ucf54\ub4dc\uac00 \ube44\uc5b4\uc788\uc2b5\ub2c8\ub2e4.\")\n        }\n\n        // URL \uc0dd\uc131\n        let endpoint = APIConfig.KFDAEndpoint.detail(foodCode: foodCode)\n\n        guard let url = apiConfig.buildKFDAURL(endpoint: endpoint) else {\n            throw NetworkError.invalidURL(\"KFDA API URL \uc0dd\uc131 \uc2e4\ud328\")\n        }\n\n        // API \uc694\uccad\n        do {\n            let response: KFDASearchResponseDTO = try await networkManager.request(\n                url: url.absoluteString,\n                method: .get,\n                timeout: Constants.API.KFDA.timeout\n            )\n\n            // API \uc751\ub2f5 \uac80\uc99d\n            guard response.isSuccess else {\n                // API \uc5d0\ub7ec \ubc1c\uc0dd\n                if let error = response.errorType {\n                    throw error\n                } else {\n                    throw KFDAAPIError.unknown(\n                        response.header.resultCode,\n                        response.header.resultMsg\n                    )\n                }\n            }\n\n            // \uc2dd\ud488 \ub370\uc774\ud130 \ucd94\ucd9c\n            guard let food = response.foods.first else {\n                throw KFDAAPIError.noData\n            }\n\n            // \ub370\uc774\ud130 \uc720\ud6a8\uc131 \uac80\uc99d\n            guard food.isValid else {\n                throw KFDAAPIError.invalidRequest(\"\uc720\ud6a8\ud558\uc9c0 \uc54a\uc740 \uc2dd\ud488 \ub370\uc774\ud130\uc785\ub2c8\ub2e4.\")\n            }\n\n            return food\n\n        } catch let error as KFDAAPIError {\n            // KFDA API \uc5d0\ub7ec\ub294 \uadf8\ub300\ub85c \uc804\ub2ec\n            throw error\n\n        } catch let error as NetworkError {\n            // \ub124\ud2b8\uc6cc\ud06c \uc5d0\ub7ec \ucc98\ub9ac\n            throw error\n\n        } catch {\n            // \uae30\ud0c0 \uc5d0\ub7ec\n            throw NetworkError.unknown(error)\n        }\n    }\n}\n\n// MARK: - Pagination Helper\n\nextension KFDAFoodAPIService {\n\n    /// \ub2e4\uc74c \ud398\uc774\uc9c0 \uc778\ub371\uc2a4 \ubc94\uc704 \uacc4\uc0b0\n    ///\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Pagination Helper\n    /// \ud398\uc774\uc9d5 \ub85c\uc9c1\uc744 \ucea1\uc290\ud654\ud558\uc5ec \ud638\ucd9c \ucf54\ub4dc \ub2e8\uc21c\ud654\n    /// \ud83d\udca1 Java \ube44\uad50: PageRequest.next()\uc640 \uc720\uc0ac\ud55c \ud328\ud134\n    ///\n    /// - Parameters:\n    ///   - currentStartIdx: \ud604\uc7ac \ud398\uc774\uc9c0 \uc2dc\uc791 \uc778\ub371\uc2a4\n    ///   - currentEndIdx: \ud604\uc7ac \ud398\uc774\uc9c0 \uc885\ub8cc \uc778\ub371\uc2a4\n    ///\n    /// - Returns: \ub2e4\uc74c \ud398\uc774\uc9c0\uc758 (startIdx, endIdx) \ud29c\ud50c\n    ///\n    /// - Example:\n    /// ```swift\n    /// var (start, end) = (1, 10)\n    ///\n    /// while hasMoreResults {\n    ///     let result = try await service.searchFoods(\n    ///         query: \"\uae40\uce58\",\n    ///         startIdx: start,\n    ///         endIdx: end\n    ///     )\n    ///\n    ///     // \uacb0\uacfc \ucc98\ub9ac...\n    ///\n    ///     // \ub2e4\uc74c \ud398\uc774\uc9c0\ub85c\n    ///     (start, end) = service.nextPageIndices(\n    ///         currentStartIdx: start,\n    ///         currentEndIdx: end\n    ///     )\n    ///     hasMoreResults = result.hasMoreResults(currentItemCount: allItems.count)\n    /// }\n    /// ```\n    func nextPageIndices(\n        currentStartIdx: Int,\n        currentEndIdx: Int\n    ) -> (startIdx: Int, endIdx: Int) {\n        let pageSize = currentEndIdx - currentStartIdx + 1\n        let nextStart = currentEndIdx + 1\n        let nextEnd = nextStart + pageSize - 1\n\n        return (nextStart, nextEnd)\n    }\n\n    /// \ud398\uc774\uc9c0 \ubc88\ud638\ub97c \uc778\ub371\uc2a4 \ubc94\uc704\ub85c \ubcc0\ud658\n    ///\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Page Number to Index Conversion\n    /// \uc77c\ubc18\uc801\uc778 \ud398\uc774\uc9c0 \ubc88\ud638(1, 2, 3...)\ub97c KFDA API\uc758 \uc778\ub371\uc2a4 \ubc94\uc704\ub85c \ubcc0\ud658\n    /// \ud83d\udca1 Java \ube44\uad50: PageRequest.of(page, size)\uc640 \uc720\uc0ac\ud55c \ud328\ud134\n    ///\n    /// - Parameters:\n    ///   - pageNumber: \ud398\uc774\uc9c0 \ubc88\ud638 (1\ubd80\ud130 \uc2dc\uc791)\n    ///   - pageSize: \ud398\uc774\uc9c0 \ud06c\uae30 (\uae30\ubcf8\uac12: defaultPageSize)\n    ///\n    /// - Returns: (startIdx, endIdx) \ud29c\ud50c\n    ///\n    /// - Example:\n    /// ```swift\n    /// // 1\ud398\uc774\uc9c0: startIdx=1, endIdx=10\n    /// let (start1, end1) = service.pageToIndices(pageNumber: 1, pageSize: 10)\n    ///\n    /// // 2\ud398\uc774\uc9c0: startIdx=11, endIdx=20\n    /// let (start2, end2) = service.pageToIndices(pageNumber: 2, pageSize: 10)\n    /// ```\n    func pageToIndices(\n        pageNumber: Int,\n        pageSize: Int = Constants.API.KFDA.defaultPageSize\n    ) -> (startIdx: Int, endIdx: Int) {\n        let startIdx = (pageNumber - 1) * pageSize + 1\n        let endIdx = startIdx + pageSize - 1\n\n        return (startIdx, endIdx)\n    }\n}\n\n// MARK: - Validation Helper\n\nextension KFDAFoodAPIService {\n\n    /// \uac80\uc0c9 \uacb0\uacfc \uc720\ud6a8\uc131 \uac80\uc99d\n    ///\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Data Validation\n    /// API \uc751\ub2f5 \ub370\uc774\ud130\uc758 \uc720\ud6a8\uc131\uc744 \uac80\uc99d\ud558\uc5ec \uc798\ubabb\ub41c \ub370\uc774\ud130 \ud544\ud130\ub9c1\n    /// \ud83d\udca1 Java \ube44\uad50: Bean Validation\uacfc \uc720\uc0ac\n    ///\n    /// - Parameter foods: \uac80\uc99d\ud560 \uc2dd\ud488 \ubaa9\ub85d\n    ///\n    /// - Returns: \uc720\ud6a8\ud55c \uc2dd\ud488 \ubaa9\ub85d (\ud544\uc218 \ud544\ub4dc\uac00 \uc788\ub294 \ud56d\ubaa9\ub9cc)\n    ///\n    /// - Note: \uc720\ud6a8\ud558\uc9c0 \uc54a\uc740 \ub370\uc774\ud130\ub294 \uc81c\uac70\ub418\uace0 \ub85c\uadf8\uac00 \ucd9c\ub825\ub428\n    ///\n    /// - Example:\n    /// ```swift\n    /// let response = try await service.searchFoods(query: \"\uae40\uce58\")\n    /// let validFoods = service.validateFoods(response.foods)\n    /// print(\"Valid foods: \\(validFoods.count) / \\(response.foods.count)\")\n    /// ```\n    func validateFoods(_ foods: [KFDAFoodDTO]) -> [KFDAFoodDTO] {\n        return foods.filter { food in\n            let isValid = food.isValid\n\n            if !isValid {\n                // \uc720\ud6a8\ud558\uc9c0 \uc54a\uc740 \ub370\uc774\ud130 \ub85c\uae45 (\ub514\ubc84\uadf8 \ubaa8\ub4dc\uc5d0\uc11c\ub9cc)\n                #if DEBUG\n                print(\"\u26a0\ufe0f Invalid KFDA food data: \\(food.foodCd) - \\(food.descKor)\")\n                #endif\n            }\n\n            return isValid\n        }\n    }\n}\n\n// MARK: - Testing Support\n\n#if DEBUG\n/// \ud14c\uc2a4\ud2b8\uc6a9 Mock KFDA API \uc11c\ube44\uc2a4\n///\n/// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Mock Objects for Testing\n/// \ud14c\uc2a4\ud2b8\uc5d0\uc11c \uc2e4\uc81c API \ud638\ucd9c \uc5c6\uc774 \ub3d9\uc791 \uac80\uc99d \uac00\ub2a5\n/// \ud83d\udca1 Java \ube44\uad50: Mockito\uc758 @Mock\uacfc \uc720\uc0ac\nfinal class MockKFDAFoodAPIService {\n\n    /// Mock \uc751\ub2f5 \ub370\uc774\ud130\n    var mockSearchResponse: KFDASearchResponseDTO?\n\n    /// Mock \uc0c1\uc138 \uc815\ubcf4\n    var mockFoodDetail: KFDAFoodDTO?\n\n    /// \uc5d0\ub7ec \uc2dc\ubbac\ub808\uc774\uc158\n    var shouldThrowError: Error?\n\n    /// \uac80\uc0c9 \uba54\uc11c\ub4dc Mock\n    func searchFoods(\n        query: String,\n        startIdx: Int = 1,\n        endIdx: Int? = nil\n    ) async throws -> KFDASearchResponseDTO {\n\n        // \uc5d0\ub7ec \uc2dc\ubbac\ub808\uc774\uc158\n        if let error = shouldThrowError {\n            throw error\n        }\n\n        // Mock \uc751\ub2f5 \ubc18\ud658\n        guard let response = mockSearchResponse else {\n            throw KFDAAPIError.noData\n        }\n\n        return response\n    }\n\n    /// \uc0c1\uc138 \uc870\ud68c \uba54\uc11c\ub4dc Mock\n    func getFoodDetail(foodCode: String) async throws -> KFDAFoodDTO {\n\n        // \uc5d0\ub7ec \uc2dc\ubbac\ub808\uc774\uc158\n        if let error = shouldThrowError {\n            throw error\n        }\n\n        // Mock \ub370\uc774\ud130 \ubc18\ud658\n        guard let detail = mockFoodDetail else {\n            throw KFDAAPIError.noData\n        }\n\n        return detail\n    }\n}\n#endif\n",
        "last_modified": "2026-01-14T22:55:39.261059"
      },
      "task_intent": {
        "title": "005-korean-food-database-integration",
        "description": "Integrate Korean Food & Drug Administration (\uc2dd\uc57d\ucc98) food nutrition database API as primary source, with USDA FoodData Central as fallback for international foods. Prioritize Korean dishes (kimchi jjigae, bibimbap, tteokbokki) that are poorly covered by competitors.",
        "from_plan": true
      },
      "commits_behind_main": 0,
      "status": "active",
      "merged_at": null
    }
  },
  "created_at": "2026-01-13T07:43:31.604805",
  "last_updated": "2026-01-13T07:46:24.232149"
}