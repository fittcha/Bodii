{
  "file_path": "Bodii/Domain/Entities/BodyCompositionEntry.swift",
  "main_branch_history": [],
  "task_views": {
    "003-body-composition-tracking-with-bmr-tdee": {
      "task_id": "003-body-composition-tracking-with-bmr-tdee",
      "branch_point": {
        "commit_hash": "2abdae73fb6199bcbf4f21f6deeb7952225f81e6",
        "content": "",
        "timestamp": "2026-01-13T07:46:22.394743"
      },
      "worktree_state": {
        "content": "//\n//  BodyCompositionEntry.swift\n//  Bodii\n//\n//  Created by Auto-Claude on 2026-01-12.\n//\n\n// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Domain Entity\n// Core Data\uc640 \ub3c5\ub9bd\uc801\uc778 \uc21c\uc218 \ub3c4\uba54\uc778 \uc5d4\ud2f0\ud2f0\n// \ud83d\udca1 Java \ube44\uad50: POJO (Plain Old Java Object)\uc640 \uc720\uc0ac\ud558\uc9c0\ub9cc Swift\uc758 value type (struct) \uc0ac\uc6a9\n\nimport Foundation\n\n// MARK: - BodyCompositionEntry\n\n/// \uc2e0\uccb4 \uad6c\uc131 \ub370\uc774\ud130 \ub3c4\uba54\uc778 \uc5d4\ud2f0\ud2f0\n/// \uccb4\uc911, \uccb4\uc9c0\ubc29\ub960, \uadfc\uc721\ub7c9 \ub4f1\uc758 \uc2e0\uccb4 \uce21\uc815 \ub370\uc774\ud130\ub97c \ub098\ud0c0\ub0c5\ub2c8\ub2e4.\n/// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Clean Architecture\uc758 Domain Layer\n/// - Core Data\ub098 \ub2e4\ub978 infrastructure \uc758\uc874\uc131\uc774 \uc5c6\ub294 \uc21c\uc218\ud55c \ube44\uc988\ub2c8\uc2a4 \uc5d4\ud2f0\ud2f0\n/// - Decimal\uc744 \uc0ac\uc6a9\ud558\uc5ec \uc815\ubc00\ub3c4 \ubcf4\uc7a5 (Double\uc758 \ubd80\ub3d9\uc18c\uc218\uc810 \uc624\ucc28 \ubc29\uc9c0)\nstruct BodyCompositionEntry: Codable, Identifiable, Equatable {\n\n    // MARK: - Properties\n\n    /// \uace0\uc720 \uc2dd\ubcc4\uc790\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: UUID vs Int\n    /// - UUID: \ubd84\uc0b0 \uc2dc\uc2a4\ud15c\uc5d0\uc11c \ucda9\ub3cc \uc5c6\uc774 \uace0\uc720 ID \uc0dd\uc131 \uac00\ub2a5\n    /// - SwiftUI\uc758 Identifiable \ud504\ub85c\ud1a0\ucf5c \uc694\uad6c\uc0ac\ud56d\n    let id: UUID\n\n    /// \uce21\uc815 \ub0a0\uc9dc \ubc0f \uc2dc\uac04\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Date Type\n    /// - \uc2dc\uac04\ub300\uc640 \ubb34\uad00\ud55c \uc808\ub300 \uc2dc\uac04 \ud45c\ud604\n    /// - \ud2b8\ub80c\ub4dc \ubd84\uc11d \ubc0f \uae30\ub85d \ucd94\uc801\uc5d0 \ud544\uc218\n    let date: Date\n\n    /// \uccb4\uc911 (kg)\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Decimal Type\n    /// - \uc815\ubc00\ud55c \uc22b\uc790 \uacc4\uc0b0\uc744 \uc704\ud574 Decimal \uc0ac\uc6a9\n    /// - Double \ub300\uc2e0 Decimal\uc744 \uc0ac\uc6a9\ud558\uc5ec \ubd80\ub3d9\uc18c\uc218\uc810 \uc624\ucc28 \ubc29\uc9c0\n    /// \ud83d\udca1 Java \ube44\uad50: java.math.BigDecimal\uacfc \uc720\uc0ac\n    let weight: Decimal\n\n    /// \uccb4\uc9c0\ubc29\ub960 (%)\n    /// \uc804\uccb4 \uccb4\uc911\uc5d0\uc11c \uccb4\uc9c0\ubc29\uc774 \ucc28\uc9c0\ud558\ub294 \ube44\uc728 (1-60% \ubc94\uc704)\n    let bodyFatPercent: Decimal\n\n    /// \uadfc\uc721\ub7c9 (kg)\n    /// \ucd1d \uadfc\uc721 \uc9c8\ub7c9 (skeletal muscle mass)\n    let muscleMass: Decimal\n\n    /// \uccb4\uc9c0\ubc29\ub7c9 (kg)\n    /// \uc804\uccb4 \uccb4\uc911\uc5d0\uc11c \uc9c0\ubc29\uc774 \ucc28\uc9c0\ud558\ub294 \uc2e4\uc81c \ubb34\uac8c\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Stored vs Computed Property\n    /// - \uacc4\uc0b0 \uac00\ub2a5\ud55c \uac12\uc774\uc9c0\ub9cc historical data\ub97c \uc704\ud574 \uc800\uc7a5\n    /// - \uacfc\uac70 \ub370\uc774\ud130\uc758 \uc77c\uad00\uc131 \uc720\uc9c0 (\ub098\uc911\uc5d0 \uacc4\uc0b0\uc2dd\uc774 \ubc14\ub00c\uc5b4\ub3c4 \uacfc\uac70 \uac12\uc740 \uadf8\ub300\ub85c)\n    let bodyFatMass: Decimal\n\n    // MARK: - Initialization\n\n    /// BodyCompositionEntry \uc0dd\uc131\uc790\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Memberwise Initializer\n    /// - Struct\ub294 \uae30\ubcf8\uc801\uc73c\ub85c memberwise initializer \uc81c\uacf5\n    /// - \uba85\uc2dc\uc801\uc73c\ub85c \uc791\uc131\ud558\uc5ec \ubb38\uc11c\ud654 \ubc0f validation \ucd94\uac00 \uac00\ub2a5\n    /// - Parameter id: \uace0\uc720 \uc2dd\ubcc4\uc790 (\uae30\ubcf8\uac12: \uc0c8 UUID)\n    /// - Parameter date: \uce21\uc815 \ub0a0\uc9dc (\uae30\ubcf8\uac12: \ud604\uc7ac \uc2dc\uac04)\n    /// - Parameter weight: \uccb4\uc911 (kg)\n    /// - Parameter bodyFatPercent: \uccb4\uc9c0\ubc29\ub960 (%)\n    /// - Parameter muscleMass: \uadfc\uc721\ub7c9 (kg)\n    /// - Parameter bodyFatMass: \uccb4\uc9c0\ubc29\ub7c9 (kg, \uc120\ud0dd\uc801 - \ubbf8\uc81c\uacf5\uc2dc \uc790\ub3d9 \uacc4\uc0b0)\n    init(\n        id: UUID = UUID(),\n        date: Date = Date(),\n        weight: Decimal,\n        bodyFatPercent: Decimal,\n        muscleMass: Decimal,\n        bodyFatMass: Decimal? = nil\n    ) {\n        self.id = id\n        self.date = date\n        self.weight = weight\n        self.bodyFatPercent = bodyFatPercent\n        self.muscleMass = muscleMass\n\n        // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Nil Coalescing Operator (??)\n        // bodyFatMass\uac00 \uc81c\uacf5\ub418\uc9c0 \uc54a\uc73c\uba74 \uc790\ub3d9\uc73c\ub85c \uacc4\uc0b0\n        // \ud83d\udca1 Java \ube44\uad50: Optional.orElse()\uc640 \uc720\uc0ac\n        self.bodyFatMass = bodyFatMass ?? Self.calculateBodyFatMass(\n            weight: weight,\n            bodyFatPercent: bodyFatPercent\n        )\n    }\n\n    // MARK: - Computed Properties\n\n    /// \uc81c\uc9c0\ubc29\ub7c9 (Lean Body Mass) (kg)\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Computed Property\n    /// - \uc800\uc7a5\ub418\uc9c0 \uc54a\uace0 \ub9e4\ubc88 \uacc4\uc0b0\ub418\ub294 \ud504\ub85c\ud37c\ud2f0\n    /// - get-only property (\uc77d\uae30 \uc804\uc6a9)\n    /// \ud83d\udca1 Java \ube44\uad50: getter \uba54\uc11c\ub4dc\uc640 \uc720\uc0ac\ud558\uc9c0\ub9cc \ud504\ub85c\ud37c\ud2f0\ucc98\ub7fc \uc811\uadfc\n    ///\n    /// \uc81c\uc9c0\ubc29\ub7c9 = \uc804\uccb4 \uccb4\uc911 - \uccb4\uc9c0\ubc29\ub7c9\n    /// \uadfc\uc721, \ubf08, \uc7a5\uae30, \ubb3c \ub4f1 \uc9c0\ubc29\uc744 \uc81c\uc678\ud55c \ubaa8\ub4e0 \uccb4\uc911\n    var leanBodyMass: Decimal {\n        weight - bodyFatMass\n    }\n\n    /// \uace8\uaca9\uadfc \ube44\uc728 (%)\n    /// \uc804\uccb4 \uccb4\uc911\uc5d0\uc11c \uadfc\uc721\ub7c9\uc774 \ucc28\uc9c0\ud558\ub294 \ube44\uc728\n    ///\n    /// \uace8\uaca9\uadfc \ube44\uc728 = (\uadfc\uc721\ub7c9 / \uccb4\uc911) \u00d7 100\n    var musclePercentage: Decimal {\n        guard weight > 0 else { return 0 }\n        return (muscleMass / weight) * 100\n    }\n\n    /// \uccb4\uc9c8\ub7c9 \uc9c0\uc218 (BMI) \uacc4\uc0b0\uc744 \uc704\ud55c \ud5ec\ud37c \uba54\uc11c\ub4dc\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Optional Chaining\n    /// - height\uac00 \uc5c6\uc73c\uba74 BMI\ub97c \uacc4\uc0b0\ud560 \uc218 \uc5c6\uc74c\n    /// - \uc774 \uba54\uc11c\ub4dc\ub294 height\ub97c \uc678\ubd80\uc5d0\uc11c \ubc1b\uc544\uc11c BMI \uacc4\uc0b0\n    /// \ud83d\udca1 \ucc38\uace0: BMI = \uccb4\uc911(kg) / (\uc2e0\uc7a5(m))\u00b2\n    ///\n    /// - Parameter heightInCm: \uc2e0\uc7a5 (cm)\n    /// - Returns: BMI \uac12 (kg/m\u00b2)\n    func calculateBMI(heightInCm: Decimal) -> Decimal {\n        guard heightInCm > 0 else { return 0 }\n        let heightInMeters = heightInCm / 100\n        return weight / (heightInMeters * heightInMeters)\n    }\n\n    // MARK: - Helper Methods\n\n    /// \uccb4\uc9c0\ubc29\ub7c9 \uacc4\uc0b0 (\uc815\uc801 \uba54\uc11c\ub4dc)\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Static Method\n    /// - \uc778\uc2a4\ud134\uc2a4\uac00 \uc5c6\uc5b4\ub3c4 \ud638\ucd9c \uac00\ub2a5\ud55c \ud0c0\uc785 \uba54\uc11c\ub4dc\n    /// - \uc720\ud2f8\ub9ac\ud2f0 \ud568\uc218\ub85c \uc7ac\uc0ac\uc6a9 \uac00\ub2a5\n    /// \ud83d\udca1 Java \ube44\uad50: static method\uc640 \ub3d9\uc77c\n    ///\n    /// - Parameter weight: \uccb4\uc911 (kg)\n    /// - Parameter bodyFatPercent: \uccb4\uc9c0\ubc29\ub960 (%)\n    /// - Returns: \uccb4\uc9c0\ubc29\ub7c9 (kg)\n    static func calculateBodyFatMass(weight: Decimal, bodyFatPercent: Decimal) -> Decimal {\n        return weight * (bodyFatPercent / 100)\n    }\n\n    /// \uadfc\uc721\ub7c9 \uacc4\uc0b0 (\uc815\uc801 \uba54\uc11c\ub4dc)\n    /// \uc81c\uc9c0\ubc29\ub7c9\uc758 \uc57d 50-60%\uac00 \uace8\uaca9\uadfc\uc774\ub77c\uace0 \uac00\uc815\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Domain Logic\n    /// - \ube44\uc988\ub2c8\uc2a4 \uaddc\uce59\uc744 \ub3c4\uba54\uc778 \uc5d4\ud2f0\ud2f0\uc5d0 \ucea1\uc290\ud654\n    ///\n    /// - Parameter weight: \uccb4\uc911 (kg)\n    /// - Parameter bodyFatPercent: \uccb4\uc9c0\ubc29\ub960 (%)\n    /// - Parameter muscleRatio: \uc81c\uc9c0\ubc29\ub7c9 \uc911 \uace8\uaca9\uadfc \ube44\uc728 (\uae30\ubcf8\uac12: 0.55)\n    /// - Returns: \ucd94\uc815 \uadfc\uc721\ub7c9 (kg)\n    static func estimateMuscleMass(\n        weight: Decimal,\n        bodyFatPercent: Decimal,\n        muscleRatio: Decimal = 0.55\n    ) -> Decimal {\n        let bodyFatMass = calculateBodyFatMass(weight: weight, bodyFatPercent: bodyFatPercent)\n        let leanBodyMass = weight - bodyFatMass\n        return leanBodyMass * muscleRatio\n    }\n}\n\n// MARK: - Sample Data\n\nextension BodyCompositionEntry {\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Preview Helper\n    /// SwiftUI Preview \ubc0f \ud14c\uc2a4\ud2b8\ub97c \uc704\ud55c \uc0d8\ud50c \ub370\uc774\ud130\n    /// \ud83d\udca1 Java \ube44\uad50: Test fixture\uc640 \uc720\uc0ac\n    static let sample = BodyCompositionEntry(\n        weight: Decimal(70.5),\n        bodyFatPercent: Decimal(18.5),\n        muscleMass: Decimal(32.0),\n        bodyFatMass: Decimal(13.04)\n    )\n\n    /// \ub2e4\uc591\ud55c \uc2dc\ub098\ub9ac\uc624\ub97c \uc704\ud55c \uc0d8\ud50c \ub370\uc774\ud130 \ubc30\uc5f4\n    static let samples = [\n        BodyCompositionEntry(\n            date: Calendar.current.date(byAdding: .day, value: -7, to: Date())!,\n            weight: Decimal(72.0),\n            bodyFatPercent: Decimal(20.0),\n            muscleMass: Decimal(31.0)\n        ),\n        BodyCompositionEntry(\n            date: Calendar.current.date(byAdding: .day, value: -3, to: Date())!,\n            weight: Decimal(71.2),\n            bodyFatPercent: Decimal(19.3),\n            muscleMass: Decimal(31.5)\n        ),\n        BodyCompositionEntry(\n            date: Date(),\n            weight: Decimal(70.5),\n            bodyFatPercent: Decimal(18.5),\n            muscleMass: Decimal(32.0)\n        )\n    ]\n}\n",
        "last_modified": "2026-01-13T19:18:50.331519"
      },
      "task_intent": {
        "title": "Body Composition Tracking with BMR/TDEE",
        "description": "Complete body composition logging system including height, weight, body fat percentage, muscle mass, with automatic BMR (Mifflin-St Jeor) and TDEE calculations. Visualize changes over time with Swift Charts graphs showing trends and goal progress.",
        "from_plan": true
      },
      "commits_behind_main": 1,
      "status": "active",
      "merged_at": null
    }
  },
  "created_at": "2026-01-12T11:58:31.170581",
  "last_updated": "2026-01-13T07:46:22.768453"
}