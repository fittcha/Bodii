{
  "file_path": "Bodii/Data/DataSources/Local/Entities/FoodEntity+CoreData.swift",
  "main_branch_history": [],
  "task_views": {
    "005-korean-food-database-integration": {
      "task_id": "005-korean-food-database-integration",
      "branch_point": {
        "commit_hash": "c44bfbcd7c1699b176a8bb155e8c35f43ebd4ad9",
        "content": "",
        "timestamp": "2026-01-13T07:46:23.878686"
      },
      "worktree_state": {
        "content": "//\n//  FoodEntity+CoreData.swift\n//  Bodii\n//\n//  Created by Auto-Claude on 2026-01-13.\n//\n\n// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Core Data Entity Extensions\n// NSManagedObject \uc790\ub3d9 \uc0dd\uc131 \ud074\ub798\uc2a4\uc5d0 \ud3b8\uc758 \uba54\uc11c\ub4dc\ub97c \ucd94\uac00\ud558\ub294 \ud655\uc7a5\n// \ud83d\udca1 Java \ube44\uad50: JPA Entity\uc5d0 @Transient \uba54\uc11c\ub4dc\ub97c \ucd94\uac00\ud558\ub294 \uac83\uacfc \uc720\uc0ac\n\nimport Foundation\nimport CoreData\n\n// MARK: - Food Entity Extension\n\n/// Food Core Data \uc5d4\ud2f0\ud2f0 \ud655\uc7a5\n///\n/// Core Data\uc758 \uc790\ub3d9 \uc0dd\uc131\ub41c Food \uc5d4\ud2f0\ud2f0\uc5d0 \ud3b8\uc758 \uba54\uc11c\ub4dc\ub97c \ucd94\uac00\ud569\ub2c8\ub2e4.\n///\n/// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: \uc65c \ud655\uc7a5\uc744 \uc0ac\uc6a9\ud558\ub098?\n/// - Core Data\ub294 \uc790\ub3d9\uc73c\ub85c NSManagedObject \uc11c\ube0c\ud074\ub798\uc2a4\ub97c \uc0dd\uc131 (codeGenerationType=\"class\")\n/// - \uc790\ub3d9 \uc0dd\uc131 \ud074\ub798\uc2a4\ub97c \uc9c1\uc811 \uc218\uc815\ud558\uba74 \ubaa8\ub378 \ubcc0\uacbd \uc2dc \uc190\uc2e4\ub428\n/// - \ud655\uc7a5(extension)\uc744 \uc0ac\uc6a9\ud558\uba74 \uc548\uc804\ud558\uac8c \uae30\ub2a5 \ucd94\uac00 \uac00\ub2a5\n///\n/// - Note: Food \uc5d4\ud2f0\ud2f0\ub294 \uc74c\uc2dd\uc758 \uc601\uc591 \uc815\ubcf4\ub97c \uc800\uc7a5\ud558\uba70, API \uac80\uc0c9 \uacb0\uacfc\ub97c \uce90\uc2f1\ud569\ub2c8\ub2e4.\n/// - Note: \uce90\uc2f1 \uc804\ub7b5: LRU (Least Recently Used) \uae30\ubc18\uc73c\ub85c lastAccessedAt \uc0ac\uc6a9\nextension Food {\n\n    // MARK: - Cache Management\n\n    /// \ucd5c\uadfc\uc5d0 \uac80\uc0c9/\uc0ac\uc6a9\ub41c \uc74c\uc2dd\uc778\uc9c0 \ud655\uc778\n    ///\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Computed Property\n    /// - \uc800\uc7a5\ub41c \uac12\uc774 \uc544\ub2c8\ub77c \uacc4\uc0b0\ub41c \uac12\uc744 \ubc18\ud658\n    /// - \ud83d\udca1 Java \ube44\uad50: getter \uba54\uc11c\ub4dc\uc640 \uc720\uc0ac\ud558\uc9c0\ub9cc \ud504\ub85c\ud37c\ud2f0\ucc98\ub7fc \uc811\uadfc\n    ///\n    /// - Returns: \ucd5c\uadfc 7\uc77c \uc774\ub0b4\uc5d0 \uc811\uadfc\ub41c \uc74c\uc2dd\uc774\uba74 true\n    var isRecentlyAccessed: Bool {\n        guard let lastAccessed = lastAccessedAt else { return false }\n        let sevenDaysAgo = Calendar.current.date(byAdding: .day, value: -7, to: Date()) ?? Date()\n        return lastAccessed > sevenDaysAgo\n    }\n\n    /// \uc778\uae30 \uc74c\uc2dd\uc778\uc9c0 \ud655\uc778 (\uac80\uc0c9 \ud69f\uc218 \uae30\uc900)\n    ///\n    /// - Parameter threshold: \uc778\uae30 \uae30\uc900 \uac80\uc0c9 \ud69f\uc218 (\uae30\ubcf8\uac12: 5)\n    /// - Returns: \uac80\uc0c9 \ud69f\uc218\uac00 threshold \uc774\uc0c1\uc774\uba74 true\n    func isPopular(threshold: Int32 = 5) -> Bool {\n        return searchCount >= threshold\n    }\n\n    /// \ub9c8\uc9c0\ub9c9 \uc811\uadfc \uc2dc\uac04 \uc5c5\ub370\uc774\ud2b8\n    ///\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: NSManagedObject\uc758 \ud504\ub85c\ud37c\ud2f0 \ubcc0\uacbd\n    /// - Core Data\ub294 \ubcc0\uacbd \uc0ac\ud56d\uc744 \uc790\ub3d9\uc73c\ub85c \ucd94\uc801\n    /// - save()\ub97c \ud638\ucd9c\ud574\uc57c \ub514\uc2a4\ud06c\uc5d0 \uc800\uc7a5\ub428\n    ///\n    /// - Note: \uc774 \uba54\uc11c\ub4dc\ub294 \uba54\ubaa8\ub9ac\uc758 \uac12\ub9cc \ubcc0\uacbd\ud569\ub2c8\ub2e4.\n    ///         \uc2e4\uc81c \uc800\uc7a5\uc740 NSManagedObjectContext.save()\ub97c \ud638\ucd9c\ud574\uc57c \ud569\ub2c8\ub2e4.\n    func updateAccessTime() {\n        lastAccessedAt = Date()\n        searchCount += 1\n    }\n\n    /// \uce90\uc2dc \ub9cc\ub8cc \uc5ec\ubd80 \ud655\uc778\n    ///\n    /// API \ub370\uc774\ud130\ub294 \uc77c\uc815 \uae30\uac04 \ud6c4 \ub9cc\ub8cc\ub418\uc5b4 \uc7ac\uac80\uc0c9\uc774 \ud544\uc694\ud569\ub2c8\ub2e4.\n    ///\n    /// - Parameter days: \ub9cc\ub8cc \uae30\uc900 \uc77c\uc218 (\uae30\ubcf8\uac12: 30\uc77c)\n    /// - Returns: \ub9cc\ub8cc\ub418\uc5c8\uc73c\uba74 true\n    func isCacheExpired(days: Int = 30) -> Bool {\n        let expirationDate = Calendar.current.date(byAdding: .day, value: -days, to: Date()) ?? Date()\n        return createdAt < expirationDate\n    }\n\n    // MARK: - Domain Entity Conversion\n\n    /// Core Data \uc5d4\ud2f0\ud2f0\ub97c Domain \uc5d4\ud2f0\ud2f0\ub85c \ubcc0\ud658\n    ///\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: \ub808\uc774\uc5b4 \uac04 \ub370\uc774\ud130 \ubcc0\ud658\n    /// - Core Data (Infrastructure) \u2192 Domain Entity (Domain Layer)\n    /// - Clean Architecture: \uac01 \ub808\uc774\uc5b4\ub294 \uc790\uc2e0\uc758 \ubaa8\ub378\uc744 \uac00\uc9d0\n    /// - \ud83d\udca1 Java \ube44\uad50: JPA Entity \u2192 Domain Model \ubcc0\ud658\uacfc \uc720\uc0ac\n    ///\n    /// - Returns: Food domain entity\n    /// - Throws: \ud544\uc218 \ud544\ub4dc\uac00 nil\uc778 \uacbd\uc6b0 \uc624\ub958 \ubc1c\uc0dd\n    func toDomainEntity() throws -> Bodii.Food {\n        // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Optional Unwrapping\n        // Core Data\uc758 optional \ud544\ub4dc\ub294 nil\uc77c \uc218 \uc788\uc73c\ubbc0\ub85c \uac80\uc99d \ud544\uc694\n        guard let id = id else {\n            throw FoodEntityError.missingRequiredField(\"id\")\n        }\n        guard let name = name else {\n            throw FoodEntityError.missingRequiredField(\"name\")\n        }\n\n        // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: FoodSource Enum \ubcc0\ud658\n        // Core Data\ub294 Int16\uc73c\ub85c \uc800\uc7a5, Domain\uc5d0\uc11c\ub294 enum \uc0ac\uc6a9\n        guard let foodSource = FoodSource(rawValue: source) else {\n            throw FoodEntityError.invalidEnumValue(\"source\", source)\n        }\n\n        // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: NSDecimalNumber \u2192 Decimal \ubcc0\ud658\n        // Core Data\uc758 Decimal\uc740 NSDecimalNumber\ub85c \uc800\uc7a5\ub428\n        // Swift\uc758 Decimal\ub85c \ubcc0\ud658\ud558\uc5ec \uc0ac\uc6a9\n        return Bodii.Food(\n            id: id,\n            name: name,\n            calories: calories,\n            carbohydrates: carbohydrates as Decimal,\n            protein: protein as Decimal,\n            fat: fat as Decimal,\n            sodium: sodium as Decimal?,\n            fiber: fiber as Decimal?,\n            sugar: sugar as Decimal?,\n            servingSize: servingSize as Decimal,\n            servingUnit: servingUnit,\n            source: foodSource,\n            apiCode: apiCode,\n            createdByUserId: createdByUser?.id,\n            createdAt: createdAt\n        )\n    }\n\n    // MARK: - Factory Methods\n\n    /// Domain \uc5d4\ud2f0\ud2f0\ub85c\ubd80\ud130 Core Data \uc5d4\ud2f0\ud2f0 \uc0dd\uc131\n    ///\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Static Factory Method\n    /// - NSManagedObject\ub294 context\uac00 \ud544\uc694\ud558\ubbc0\ub85c factory \ud328\ud134 \uc0ac\uc6a9\n    /// - \ud83d\udca1 Java \ube44\uad50: JPA\uc758 EntityManager.merge()\uc640 \uc720\uc0ac\n    ///\n    /// - Parameters:\n    ///   - domainFood: Domain layer\uc758 Food entity\n    ///   - context: NSManagedObjectContext\n    /// - Returns: \uc0dd\uc131\ub41c Core Data Food entity\n    @discardableResult\n    static func from(domainFood: Bodii.Food, context: NSManagedObjectContext) -> Food {\n        let food = Food(context: context)\n        food.update(from: domainFood)\n        return food\n    }\n\n    /// Domain \uc5d4\ud2f0\ud2f0\ub85c Core Data \uc5d4\ud2f0\ud2f0 \uc5c5\ub370\uc774\ud2b8\n    ///\n    /// - Parameter domainFood: Domain layer\uc758 Food entity\n    func update(from domainFood: Bodii.Food) {\n        // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: ID\ub294 \ubcc0\uacbd\ud558\uc9c0 \uc54a\uc74c\n        // Core Data\uc758 ID\ub294 \uc0dd\uc131 \ud6c4 \ubd88\ubcc0\uc774\uc5b4\uc57c \ud568\n        if id == nil {\n            id = domainFood.id\n        }\n\n        // Basic information\n        name = domainFood.name\n\n        // Nutrition information\n        calories = domainFood.calories\n        carbohydrates = domainFood.carbohydrates as NSDecimalNumber\n        protein = domainFood.protein as NSDecimalNumber\n        fat = domainFood.fat as NSDecimalNumber\n        sodium = domainFood.sodium as NSDecimalNumber?\n        fiber = domainFood.fiber as NSDecimalNumber?\n        sugar = domainFood.sugar as NSDecimalNumber?\n\n        // Serving information\n        servingSize = domainFood.servingSize as NSDecimalNumber\n        servingUnit = domainFood.servingUnit\n\n        // Source information\n        source = domainFood.source.rawValue\n        apiCode = domainFood.apiCode\n\n        // Metadata\n        if createdAt == nil {\n            createdAt = domainFood.createdAt\n        }\n\n        // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: \uce90\uc2dc \uc815\ubcf4\ub294 \uc5c5\ub370\uc774\ud2b8\ud558\uc9c0 \uc54a\uc74c\n        // lastAccessedAt, searchCount\ub294 \ubcc4\ub3c4 \uba54\uc11c\ub4dc(updateAccessTime)\ub85c \uad00\ub9ac\n    }\n\n    // MARK: - Fetch Requests\n\n    /// \ubaa8\ub4e0 \uc74c\uc2dd \uc870\ud68c \uc694\uccad\n    ///\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: NSFetchRequest \uc0dd\uc131\n    /// - Core Data \ucffc\ub9ac\uc758 \uae30\ubcf8 \ub2e8\uc704\n    /// - \ud83d\udca1 Java \ube44\uad50: JPA\uc758 CriteriaQuery\uc640 \uc720\uc0ac\n    ///\n    /// - Returns: NSFetchRequest<Food>\n    @nonobjc\n    static func fetchRequest() -> NSFetchRequest<Food> {\n        return NSFetchRequest<Food>(entityName: \"Food\")\n    }\n\n    /// API \ucf54\ub4dc\ub85c \uc74c\uc2dd \uc870\ud68c\n    ///\n    /// \uc911\ubcf5 \uc800\uc7a5 \ubc29\uc9c0\ub97c \uc704\ud574 API \ucf54\ub4dc\ub85c \uae30\uc874 \uc74c\uc2dd\uc744 \uac80\uc0c9\ud569\ub2c8\ub2e4.\n    ///\n    /// - Parameter apiCode: API \uc2dd\ud488 \ucf54\ub4dc\n    /// - Returns: NSFetchRequest<Food>\n    static func fetchRequestByApiCode(_ apiCode: String) -> NSFetchRequest<Food> {\n        let request = fetchRequest()\n        request.predicate = NSPredicate(format: \"apiCode == %@\", apiCode)\n        request.fetchLimit = 1\n        return request\n    }\n\n    /// \ucd5c\uadfc \uac80\uc0c9\ud55c \uc74c\uc2dd \uc870\ud68c (LRU)\n    ///\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: LRU (Least Recently Used) Cache\n    /// - lastAccessedAt\uc73c\ub85c \uc815\ub82c\ud558\uc5ec \ucd5c\uadfc \uc811\uadfc \uc74c\uc2dd \uc6b0\uc120 \ubc18\ud658\n    /// - limit\uc73c\ub85c \uce90\uc2dc \ud06c\uae30 \uc81c\ud55c\n    ///\n    /// - Parameter limit: \uc870\ud68c\ud560 \uc74c\uc2dd \uac1c\uc218 (\uae30\ubcf8\uac12: 20)\n    /// - Returns: NSFetchRequest<Food>\n    static func fetchRecentFoods(limit: Int = 20) -> NSFetchRequest<Food> {\n        let request = fetchRequest()\n        request.predicate = NSPredicate(format: \"lastAccessedAt != nil\")\n        request.sortDescriptors = [NSSortDescriptor(key: \"lastAccessedAt\", ascending: false)]\n        request.fetchLimit = limit\n        return request\n    }\n\n    /// \uc778\uae30 \uc74c\uc2dd \uc870\ud68c (\uac80\uc0c9 \ud69f\uc218 \uae30\uc900)\n    ///\n    /// - Parameter limit: \uc870\ud68c\ud560 \uc74c\uc2dd \uac1c\uc218 (\uae30\ubcf8\uac12: 20)\n    /// - Returns: NSFetchRequest<Food>\n    static func fetchPopularFoods(limit: Int = 20) -> NSFetchRequest<Food> {\n        let request = fetchRequest()\n        request.predicate = NSPredicate(format: \"searchCount > 0\")\n        request.sortDescriptors = [NSSortDescriptor(key: \"searchCount\", ascending: false)]\n        request.fetchLimit = limit\n        return request\n    }\n\n    /// \uc774\ub984\uc73c\ub85c \uc74c\uc2dd \uac80\uc0c9\n    ///\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: NSPredicate String Matching\n    /// - CONTAINS[cd]: \ub300\uc18c\ubb38\uc790/\ubc1c\uc74c \uad6c\ubcc4 \uc5c6\uc774 \ud3ec\ud568 \uac80\uc0c9\n    /// - [cd] \ud50c\ub798\uadf8: c=case insensitive, d=diacritic insensitive\n    ///\n    /// - Parameters:\n    ///   - query: \uac80\uc0c9\uc5b4\n    ///   - limit: \uc870\ud68c\ud560 \uc74c\uc2dd \uac1c\uc218 (\uae30\ubcf8\uac12: 50)\n    /// - Returns: NSFetchRequest<Food>\n    static func fetchByName(_ query: String, limit: Int = 50) -> NSFetchRequest<Food> {\n        let request = fetchRequest()\n        request.predicate = NSPredicate(format: \"name CONTAINS[cd] %@\", query)\n        request.sortDescriptors = [\n            NSSortDescriptor(key: \"searchCount\", ascending: false),\n            NSSortDescriptor(key: \"name\", ascending: true)\n        ]\n        request.fetchLimit = limit\n        return request\n    }\n\n    /// \ub9cc\ub8cc\ub41c \uce90\uc2dc \uc870\ud68c\n    ///\n    /// \uc624\ub798\ub41c API \ub370\uc774\ud130\ub97c \uc815\ub9ac\ud558\uae30 \uc704\ud55c \uc870\ud68c\uc785\ub2c8\ub2e4.\n    ///\n    /// - Parameter days: \ub9cc\ub8cc \uae30\uc900 \uc77c\uc218 (\uae30\ubcf8\uac12: 30\uc77c)\n    /// - Returns: NSFetchRequest<Food>\n    static func fetchExpiredCache(days: Int = 30) -> NSFetchRequest<Food> {\n        let request = fetchRequest()\n        let expirationDate = Calendar.current.date(byAdding: .day, value: -days, to: Date()) ?? Date()\n\n        // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Compound Predicate\n        // \uc5ec\ub7ec \uc870\uac74\uc744 AND/OR\ub85c \uacb0\ud569\n        // API \ucd9c\ucc98\uc774\uba74\uc11c(governmentAPI \ub610\ub294 usda) \ub9cc\ub8cc\ub41c \uac83\ub9cc \uc870\ud68c\n        let apiSourcePredicate = NSPredicate(\n            format: \"source == %d OR source == %d\",\n            FoodSource.governmentAPI.rawValue,\n            FoodSource.usda.rawValue\n        )\n        let expiredPredicate = NSPredicate(format: \"createdAt < %@\", expirationDate as NSDate)\n\n        request.predicate = NSCompoundPredicate(andPredicateWithSubpredicates: [\n            apiSourcePredicate,\n            expiredPredicate\n        ])\n\n        return request\n    }\n}\n\n// MARK: - Food Entity Error\n\n/// Food Core Data \uc5d4\ud2f0\ud2f0 \uad00\ub828 \uc5d0\ub7ec\n///\n/// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Custom Error Types\n/// - Swift\uc758 Error \ud504\ub85c\ud1a0\ucf5c\uc744 \uad6c\ud604\n/// - \ud83d\udca1 Java \ube44\uad50: Custom Exception \ud074\ub798\uc2a4\uc640 \uc720\uc0ac\nenum FoodEntityError: Error {\n    case missingRequiredField(String)\n    case invalidEnumValue(String, Int16)\n    case conversionFailed(String)\n\n    /// \uc0ac\uc6a9\uc790\uc5d0\uac8c \ud45c\uc2dc\ud560 \uc5d0\ub7ec \uba54\uc2dc\uc9c0\n    var localizedDescription: String {\n        switch self {\n        case .missingRequiredField(let field):\n            return \"\ud544\uc218 \ud544\ub4dc\uac00 \ub204\ub77d\ub418\uc5c8\uc2b5\ub2c8\ub2e4: \\(field)\"\n        case .invalidEnumValue(let field, let value):\n            return \"\uc798\ubabb\ub41c \uc5f4\uac70\ud615 \uac12\uc785\ub2c8\ub2e4: \\(field) = \\(value)\"\n        case .conversionFailed(let message):\n            return \"\ubcc0\ud658\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4: \\(message)\"\n        }\n    }\n}\n\n// MARK: - Batch Operations Extension\n\nextension Food {\n\n    /// \uc5ec\ub7ec Domain \uc5d4\ud2f0\ud2f0\ub97c Core Data\ub85c \uc77c\uad04 \ubcc0\ud658\n    ///\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Batch Insert\n    /// - \ub300\ub7c9 \ub370\uc774\ud130 \uc0bd\uc785 \uc2dc \uc131\ub2a5 \ucd5c\uc801\ud654\n    /// - \ud83d\udca1 Java \ube44\uad50: JPA\uc758 batch insert\uc640 \uc720\uc0ac\n    ///\n    /// - Parameters:\n    ///   - domainFoods: Domain layer\uc758 Food entity \ubc30\uc5f4\n    ///   - context: NSManagedObjectContext\n    /// - Returns: \uc0dd\uc131\ub41c Core Data Food entity \ubc30\uc5f4\n    static func batchCreate(from domainFoods: [Bodii.Food], context: NSManagedObjectContext) -> [Food] {\n        return domainFoods.map { domainFood in\n            Food.from(domainFood: domainFood, context: context)\n        }\n    }\n\n    /// \uc911\ubcf5 \uc81c\uac70 \ud6c4 \uc77c\uad04 \uc800\uc7a5\n    ///\n    /// API \ucf54\ub4dc\ub97c \uae30\uc900\uc73c\ub85c \uc911\ubcf5\uc744 \ud655\uc778\ud558\uace0, \uc0c8\ub85c\uc6b4 \uc74c\uc2dd\ub9cc \uc800\uc7a5\ud569\ub2c8\ub2e4.\n    ///\n    /// - Parameters:\n    ///   - domainFoods: Domain layer\uc758 Food entity \ubc30\uc5f4\n    ///   - context: NSManagedObjectContext\n    /// - Returns: \uc800\uc7a5\ub41c \uc74c\uc2dd \uac1c\uc218\n    /// - Throws: Core Data \uc800\uc7a5 \uc2e4\ud328 \uc2dc \uc624\ub958 \ubc1c\uc0dd\n    static func saveUnique(from domainFoods: [Bodii.Food], context: NSManagedObjectContext) throws -> Int {\n        var savedCount = 0\n\n        for domainFood in domainFoods {\n            // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Upsert (Update or Insert)\n            // API \ucf54\ub4dc\uac00 \uc788\uc73c\uba74 \uae30\uc874 \ub370\uc774\ud130 \ud655\uc778\n            let existingFood: Food?\n            if let apiCode = domainFood.apiCode {\n                let request = fetchRequestByApiCode(apiCode)\n                existingFood = try context.fetch(request).first\n            } else {\n                existingFood = nil\n            }\n\n            if let existing = existingFood {\n                // \uae30\uc874 \ub370\uc774\ud130 \uc5c5\ub370\uc774\ud2b8\n                existing.update(from: domainFood)\n            } else {\n                // \uc0c8 \ub370\uc774\ud130 \uc0bd\uc785\n                Food.from(domainFood: domainFood, context: context)\n                savedCount += 1\n            }\n        }\n\n        return savedCount\n    }\n}\n\n// MARK: - Debug Helpers\n\n#if DEBUG\nextension Food {\n    /// \ub514\ubc84\uae45\uc6a9 \uc124\uba85 \ubb38\uc790\uc5f4\n    var debugDescription: String {\n        \"\"\"\n        Food(\n            id: \\(id?.uuidString ?? \"nil\"),\n            name: \\(name ?? \"nil\"),\n            calories: \\(calories),\n            source: \\(FoodSource(rawValue: source)?.displayName ?? \"unknown\"),\n            apiCode: \\(apiCode ?? \"nil\"),\n            searchCount: \\(searchCount),\n            lastAccessedAt: \\(lastAccessedAt?.description ?? \"nil\")\n        )\n        \"\"\"\n    }\n\n    /// \ud14c\uc2a4\ud2b8\uc6a9 \uc0d8\ud50c \ub370\uc774\ud130 \uc0dd\uc131\n    ///\n    /// - Parameter context: NSManagedObjectContext\n    /// - Returns: \uc0d8\ud50c Food entity\n    static func createSample(context: NSManagedObjectContext) -> Food {\n        let food = Food(context: context)\n        food.id = UUID()\n        food.name = \"\ud604\ubbf8\ubc25\"\n        food.calories = 330\n        food.carbohydrates = 73.4\n        food.protein = 6.8\n        food.fat = 2.5\n        food.sodium = 5.0\n        food.fiber = 3.0\n        food.sugar = 0.5\n        food.servingSize = 210.0\n        food.servingUnit = \"1\uacf5\uae30\"\n        food.source = FoodSource.governmentAPI.rawValue\n        food.apiCode = \"D000001\"\n        food.createdAt = Date()\n        food.lastAccessedAt = Date()\n        food.searchCount = 0\n        return food\n    }\n}\n#endif\n",
        "last_modified": "2026-01-14T22:55:39.260152"
      },
      "task_intent": {
        "title": "005-korean-food-database-integration",
        "description": "Integrate Korean Food & Drug Administration (\uc2dd\uc57d\ucc98) food nutrition database API as primary source, with USDA FoodData Central as fallback for international foods. Prioritize Korean dishes (kimchi jjigae, bibimbap, tteokbokki) that are poorly covered by competitors.",
        "from_plan": true
      },
      "commits_behind_main": 0,
      "status": "active",
      "merged_at": null
    }
  },
  "created_at": "2026-01-13T07:43:31.755287",
  "last_updated": "2026-01-13T07:46:24.220589"
}