{
  "file_path": "Bodii/Data/DTOs/USDANutrientDTO.swift",
  "main_branch_history": [],
  "task_views": {
    "005-korean-food-database-integration": {
      "task_id": "005-korean-food-database-integration",
      "branch_point": {
        "commit_hash": "c44bfbcd7c1699b176a8bb155e8c35f43ebd4ad9",
        "content": "",
        "timestamp": "2026-01-13T07:46:23.878686"
      },
      "worktree_state": {
        "content": "//\n//  USDANutrientDTO.swift\n//  Bodii\n//\n//  Created by Auto-Claude on 2026-01-12.\n//\n\n// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: USDA API Nutrient Structure\n// USDA API\ub294 \uc601\uc591\uc18c\ub97c \ubc30\uc5f4 \ud615\ud0dc\ub85c \uc81c\uacf5\ud558\uba70, \uac01 \uc601\uc591\uc18c\ub294 \uace0\uc720 ID\ub85c \uc2dd\ubcc4\ub429\ub2c8\ub2e4\n// \ud83d\udca1 Java \ube44\uad50: DTO with nested objects - Jackson\uacfc \uc720\uc0ac\ud55c \ud30c\uc2f1 \uad6c\uc870\n\nimport Foundation\n\n/// USDA API \uc601\uc591\uc18c \uc815\ubcf4 DTO\n///\n/// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Nutrient ID-based Structure\n/// USDA API\ub294 \uc601\uc591\uc18c\ub97c ID\ub85c \uc2dd\ubcc4\ud569\ub2c8\ub2e4 (\uc608: 1008 = Energy, 1003 = Protein)\n/// KFDA API\ub294 \ud544\ub4dc\uba85\uc73c\ub85c \uc601\uc591\uc18c\ub97c \uad6c\ubd84\ud558\ub294 \uac83\uacfc \ub300\uc870\uc801\n/// \ud83d\udca1 Java \ube44\uad50: Map<String, Object> \ub300\uc2e0 \uac15\ud0c0\uc785 \uac1d\uccb4 \uc0ac\uc6a9\n///\n/// **\uc8fc\uc694 \uc601\uc591\uc18c ID:**\n/// - 1008: Energy (kcal) - \uce7c\ub85c\ub9ac\n/// - 1003: Protein (g) - \ub2e8\ubc31\uc9c8\n/// - 1004: Total lipid (fat) (g) - \uc9c0\ubc29\n/// - 1005: Carbohydrate, by difference (g) - \ud0c4\uc218\ud654\ubb3c\n/// - 1093: Sodium, Na (mg) - \ub098\ud2b8\ub968\n/// - 1079: Fiber, total dietary (g) - \uc2dd\uc774\uc12c\uc720\n/// - 2000: Total Sugars (g) - \ub2f9\ub958\n///\n/// **\uc0ac\uc6a9 \uc608\uc2dc:**\n/// ```swift\n/// let nutrients = foodDTO.foodNutrients\n/// let calories = nutrients.first { $0.nutrientId == 1008 }?.value\n/// ```\n///\n/// **\ucc38\uace0:**\n/// - API \ubb38\uc11c: https://fdc.nal.usda.gov/api-guide.html\n/// - Nutrient List: https://fdc.nal.usda.gov/nutrient-list.html\nstruct USDANutrientDTO: Codable {\n\n    // MARK: - Properties\n\n    /// \uc601\uc591\uc18c \uace0\uc720 ID\n    ///\n    /// USDA \uc601\uc591\uc18c \ub370\uc774\ud130\ubca0\uc774\uc2a4\uc758 \uace0\uc720 \uc2dd\ubcc4\uc790\n    /// (\uc608: 1008 = Energy, 1003 = Protein)\n    let nutrientId: Int\n\n    /// \uc601\uc591\uc18c \uc774\ub984\n    ///\n    /// \uc601\ubb38 \uc601\uc591\uc18c\uba85 (\uc608: \"Energy\", \"Protein\", \"Total lipid (fat)\")\n    let nutrientName: String\n\n    /// \uc601\uc591\uc18c \ubc88\ud638 (\uc21c\uc11c)\n    ///\n    /// USDA \ub0b4\ubd80 \uc815\ub82c \uc21c\uc11c (\uc120\ud0dd\uc801)\n    let nutrientNumber: String?\n\n    /// \uc601\uc591\uc18c \uac12\n    ///\n    /// servingSize \uae30\uc900 \uc601\uc591\uc18c \ud568\ub7c9\n    /// \ub2e8\uc704\ub294 unitName\uc5d0 \ub530\ub984 (kcal, g, mg \ub4f1)\n    let value: Double\n\n    /// \ub2e8\uc704\uba85\n    ///\n    /// \uc601\uc591\uc18c \uac12\uc758 \ub2e8\uc704 (\uc608: \"kcal\", \"g\", \"mg\", \"\u00b5g\")\n    let unitName: String\n\n    /// \ud30c\uc0dd \uc601\uc591\uc18c ID (\uc120\ud0dd\uc801)\n    ///\n    /// \uc774 \uc601\uc591\uc18c\uac00 \ub2e4\ub978 \uc601\uc591\uc18c\ub85c\ubd80\ud130 \uacc4\uc0b0\ub41c \uacbd\uc6b0 \uc6d0\ubcf8 \uc601\uc591\uc18c ID\n    let derivationId: Int?\n\n    /// \ud30c\uc0dd \uc601\uc591\uc18c \ucf54\ub4dc (\uc120\ud0dd\uc801)\n    ///\n    /// \uc601\uc591\uc18c \uacc4\uc0b0 \ubc29\ubc95 \ucf54\ub4dc (\uc608: \"LCCS\" = calculated from components)\n    let derivationCode: String?\n\n    /// \ud30c\uc0dd \uc601\uc591\uc18c \uc124\uba85 (\uc120\ud0dd\uc801)\n    ///\n    /// \uc601\uc591\uc18c \uacc4\uc0b0 \ubc29\ubc95 \uc124\uba85\n    let derivationDescription: String?\n\n    // MARK: - CodingKeys\n\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: CodingKeys\n    /// USDA API\ub294 camelCase\ub97c \uc0ac\uc6a9\ud558\uc9c0\ub9cc \uba85\uc2dc\uc801 \ub9e4\ud551\uc73c\ub85c \uc548\uc815\uc131 \ud655\ubcf4\n    /// \ud83d\udca1 Java \ube44\uad50: @JsonProperty \uc5b4\ub178\ud14c\uc774\uc158\uacfc \uc720\uc0ac\n    enum CodingKeys: String, CodingKey {\n        case nutrientId = \"nutrientId\"\n        case nutrientName = \"nutrientName\"\n        case nutrientNumber = \"nutrientNumber\"\n        case value = \"value\"\n        case unitName = \"unitName\"\n        case derivationId = \"derivationId\"\n        case derivationCode = \"derivationCode\"\n        case derivationDescription = \"derivationDescription\"\n    }\n}\n\n// MARK: - Helper Extensions\n\nextension USDANutrientDTO {\n\n    /// \uc601\uc591\uc18c \uac12\uc744 Decimal\ub85c \ubcc0\ud658\n    ///\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Type Conversion\n    /// Double\uc5d0\uc11c Decimal\ub85c \ubcc0\ud658\ud558\uc5ec \uc815\ubc00\ub3c4 \ud5a5\uc0c1\n    /// \ud83d\udca1 Java \ube44\uad50: BigDecimal.valueOf()\uc640 \uc720\uc0ac\n    ///\n    /// - Returns: Decimal \uac12\n    var decimalValue: Decimal {\n        return Decimal(value)\n    }\n\n    /// \uc601\uc591\uc18c \uac12\uc744 Int32\ub85c \ubcc0\ud658\n    ///\n    /// \uce7c\ub85c\ub9ac \ub4f1 \uc815\uc218 \uac12\uc774 \ud544\uc694\ud55c \uacbd\uc6b0 \uc0ac\uc6a9\n    ///\n    /// - Returns: Int32 \uac12 (\uc18c\uc218\uc810 \ubc84\ub9bc)\n    var int32Value: Int32 {\n        return Int32(value)\n    }\n}\n\n// MARK: - Common Nutrient IDs\n\n/// USDA \uc8fc\uc694 \uc601\uc591\uc18c ID \uc0c1\uc218\n///\n/// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Constants for Magic Numbers\n/// \ub9e4\uc9c1 \ub118\ubc84 \ub300\uc2e0 \uc758\ubbf8\uc788\ub294 \uc0c1\uc218\ub85c \uad00\ub9ac\ud558\uc5ec \ucf54\ub4dc \uac00\ub3c5\uc131 \ud5a5\uc0c1\n/// \ud83d\udca1 Java \ube44\uad50: static final constants\uc640 \ub3d9\uc77c\nenum USDANutrientID {\n    /// \uc5d0\ub108\uc9c0 (kcal)\n    static let energy = 1008\n\n    /// \ub2e8\ubc31\uc9c8 (g)\n    static let protein = 1003\n\n    /// \uc9c0\ubc29 (g)\n    static let fat = 1004\n\n    /// \ud0c4\uc218\ud654\ubb3c (g)\n    static let carbohydrate = 1005\n\n    /// \ub098\ud2b8\ub968 (mg)\n    static let sodium = 1093\n\n    /// \uc2dd\uc774\uc12c\uc720 (g)\n    static let fiber = 1079\n\n    /// \ub2f9\ub958 (g)\n    static let sugar = 2000\n\n    /// \ud3ec\ud654\uc9c0\ubc29 (g)\n    static let saturatedFat = 1258\n\n    /// \ud2b8\ub79c\uc2a4\uc9c0\ubc29 (g)\n    static let transFat = 1257\n\n    /// \ucf5c\ub808\uc2a4\ud14c\ub864 (mg)\n    static let cholesterol = 1253\n\n    /// \uce7c\uc298 (mg)\n    static let calcium = 1087\n\n    /// \ucca0\ubd84 (mg)\n    static let iron = 1089\n\n    /// \ube44\ud0c0\ubbfc A (\u00b5g)\n    static let vitaminA = 1106\n\n    /// \ube44\ud0c0\ubbfc C (mg)\n    static let vitaminC = 1162\n\n    /// \ube44\ud0c0\ubbfc D (\u00b5g)\n    static let vitaminD = 1114\n}\n\n// MARK: - Nutrient Lookup Helper\n\nextension Array where Element == USDANutrientDTO {\n\n    /// \uc601\uc591\uc18c ID\ub85c \uac12 \ucc3e\uae30\n    ///\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Collection Extension\n    /// \ubc30\uc5f4\uc5d0 \ud3b8\uc758 \uba54\uc11c\ub4dc\ub97c \ucd94\uac00\ud558\uc5ec \uc601\uc591\uc18c \uac80\uc0c9 \ub2e8\uc21c\ud654\n    /// \ud83d\udca1 Java \ube44\uad50: Stream API\uc758 filter().findFirst()\uc640 \uc720\uc0ac\n    ///\n    /// - Parameter nutrientId: \ucc3e\uc744 \uc601\uc591\uc18c ID\n    ///\n    /// - Returns: \uc601\uc591\uc18c \uac12 (\ucc3e\uc9c0 \ubabb\ud558\uba74 nil)\n    ///\n    /// - Example:\n    /// ```swift\n    /// let nutrients = foodDTO.foodNutrients\n    /// let calories = nutrients.value(for: USDANutrientID.energy) // Optional<Double>\n    /// ```\n    func value(for nutrientId: Int) -> Double? {\n        return first { $0.nutrientId == nutrientId }?.value\n    }\n\n    /// \uc601\uc591\uc18c ID\ub85c Decimal \uac12 \ucc3e\uae30\n    ///\n    /// - Parameter nutrientId: \ucc3e\uc744 \uc601\uc591\uc18c ID\n    ///\n    /// - Returns: Decimal \uc601\uc591\uc18c \uac12 (\ucc3e\uc9c0 \ubabb\ud558\uba74 nil)\n    func decimalValue(for nutrientId: Int) -> Decimal? {\n        return first { $0.nutrientId == nutrientId }?.decimalValue\n    }\n\n    /// \uc601\uc591\uc18c ID\ub85c Int32 \uac12 \ucc3e\uae30\n    ///\n    /// - Parameter nutrientId: \ucc3e\uc744 \uc601\uc591\uc18c ID\n    ///\n    /// - Returns: Int32 \uc601\uc591\uc18c \uac12 (\ucc3e\uc9c0 \ubabb\ud558\uba74 nil)\n    func int32Value(for nutrientId: Int) -> Int32? {\n        return first { $0.nutrientId == nutrientId }?.int32Value\n    }\n}\n",
        "last_modified": "2026-01-14T22:55:39.259396"
      },
      "task_intent": {
        "title": "005-korean-food-database-integration",
        "description": "Integrate Korean Food & Drug Administration (\uc2dd\uc57d\ucc98) food nutrition database API as primary source, with USDA FoodData Central as fallback for international foods. Prioritize Korean dishes (kimchi jjigae, bibimbap, tteokbokki) that are poorly covered by competitors.",
        "from_plan": true
      },
      "commits_behind_main": 0,
      "status": "active",
      "merged_at": null
    }
  },
  "created_at": "2026-01-13T07:43:31.733651",
  "last_updated": "2026-01-13T07:46:24.113102"
}