{
  "file_path": "Bodii/Domain/Entities/Goal.swift",
  "main_branch_history": [],
  "task_views": {
    "002-project-foundation-core-data-model": {
      "task_id": "002-project-foundation-core-data-model",
      "branch_point": {
        "commit_hash": "2abdae73fb6199bcbf4f21f6deeb7952225f81e6",
        "content": "",
        "timestamp": "2026-01-14T13:34:17.674713"
      },
      "worktree_state": {
        "content": "//\n//  Goal.swift\n//  Bodii\n//\n//  Created by Auto-Claude on 2026-01-11.\n//\n\n// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Goal Target Validation\n// \ubaa9\ud45c \uccb4\uc131\ubd84\uc758 \ubb3c\ub9ac\uc801 \uc77c\uad00\uc131 \uac80\uc99d - \ubaa9\ud45c \uc81c\uc9c0\ubc29\ub7c9 \u2265 \ubaa9\ud45c \uadfc\uc721\ub7c9\n// \ud83d\udca1 Java \ube44\uad50: Bean Validation\uc758 \ucee4\uc2a4\ud140 \uac80\uc99d \ub85c\uc9c1\uacfc \uc720\uc0ac\ud558\uc9c0\ub9cc Swift\ub294 \uba54\uc11c\ub4dc\ub85c \uad6c\ud604\n\nimport Foundation\n\n// MARK: - Goal\n\n/// \uc0ac\uc6a9\uc790 \ubaa9\ud45c \ub3c4\uba54\uc778 \uc5d4\ud2f0\ud2f0\n/// - \uc0ac\uc6a9\uc790\uc758 \uccb4\uc911/\uccb4\uc9c0\ubc29/\uadfc\uc721\ub7c9 \ubaa9\ud45c\uc640 \ubaa9\ud45c \ub2ec\uc131\uc744 \uc704\ud55c \uacc4\ud68d \uad00\ub9ac\n/// - \ubaa9\ud45c \uc124\uc815 \uc2dc \ubb3c\ub9ac\uc801 \uc77c\uad00\uc131 \uac80\uc99d (\ubaa9\ud45c \uc81c\uc9c0\ubc29\ub7c9 \u2265 \ubaa9\ud45c \uadfc\uc721\ub7c9)\n/// - \ubaa9\ud45c \uae30\ubc18 \uc77c\uc77c \uce7c\ub85c\ub9ac \ubaa9\ud45c \uacc4\uc0b0\n///\n/// ## \uc8fc\uc694 \uae30\ub2a5\n/// - \ubaa9\ud45c \uc720\ud615 \uad00\ub9ac (\uac10\ub7c9/\uc720\uc9c0/\uc99d\ub7c9)\n/// - \ubaa9\ud45c \uccb4\uc131\ubd84 \uc124\uc815 (\uccb4\uc911, \uccb4\uc9c0\ubc29\ub960, \uadfc\uc721\ub7c9)\n/// - \uc8fc\uac04 \ubcc0\ud654\uc728 \uc124\uc815 (\uccb4\uc911, \uccb4\uc9c0\ubc29\ub960, \uadfc\uc721\ub7c9)\n/// - \uc2dc\uc791 \uc2dc\uc810 \uccb4\uc131\ubd84 \ubc0f \ub300\uc0ac \uc815\ubcf4 \uc2a4\ub0c5\uc0f7\n/// - \uc77c\uc77c \uce7c\ub85c\ub9ac \ubaa9\ud45c \uacc4\uc0b0\n/// - \ubaa9\ud45c \ubb3c\ub9ac\uc801 \uc77c\uad00\uc131 \uac80\uc99d\n///\n/// ## \uac80\uc99d \uaddc\uce59\n/// ```\n/// \ubaa9\ud45c \uc81c\uc9c0\ubc29\ub7c9 = \ubaa9\ud45c \uccb4\uc911 - \ubaa9\ud45c \uccb4\uc9c0\ubc29\ub7c9\n/// \ubaa9\ud45c \uccb4\uc9c0\ubc29\ub7c9 = \ubaa9\ud45c \uccb4\uc911 \u00d7 (\ubaa9\ud45c \uccb4\uc9c0\ubc29\ub960 / 100)\n/// \uac80\uc99d: \ubaa9\ud45c \uc81c\uc9c0\ubc29\ub7c9 \u2265 \ubaa9\ud45c \uadfc\uc721\ub7c9 (\uadfc\uc721\uc740 \uc81c\uc9c0\ubc29\uc758 \uc77c\ubd80)\n/// ```\n///\n/// ## \uc0ac\uc6a9 \uc608\uc2dc\n/// ```swift\n/// // 1. \uccb4\uc911 \uac10\ub7c9 \ubaa9\ud45c \uc0dd\uc131\n/// let goal = Goal.create(\n///     userId: userId,\n///     goalType: .lose,\n///     targetWeight: 65.0,\n///     targetBodyFatPct: 15.0,\n///     targetMuscleMass: 30.0,\n///     weeklyWeightRate: -0.5,\n///     weeklyFatPctRate: -0.5,\n///     weeklyMuscleRate: 0.0,\n///     startWeight: 70.0,\n///     startBodyFatPct: 20.0,\n///     startMuscleMass: 30.0,\n///     startBMR: 1650,\n///     startTDEE: 2550,\n///     dailyCalorieTarget: 2000,\n///     targetDate: Date().addingTimeInterval(60 * 60 * 24 * 70) // 10\uc8fc \ud6c4\n/// )\n///\n/// // 2. \ubaa9\ud45c \uac80\uc99d\n/// let validation = goal.validatePhysicalConsistency()\n/// if !validation.isValid {\n///     print(\"\ubaa9\ud45c\uac00 \ubb3c\ub9ac\uc801\uc73c\ub85c \ubd88\uac00\ub2a5\ud569\ub2c8\ub2e4: \\(validation.errorMessage ?? \"\")\")\n/// }\n/// ```\nstruct Goal: Identifiable, Codable, Equatable {\n\n    // MARK: - Properties\n\n    // MARK: Identifier\n\n    /// \ubaa9\ud45c \uace0\uc720 \uc2dd\ubcc4\uc790\n    /// - UUID \ud0c0\uc785\uc73c\ub85c \uc804\uc5ed \uace0\uc720\uc131 \ubcf4\uc7a5\n    let id: UUID\n\n    /// \uc0ac\uc6a9\uc790 \uace0\uc720 \uc2dd\ubcc4\uc790\n    /// - User \uc5d4\ud2f0\ud2f0\uc640\uc758 \uc678\ub798 \ud0a4 \uad00\uacc4\n    let userId: UUID\n\n    // MARK: Goal Type\n\n    /// \ubaa9\ud45c \uc720\ud615\n    /// - lose: \uccb4\uc911 \uac10\ub7c9\n    /// - maintain: \uccb4\uc911 \uc720\uc9c0\n    /// - gain: \uccb4\uc911 \uc99d\ub7c9\n    var goalType: GoalType\n\n    // MARK: Target Values\n\n    /// \ubaa9\ud45c \uccb4\uc911 (kg)\n    /// - \ud5c8\uc6a9 \ubc94\uc704: 20-300kg (ValidationService.validateWeight\ub85c \uac80\uc99d)\n    /// - \ubaa9\ud45c \ub2ec\uc131 \uc2dc\uc810\uc758 \uccb4\uc911\n    var targetWeight: Decimal\n\n    /// \ubaa9\ud45c \uccb4\uc9c0\ubc29\ub960 (%)\n    /// - \ud5c8\uc6a9 \ubc94\uc704: 3-60% (ValidationService.validateBodyFatPercent\ub85c \uac80\uc99d)\n    /// - \ubaa9\ud45c \ub2ec\uc131 \uc2dc\uc810\uc758 \uccb4\uc9c0\ubc29\ub960\n    var targetBodyFatPct: Decimal\n\n    /// \ubaa9\ud45c \uadfc\uc721\ub7c9 (kg)\n    /// - \ud5c8\uc6a9 \ubc94\uc704: 10-60kg (ValidationService.validateMuscleMass\ub85c \uac80\uc99d)\n    /// - \ubaa9\ud45c \ub2ec\uc131 \uc2dc\uc810\uc758 \uadfc\uc721\ub7c9\n    /// - \uac80\uc99d: \ubaa9\ud45c \uadfc\uc721\ub7c9 \u2264 \ubaa9\ud45c \uc81c\uc9c0\ubc29\ub7c9\n    var targetMuscleMass: Decimal\n\n    // MARK: Weekly Change Rates\n\n    /// \uc8fc\uac04 \uccb4\uc911 \ubcc0\ud654\uc728 (kg/week)\n    /// - \uc591\uc218: \uccb4\uc911 \uc99d\uac00, \uc74c\uc218: \uccb4\uc911 \uac10\uc18c\n    /// - \uc608: -0.5 = \uc8fc\ub2f9 0.5kg \uac10\ub7c9\n    /// - \uad8c\uc7a5 \ubc94\uc704: -1.0 ~ +1.0kg/week (\uac74\uac15\ud55c \ubcc0\ud654\uc728)\n    var weeklyWeightRate: Decimal\n\n    /// \uc8fc\uac04 \uccb4\uc9c0\ubc29\ub960 \ubcc0\ud654\uc728 (%/week)\n    /// - \uc591\uc218: \uccb4\uc9c0\ubc29\ub960 \uc99d\uac00, \uc74c\uc218: \uccb4\uc9c0\ubc29\ub960 \uac10\uc18c\n    /// - \uc608: -0.5 = \uc8fc\ub2f9 0.5% \uac10\uc18c\n    /// - \uad8c\uc7a5 \ubc94\uc704: -1.0 ~ +1.0%/week\n    var weeklyFatPctRate: Decimal\n\n    /// \uc8fc\uac04 \uadfc\uc721\ub7c9 \ubcc0\ud654\uc728 (kg/week)\n    /// - \uc591\uc218: \uadfc\uc721\ub7c9 \uc99d\uac00, \uc74c\uc218: \uadfc\uc721\ub7c9 \uac10\uc18c\n    /// - \uc608: +0.2 = \uc8fc\ub2f9 0.2kg \uc99d\uac00\n    /// - \uad8c\uc7a5 \ubc94\uc704: -0.5 ~ +0.5kg/week\n    var weeklyMuscleRate: Decimal\n\n    // MARK: Start Values\n\n    /// \uc2dc\uc791 \uc2dc\uc810 \uccb4\uc911 (kg)\n    /// - \ubaa9\ud45c \uc124\uc815 \uc2dc\uc810\uc758 \uccb4\uc911 \uc2a4\ub0c5\uc0f7\n    /// - \ubaa9\ud45c \uc9c4\ud589\ub960 \uacc4\uc0b0\uc5d0 \uc0ac\uc6a9\n    let startWeight: Decimal\n\n    /// \uc2dc\uc791 \uc2dc\uc810 \uccb4\uc9c0\ubc29\ub960 (%)\n    /// - \ubaa9\ud45c \uc124\uc815 \uc2dc\uc810\uc758 \uccb4\uc9c0\ubc29\ub960 \uc2a4\ub0c5\uc0f7\n    let startBodyFatPct: Decimal\n\n    /// \uc2dc\uc791 \uc2dc\uc810 \uadfc\uc721\ub7c9 (kg)\n    /// - \ubaa9\ud45c \uc124\uc815 \uc2dc\uc810\uc758 \uadfc\uc721\ub7c9 \uc2a4\ub0c5\uc0f7\n    let startMuscleMass: Decimal\n\n    /// \uc2dc\uc791 \uc2dc\uc810 \uae30\ucd08\ub300\uc0ac\ub7c9 (kcal/day)\n    /// - \ubaa9\ud45c \uc124\uc815 \uc2dc\uc810\uc758 BMR \uc2a4\ub0c5\uc0f7\n    let startBMR: Int\n\n    /// \uc2dc\uc791 \uc2dc\uc810 \uc77c\uc77c \ucd1d \uc5d0\ub108\uc9c0 \uc18c\ube44\ub7c9 (kcal/day)\n    /// - \ubaa9\ud45c \uc124\uc815 \uc2dc\uc810\uc758 TDEE \uc2a4\ub0c5\uc0f7\n    let startTDEE: Int\n\n    // MARK: Calorie Target\n\n    /// \uc77c\uc77c \uce7c\ub85c\ub9ac \ubaa9\ud45c (kcal/day)\n    /// - \ubaa9\ud45c \ub2ec\uc131\uc744 \uc704\ud55c \ud558\ub8e8 \uc12d\ucde8 \uce7c\ub85c\ub9ac \ubaa9\ud45c\n    /// - \uacc4\uc0b0\uc2dd: TDEE + (\ubaa9\ud45c \uccb4\uc911 \ubcc0\ud654 \u00d7 7700kcal/kg) / 7\uc77c\n    /// - \uc608: \uc8fc\ub2f9 0.5kg \uac10\ub7c9 \u2192 dailyCalorieTarget = TDEE - 550kcal\n    var dailyCalorieTarget: Int\n\n    // MARK: Status\n\n    /// \ubaa9\ud45c \ud65c\uc131\ud654 \uc5ec\ubd80\n    /// - true: \ud604\uc7ac \uc9c4\ud589 \uc911\uc778 \ubaa9\ud45c\n    /// - false: \uc644\ub8cc\ub418\uc5c8\uac70\ub098 \uc911\ub2e8\ub41c \ubaa9\ud45c\n    /// - \uc0ac\uc6a9\uc790\ub2f9 \ud558\ub098\uc758 \ud65c\uc131 \ubaa9\ud45c\ub9cc \uc874\uc7ac \uac00\ub2a5\n    var isActive: Bool\n\n    // MARK: Dates\n\n    /// \ubaa9\ud45c \uc2dc\uc791\uc77c\n    /// - \ubaa9\ud45c \uc124\uc815 \uc2dc\uc810\uc758 \ub0a0\uc9dc\n    let startDate: Date\n\n    /// \ubaa9\ud45c \ub2ec\uc131 \uc608\uc815\uc77c\n    /// - \uc8fc\uac04 \ubcc0\ud654\uc728 \uae30\ubc18 \uacc4\uc0b0\ub41c \ubaa9\ud45c \ub2ec\uc131\uc77c\n    /// - \uc0ac\uc6a9\uc790\uac00 \uc9c1\uc811 \uc218\uc815 \uac00\ub2a5\n    var targetDate: Date\n\n    // MARK: Timestamps\n\n    /// \uc0dd\uc131 \uc2dc\uac01\n    let createdAt: Date\n\n    /// \ub9c8\uc9c0\ub9c9 \uc218\uc815 \uc2dc\uac01\n    var updatedAt: Date\n\n    // MARK: - Computed Properties\n\n    /// \ubaa9\ud45c \uc81c\uc9c0\ubc29\ub7c9 (kg)\n    /// - \uacc4\uc0b0 \uacf5\uc2dd: \ubaa9\ud45c \uccb4\uc911 - \ubaa9\ud45c \uccb4\uc9c0\ubc29\ub7c9\n    /// - \ubaa9\ud45c \uccb4\uc9c0\ubc29\ub7c9 = \ubaa9\ud45c \uccb4\uc911 \u00d7 (\ubaa9\ud45c \uccb4\uc9c0\ubc29\ub960 / 100)\n    /// - \uadfc\uc721\ub7c9 \uac80\uc99d\uc5d0 \uc0ac\uc6a9: \ubaa9\ud45c \uadfc\uc721\ub7c9 \u2264 \ubaa9\ud45c \uc81c\uc9c0\ubc29\ub7c9\n    ///\n    /// ## \ucc38\uace0\n    /// \uc81c\uc9c0\ubc29\ub7c9(Lean Body Mass, LBM)\uc740 \uccb4\uc911\uc5d0\uc11c \uccb4\uc9c0\ubc29\ub7c9\uc744 \uc81c\uc678\ud55c \ubaa8\ub4e0 \uc870\uc9c1\uc758 \ubb34\uac8c\n    /// - \ud3ec\ud568: \uadfc\uc721, \ubf08, \uc7a5\uae30, \uc218\ubd84 \ub4f1\n    /// - \uadfc\uc721\ub7c9\uc740 \uc81c\uc9c0\ubc29\ub7c9\uc758 \uc77c\ubd80\uc774\ubbc0\ub85c \ubc18\ub4dc\uc2dc \uc81c\uc9c0\ubc29\ub7c9\ubcf4\ub2e4 \uc791\uac70\ub098 \uac19\uc544\uc57c \ud568\n    var targetLeanBodyMass: Decimal {\n        let targetBodyFatMass = targetWeight * (targetBodyFatPct / 100)\n        return targetWeight - targetBodyFatMass\n    }\n\n    /// \uc2dc\uc791 \uc2dc\uc810 \uc81c\uc9c0\ubc29\ub7c9 (kg)\n    /// - \uacc4\uc0b0 \uacf5\uc2dd: \uc2dc\uc791 \uccb4\uc911 - \uc2dc\uc791 \uccb4\uc9c0\ubc29\ub7c9\n    var startLeanBodyMass: Decimal {\n        let startBodyFatMass = startWeight * (startBodyFatPct / 100)\n        return startWeight - startBodyFatMass\n    }\n\n    /// \ubaa9\ud45c\uae4c\uc9c0 \ub0a8\uc740 \uccb4\uc911 \ubcc0\ud654\ub7c9 (kg)\n    /// - \uc591\uc218: \uc99d\ub7c9 \ud544\uc694, \uc74c\uc218: \uac10\ub7c9 \ud544\uc694, 0: \ubaa9\ud45c \ub2ec\uc131\n    /// - \ud604\uc7ac \uccb4\uc911\uacfc \ube44\uad50\ud558\ub824\uba74 \uc678\ubd80\uc5d0\uc11c currentWeight \uc81c\uacf5 \ud544\uc694\n    var targetWeightChange: Decimal {\n        targetWeight - startWeight\n    }\n\n    /// \ubaa9\ud45c \uae30\uac04 (\uc77c)\n    /// - \uc2dc\uc791\uc77c\ubd80\ud130 \ubaa9\ud45c\uc77c\uae4c\uc9c0\uc758 \uc77c\uc218\n    var durationInDays: Int {\n        Calendar.current.dateComponents([.day], from: startDate, to: targetDate).day ?? 0\n    }\n\n    /// \ubaa9\ud45c \uae30\uac04 (\uc8fc)\n    /// - \uc2dc\uc791\uc77c\ubd80\ud130 \ubaa9\ud45c\uc77c\uae4c\uc9c0\uc758 \uc8fc\uc218 (\uc18c\uc218\uc810 \ud3ec\ud568)\n    var durationInWeeks: Double {\n        Double(durationInDays) / 7.0\n    }\n\n    // MARK: - Factory Methods\n\n    /// Goal \uc0dd\uc131 (\ubaa8\ub4e0 \ud544\ub4dc \uba85\uc2dc)\n    /// - Parameters:\n    ///   - userId: \uc0ac\uc6a9\uc790 \uace0\uc720 \uc2dd\ubcc4\uc790\n    ///   - goalType: \ubaa9\ud45c \uc720\ud615 (\uac10\ub7c9/\uc720\uc9c0/\uc99d\ub7c9)\n    ///   - targetWeight: \ubaa9\ud45c \uccb4\uc911 (kg)\n    ///   - targetBodyFatPct: \ubaa9\ud45c \uccb4\uc9c0\ubc29\ub960 (%)\n    ///   - targetMuscleMass: \ubaa9\ud45c \uadfc\uc721\ub7c9 (kg)\n    ///   - weeklyWeightRate: \uc8fc\uac04 \uccb4\uc911 \ubcc0\ud654\uc728 (kg/week)\n    ///   - weeklyFatPctRate: \uc8fc\uac04 \uccb4\uc9c0\ubc29\ub960 \ubcc0\ud654\uc728 (%/week)\n    ///   - weeklyMuscleRate: \uc8fc\uac04 \uadfc\uc721\ub7c9 \ubcc0\ud654\uc728 (kg/week)\n    ///   - startWeight: \uc2dc\uc791 \uccb4\uc911 (kg)\n    ///   - startBodyFatPct: \uc2dc\uc791 \uccb4\uc9c0\ubc29\ub960 (%)\n    ///   - startMuscleMass: \uc2dc\uc791 \uadfc\uc721\ub7c9 (kg)\n    ///   - startBMR: \uc2dc\uc791 BMR (kcal/day)\n    ///   - startTDEE: \uc2dc\uc791 TDEE (kcal/day)\n    ///   - dailyCalorieTarget: \uc77c\uc77c \uce7c\ub85c\ub9ac \ubaa9\ud45c (kcal/day)\n    ///   - targetDate: \ubaa9\ud45c \ub2ec\uc131 \uc608\uc815\uc77c\n    /// - Returns: \uc0dd\uc131\ub41c Goal \uc5d4\ud2f0\ud2f0\n    ///\n    /// ## \uc0ac\uc6a9 \uc608\uc2dc\n    /// ```swift\n    /// let goal = Goal.create(\n    ///     userId: userId,\n    ///     goalType: .lose,\n    ///     targetWeight: 65.0,\n    ///     targetBodyFatPct: 15.0,\n    ///     targetMuscleMass: 30.0,\n    ///     weeklyWeightRate: -0.5,\n    ///     weeklyFatPctRate: -0.5,\n    ///     weeklyMuscleRate: 0.0,\n    ///     startWeight: 70.0,\n    ///     startBodyFatPct: 20.0,\n    ///     startMuscleMass: 30.0,\n    ///     startBMR: 1650,\n    ///     startTDEE: 2550,\n    ///     dailyCalorieTarget: 2000,\n    ///     targetDate: Date().addingTimeInterval(60 * 60 * 24 * 70)\n    /// )\n    /// ```\n    static func create(\n        userId: UUID,\n        goalType: GoalType,\n        targetWeight: Decimal,\n        targetBodyFatPct: Decimal,\n        targetMuscleMass: Decimal,\n        weeklyWeightRate: Decimal,\n        weeklyFatPctRate: Decimal,\n        weeklyMuscleRate: Decimal,\n        startWeight: Decimal,\n        startBodyFatPct: Decimal,\n        startMuscleMass: Decimal,\n        startBMR: Int,\n        startTDEE: Int,\n        dailyCalorieTarget: Int,\n        targetDate: Date\n    ) -> Goal {\n        let now = Date()\n        return Goal(\n            id: UUID(),\n            userId: userId,\n            goalType: goalType,\n            targetWeight: targetWeight,\n            targetBodyFatPct: targetBodyFatPct,\n            targetMuscleMass: targetMuscleMass,\n            weeklyWeightRate: weeklyWeightRate,\n            weeklyFatPctRate: weeklyFatPctRate,\n            weeklyMuscleRate: weeklyMuscleRate,\n            startWeight: startWeight,\n            startBodyFatPct: startBodyFatPct,\n            startMuscleMass: startMuscleMass,\n            startBMR: startBMR,\n            startTDEE: startTDEE,\n            dailyCalorieTarget: dailyCalorieTarget,\n            isActive: true,\n            startDate: now,\n            targetDate: targetDate,\n            createdAt: now,\n            updatedAt: now\n        )\n    }\n\n    // MARK: - Validation Methods\n\n    /// \ubaa9\ud45c\uc758 \ubb3c\ub9ac\uc801 \uc77c\uad00\uc131 \uac80\uc99d\n    /// - Returns: \uac80\uc99d \uacb0\uacfc\n    ///\n    /// ## \uac80\uc99d \uaddc\uce59\n    /// ```\n    /// \ubaa9\ud45c \uc81c\uc9c0\ubc29\ub7c9 = \ubaa9\ud45c \uccb4\uc911 - (\ubaa9\ud45c \uccb4\uc911 \u00d7 \ubaa9\ud45c \uccb4\uc9c0\ubc29\ub960 / 100)\n    /// \uac80\uc99d: \ubaa9\ud45c \uc81c\uc9c0\ubc29\ub7c9 \u2265 \ubaa9\ud45c \uadfc\uc721\ub7c9\n    /// ```\n    ///\n    /// ## \uac80\uc99d\uc774 \ud544\uc694\ud55c \uc774\uc720\n    /// \uadfc\uc721\uc740 \uc81c\uc9c0\ubc29\ub7c9\uc758 \uc77c\ubd80\uc785\ub2c8\ub2e4. \ub530\ub77c\uc11c \uadfc\uc721\ub7c9\uc774 \uc81c\uc9c0\ubc29\ub7c9\ubcf4\ub2e4 \ud074 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.\n    /// \uc608\ub97c \ub4e4\uc5b4, \ubaa9\ud45c \uccb4\uc911 70kg, \ubaa9\ud45c \uccb4\uc9c0\ubc29\ub960 10%\uc77c \ub54c:\n    /// - \ubaa9\ud45c \uccb4\uc9c0\ubc29\ub7c9 = 70 \u00d7 0.1 = 7kg\n    /// - \ubaa9\ud45c \uc81c\uc9c0\ubc29\ub7c9 = 70 - 7 = 63kg\n    /// - \ubaa9\ud45c \uadfc\uc721\ub7c9\uc740 \ucd5c\ub300 63kg\uae4c\uc9c0\ub9cc \uac00\ub2a5\n    ///\n    /// ## \uc0ac\uc6a9 \uc608\uc2dc\n    /// ```swift\n    /// let goal = Goal.create(...)\n    /// let validation = goal.validatePhysicalConsistency()\n    /// if !validation.isValid {\n    ///     print(\"\uc624\ub958: \\(validation.errorMessage ?? \"\")\")\n    /// }\n    /// ```\n    func validatePhysicalConsistency() -> ValidationResult {\n        // \ubaa9\ud45c \uc81c\uc9c0\ubc29\ub7c9 \uacc4\uc0b0\n        let targetBodyFatMass = targetWeight * (targetBodyFatPct / 100)\n        let targetLBM = targetWeight - targetBodyFatMass\n\n        // \uadfc\uc721\ub7c9 \u2264 \uc81c\uc9c0\ubc29\ub7c9 \uac80\uc99d\n        guard targetMuscleMass <= targetLBM else {\n            let lbmDouble = NSDecimalNumber(decimal: targetLBM).doubleValue\n            let muscleDouble = NSDecimalNumber(decimal: targetMuscleMass).doubleValue\n            return .failure(\n                \"\ubaa9\ud45c \uadfc\uc721\ub7c9(\\(String(format: \"%.1f\", muscleDouble))kg)\uc774 \ubaa9\ud45c \uc81c\uc9c0\ubc29\ub7c9(\\(String(format: \"%.1f\", lbmDouble))kg)\ubcf4\ub2e4 \ud074 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4. \" +\n                \"\uc81c\uc9c0\ubc29\ub7c9\uc740 \uccb4\uc911\uc5d0\uc11c \uccb4\uc9c0\ubc29\uc744 \uc81c\uc678\ud55c \ubaa8\ub4e0 \uc870\uc9c1(\uadfc\uc721, \ubf08, \uc7a5\uae30 \ub4f1)\uc758 \ubb34\uac8c\uc774\uba70, \uadfc\uc721\ub7c9\uc740 \uc81c\uc9c0\ubc29\ub7c9\uc758 \uc77c\ubd80\uc785\ub2c8\ub2e4.\"\n            )\n        }\n\n        return .success\n    }\n\n    // MARK: - Update Methods\n\n    /// \ubaa9\ud45c \uccb4\uc131\ubd84 \uc5c5\ub370\uc774\ud2b8 (\ubb3c\ub9ac\uc801 \uc77c\uad00\uc131 \uac80\uc99d \ud3ec\ud568)\n    /// - Parameters:\n    ///   - targetWeight: \uc0c8\ub85c\uc6b4 \ubaa9\ud45c \uccb4\uc911\n    ///   - targetBodyFatPct: \uc0c8\ub85c\uc6b4 \ubaa9\ud45c \uccb4\uc9c0\ubc29\ub960\n    ///   - targetMuscleMass: \uc0c8\ub85c\uc6b4 \ubaa9\ud45c \uadfc\uc721\ub7c9\n    /// - Returns: \uc5c5\ub370\uc774\ud2b8\ub41c Goal (\uac80\uc99d \uc2e4\ud328 \uc2dc nil)\n    ///\n    /// ## \uc0ac\uc6a9 \uc608\uc2dc\n    /// ```swift\n    /// if let updatedGoal = goal.updatingTargets(\n    ///     targetWeight: 68.0,\n    ///     targetBodyFatPct: 16.0,\n    ///     targetMuscleMass: 31.0\n    /// ) {\n    ///     // \uac80\uc99d \ud1b5\uacfc - \uc5c5\ub370\uc774\ud2b8\ub41c \ubaa9\ud45c \uc0ac\uc6a9\n    /// } else {\n    ///     // \uac80\uc99d \uc2e4\ud328 - \ubb3c\ub9ac\uc801\uc73c\ub85c \ubd88\uac00\ub2a5\ud55c \ubaa9\ud45c\n    /// }\n    /// ```\n    func updatingTargets(\n        targetWeight: Decimal,\n        targetBodyFatPct: Decimal,\n        targetMuscleMass: Decimal\n    ) -> Goal? {\n        // \uc784\uc2dc Goal \uc0dd\uc131\ud558\uc5ec \uac80\uc99d\n        let tempGoal = Goal(\n            id: id,\n            userId: userId,\n            goalType: goalType,\n            targetWeight: targetWeight,\n            targetBodyFatPct: targetBodyFatPct,\n            targetMuscleMass: targetMuscleMass,\n            weeklyWeightRate: weeklyWeightRate,\n            weeklyFatPctRate: weeklyFatPctRate,\n            weeklyMuscleRate: weeklyMuscleRate,\n            startWeight: startWeight,\n            startBodyFatPct: startBodyFatPct,\n            startMuscleMass: startMuscleMass,\n            startBMR: startBMR,\n            startTDEE: startTDEE,\n            dailyCalorieTarget: dailyCalorieTarget,\n            isActive: isActive,\n            startDate: startDate,\n            targetDate: targetDate,\n            createdAt: createdAt,\n            updatedAt: Date()\n        )\n\n        // \ubb3c\ub9ac\uc801 \uc77c\uad00\uc131 \uac80\uc99d\n        guard tempGoal.validatePhysicalConsistency().isValid else {\n            return nil\n        }\n\n        return tempGoal\n    }\n\n    /// \uc8fc\uac04 \ubcc0\ud654\uc728 \uc5c5\ub370\uc774\ud2b8\n    /// - Parameters:\n    ///   - weeklyWeightRate: \uc0c8\ub85c\uc6b4 \uc8fc\uac04 \uccb4\uc911 \ubcc0\ud654\uc728\n    ///   - weeklyFatPctRate: \uc0c8\ub85c\uc6b4 \uc8fc\uac04 \uccb4\uc9c0\ubc29\ub960 \ubcc0\ud654\uc728\n    ///   - weeklyMuscleRate: \uc0c8\ub85c\uc6b4 \uc8fc\uac04 \uadfc\uc721\ub7c9 \ubcc0\ud654\uc728\n    /// - Returns: \uc5c5\ub370\uc774\ud2b8\ub41c Goal\n    func updatingWeeklyRates(\n        weeklyWeightRate: Decimal,\n        weeklyFatPctRate: Decimal,\n        weeklyMuscleRate: Decimal\n    ) -> Goal {\n        Goal(\n            id: id,\n            userId: userId,\n            goalType: goalType,\n            targetWeight: targetWeight,\n            targetBodyFatPct: targetBodyFatPct,\n            targetMuscleMass: targetMuscleMass,\n            weeklyWeightRate: weeklyWeightRate,\n            weeklyFatPctRate: weeklyFatPctRate,\n            weeklyMuscleRate: weeklyMuscleRate,\n            startWeight: startWeight,\n            startBodyFatPct: startBodyFatPct,\n            startMuscleMass: startMuscleMass,\n            startBMR: startBMR,\n            startTDEE: startTDEE,\n            dailyCalorieTarget: dailyCalorieTarget,\n            isActive: isActive,\n            startDate: startDate,\n            targetDate: targetDate,\n            createdAt: createdAt,\n            updatedAt: Date()\n        )\n    }\n\n    /// \uc77c\uc77c \uce7c\ub85c\ub9ac \ubaa9\ud45c \uc5c5\ub370\uc774\ud2b8\n    /// - Parameter dailyCalorieTarget: \uc0c8\ub85c\uc6b4 \uc77c\uc77c \uce7c\ub85c\ub9ac \ubaa9\ud45c\n    /// - Returns: \uc5c5\ub370\uc774\ud2b8\ub41c Goal\n    func updatingDailyCalorieTarget(_ dailyCalorieTarget: Int) -> Goal {\n        Goal(\n            id: id,\n            userId: userId,\n            goalType: goalType,\n            targetWeight: targetWeight,\n            targetBodyFatPct: targetBodyFatPct,\n            targetMuscleMass: targetMuscleMass,\n            weeklyWeightRate: weeklyWeightRate,\n            weeklyFatPctRate: weeklyFatPctRate,\n            weeklyMuscleRate: weeklyMuscleRate,\n            startWeight: startWeight,\n            startBodyFatPct: startBodyFatPct,\n            startMuscleMass: startMuscleMass,\n            startBMR: startBMR,\n            startTDEE: startTDEE,\n            dailyCalorieTarget: dailyCalorieTarget,\n            isActive: isActive,\n            startDate: startDate,\n            targetDate: targetDate,\n            createdAt: createdAt,\n            updatedAt: Date()\n        )\n    }\n\n    /// \ubaa9\ud45c \ud65c\uc131\ud654 \uc0c1\ud0dc \ubcc0\uacbd\n    /// - Parameter isActive: \ud65c\uc131\ud654 \uc5ec\ubd80\n    /// - Returns: \uc5c5\ub370\uc774\ud2b8\ub41c Goal\n    func updatingActiveStatus(_ isActive: Bool) -> Goal {\n        Goal(\n            id: id,\n            userId: userId,\n            goalType: goalType,\n            targetWeight: targetWeight,\n            targetBodyFatPct: targetBodyFatPct,\n            targetMuscleMass: targetMuscleMass,\n            weeklyWeightRate: weeklyWeightRate,\n            weeklyFatPctRate: weeklyFatPctRate,\n            weeklyMuscleRate: weeklyMuscleRate,\n            startWeight: startWeight,\n            startBodyFatPct: startBodyFatPct,\n            startMuscleMass: startMuscleMass,\n            startBMR: startBMR,\n            startTDEE: startTDEE,\n            dailyCalorieTarget: dailyCalorieTarget,\n            isActive: isActive,\n            startDate: startDate,\n            targetDate: targetDate,\n            createdAt: createdAt,\n            updatedAt: Date()\n        )\n    }\n\n    /// \ubaa9\ud45c \ub2ec\uc131\uc77c \ubcc0\uacbd\n    /// - Parameter targetDate: \uc0c8\ub85c\uc6b4 \ubaa9\ud45c \ub2ec\uc131 \uc608\uc815\uc77c\n    /// - Returns: \uc5c5\ub370\uc774\ud2b8\ub41c Goal\n    func updatingTargetDate(_ targetDate: Date) -> Goal {\n        Goal(\n            id: id,\n            userId: userId,\n            goalType: goalType,\n            targetWeight: targetWeight,\n            targetBodyFatPct: targetBodyFatPct,\n            targetMuscleMass: targetMuscleMass,\n            weeklyWeightRate: weeklyWeightRate,\n            weeklyFatPctRate: weeklyFatPctRate,\n            weeklyMuscleRate: weeklyMuscleRate,\n            startWeight: startWeight,\n            startBodyFatPct: startBodyFatPct,\n            startMuscleMass: startMuscleMass,\n            startBMR: startBMR,\n            startTDEE: startTDEE,\n            dailyCalorieTarget: dailyCalorieTarget,\n            isActive: isActive,\n            startDate: startDate,\n            targetDate: targetDate,\n            createdAt: createdAt,\n            updatedAt: Date()\n        )\n    }\n}\n\n// MARK: - Goal + CustomStringConvertible\n\nextension Goal: CustomStringConvertible {\n    /// \ub514\ubc84\uae45\uc6a9 \ubb38\uc790\uc5f4 \ud45c\ud604\n    var description: String {\n        let activeStatus = isActive ? \"\ud65c\uc131\" : \"\ube44\ud65c\uc131\"\n        let weightChange = targetWeightChange\n        let weightChangeSign = weightChange >= 0 ? \"+\" : \"\"\n\n        return \"\"\"\n        Goal(\n          id: \\(id.uuidString.prefix(8))...,\n          userId: \\(userId.uuidString.prefix(8))...,\n          goalType: \\(goalType.displayName),\n          \ubaa9\ud45c: \uccb4\uc911 \\(targetWeight)kg, \uccb4\uc9c0\ubc29\ub960 \\(targetBodyFatPct)%, \uadfc\uc721\ub7c9 \\(targetMuscleMass)kg,\n          \uc2dc\uc791: \uccb4\uc911 \\(startWeight)kg, \uccb4\uc9c0\ubc29\ub960 \\(startBodyFatPct)%, \uadfc\uc721\ub7c9 \\(startMuscleMass)kg,\n          \ubcc0\ud654\ub7c9: \\(weightChangeSign)\\(weightChange)kg,\n          \uc8fc\uac04 \ubcc0\ud654\uc728: \uccb4\uc911 \\(weeklyWeightRate)kg/week, \uccb4\uc9c0\ubc29\ub960 \\(weeklyFatPctRate)%/week, \uadfc\uc721\ub7c9 \\(weeklyMuscleRate)kg/week,\n          \uce7c\ub85c\ub9ac \ubaa9\ud45c: \\(dailyCalorieTarget)kcal/day,\n          \uae30\uac04: \\(durationInDays)\uc77c (\\(String(format: \"%.1f\", durationInWeeks))\uc8fc),\n          \uc0c1\ud0dc: \\(activeStatus),\n          \ubaa9\ud45c \uc81c\uc9c0\ubc29\ub7c9: \\(targetLeanBodyMass)kg (computed)\n        )\n        \"\"\"\n    }\n}\n",
        "last_modified": "2026-01-14T13:34:18.074710"
      },
      "task_intent": {
        "title": "Project Foundation & Core Data Model",
        "description": "Set up Xcode project with SwiftUI, MVVM architecture, Core Data persistence layer with 9 entities (User, BodyRecord, MetabolismSnapshot, Food, FoodRecord, ExerciseRecord, SleepRecord, DailyLog, Goal), and utility services for date handling and input validation.",
        "from_plan": true
      },
      "commits_behind_main": 3,
      "status": "active",
      "merged_at": null
    },
    "004-project-foundation-core-data-model": {
      "task_id": "004-project-foundation-core-data-model",
      "branch_point": {
        "commit_hash": "2abdae73fb6199bcbf4f21f6deeb7952225f81e6",
        "content": "",
        "timestamp": "2026-01-12T19:14:54.682468"
      },
      "worktree_state": {
        "content": "//\n//  Goal.swift\n//  Bodii\n//\n//  Created by Auto-Claude on 2024-01-12.\n//\n\nimport Foundation\n\n/// \ubaa9\ud45c \ub3c4\uba54\uc778 \uc5d4\ud2f0\ud2f0\n///\n/// \uc0ac\uc6a9\uc790\uc758 \uccb4\uc911 \uad00\ub9ac \ubaa9\ud45c\ub97c \ub098\ud0c0\ub0c5\ub2c8\ub2e4.\n///\n/// - Note: \ucd5c\uc18c 1\uac1c \uc774\uc0c1\uc758 \ubaa9\ud45c \uac12(targetWeight, targetBodyFatPct, targetMuscleMass)\uc744 \uc124\uc815\ud574\uc57c \ud569\ub2c8\ub2e4.\n///         \ubaa9\ud45c \uc124\uc815 \uc2dc \ud574\ub2f9 \uc2dc\uc791\uac12\uacfc \uc8fc\uac04 \ubcc0\ud654\uc728\uc744 \ud568\uaed8 \uc800\uc7a5\ud569\ub2c8\ub2e4.\n///\n/// - Note: \ubaa9\ud45c \uc815\ud569\uc131 \uac80\uc99d (\uc571 \ub808\ubca8):\n///         - \uccb4\uc9c0\ubc29\ub7c9 = \ubaa9\ud45c\uccb4\uc911 \u00d7 (\ubaa9\ud45c\uccb4\uc9c0\ubc29\ub960 / 100)\n///         - \uc81c\uc9c0\ubc29\ub7c9 = \ubaa9\ud45c\uccb4\uc911 - \uccb4\uc9c0\ubc29\ub7c9\n///         - \uc81c\uc9c0\ubc29\ub7c9 \u2265 \ubaa9\ud45c\uadfc\uc721\ub7c9 (\uadfc\uc721\uc740 \uc81c\uc9c0\ubc29\uc758 \uc77c\ubd80)\n///\n/// - Example:\n/// ```swift\n/// let goal = Goal(\n///     id: UUID(),\n///     userId: user.id,\n///     goalType: .lose,\n///     targetWeight: Decimal(65.0),\n///     targetBodyFatPct: Decimal(18.0),\n///     weeklyWeightRate: Decimal(-0.5),\n///     weeklyFatPctRate: Decimal(-0.5),\n///     isActive: true,\n///     createdAt: Date(),\n///     updatedAt: Date()\n/// )\n/// ```\nstruct Goal {\n    // MARK: - Primary Key\n\n    /// \uace0\uc720 \uc2dd\ubcc4\uc790\n    let id: UUID\n\n    // MARK: - Foreign Key\n\n    /// User \ucc38\uc870\n    let userId: UUID\n\n    // MARK: - Goal Configuration\n\n    /// \ubaa9\ud45c \uc720\ud615 (0: \uac10\ub7c9, 1: \uc720\uc9c0, 2: \uc99d\ub7c9)\n    var goalType: GoalType\n\n    // MARK: - Target Values\n\n    /// \ubaa9\ud45c \uccb4\uc911 (kg)\n    var targetWeight: Decimal?\n\n    /// \ubaa9\ud45c \uccb4\uc9c0\ubc29\ub960 (%)\n    var targetBodyFatPct: Decimal?\n\n    /// \ubaa9\ud45c \uadfc\uc721\ub7c9 (kg)\n    var targetMuscleMass: Decimal?\n\n    // MARK: - Weekly Change Rates\n\n    /// \uc8fc\uac04 \uccb4\uc911 \ubcc0\ud654 (kg)\n    ///\n    /// \uac10\ub7c9 \uc2dc \uc74c\uc218, \uc99d\ub7c9 \uc2dc \uc591\uc218 (\uc608: -0.5kg/week)\n    var weeklyWeightRate: Decimal?\n\n    /// \uc8fc\uac04 \uccb4\uc9c0\ubc29\ub960 \ubcc0\ud654 (%)\n    ///\n    /// \uac10\ub7c9 \uc2dc \uc74c\uc218, \uc99d\ub7c9 \uc2dc \uc591\uc218\n    var weeklyFatPctRate: Decimal?\n\n    /// \uc8fc\uac04 \uadfc\uc721\ub7c9 \ubcc0\ud654 (kg)\n    ///\n    /// \uac10\ub7c9 \uc2dc \uc74c\uc218 \ub610\ub294 \uc720\uc9c0, \uc99d\ub7c9 \uc2dc \uc591\uc218\n    var weeklyMuscleRate: Decimal?\n\n    // MARK: - Starting Values\n\n    /// \uc2dc\uc791 \uccb4\uc911 (kg)\n    ///\n    /// \ubaa9\ud45c \uc124\uc815 \uc2dc\uc810\uc758 \uccb4\uc911\n    var startWeight: Decimal?\n\n    /// \uc2dc\uc791 \uccb4\uc9c0\ubc29\ub960 (%)\n    ///\n    /// \ubaa9\ud45c \uc124\uc815 \uc2dc\uc810\uc758 \uccb4\uc9c0\ubc29\ub960\n    var startBodyFatPct: Decimal?\n\n    /// \uc2dc\uc791 \uadfc\uc721\ub7c9 (kg)\n    ///\n    /// \ubaa9\ud45c \uc124\uc815 \uc2dc\uc810\uc758 \uace8\uaca9\uadfc\ub7c9\n    var startMuscleMass: Decimal?\n\n    /// \uc2dc\uc791 BMR (kcal)\n    ///\n    /// \ubaa9\ud45c \uc124\uc815 \uc2dc\uc810\uc758 \uae30\ucd08\ub300\uc0ac\ub7c9\n    var startBMR: Decimal?\n\n    /// \uc2dc\uc791 TDEE (kcal)\n    ///\n    /// \ubaa9\ud45c \uc124\uc815 \uc2dc\uc810\uc758 \ud65c\ub3d9\ub300\uc0ac\ub7c9\n    var startTDEE: Decimal?\n\n    // MARK: - Other\n\n    /// \uc77c\uc77c \uce7c\ub85c\ub9ac \ubaa9\ud45c (kcal)\n    ///\n    /// \ubaa9\ud45c \ub2ec\uc131\uc744 \uc704\ud55c \ud558\ub8e8 \uad8c\uc7a5 \uce7c\ub85c\ub9ac \uc12d\ucde8\ub7c9\n    var dailyCalorieTarget: Int32?\n\n    /// \ud65c\uc131 \ubaa9\ud45c \uc5ec\ubd80\n    ///\n    /// \uc0ac\uc6a9\uc790\ub294 \uc5ec\ub7ec \ubaa9\ud45c\ub97c \uac00\uc9c8 \uc218 \uc788\uc73c\ub098, \ud65c\uc131 \ubaa9\ud45c\ub294 \ud558\ub098\ub9cc \uc874\uc7ac\ud569\ub2c8\ub2e4.\n    var isActive: Bool\n\n    // MARK: - Metadata\n\n    /// \uc0dd\uc131\uc77c\uc2dc\n    let createdAt: Date\n\n    /// \uc218\uc815\uc77c\uc2dc\n    var updatedAt: Date\n}\n\n// MARK: - Identifiable\n\nextension Goal: Identifiable {}\n\n// MARK: - Equatable\n\nextension Goal: Equatable {\n    static func == (lhs: Goal, rhs: Goal) -> Bool {\n        lhs.id == rhs.id\n    }\n}\n\n// MARK: - Hashable\n\nextension Goal: Hashable {\n    func hash(into hasher: inout Hasher) {\n        hasher.combine(id)\n    }\n}\n",
        "last_modified": "2026-01-14T22:57:13.075711"
      },
      "task_intent": {
        "title": "004-project-foundation-core-data-model",
        "description": "",
        "from_plan": false
      },
      "commits_behind_main": 0,
      "status": "active",
      "merged_at": null
    }
  },
  "created_at": "2026-01-11T21:28:24.006573",
  "last_updated": "2026-01-14T13:34:17.849514"
}