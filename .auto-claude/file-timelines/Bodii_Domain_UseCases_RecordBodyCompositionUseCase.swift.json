{
  "file_path": "Bodii/Domain/UseCases/RecordBodyCompositionUseCase.swift",
  "main_branch_history": [],
  "task_views": {
    "003-body-composition-tracking-with-bmr-tdee": {
      "task_id": "003-body-composition-tracking-with-bmr-tdee",
      "branch_point": {
        "commit_hash": "2abdae73fb6199bcbf4f21f6deeb7952225f81e6",
        "content": "",
        "timestamp": "2026-01-13T07:46:22.394743"
      },
      "worktree_state": {
        "content": "//\n//  RecordBodyCompositionUseCase.swift\n//  Bodii\n//\n//  Created by Auto-Claude on 2026-01-12.\n//\n\n// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Orchestration Use Case\n// \uc5ec\ub7ec Use Case\uc640 Repository\ub97c \uc870\ud569\ud558\uc5ec \ubcf5\uc7a1\ud55c \ube44\uc988\ub2c8\uc2a4 \ud504\ub85c\uc138\uc2a4\ub97c \uad6c\ud604\n// \ud83d\udca1 Java \ube44\uad50: Service layer\uc758 @Transactional \uba54\uc11c\ub4dc\uc640 \uc720\uc0ac\n\nimport Foundation\n\n// MARK: - RecordBodyCompositionUseCase\n\n/// \uc2e0\uccb4 \uad6c\uc131 \uae30\ub85d \uc800\uc7a5 Use Case\n/// BMR/TDEE \uc790\ub3d9 \uacc4\uc0b0\uacfc \ud568\uaed8 \uc2e0\uccb4 \uad6c\uc131 \ub370\uc774\ud130\ub97c \uc800\uc7a5\ud558\ub294 \uc624\ucf00\uc2a4\ud2b8\ub808\uc774\uc158 \ub85c\uc9c1\n/// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Clean Architecture - Use Case Composition\n/// - \uc5ec\ub7ec Use Case\ub97c \uc870\ud569\ud558\uc5ec \ubcf5\uc7a1\ud55c \ube44\uc988\ub2c8\uc2a4 \ud504\ub85c\uc138\uc2a4 \uad6c\ud604\n/// - \ud2b8\ub79c\uc7ad\uc158 \uacbd\uacc4 \uc5ed\ud560 (\ubaa8\ub4e0 \uc791\uc5c5\uc774 \uc131\uacf5\ud558\uac70\ub098 \ubaa8\ub450 \uc2e4\ud328)\n/// - Repository\ub97c \ud1b5\ud55c \ub370\uc774\ud130 \uc601\uc18d\ud654\n/// \ud83d\udca1 Java \ube44\uad50: Service class with orchestration logic\n///\n/// \ube44\uc988\ub2c8\uc2a4 \ud50c\ub85c\uc6b0:\n/// 1. \uc785\ub825 \ub370\uc774\ud130 \uac80\uc99d\n/// 2. BMR \uacc4\uc0b0 (CalculateBMRUseCase)\n/// 3. TDEE \uacc4\uc0b0 (CalculateTDEEUseCase)\n/// 4. BodyCompositionEntry \uc0dd\uc131\n/// 5. MetabolismData \uc0dd\uc131\n/// 6. Repository\ub97c \ud1b5\ud574 \uc800\uc7a5\n/// 7. \uc0ac\uc6a9\uc790\uc758 \ud604\uc7ac \uac12 \uc5c5\ub370\uc774\ud2b8 (\ud5a5\ud6c4 \uad6c\ud604)\nstruct RecordBodyCompositionUseCase {\n\n    // MARK: - Types\n\n    /// \uc2e0\uccb4 \uad6c\uc131 \uae30\ub85d\uc5d0 \ud544\uc694\ud55c \uc785\ub825 \ub370\uc774\ud130\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Nested Type\n    /// - Use Case \ub0b4\ubd80\uc5d0 \uad00\ub828\ub41c \ud0c0\uc785\uc744 \uc911\ucca9\ud558\uc5ec \ub124\uc784\uc2a4\ud398\uc774\uc2a4 \uc815\ub9ac\n    /// - \uc678\ubd80\uc5d0\uc11c\ub294 RecordBodyCompositionUseCase.Input\uc73c\ub85c \uc811\uadfc\n    /// \ud83d\udca1 Java \ube44\uad50: static nested class\uc640 \uc720\uc0ac\n    struct Input {\n        /// \uce21\uc815 \ub0a0\uc9dc (\uae30\ubcf8\uac12: \ud604\uc7ac \uc2dc\uac04)\n        let date: Date\n\n        /// \uccb4\uc911 (kg)\n        /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Decimal for Precision\n        /// \ubd80\ub3d9\uc18c\uc218\uc810 \uc624\ucc28\ub97c \ubc29\uc9c0\ud558\uae30 \uc704\ud574 Decimal \uc0ac\uc6a9\n        let weight: Decimal\n\n        /// \uccb4\uc9c0\ubc29\ub960 (%)\n        /// \ubc94\uc704: 1-60%\n        let bodyFatPercent: Decimal\n\n        /// \uadfc\uc721\ub7c9 (kg)\n        let muscleMass: Decimal\n\n        /// \uc0ac\uc6a9\uc790 \ud504\ub85c\ud544 (BMR/TDEE \uacc4\uc0b0\uc5d0 \ud544\uc694)\n        /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Composition\n        /// \uc2e0\uc7a5, \ub098\uc774, \uc131\ubcc4, \ud65c\ub3d9 \uc218\uc900 \uc815\ubcf4 \ud3ec\ud568\n        let userProfile: UserProfile\n\n        /// Input \uc720\ud6a8\uc131 \uac80\uc99d\n        /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Validation in Domain Layer\n        /// \ube44\uc988\ub2c8\uc2a4 \uaddc\uce59 \uac80\uc99d\uc744 \ub3c4\uba54\uc778 \ub808\uc774\uc5b4\uc5d0\uc11c \ucc98\ub9ac\n        /// - Returns: \uc720\ud6a8\ud558\uba74 true, \uadf8\ub807\uc9c0 \uc54a\uc73c\uba74 false\n        var isValid: Bool {\n            // \uccb4\uc911: 20-500 kg\n            guard weight >= 20 && weight <= 500 else { return false }\n\n            // \uccb4\uc9c0\ubc29\ub960: 1-60%\n            guard bodyFatPercent >= 1 && bodyFatPercent <= 60 else { return false }\n\n            // \uadfc\uc721\ub7c9: 10-100 kg\n            guard muscleMass >= 10 && muscleMass <= 100 else { return false }\n\n            // \uadfc\uc721\ub7c9\uc740 \uccb4\uc911\ubcf4\ub2e4 \uc791\uc544\uc57c \ud568\n            guard muscleMass < weight else { return false }\n\n            return true\n        }\n    }\n\n    /// \uc2e0\uccb4 \uad6c\uc131 \uae30\ub85d \uc800\uc7a5 \uacb0\uacfc\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Result Type\n    /// \uc131\uacf5 \uc2dc \uc800\uc7a5\ub41c \ub370\uc774\ud130\uc640 \uacc4\uc0b0\ub41c \ub300\uc0ac\uc728 \uc815\ubcf4\ub97c \ud568\uaed8 \ubc18\ud658\n    /// \ud83d\udca1 Java \ube44\uad50: DTO (Data Transfer Object)\uc640 \uc720\uc0ac\n    struct Output {\n        /// \uc800\uc7a5\ub41c \uc2e0\uccb4 \uad6c\uc131 \ub370\uc774\ud130\n        let bodyEntry: BodyCompositionEntry\n\n        /// \uacc4\uc0b0\ub41c \ub300\uc0ac\uc728 \ub370\uc774\ud130\n        let metabolismData: MetabolismData\n\n        /// \uacc4\uc0b0\ub41c BMR \uac12 (kcal/day)\n        /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Convenience Property\n        /// metabolismData\uc5d0\uc11c \ucd94\ucd9c\ud55c \uac12\uc744 \uc9c1\uc811 \uc811\uadfc \uac00\ub2a5\ud558\uac8c \ud568\n        var bmr: Decimal {\n            metabolismData.bmr\n        }\n\n        /// \uacc4\uc0b0\ub41c TDEE \uac12 (kcal/day)\n        var tdee: Decimal {\n            metabolismData.tdee\n        }\n\n        /// \ud3ec\ub9f7\ub41c \uc694\uc57d \uc815\ubcf4\n        /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Computed String Property\n        /// UI\uc5d0\uc11c \ubc14\ub85c \uc0ac\uc6a9\ud560 \uc218 \uc788\ub294 \ud3ec\ub9f7\ub41c \ubb38\uc790\uc5f4 \uc81c\uacf5\n        func summary() -> String {\n            let weightStr = String(format: \"%.1f\", NSDecimalNumber(decimal: bodyEntry.weight).doubleValue)\n            let bfStr = String(format: \"%.1f\", NSDecimalNumber(decimal: bodyEntry.bodyFatPercent).doubleValue)\n            let bmrStr = String(format: \"%.0f\", NSDecimalNumber(decimal: bmr).doubleValue)\n            let tdeeStr = String(format: \"%.0f\", NSDecimalNumber(decimal: tdee).doubleValue)\n\n            return \"\"\"\n            Weight: \\(weightStr) kg\n            Body Fat: \\(bfStr)%\n            BMR: \\(bmrStr) kcal/day\n            TDEE: \\(tdeeStr) kcal/day\n            \"\"\"\n        }\n    }\n\n    // MARK: - Error\n\n    /// \uc2e0\uccb4 \uad6c\uc131 \uae30\ub85d \uc911 \ubc1c\uc0dd\ud560 \uc218 \uc788\ub294 \uc5d0\ub7ec\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Custom Error Type\n    /// Swift\uc758 Error \ud504\ub85c\ud1a0\ucf5c\uc744 conform\ud558\uc5ec throw \uac00\ub2a5\ud55c \ud0c0\uc785 \uc815\uc758\n    /// \ud83d\udca1 Java \ube44\uad50: Custom Exception\uacfc \uc720\uc0ac\n    enum RecordError: Error, LocalizedError {\n        /// \uc720\ud6a8\ud558\uc9c0 \uc54a\uc740 \uc785\ub825 \uac12\n        case invalidInput(String)\n\n        /// BMR \uacc4\uc0b0 \uc2e4\ud328\n        case bmrCalculationFailed(Error)\n\n        /// TDEE \uacc4\uc0b0 \uc2e4\ud328\n        case tdeeCalculationFailed(Error)\n\n        /// \uc800\uc7a5 \uc2e4\ud328\n        case saveFailed(Error)\n\n        /// \uc5d0\ub7ec \uc124\uba85 (\uc0ac\uc6a9\uc790\uc5d0\uac8c \ud45c\uc2dc\ud560 \uba54\uc2dc\uc9c0)\n        /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: LocalizedError Protocol\n        /// errorDescription\uc744 \uad6c\ud604\ud558\uc5ec \uc0ac\uc6a9\uc790 \uce5c\ud654\uc801\uc778 \uc5d0\ub7ec \uba54\uc2dc\uc9c0 \uc81c\uacf5\n        var errorDescription: String? {\n            switch self {\n            case .invalidInput(let message):\n                return \"\uc720\ud6a8\ud558\uc9c0 \uc54a\uc740 \uc785\ub825: \\(message)\"\n            case .bmrCalculationFailed(let error):\n                return \"BMR \uacc4\uc0b0 \uc2e4\ud328: \\(error.localizedDescription)\"\n            case .tdeeCalculationFailed(let error):\n                return \"TDEE \uacc4\uc0b0 \uc2e4\ud328: \\(error.localizedDescription)\"\n            case .saveFailed(let error):\n                return \"\uc800\uc7a5 \uc2e4\ud328: \\(error.localizedDescription)\"\n            }\n        }\n    }\n\n    // MARK: - Dependencies\n\n    /// BMR \uacc4\uc0b0 Use Case\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Dependency Injection\n    /// \uc678\ubd80\uc5d0\uc11c \uc8fc\uc785\ubc1b\uc544 \uc0ac\uc6a9 (\ud14c\uc2a4\ud2b8 \uac00\ub2a5\uc131 \ud5a5\uc0c1)\n    private let calculateBMRUseCase: CalculateBMRUseCase\n\n    /// TDEE \uacc4\uc0b0 Use Case\n    private let calculateTDEEUseCase: CalculateTDEEUseCase\n\n    /// \uc2e0\uccb4 \ub370\uc774\ud130 \uc800\uc7a5\uc18c\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Protocol-Oriented Programming\n    /// \uad6c\ud604\uccb4\uac00 \uc544\ub2cc \ud504\ub85c\ud1a0\ucf5c\uc5d0 \uc758\uc874\ud558\uc5ec \uc720\uc5f0\uc131 \ud655\ubcf4\n    /// \ud83d\udca1 Java \ube44\uad50: Interface\uc5d0 \uc758\uc874\ud558\ub294 \uac83\uacfc \ub3d9\uc77c\n    private let bodyRepository: BodyRepositoryProtocol\n\n    // MARK: - Initialization\n\n    /// RecordBodyCompositionUseCase \ucd08\uae30\ud654\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Dependency Injection via Constructor\n    /// - \ubaa8\ub4e0 \uc758\uc874\uc131\uc744 \uc0dd\uc131\uc790\ub97c \ud1b5\ud574 \uc8fc\uc785\ubc1b\uc74c\n    /// - \uc758\uc874\uc131 \uc5ed\uc804 \uc6d0\uce59 (Dependency Inversion Principle) \uc900\uc218\n    /// \ud83d\udca1 Java \ube44\uad50: @Autowired constructor injection\uacfc \uc720\uc0ac\n    ///\n    /// - Parameters:\n    ///   - calculateBMRUseCase: BMR \uacc4\uc0b0 Use Case (\uae30\ubcf8\uac12: \uc0c8 \uc778\uc2a4\ud134\uc2a4)\n    ///   - calculateTDEEUseCase: TDEE \uacc4\uc0b0 Use Case (\uae30\ubcf8\uac12: \uc0c8 \uc778\uc2a4\ud134\uc2a4)\n    ///   - bodyRepository: \uc2e0\uccb4 \ub370\uc774\ud130 \uc800\uc7a5\uc18c (\ud544\uc218)\n    init(\n        calculateBMRUseCase: CalculateBMRUseCase = CalculateBMRUseCase(),\n        calculateTDEEUseCase: CalculateTDEEUseCase = CalculateTDEEUseCase(),\n        bodyRepository: BodyRepositoryProtocol\n    ) {\n        self.calculateBMRUseCase = calculateBMRUseCase\n        self.calculateTDEEUseCase = calculateTDEEUseCase\n        self.bodyRepository = bodyRepository\n    }\n\n    // MARK: - Execute\n\n    /// \uc2e0\uccb4 \uad6c\uc131 \uae30\ub85d \uc800\uc7a5 \uc2e4\ud589\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Async/Await\n    /// - Swift 5.5+\uc758 \ub3d9\uc2dc\uc131 \ubaa8\ub378\n    /// - \ube44\ub3d9\uae30 \uc791\uc5c5\uc744 \ub3d9\uae30 \ucf54\ub4dc\ucc98\ub7fc \uc791\uc131 \uac00\ub2a5\n    /// \ud83d\udca1 Java \ube44\uad50: CompletableFuture \ub610\ub294 Kotlin Coroutines\uc640 \uc720\uc0ac\n    ///\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Orchestration Logic\n    /// \uc5ec\ub7ec \ub2e8\uacc4\uc758 \ube44\uc988\ub2c8\uc2a4 \ub85c\uc9c1\uc744 \uc21c\ucc28\uc801\uc73c\ub85c \uc2e4\ud589:\n    /// 1. \uc785\ub825 \uac80\uc99d\n    /// 2. BMR \uacc4\uc0b0\n    /// 3. TDEE \uacc4\uc0b0\n    /// 4. \ub3c4\uba54\uc778 \uc5d4\ud2f0\ud2f0 \uc0dd\uc131\n    /// 5. \uc800\uc7a5\uc18c\uc5d0 \uc800\uc7a5\n    /// 6. \uc0ac\uc6a9\uc790 \ud604\uc7ac \uac12 \uc5c5\ub370\uc774\ud2b8 (\ud5a5\ud6c4 \uad6c\ud604)\n    ///\n    /// - Parameter input: \uc2e0\uccb4 \uad6c\uc131 \uae30\ub85d \uc785\ub825 \ub370\uc774\ud130\n    /// - Returns: \uc800\uc7a5\ub41c \ub370\uc774\ud130\uc640 \uacc4\uc0b0\ub41c \ub300\uc0ac\uc728 \uc815\ubcf4\n    /// - Throws: RecordError - \uac01 \ub2e8\uacc4\uc5d0\uc11c \uc2e4\ud328 \uc2dc\n    func execute(input: Input) async throws -> Output {\n        // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Guard Statement\n        // \uc870\uac74\uc774 false\uc77c \ub54c early return\n        // \ud83d\udca1 Java \ube44\uad50: if (!condition) throw\uc640 \uc720\uc0ac\ud558\uc9c0\ub9cc \ub354 \uba85\uc2dc\uc801\n        guard input.isValid else {\n            throw RecordError.invalidInput(\"\uc785\ub825 \uac12\uc774 \uc720\ud6a8\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. \uccb4\uc911(20-500kg), \uccb4\uc9c0\ubc29\ub960(1-60%), \uadfc\uc721\ub7c9(10-100kg)\uc744 \ud655\uc778\ud558\uc138\uc694.\")\n        }\n\n        // Step 1: BMR \uacc4\uc0b0\n        // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Error Handling with do-catch\n        // Use Case\uc758 \uc5d0\ub7ec\ub97c RecordError\ub85c \ub798\ud551\ud558\uc5ec \uacc4\uce35\ubcc4 \uc5d0\ub7ec \ubd84\ub9ac\n        let bmrOutput: CalculateBMRUseCase.Output\n        do {\n            bmrOutput = try calculateBMRUseCase.execute(\n                profile: input.userProfile,\n                bodyEntry: BodyCompositionEntry(\n                    date: input.date,\n                    weight: input.weight,\n                    bodyFatPercent: input.bodyFatPercent,\n                    muscleMass: input.muscleMass\n                )\n            )\n        } catch {\n            throw RecordError.bmrCalculationFailed(error)\n        }\n\n        // Step 2: TDEE \uacc4\uc0b0\n        // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Use Case Chaining\n        // BMR \uacc4\uc0b0 \uacb0\uacfc\ub97c \ubc14\ub85c TDEE \uacc4\uc0b0\uc5d0 \uc0ac\uc6a9\n        let tdeeOutput: CalculateTDEEUseCase.Output\n        do {\n            tdeeOutput = try calculateTDEEUseCase.execute(\n                bmrOutput: bmrOutput,\n                activityLevel: input.userProfile.activityLevel\n            )\n        } catch {\n            throw RecordError.tdeeCalculationFailed(error)\n        }\n\n        // Step 3: \ub3c4\uba54\uc778 \uc5d4\ud2f0\ud2f0 \uc0dd\uc131\n        // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Domain Entity Creation\n        // \uacc4\uc0b0\ub41c \uac12\ub4e4\uc744 \uc0ac\uc6a9\ud558\uc5ec \uc800\uc7a5\ud560 \uc5d4\ud2f0\ud2f0 \uc0dd\uc131\n        let bodyEntry = BodyCompositionEntry(\n            date: input.date,\n            weight: input.weight,\n            bodyFatPercent: input.bodyFatPercent,\n            muscleMass: input.muscleMass\n        )\n\n        let metabolismData = MetabolismData(\n            date: input.date,\n            bmr: bmrOutput.bmr,\n            tdee: tdeeOutput.tdee,\n            weight: input.weight,\n            bodyFatPercent: input.bodyFatPercent,\n            activityLevel: input.userProfile.activityLevel\n        )\n\n        // Step 4: \uc800\uc7a5\uc18c\uc5d0 \uc800\uc7a5\n        // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Repository Pattern\n        // \ub370\uc774\ud130 \uc800\uc7a5 \uc138\ubd80\uc0ac\ud56d\uc744 \ucd94\uc0c1\ud654\ud558\uc5ec Use Case\ub294 \ube44\uc988\ub2c8\uc2a4 \ub85c\uc9c1\uc5d0\ub9cc \uc9d1\uc911\n        let savedEntry: BodyCompositionEntry\n        do {\n            savedEntry = try await bodyRepository.save(\n                entry: bodyEntry,\n                metabolismData: metabolismData\n            )\n        } catch {\n            throw RecordError.saveFailed(error)\n        }\n\n        // Step 5: \uc0ac\uc6a9\uc790 \ud604\uc7ac \uac12 \uc5c5\ub370\uc774\ud2b8\n        // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Side Effect\n        // \uc800\uc7a5 \uc791\uc5c5\uacfc \ud568\uaed8 \uc0ac\uc6a9\uc790\uc758 \ud604\uc7ac \uac12\ub3c4 \uc5c5\ub370\uc774\ud2b8\n        // TODO: UserRepository\ub97c \ud1b5\ud574 User \uc5d4\ud2f0\ud2f0\uc758 currentWeight, currentBMR \ub4f1 \uc5c5\ub370\uc774\ud2b8\n        // \uc608\uc2dc \ucf54\ub4dc (UserRepository \uad6c\ud604 \ud6c4 \ud65c\uc131\ud654):\n        // try await userRepository.updateCurrentValues(\n        //     weight: input.weight,\n        //     bodyFatPercent: input.bodyFatPercent,\n        //     muscleMass: input.muscleMass,\n        //     bmr: bmrOutput.bmr,\n        //     tdee: tdeeOutput.tdee\n        // )\n\n        // Step 6: \uacb0\uacfc \ubc18\ud658\n        // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Successful Completion\n        // \ubaa8\ub4e0 \uc791\uc5c5\uc774 \uc131\uacf5\ud558\uba74 \uc800\uc7a5\ub41c \ub370\uc774\ud130\uc640 \uacc4\uc0b0\ub41c \ub300\uc0ac\uc728 \uc815\ubcf4 \ubc18\ud658\n        return Output(\n            bodyEntry: savedEntry,\n            metabolismData: metabolismData\n        )\n    }\n\n    // MARK: - Convenience Methods\n\n    /// \uac1c\ubcc4 \ud30c\ub77c\ubbf8\ud130\ub97c \uc0ac\uc6a9\ud55c \ud3b8\uc758 \uba54\uc11c\ub4dc\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Convenience Method\n    /// \uac1c\ubcc4 \ud30c\ub77c\ubbf8\ud130\ub97c \ubc1b\uc544\uc11c Input\uc73c\ub85c \ubcc0\ud658\ud558\ub294 \ud5ec\ud37c \uba54\uc11c\ub4dc\n    /// \ud83d\udca1 \uc0ac\uc6a9\ucc98: ViewModel\uc5d0\uc11c \uc27d\uac8c \ud638\ucd9c \uac00\ub2a5\n    ///\n    /// - Parameters:\n    ///   - date: \uce21\uc815 \ub0a0\uc9dc (\uae30\ubcf8\uac12: \ud604\uc7ac \uc2dc\uac04)\n    ///   - weight: \uccb4\uc911 (kg)\n    ///   - bodyFatPercent: \uccb4\uc9c0\ubc29\ub960 (%)\n    ///   - muscleMass: \uadfc\uc721\ub7c9 (kg)\n    ///   - userProfile: \uc0ac\uc6a9\uc790 \ud504\ub85c\ud544\n    /// - Returns: \uc800\uc7a5\ub41c \ub370\uc774\ud130\uc640 \uacc4\uc0b0\ub41c \ub300\uc0ac\uc728 \uc815\ubcf4\n    /// - Throws: RecordError\n    func execute(\n        date: Date = Date(),\n        weight: Decimal,\n        bodyFatPercent: Decimal,\n        muscleMass: Decimal,\n        userProfile: UserProfile\n    ) async throws -> Output {\n        let input = Input(\n            date: date,\n            weight: weight,\n            bodyFatPercent: bodyFatPercent,\n            muscleMass: muscleMass,\n            userProfile: userProfile\n        )\n        return try await execute(input: input)\n    }\n}\n\n// MARK: - Sample Usage\n\nextension RecordBodyCompositionUseCase {\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Sample Data for Testing\n    /// Use Case\uc758 \uc0ac\uc6a9 \uc608\uc2dc\uc640 \ud14c\uc2a4\ud2b8\ub97c \uc704\ud55c \uc0d8\ud50c \ub370\uc774\ud130\n    /// \ud83d\udca1 Java \ube44\uad50: JUnit\uc758 @Test fixture\uc640 \uc720\uc0ac\n\n    /// \uc0d8\ud50c \uc785\ub825 - 30\uc138 \ub0a8\uc131, 70kg, \uccb4\uc9c0\ubc29\ub960 18.5%, \uadfc\uc721\ub7c9 32kg\n    static func sampleInput() -> Input {\n        return Input(\n            date: Date(),\n            weight: Decimal(70.0),\n            bodyFatPercent: Decimal(18.5),\n            muscleMass: Decimal(32.0),\n            userProfile: UserProfile.sample\n        )\n    }\n}\n\n// MARK: - Documentation\n\n/// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Orchestration Use Case \uc774\ud574\n///\n/// RecordBodyCompositionUseCase\uc758 \uc5ed\ud560:\n/// - \uc5ec\ub7ec Use Case\ub97c \uc870\ud569\ud558\uc5ec \ubcf5\uc7a1\ud55c \ube44\uc988\ub2c8\uc2a4 \ud504\ub85c\uc138\uc2a4 \uad6c\ud604\n/// - \ud2b8\ub79c\uc7ad\uc158 \uacbd\uacc4 \uc5ed\ud560 (\ubaa8\ub4e0 \uc791\uc5c5\uc774 \uc131\uacf5\ud558\uac70\ub098 \ubaa8\ub450 \uc2e4\ud328)\n/// - \ube44\uc988\ub2c8\uc2a4 \uaddc\uce59 \uac80\uc99d \ubc0f \uc5d0\ub7ec \ucc98\ub9ac\n///\n/// \ube44\uc988\ub2c8\uc2a4 \ud50c\ub85c\uc6b0:\n/// 1. \uc785\ub825 \uac80\uc99d: \uccb4\uc911, \uccb4\uc9c0\ubc29\ub960, \uadfc\uc721\ub7c9\uc758 \ubc94\uc704\uc640 \uc77c\uad00\uc131 \ud655\uc778\n/// 2. BMR \uacc4\uc0b0: Mifflin-St Jeor \uacf5\uc2dd \uc0ac\uc6a9 (CalculateBMRUseCase)\n/// 3. TDEE \uacc4\uc0b0: BMR \u00d7 Activity Multiplier (CalculateTDEEUseCase)\n/// 4. \uc5d4\ud2f0\ud2f0 \uc0dd\uc131: BodyCompositionEntry\uc640 MetabolismData \uc0dd\uc131\n/// 5. \uc800\uc7a5: Repository\ub97c \ud1b5\ud574 Core Data\uc5d0 \uc800\uc7a5\n/// 6. \uc0ac\uc6a9\uc790 \uc5c5\ub370\uc774\ud2b8: User \uc5d4\ud2f0\ud2f0\uc758 \ud604\uc7ac \uac12 \uc5c5\ub370\uc774\ud2b8 (\ud5a5\ud6c4 \uad6c\ud604)\n///\n/// \uc5d0\ub7ec \ucc98\ub9ac:\n/// - \uac01 \ub2e8\uacc4\uc758 \uc5d0\ub7ec\ub97c \uc801\uc808\ud55c RecordError\ub85c \ubcc0\ud658\n/// - \uacc4\uce35\ubcc4\ub85c \uc5d0\ub7ec\ub97c \ubd84\ub9ac\ud558\uc5ec \ub354 \ub098\uc740 \ub514\ubc84\uae45\uacfc \uc0ac\uc6a9\uc790 \ud53c\ub4dc\ubc31 \uc81c\uacf5\n/// - \uc800\uc7a5 \uc2e4\ud328 \uc2dc \uc790\ub3d9 \ub864\ubc31 (Core Data\uc758 \ud2b8\ub79c\uc7ad\uc158 \ud2b9\uc131)\n///\n/// Clean Architecture\uc5d0\uc11c\uc758 \uc704\uce58:\n/// - Domain Layer\uc758 Use Case\n/// - \ub2e4\ub978 Use Case\uc640 Repository\uc5d0 \uc758\uc874\n/// - Presentation Layer (ViewModel)\uc5d0\uc11c \ud638\ucd9c\ub428\n///\n/// \ud83d\udca1 Java Spring\uacfc\uc758 \ube44\uad50:\n/// - Spring: @Service class with @Transactional\n/// - Swift: Struct with async/await\n/// - Spring: \uc5ec\ub7ec Service\ub97c @Autowired\ub85c \uc8fc\uc785\n/// - Swift: \uc0dd\uc131\uc790\ub85c \uc758\uc874\uc131 \uc8fc\uc785\n///\n/// \uc0ac\uc6a9 \uc608\uc2dc:\n/// ```swift\n/// let useCase = RecordBodyCompositionUseCase(bodyRepository: repository)\n///\n/// do {\n///     let result = try await useCase.execute(\n///         weight: 70.0,\n///         bodyFatPercent: 18.5,\n///         muscleMass: 32.0,\n///         userProfile: userProfile\n///     )\n///\n///     print(\"\uc800\uc7a5 \uc644\ub8cc!\")\n///     print(\"BMR: \\(result.bmr) kcal/day\")\n///     print(\"TDEE: \\(result.tdee) kcal/day\")\n/// } catch {\n///     print(\"\uc5d0\ub7ec \ubc1c\uc0dd: \\(error.localizedDescription)\")\n/// }\n/// ```\n///\n",
        "last_modified": "2026-01-14T22:58:13.152813"
      },
      "task_intent": {
        "title": "Body Composition Tracking with BMR/TDEE",
        "description": "Complete body composition logging system including height, weight, body fat percentage, muscle mass, with automatic BMR (Mifflin-St Jeor) and TDEE calculations. Visualize changes over time with Swift Charts graphs showing trends and goal progress.",
        "from_plan": true
      },
      "commits_behind_main": 1,
      "status": "active",
      "merged_at": null
    }
  },
  "created_at": "2026-01-13T07:43:04.605450",
  "last_updated": "2026-01-13T07:46:22.857287"
}