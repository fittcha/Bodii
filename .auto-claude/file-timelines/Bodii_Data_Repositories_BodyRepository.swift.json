{
  "file_path": "Bodii/Data/Repositories/BodyRepository.swift",
  "main_branch_history": [],
  "task_views": {
    "003-body-composition-tracking-with-bmr-tdee": {
      "task_id": "003-body-composition-tracking-with-bmr-tdee",
      "branch_point": {
        "commit_hash": "2abdae73fb6199bcbf4f21f6deeb7952225f81e6",
        "content": "",
        "timestamp": "2026-01-13T07:46:22.394743"
      },
      "worktree_state": {
        "content": "//\n//  BodyRepository.swift\n//  Bodii\n//\n//  Created by Auto-Claude on 2026-01-12.\n//\n\n// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Repository Implementation\n// Repository \ud328\ud134\uc758 \uad6c\ud604\uccb4 - \ub370\uc774\ud130 \uc18c\uc2a4\ub97c \ucd94\uc0c1\ud654\ud558\uc5ec \ub3c4\uba54\uc778 \ub808\uc774\uc5b4\uc5d0 \uc81c\uacf5\n// \ud83d\udca1 Java \ube44\uad50: Spring Data JPA\uc758 Repository \uad6c\ud604\uccb4\uc640 \uc720\uc0ac\n\nimport Foundation\n\n// MARK: - BodyRepository\n\n/// BodyRepositoryProtocol\uc758 \uad6c\ud604\uccb4\n/// \ub85c\uceec \ub370\uc774\ud130 \uc18c\uc2a4(Core Data)\ub97c \uc0ac\uc6a9\ud558\uc5ec \uc2e0\uccb4 \uad6c\uc131 \ub370\uc774\ud130\ub97c \uad00\ub9ac\ud569\ub2c8\ub2e4.\n/// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Clean Architecture - Data Layer\n/// - Protocol\ub85c \uc815\uc758\ub41c \uc778\ud130\ud398\uc774\uc2a4\ub97c \uad6c\ud604\n/// - Local Data Source\ub97c \uc0ac\uc6a9\ud558\uc5ec \uc2e4\uc81c \ub370\uc774\ud130 \uc791\uc5c5 \uc218\ud589\n/// - Mapper\ub97c \ud1b5\ud574 Domain Entity\uc640 Data Entity \ubcc0\ud658\n/// - \uc5d0\ub7ec\ub97c Domain \ub808\uc774\uc5b4\uc758 \uc5d0\ub7ec\ub85c \ubcc0\ud658\n/// \ud83d\udca1 Java \ube44\uad50: @Repository \uc5b4\ub178\ud14c\uc774\uc158\uc774 \ubd99\uc740 \uad6c\ud604 \ud074\ub798\uc2a4\uc640 \uc720\uc0ac\nfinal class BodyRepository: BodyRepositoryProtocol {\n\n    // MARK: - Properties\n\n    /// \ub85c\uceec \ub370\uc774\ud130 \uc18c\uc2a4 (Core Data \uc791\uc5c5 \ub2f4\ub2f9)\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Dependency Injection\n    /// - \uc678\ubd80\uc5d0\uc11c \uc8fc\uc785\ubc1b\uc544 \uc0ac\uc6a9\n    /// - \ud14c\uc2a4\ud2b8 \uc2dc Mock \uac1d\uccb4\ub85c \uad50\uccb4 \uac00\ub2a5\n    /// \ud83d\udca1 Java \ube44\uad50: @Autowired private BodyLocalDataSource \uc640 \uc720\uc0ac\n    private let localDataSource: BodyLocalDataSource\n\n    // MARK: - Initialization\n\n    /// BodyRepository \ucd08\uae30\ud654\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Constructor Injection\n    /// - \uc758\uc874\uc131\uc744 \uc0dd\uc131\uc790\ub97c \ud1b5\ud574 \uc8fc\uc785\ubc1b\uc74c\n    /// - \uae30\ubcf8\uac12\uc73c\ub85c \uc2e4\uc81c \uad6c\ud604\uccb4 \uc0ac\uc6a9\n    /// - \ud14c\uc2a4\ud2b8 \uc2dc Mock \uc8fc\uc785 \uac00\ub2a5\n    /// \ud83d\udca1 Java \ube44\uad50: @Autowired \uc0dd\uc131\uc790 \uc8fc\uc785\uacfc \uc720\uc0ac\n    ///\n    /// - Parameter localDataSource: \ub85c\uceec \ub370\uc774\ud130 \uc18c\uc2a4 (\uae30\ubcf8\uac12: \uc0c8 \uc778\uc2a4\ud134\uc2a4)\n    init(localDataSource: BodyLocalDataSource = BodyLocalDataSource()) {\n        self.localDataSource = localDataSource\n    }\n\n    // MARK: - Create\n\n    /// \uc0c8\ub85c\uc6b4 \uc2e0\uccb4 \uad6c\uc131 \uae30\ub85d\uc744 \uc800\uc7a5\ud569\ub2c8\ub2e4.\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Error Handling\n    /// - Data Source\uc758 \uc5d0\ub7ec\ub97c Repository \uc5d0\ub7ec\ub85c \ubcc0\ud658\n    /// - \ub3c4\uba54\uc778 \ub808\uc774\uc5b4\uac00 infrastructure \uc5d0\ub7ec\ub97c \uc54c \ud544\uc694 \uc5c6\uc74c\n    /// \ud83d\udca1 Java \ube44\uad50: @Transactional \uba54\uc11c\ub4dc\uc640 \uc720\uc0ac\ud55c \ub3d9\uc791\n    ///\n    /// - Parameters:\n    ///   - entry: \uc800\uc7a5\ud560 \uc2e0\uccb4 \uad6c\uc131 \ub370\uc774\ud130\n    ///   - metabolismData: \ud568\uaed8 \uc800\uc7a5\ud560 \ub300\uc0ac\uc728 \ub370\uc774\ud130\n    /// - Returns: \uc800\uc7a5\ub41c \uc2e0\uccb4 \uad6c\uc131 \ub370\uc774\ud130 (ID\uac00 \ud560\ub2f9\ub428)\n    /// - Throws: RepositoryError - \uc800\uc7a5 \uc2e4\ud328 \uc2dc\n    func save(entry: BodyCompositionEntry, metabolismData: MetabolismData) async throws -> BodyCompositionEntry {\n        do {\n            // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Async/Await Chain\n            // Local Data Source\uc758 \ube44\ub3d9\uae30 \uba54\uc11c\ub4dc\ub97c \ud638\ucd9c\ud558\uace0 \uacb0\uacfc \ubc18\ud658\n            return try await localDataSource.save(entry: entry, metabolismData: metabolismData)\n        } catch {\n            // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Error Transformation\n            // Infrastructure \uc5d0\ub7ec\ub97c Domain \uc5d0\ub7ec\ub85c \ubcc0\ud658\n            throw RepositoryError.saveFailed(error.localizedDescription)\n        }\n    }\n\n    // MARK: - Read (Single)\n\n    /// ID\ub85c \ud2b9\uc815 \uc2e0\uccb4 \uad6c\uc131 \uae30\ub85d\uc744 \uc870\ud68c\ud569\ub2c8\ub2e4.\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Optional Result\n    /// - \ub370\uc774\ud130\uac00 \uc5c6\uc73c\uba74 nil \ubc18\ud658 (\uc5d0\ub7ec\uac00 \uc544\ub2d8)\n    /// - \uc5d0\ub7ec\ub294 \uc608\uc678 \uc0c1\ud669 (DB \uc811\uadfc \uc2e4\ud328 \ub4f1)\n    ///\n    /// - Parameter id: \uc870\ud68c\ud560 \uae30\ub85d\uc758 \uace0\uc720 \uc2dd\ubcc4\uc790\n    /// - Returns: \uc2e0\uccb4 \uad6c\uc131 \ub370\uc774\ud130 (\uc5c6\uc73c\uba74 nil)\n    /// - Throws: RepositoryError - \uc870\ud68c \uc2e4\ud328 \uc2dc\n    func fetch(by id: UUID) async throws -> BodyCompositionEntry? {\n        do {\n            return try await localDataSource.fetch(by: id)\n        } catch {\n            throw RepositoryError.fetchFailed(error.localizedDescription)\n        }\n    }\n\n    /// \ud2b9\uc815 \ub0a0\uc9dc\uc758 \uc2e0\uccb4 \uad6c\uc131 \uae30\ub85d\uc744 \uc870\ud68c\ud569\ub2c8\ub2e4.\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Business Logic Delegation\n    /// - \ub0a0\uc9dc \ubc94\uc704 \uacc4\uc0b0 \ub4f1\uc758 \ub85c\uc9c1\uc740 Data Source\uc5d0 \uc704\uc784\n    /// - Repository\ub294 \ub2e8\uc21c\ud788 \uc911\uacc4 \uc5ed\ud560\n    ///\n    /// - Parameter date: \uc870\ud68c\ud560 \ub0a0\uc9dc\n    /// - Returns: \ud574\ub2f9 \ub0a0\uc9dc\uc758 \uc2e0\uccb4 \uad6c\uc131 \ub370\uc774\ud130 (\uc5c6\uc73c\uba74 nil)\n    /// - Throws: RepositoryError - \uc870\ud68c \uc2e4\ud328 \uc2dc\n    func fetch(for date: Date) async throws -> BodyCompositionEntry? {\n        do {\n            return try await localDataSource.fetch(for: date)\n        } catch {\n            throw RepositoryError.fetchFailed(error.localizedDescription)\n        }\n    }\n\n    /// \uac00\uc7a5 \ucd5c\uadfc\uc758 \uc2e0\uccb4 \uad6c\uc131 \uae30\ub85d\uc744 \uc870\ud68c\ud569\ub2c8\ub2e4.\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Common Query Pattern\n    /// - \ub300\uc2dc\ubcf4\ub4dc\ub098 \ud604\uc7ac \uc0c1\ud0dc \ud45c\uc2dc\uc5d0 \uc790\uc8fc \uc0ac\uc6a9\n    /// - \ub370\uc774\ud130 \uc18c\uc2a4\uc758 \ucd5c\uc801\ud654\ub41c \ucffc\ub9ac \ud65c\uc6a9\n    ///\n    /// - Returns: \uac00\uc7a5 \ucd5c\uadfc \uc2e0\uccb4 \uad6c\uc131 \ub370\uc774\ud130 (\uc5c6\uc73c\uba74 nil)\n    /// - Throws: RepositoryError - \uc870\ud68c \uc2e4\ud328 \uc2dc\n    func fetchLatest() async throws -> BodyCompositionEntry? {\n        do {\n            return try await localDataSource.fetchLatest()\n        } catch {\n            throw RepositoryError.fetchFailed(error.localizedDescription)\n        }\n    }\n\n    // MARK: - Read (Multiple)\n\n    /// \ubaa8\ub4e0 \uc2e0\uccb4 \uad6c\uc131 \uae30\ub85d\uc744 \uc870\ud68c\ud569\ub2c8\ub2e4.\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Collection Return\n    /// - \ube48 \ubc30\uc5f4\ub3c4 \uc815\uc0c1\uc801\uc778 \uacb0\uacfc (nil\uc774 \uc544\ub2d8)\n    /// - \ub370\uc774\ud130\uac00 \ub9ce\uc744 \uacbd\uc6b0 \uc131\ub2a5 \uc774\uc288 \uac00\ub2a5\uc131\n    ///\n    /// - Returns: \ubaa8\ub4e0 \uc2e0\uccb4 \uad6c\uc131 \ub370\uc774\ud130 \ubc30\uc5f4 (\ube44\uc5b4\uc788\uc744 \uc218 \uc788\uc74c)\n    /// - Throws: RepositoryError - \uc870\ud68c \uc2e4\ud328 \uc2dc\n    func fetchAll() async throws -> [BodyCompositionEntry] {\n        do {\n            return try await localDataSource.fetchAll()\n        } catch {\n            throw RepositoryError.fetchFailed(error.localizedDescription)\n        }\n    }\n\n    /// \uc9c0\uc815\ub41c \uae30\uac04\uc758 \uc2e0\uccb4 \uad6c\uc131 \uae30\ub85d\uc744 \uc870\ud68c\ud569\ub2c8\ub2e4.\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Date Range Query\n    /// - \ud2b8\ub80c\ub4dc \ucc28\ud2b8\ub97c \uc704\ud55c \ud575\uc2ec \ucffc\ub9ac\n    /// - \uc2dc\uc791/\uc885\ub8cc \ub0a0\uc9dc\ub97c \ubaa8\ub450 \ud3ec\ud568\ud558\ub294 \ubc94\uc704\n    ///\n    /// - Parameters:\n    ///   - startDate: \uc870\ud68c \uc2dc\uc791 \ub0a0\uc9dc (inclusive)\n    ///   - endDate: \uc870\ud68c \uc885\ub8cc \ub0a0\uc9dc (inclusive)\n    /// - Returns: \uae30\uac04 \ub0b4 \uc2e0\uccb4 \uad6c\uc131 \ub370\uc774\ud130 \ubc30\uc5f4 (\ub0a0\uc9dc \uc624\ub984\ucc28\uc21c)\n    /// - Throws: RepositoryError - \uc870\ud68c \uc2e4\ud328 \uc2dc\n    func fetch(from startDate: Date, to endDate: Date) async throws -> [BodyCompositionEntry] {\n        do {\n            return try await localDataSource.fetch(from: startDate, to: endDate)\n        } catch {\n            throw RepositoryError.fetchFailed(error.localizedDescription)\n        }\n    }\n\n    /// \ucd5c\uadfc N\uc77c\uac04\uc758 \uc2e0\uccb4 \uad6c\uc131 \uae30\ub85d\uc744 \uc870\ud68c\ud569\ub2c8\ub2e4.\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Convenience Method\n    /// - fetch(from:to:)\uc758 \ud3b8\uc758 \uba54\uc11c\ub4dc\n    /// - \uc790\uc8fc \uc0ac\uc6a9\ub418\ub294 \ud328\ud134\uc744 \uac04\ub2e8\ud788 \ud45c\ud604\n    ///\n    /// - Parameter days: \uc870\ud68c\ud560 \uc77c\uc218 (\uc608: 7, 30, 90)\n    /// - Returns: \ucd5c\uadfc N\uc77c\uac04\uc758 \uc2e0\uccb4 \uad6c\uc131 \ub370\uc774\ud130 \ubc30\uc5f4 (\ub0a0\uc9dc \uc624\ub984\ucc28\uc21c)\n    /// - Throws: RepositoryError - \uc870\ud68c \uc2e4\ud328 \uc2dc\n    func fetchRecent(days: Int) async throws -> [BodyCompositionEntry] {\n        do {\n            return try await localDataSource.fetchRecent(days: days)\n        } catch {\n            throw RepositoryError.fetchFailed(error.localizedDescription)\n        }\n    }\n\n    // MARK: - Update\n\n    /// \uae30\uc874 \uc2e0\uccb4 \uad6c\uc131 \uae30\ub85d\uc744 \uc218\uc815\ud569\ub2c8\ub2e4.\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Update Operation\n    /// - ID\ub85c \uae30\uc874 \ub808\ucf54\ub4dc\ub97c \ucc3e\uc544\uc11c \uc5c5\ub370\uc774\ud2b8\n    /// - MetabolismData\ub3c4 \ud568\uaed8 \uc5c5\ub370\uc774\ud2b8\n    ///\n    /// - Parameters:\n    ///   - entry: \uc218\uc815\ud560 \uc2e0\uccb4 \uad6c\uc131 \ub370\uc774\ud130 (ID \ud3ec\ud568)\n    ///   - metabolismData: \ud568\uaed8 \uc218\uc815\ud560 \ub300\uc0ac\uc728 \ub370\uc774\ud130\n    /// - Returns: \uc218\uc815\ub41c \uc2e0\uccb4 \uad6c\uc131 \ub370\uc774\ud130\n    /// - Throws: RepositoryError - \uc218\uc815 \uc2e4\ud328 \uc2dc\n    func update(entry: BodyCompositionEntry, metabolismData: MetabolismData) async throws -> BodyCompositionEntry {\n        do {\n            return try await localDataSource.update(entry: entry, metabolismData: metabolismData)\n        } catch {\n            // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Specific Error Handling\n            // \uc5d0\ub7ec \uba54\uc2dc\uc9c0\uc5d0\uc11c \"\ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4\" \ubb38\uc790\uc5f4\uc774 \uc788\uc73c\uba74 notFound \uc5d0\ub7ec\ub85c \ubcc0\ud658\n            if error.localizedDescription.contains(\"\ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4\") {\n                throw RepositoryError.notFound(entry.id)\n            }\n            throw RepositoryError.updateFailed(error.localizedDescription)\n        }\n    }\n\n    // MARK: - Delete\n\n    /// \ud2b9\uc815 \uc2e0\uccb4 \uad6c\uc131 \uae30\ub85d\uc744 \uc0ad\uc81c\ud569\ub2c8\ub2e4.\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Cascade Delete\n    /// - \uc5f0\uad00\ub41c MetabolismData\ub3c4 \ud568\uaed8 \uc0ad\uc81c\n    /// - Core Data \ubaa8\ub378\uc5d0\uc11c cascade rule \uc124\uc815\ub428\n    ///\n    /// - Parameter id: \uc0ad\uc81c\ud560 \uae30\ub85d\uc758 \uace0\uc720 \uc2dd\ubcc4\uc790\n    /// - Throws: RepositoryError - \uc0ad\uc81c \uc2e4\ud328 \uc2dc\n    func delete(by id: UUID) async throws {\n        do {\n            try await localDataSource.delete(by: id)\n        } catch {\n            // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Specific Error Handling\n            // \uc5d0\ub7ec \uba54\uc2dc\uc9c0\uc5d0\uc11c \"\ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4\" \ubb38\uc790\uc5f4\uc774 \uc788\uc73c\uba74 notFound \uc5d0\ub7ec\ub85c \ubcc0\ud658\n            if error.localizedDescription.contains(\"\ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4\") {\n                throw RepositoryError.notFound(id)\n            }\n            throw RepositoryError.deleteFailed(error.localizedDescription)\n        }\n    }\n\n    /// \ubaa8\ub4e0 \uc2e0\uccb4 \uad6c\uc131 \uae30\ub85d\uc744 \uc0ad\uc81c\ud569\ub2c8\ub2e4.\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Bulk Delete\n    /// - \ud14c\uc2a4\ud2b8\ub098 \ub370\uc774\ud130 \ucd08\uae30\ud654\uc5d0 \uc0ac\uc6a9\n    /// - \ud83d\udca1 \uc8fc\uc758: \uc2e4\uc81c \uc571\uc5d0\uc11c\ub294 \uc2e0\uc911\ud558\uac8c \uc0ac\uc6a9\ud574\uc57c \ud568\n    ///\n    /// - Throws: RepositoryError - \uc0ad\uc81c \uc2e4\ud328 \uc2dc\n    func deleteAll() async throws {\n        do {\n            try await localDataSource.deleteAll()\n        } catch {\n            throw RepositoryError.deleteFailed(error.localizedDescription)\n        }\n    }\n\n    // MARK: - Metabolism Data\n\n    /// \ud2b9\uc815 \uc2e0\uccb4 \uad6c\uc131 \uae30\ub85d\uacfc \uc5f0\uacb0\ub41c \ub300\uc0ac\uc728 \ub370\uc774\ud130\ub97c \uc870\ud68c\ud569\ub2c8\ub2e4.\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Related Entity Query\n    /// - 1:1 \uad00\uacc4\uc758 \uc5f0\uad00 \uc5d4\ud2f0\ud2f0 \uc870\ud68c\n    /// - \ud788\uc2a4\ud1a0\ub9ac\uceec BMR/TDEE \ud2b8\ub798\ud0b9\uc5d0 \uc0ac\uc6a9\n    ///\n    /// - Parameter bodyEntryId: \uc2e0\uccb4 \uad6c\uc131 \uae30\ub85d ID\n    /// - Returns: \uc5f0\uacb0\ub41c \ub300\uc0ac\uc728 \ub370\uc774\ud130 (\uc5c6\uc73c\uba74 nil)\n    /// - Throws: RepositoryError - \uc870\ud68c \uc2e4\ud328 \uc2dc\n    func fetchMetabolismData(for bodyEntryId: UUID) async throws -> MetabolismData? {\n        do {\n            return try await localDataSource.fetchMetabolismData(for: bodyEntryId)\n        } catch {\n            throw RepositoryError.fetchFailed(error.localizedDescription)\n        }\n    }\n\n    // MARK: - Statistics\n\n    /// \uc9c0\uc815\ub41c \uae30\uac04\uc758 \ud1b5\uacc4 \ub370\uc774\ud130\ub97c \uc870\ud68c\ud569\ub2c8\ub2e4.\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Aggregate Query\n    /// - \ud3c9\uade0, \ucd5c\uc18c, \ucd5c\ub300 \ub4f1\uc758 \ud1b5\uacc4 \uacc4\uc0b0\n    /// - \ucc28\ud2b8 \uc694\uc57d \uc815\ubcf4\uc5d0 \uc0ac\uc6a9\n    ///\n    /// - Parameters:\n    ///   - startDate: \uc870\ud68c \uc2dc\uc791 \ub0a0\uc9dc\n    ///   - endDate: \uc870\ud68c \uc885\ub8cc \ub0a0\uc9dc\n    /// - Returns: \uae30\uac04 \ub0b4 \ud1b5\uacc4 \ub370\uc774\ud130\n    /// - Throws: RepositoryError - \uc870\ud68c \uc2e4\ud328 \uc2dc\n    func fetchStatistics(from startDate: Date, to endDate: Date) async throws -> BodyCompositionStatistics {\n        do {\n            return try await localDataSource.fetchStatistics(from: startDate, to: endDate)\n        } catch {\n            throw RepositoryError.fetchFailed(error.localizedDescription)\n        }\n    }\n}\n\n// MARK: - Documentation\n\n/// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Repository Pattern Implementation \uc774\ud574\n///\n/// Repository\uc758 \uc5ed\ud560:\n/// - Protocol\ub85c \uc815\uc758\ub41c \uc778\ud130\ud398\uc774\uc2a4\ub97c \uad6c\ud604\n/// - Data Source\ub97c \uc0ac\uc6a9\ud558\uc5ec \uc2e4\uc81c \ub370\uc774\ud130 \uc791\uc5c5 \uc218\ud589\n/// - Domain Layer\uac00 Data Layer\uc758 \uad6c\ud604 \uc138\ubd80\uc0ac\ud56d\uc744 \uc54c\uc9c0 \ubabb\ud558\ub3c4\ub85d \uaca9\ub9ac\n/// - \uc5d0\ub7ec\ub97c Domain \ub808\uc774\uc5b4\uc758 \uc5d0\ub7ec\ub85c \ubcc0\ud658\n///\n/// \uc65c Repository Layer\uac00 \ud544\uc694\ud55c\uac00?\n/// 1. \ucd94\uc0c1\ud654 (Abstraction)\n///    - Domain Layer\ub294 \ub370\uc774\ud130\uac00 \uc5b4\ub514\uc5d0 \uc800\uc7a5\ub418\ub294\uc9c0 \uc54c \ud544\uc694 \uc5c6\uc74c\n///    - Core Data, Realm, Network API \ub4f1\uc73c\ub85c \uc27d\uac8c \uad50\uccb4 \uac00\ub2a5\n///\n/// 2. \ud14c\uc2a4\ud2b8 \uc6a9\uc774\uc131 (Testability)\n///    - Mock Repository\ub85c \uc27d\uac8c \ud14c\uc2a4\ud2b8 \uac00\ub2a5\n///    - Use Case\ub098 ViewModel\uc744 \ud14c\uc2a4\ud2b8\ud560 \ub54c \uc2e4\uc81c DB \ubd88\ud544\uc694\n///\n/// 3. \uc5d0\ub7ec \ubcc0\ud658 (Error Transformation)\n///    - Infrastructure \uc5d0\ub7ec\ub97c Domain \uc5d0\ub7ec\ub85c \ubcc0\ud658\n///    - \uc0c1\uc704 \ub808\uc774\uc5b4\uac00 Core Data \uc5d0\ub7ec\ub97c \uc9c1\uc811 \ucc98\ub9ac\ud560 \ud544\uc694 \uc5c6\uc74c\n///\n/// 4. \uc77c\uad00\uc131 (Consistency)\n///    - \ub370\uc774\ud130 \uc811\uadfc \ub85c\uc9c1\uc744 \ud55c \uacf3\uc5d0 \uc9d1\uc911\n///    - \uc5ec\ub7ec Data Source\ub97c \uc870\ud569\ud560 \uc218 \uc788\uc74c (\uc608: Cache + Network)\n///\n/// Clean Architecture\uc5d0\uc11c\uc758 \uc704\uce58:\n/// ```\n/// Presentation Layer (ViewModels)\n///        \u2193\n/// Domain Layer (Use Cases) \u2190 BodyRepositoryProtocol (Interface)\n///        \u2193\n/// Data Layer (Repository) \u2190 BodyRepository (Implementation)\n///        \u2193\n/// Data Layer (Data Source) \u2190 BodyLocalDataSource\n///        \u2193\n/// Infrastructure (Core Data)\n/// ```\n///\n/// \uc774 Repository\uc758 \ud2b9\uc9d5:\n/// 1. \ub2e8\uc21c\ud55c \uc911\uacc4\uc790 (Simple Delegator)\n///    - \ubcf5\uc7a1\ud55c \ub85c\uc9c1\uc740 Data Source\ub098 Use Case\uc5d0 \uc704\uc784\n///    - \uc8fc\ub85c \uc5d0\ub7ec \ubcc0\ud658\uacfc \uba54\uc11c\ub4dc \ud638\ucd9c \uc911\uacc4 \uc5ed\ud560\n///\n/// 2. \uc5d0\ub7ec \ucc98\ub9ac (Error Handling)\n///    - Data Source\uc758 \uc5d0\ub7ec\ub97c RepositoryError\ub85c \ubcc0\ud658\n///    - \ud2b9\uc815 \uc5d0\ub7ec (notFound)\ub294 \ubcc4\ub3c4\ub85c \ucc98\ub9ac\n///\n/// 3. Async/Await \uc9c0\uc6d0\n///    - \ubaa8\ub4e0 \uba54\uc11c\ub4dc\uac00 \ube44\ub3d9\uae30 \ucc98\ub9ac\n///    - Main thread \ube14\ub85c\ud0b9 \uc5c6\uc774 \ub370\uc774\ud130 \uc791\uc5c5 \uc218\ud589\n///\n/// \ud5a5\ud6c4 \ud655\uc7a5 \uac00\ub2a5\uc131:\n/// - Remote Data Source \ucd94\uac00 (\uc11c\ubc84 \ub3d9\uae30\ud654)\n/// - Cache Layer \ucd94\uac00 (\uba54\ubaa8\ub9ac \uce90\uc2f1)\n/// - Offline-first \uc804\ub7b5 \uad6c\ud604\n/// - Conflict Resolution (\ucda9\ub3cc \ud574\uacb0)\n///\n/// \uc0ac\uc6a9 \uc608\uc2dc:\n/// ```swift\n/// // DI Container\uc5d0\uc11c \uc8fc\uc785\n/// let repository: BodyRepositoryProtocol = BodyRepository()\n///\n/// // Use Case\uc5d0\uc11c \uc0ac\uc6a9\n/// let entry = BodyCompositionEntry(weight: 70, bodyFatPercent: 18, muscleMass: 32)\n/// let metabolism = MetabolismData(bmr: 1650, tdee: 2280, ...)\n/// let saved = try await repository.save(entry: entry, metabolismData: metabolism)\n///\n/// // ViewModel\uc5d0\uc11c \uc0ac\uc6a9\n/// let recent = try await repository.fetchRecent(days: 7)\n/// ```\n///\n/// \ud83d\udca1 \uc2e4\ubb34 \ud301:\n/// - Repository\ub294 \ube44\uc988\ub2c8\uc2a4 \ub85c\uc9c1\uc744 \ud3ec\ud568\ud558\uc9c0 \uc54a\uc74c (Use Case\uc5d0\uc11c \ucc98\ub9ac)\n/// - \uc5ec\ub7ec Data Source\ub97c \uc870\ud569\ud560 \ub54c Repository\uc5d0\uc11c \ucc98\ub9ac\n/// - \uc5d0\ub7ec\ub294 \uad6c\uccb4\uc801\uc73c\ub85c \ubcc0\ud658\ud558\uc5ec \uc0c1\uc704 \ub808\uc774\uc5b4\uc5d0\uc11c \uc801\uc808\ud788 \ucc98\ub9ac \uac00\ub2a5\ud558\ub3c4\ub85d\n/// - \uc131\ub2a5 \ucd5c\uc801\ud654\ub294 Data Source \ub808\ubca8\uc5d0\uc11c \uc218\ud589\n/// - Repository\ub294 \ud56d\uc0c1 Protocol\uc744 \ud1b5\ud574 \uc0ac\uc6a9 (\uc9c1\uc811 \ucc38\uc870 \uc9c0\uc591)\n///\n/// \ud83d\udca1 Java Spring\uacfc\uc758 \ube44\uad50:\n/// - Spring: @Repository, JpaRepository \uc778\ud130\ud398\uc774\uc2a4 \uc0c1\uc18d\n/// - Swift: Protocol \uc815\uc758 \ud6c4 \uc9c1\uc811 \uad6c\ud604\n/// - Spring: \uc790\ub3d9 \ud2b8\ub79c\uc7ad\uc158 \uad00\ub9ac (@Transactional)\n/// - Swift: \uc218\ub3d9 \ud2b8\ub79c\uc7ad\uc158 \uad00\ub9ac (Context.save())\n///\n",
        "last_modified": "2026-01-14T22:58:13.148714"
      },
      "task_intent": {
        "title": "Body Composition Tracking with BMR/TDEE",
        "description": "Complete body composition logging system including height, weight, body fat percentage, muscle mass, with automatic BMR (Mifflin-St Jeor) and TDEE calculations. Visualize changes over time with Swift Charts graphs showing trends and goal progress.",
        "from_plan": true
      },
      "commits_behind_main": 1,
      "status": "active",
      "merged_at": null
    }
  },
  "created_at": "2026-01-13T07:43:04.494072",
  "last_updated": "2026-01-13T07:46:22.758220"
}