{
  "file_path": "Bodii/App/DIContainer.swift",
  "main_branch_history": [],
  "task_views": {
    "001-": {
      "task_id": "001-",
      "branch_point": {
        "commit_hash": "bffa4407a91d66f875164727541505e70fc173ed",
        "content": "",
        "timestamp": "2026-01-11T19:11:51.451495"
      },
      "worktree_state": {
        "content": "//\n//  DIContainer.swift\n//  Bodii\n//\n//  Created by Auto-Claude on 2026-01-11.\n//\n\n// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Dependency Injection Container\n// \uc571 \uc804\uccb4\uc5d0\uc11c \uc0ac\uc6a9\ub418\ub294 \uc758\uc874\uc131\ub4e4\uc744 \uc911\uc559\uc5d0\uc11c \uad00\ub9ac\ud558\ub294 \ucee8\ud14c\uc774\ub108\n// \ud83d\udca1 Java \ube44\uad50: Dagger/Hilt\uc758 Component\uc640 \uc720\uc0ac\ud55c \uc5ed\ud560\n\nimport Foundation\n\n// MARK: - DI Container\n\n/// \uc758\uc874\uc131 \uc8fc\uc785 \ucee8\ud14c\uc774\ub108\n/// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Singleton Pattern\n/// \uc571 \uc804\uc5ed\uc5d0\uc11c \ub2e8\uc77c \uc778\uc2a4\ud134\uc2a4\ub97c \ud1b5\ud574 \uc758\uc874\uc131\uc5d0 \uc811\uadfc\n/// \ud83d\udca1 Java \ube44\uad50: static getInstance() \ud328\ud134\uacfc \uc720\uc0ac\ud558\uc9c0\ub9cc \ub354 \uac04\uacb0\nfinal class DIContainer {\n\n    // MARK: - Singleton\n\n    /// \uacf5\uc720 \uc778\uc2a4\ud134\uc2a4\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: static let\n    /// Swift\uc5d0\uc11c \uc2f1\uae00\ud1a4\uc740 static let\uc73c\ub85c \uac04\ub2e8\ud788 \uad6c\ud604\n    /// Thread-safe\ud558\uac8c \ud55c \ubc88\ub9cc \ucd08\uae30\ud654\ub428 (Swift \ub7f0\ud0c0\uc784 \ubcf4\uc7a5)\n    static let shared = DIContainer()\n\n    // MARK: - Initialization\n\n    /// private init\uc73c\ub85c \uc678\ubd80 \uc778\uc2a4\ud134\uc2a4\ud654 \ubc29\uc9c0\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Access Control\n    /// private init\uc740 \uc678\ubd80\uc5d0\uc11c new\ub97c \ub9c9\uc544 \uc2f1\uae00\ud1a4 \ubcf4\uc7a5\n    /// \ud83d\udca1 Java \ube44\uad50: private constructor\uc640 \ub3d9\uc77c\n    private init() {}\n\n    // MARK: - Infrastructure\n\n    // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: lazy var\n    // \ucc98\uc74c \uc811\uadfc\ud560 \ub54c\ub9cc \ucd08\uae30\ud654\ub418\ub294 \ud504\ub85c\ud37c\ud2f0\n    // \ubb34\uac70\uc6b4 \uac1d\uccb4\uc758 \uc9c0\uc5f0 \ucd08\uae30\ud654\uc5d0 \uc720\uc6a9\n    // \ud83d\udca1 Java \ube44\uad50: Lazy initialization pattern\n\n    /// Persistence Controller (Core Data)\n    /// \u26a0\ufe0f \uc8fc\uc758: PersistenceController\ub294 \ubcc4\ub3c4\ub85c shared \uc778\uc2a4\ud134\uc2a4 \uad00\ub9ac\n\n    // MARK: - Data Sources\n\n    // TODO: Phase 2\uc5d0\uc11c \ucd94\uac00 \uc608\uc815\n    // - NetworkManager\n    // - HealthKitManager\n    // - FoodAPIDataSource\n    // - GeminiAPIDataSource\n\n    // MARK: - Repositories\n\n    // TODO: Phase 3\uc5d0\uc11c \ucd94\uac00 \uc608\uc815\n    // - UserRepository\n    // - BodyRepository\n    // - FoodRepository\n    // - ExerciseRepository\n    // - SleepRepository\n    // - GoalRepository\n\n    // MARK: - Use Cases\n\n    // TODO: Phase 4\uc5d0\uc11c \ucd94\uac00 \uc608\uc815\n    // - CalculateBMRUseCase\n    // - CalculateTDEEUseCase\n    // - RecordBodyUseCase\n    // - SearchFoodUseCase\n    // - etc.\n\n    // MARK: - View Models\n\n    // TODO: Phase 5\uc5d0\uc11c \ucd94\uac00 \uc608\uc815\n    // - OnboardingViewModel\n    // - DashboardViewModel\n    // - BodyViewModel\n    // - etc.\n}\n\n// MARK: - Factory Methods\n\nextension DIContainer {\n\n    // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Factory Pattern\n    // \uc758\uc874\uc131 \uc0dd\uc131 \ub85c\uc9c1\uc744 \ucea1\uc290\ud654\n    // \ud14c\uc2a4\ud2b8 \uc2dc Mock \uac1d\uccb4\ub85c \uad50\uccb4 \uac00\ub2a5\n\n    // TODO: \uac01 Feature \uad6c\ud604 \uc2dc Factory \uba54\uc11c\ub4dc \ucd94\uac00\n    // func makeOnboardingViewModel() -> OnboardingViewModel\n    // func makeDashboardViewModel() -> DashboardViewModel\n    // func makeBodyViewModel() -> BodyViewModel\n}\n\n// MARK: - Testing Support\n\n#if DEBUG\nextension DIContainer {\n\n    /// \ud14c\uc2a4\ud2b8\uc6a9 \ucee8\ud14c\uc774\ub108 \uc0dd\uc131\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: #if DEBUG\n    /// \ub514\ubc84\uadf8 \ube4c\ub4dc\uc5d0\uc11c\ub9cc \ud3ec\ud568\ub418\ub294 \ucf54\ub4dc\n    /// \ud504\ub85c\ub355\uc158 \ube4c\ub4dc \ud06c\uae30\uc640 \ubcf4\uc548\uc5d0 \uc601\ud5a5 \uc5c6\uc74c\n    /// \ud83d\udca1 Java \ube44\uad50: BuildConfig.DEBUG \uccb4\ud06c\uc640 \uc720\uc0ac\n    static func makeForTesting() -> DIContainer {\n        return DIContainer()\n    }\n}\n#endif\n",
        "last_modified": "2026-01-11T19:36:37.966654"
      },
      "task_intent": {
        "title": "001-",
        "description": "",
        "from_plan": false
      },
      "commits_behind_main": 0,
      "status": "active",
      "merged_at": null
    },
    "003-body-composition-tracking-with-bmr-tdee": {
      "task_id": "003-body-composition-tracking-with-bmr-tdee",
      "branch_point": {
        "commit_hash": "2abdae73fb6199bcbf4f21f6deeb7952225f81e6",
        "content": "//\n//  DIContainer.swift\n//  Bodii\n//\n//  Created by Auto-Claude on 2026-01-11.\n//\n\n// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Dependency Injection Container\n// \uc571 \uc804\uccb4\uc5d0\uc11c \uc0ac\uc6a9\ub418\ub294 \uc758\uc874\uc131\ub4e4\uc744 \uc911\uc559\uc5d0\uc11c \uad00\ub9ac\ud558\ub294 \ucee8\ud14c\uc774\ub108\n// \ud83d\udca1 Java \ube44\uad50: Dagger/Hilt\uc758 Component\uc640 \uc720\uc0ac\ud55c \uc5ed\ud560\n\nimport Foundation\n\n// MARK: - DI Container\n\n/// \uc758\uc874\uc131 \uc8fc\uc785 \ucee8\ud14c\uc774\ub108\n/// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Singleton Pattern\n/// \uc571 \uc804\uc5ed\uc5d0\uc11c \ub2e8\uc77c \uc778\uc2a4\ud134\uc2a4\ub97c \ud1b5\ud574 \uc758\uc874\uc131\uc5d0 \uc811\uadfc\n/// \ud83d\udca1 Java \ube44\uad50: static getInstance() \ud328\ud134\uacfc \uc720\uc0ac\ud558\uc9c0\ub9cc \ub354 \uac04\uacb0\nfinal class DIContainer {\n\n    // MARK: - Singleton\n\n    /// \uacf5\uc720 \uc778\uc2a4\ud134\uc2a4\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: static let\n    /// Swift\uc5d0\uc11c \uc2f1\uae00\ud1a4\uc740 static let\uc73c\ub85c \uac04\ub2e8\ud788 \uad6c\ud604\n    /// Thread-safe\ud558\uac8c \ud55c \ubc88\ub9cc \ucd08\uae30\ud654\ub428 (Swift \ub7f0\ud0c0\uc784 \ubcf4\uc7a5)\n    static let shared = DIContainer()\n\n    // MARK: - Initialization\n\n    /// private init\uc73c\ub85c \uc678\ubd80 \uc778\uc2a4\ud134\uc2a4\ud654 \ubc29\uc9c0\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Access Control\n    /// private init\uc740 \uc678\ubd80\uc5d0\uc11c new\ub97c \ub9c9\uc544 \uc2f1\uae00\ud1a4 \ubcf4\uc7a5\n    /// \ud83d\udca1 Java \ube44\uad50: private constructor\uc640 \ub3d9\uc77c\n    private init() {}\n\n    // MARK: - Infrastructure\n\n    // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: lazy var\n    // \ucc98\uc74c \uc811\uadfc\ud560 \ub54c\ub9cc \ucd08\uae30\ud654\ub418\ub294 \ud504\ub85c\ud37c\ud2f0\n    // \ubb34\uac70\uc6b4 \uac1d\uccb4\uc758 \uc9c0\uc5f0 \ucd08\uae30\ud654\uc5d0 \uc720\uc6a9\n    // \ud83d\udca1 Java \ube44\uad50: Lazy initialization pattern\n\n    /// Persistence Controller (Core Data)\n    /// \u26a0\ufe0f \uc8fc\uc758: PersistenceController\ub294 \ubcc4\ub3c4\ub85c shared \uc778\uc2a4\ud134\uc2a4 \uad00\ub9ac\n\n    // MARK: - Data Sources\n\n    // TODO: Phase 2\uc5d0\uc11c \ucd94\uac00 \uc608\uc815\n    // - NetworkManager\n    // - HealthKitManager\n    // - FoodAPIDataSource\n    // - GeminiAPIDataSource\n\n    // MARK: - Repositories\n\n    // TODO: Phase 3\uc5d0\uc11c \ucd94\uac00 \uc608\uc815\n    // - UserRepository\n    // - BodyRepository\n    // - FoodRepository\n    // - ExerciseRepository\n    // - SleepRepository\n    // - GoalRepository\n\n    // MARK: - Use Cases\n\n    // TODO: Phase 4\uc5d0\uc11c \ucd94\uac00 \uc608\uc815\n    // - CalculateBMRUseCase\n    // - CalculateTDEEUseCase\n    // - RecordBodyUseCase\n    // - SearchFoodUseCase\n    // - etc.\n\n    // MARK: - View Models\n\n    // TODO: Phase 5\uc5d0\uc11c \ucd94\uac00 \uc608\uc815\n    // - OnboardingViewModel\n    // - DashboardViewModel\n    // - BodyViewModel\n    // - etc.\n}\n\n// MARK: - Factory Methods\n\nextension DIContainer {\n\n    // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Factory Pattern\n    // \uc758\uc874\uc131 \uc0dd\uc131 \ub85c\uc9c1\uc744 \ucea1\uc290\ud654\n    // \ud14c\uc2a4\ud2b8 \uc2dc Mock \uac1d\uccb4\ub85c \uad50\uccb4 \uac00\ub2a5\n\n    // TODO: \uac01 Feature \uad6c\ud604 \uc2dc Factory \uba54\uc11c\ub4dc \ucd94\uac00\n    // func makeOnboardingViewModel() -> OnboardingViewModel\n    // func makeDashboardViewModel() -> DashboardViewModel\n    // func makeBodyViewModel() -> BodyViewModel\n}\n\n// MARK: - Testing Support\n\n#if DEBUG\nextension DIContainer {\n\n    /// \ud14c\uc2a4\ud2b8\uc6a9 \ucee8\ud14c\uc774\ub108 \uc0dd\uc131\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: #if DEBUG\n    /// \ub514\ubc84\uadf8 \ube4c\ub4dc\uc5d0\uc11c\ub9cc \ud3ec\ud568\ub418\ub294 \ucf54\ub4dc\n    /// \ud504\ub85c\ub355\uc158 \ube4c\ub4dc \ud06c\uae30\uc640 \ubcf4\uc548\uc5d0 \uc601\ud5a5 \uc5c6\uc74c\n    /// \ud83d\udca1 Java \ube44\uad50: BuildConfig.DEBUG \uccb4\ud06c\uc640 \uc720\uc0ac\n    static func makeForTesting() -> DIContainer {\n        return DIContainer()\n    }\n}\n#endif\n",
        "timestamp": "2026-01-13T07:46:22.394743"
      },
      "worktree_state": {
        "content": "//\n//  DIContainer.swift\n//  Bodii\n//\n//  Created by Auto-Claude on 2026-01-11.\n//\n\n// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Dependency Injection Container\n// \uc571 \uc804\uccb4\uc5d0\uc11c \uc0ac\uc6a9\ub418\ub294 \uc758\uc874\uc131\ub4e4\uc744 \uc911\uc559\uc5d0\uc11c \uad00\ub9ac\ud558\ub294 \ucee8\ud14c\uc774\ub108\n// \ud83d\udca1 Java \ube44\uad50: Dagger/Hilt\uc758 Component\uc640 \uc720\uc0ac\ud55c \uc5ed\ud560\n\nimport Foundation\n\n// MARK: - DI Container\n\n/// \uc758\uc874\uc131 \uc8fc\uc785 \ucee8\ud14c\uc774\ub108\n/// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Singleton Pattern\n/// \uc571 \uc804\uc5ed\uc5d0\uc11c \ub2e8\uc77c \uc778\uc2a4\ud134\uc2a4\ub97c \ud1b5\ud574 \uc758\uc874\uc131\uc5d0 \uc811\uadfc\n/// \ud83d\udca1 Java \ube44\uad50: static getInstance() \ud328\ud134\uacfc \uc720\uc0ac\ud558\uc9c0\ub9cc \ub354 \uac04\uacb0\nfinal class DIContainer {\n\n    // MARK: - Singleton\n\n    /// \uacf5\uc720 \uc778\uc2a4\ud134\uc2a4\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: static let\n    /// Swift\uc5d0\uc11c \uc2f1\uae00\ud1a4\uc740 static let\uc73c\ub85c \uac04\ub2e8\ud788 \uad6c\ud604\n    /// Thread-safe\ud558\uac8c \ud55c \ubc88\ub9cc \ucd08\uae30\ud654\ub428 (Swift \ub7f0\ud0c0\uc784 \ubcf4\uc7a5)\n    static let shared = DIContainer()\n\n    // MARK: - Initialization\n\n    /// private init\uc73c\ub85c \uc678\ubd80 \uc778\uc2a4\ud134\uc2a4\ud654 \ubc29\uc9c0\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Access Control\n    /// private init\uc740 \uc678\ubd80\uc5d0\uc11c new\ub97c \ub9c9\uc544 \uc2f1\uae00\ud1a4 \ubcf4\uc7a5\n    /// \ud83d\udca1 Java \ube44\uad50: private constructor\uc640 \ub3d9\uc77c\n    private init() {}\n\n    // MARK: - Infrastructure\n\n    // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: lazy var\n    // \ucc98\uc74c \uc811\uadfc\ud560 \ub54c\ub9cc \ucd08\uae30\ud654\ub418\ub294 \ud504\ub85c\ud37c\ud2f0\n    // \ubb34\uac70\uc6b4 \uac1d\uccb4\uc758 \uc9c0\uc5f0 \ucd08\uae30\ud654\uc5d0 \uc720\uc6a9\n    // \ud83d\udca1 Java \ube44\uad50: Lazy initialization pattern\n\n    /// Persistence Controller (Core Data)\n    /// \u26a0\ufe0f \uc8fc\uc758: PersistenceController\ub294 \ubcc4\ub3c4\ub85c shared \uc778\uc2a4\ud134\uc2a4 \uad00\ub9ac\n\n    // MARK: - Data Sources\n\n    /// Body composition \ub85c\uceec \ub370\uc774\ud130 \uc18c\uc2a4\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Lazy Initialization\n    /// \uccab \uc811\uadfc \uc2dc \ud55c \ubc88\ub9cc \uc0dd\uc131\ub418\uc5b4 \uc7ac\uc0ac\uc6a9\ub428\n    /// \ud83d\udca1 Java \ube44\uad50: @Lazy + @Autowired\uc640 \uc720\uc0ac\n    lazy var bodyLocalDataSource: BodyLocalDataSource = {\n        return BodyLocalDataSource(persistenceController: .shared)\n    }()\n\n    // TODO: Phase 2\uc5d0\uc11c \ucd94\uac00 \uc608\uc815\n    // - NetworkManager\n    // - HealthKitManager\n    // - FoodAPIDataSource\n    // - GeminiAPIDataSource\n\n    // MARK: - Repositories\n\n    /// Body composition \ub9ac\ud3ec\uc9c0\ud1a0\ub9ac\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Dependency Injection Chain\n    /// bodyLocalDataSource\ub97c \uc8fc\uc785\ubc1b\uc544 \uc0dd\uc131\n    /// \ud83d\udca1 Java \ube44\uad50: @Autowired Repository\uc640 \uc720\uc0ac\n    lazy var bodyRepository: BodyRepositoryProtocol = {\n        return BodyRepository(localDataSource: bodyLocalDataSource)\n    }()\n\n    // TODO: Phase 3\uc5d0\uc11c \ucd94\uac00 \uc608\uc815\n    // - UserRepository\n    // - FoodRepository\n    // - ExerciseRepository\n    // - SleepRepository\n    // - GoalRepository\n\n    // MARK: - Use Cases\n\n    /// BMR \uacc4\uc0b0 Use Case\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Stateless Use Case\n    /// struct\uc774\ubbc0\ub85c \ub9e4\ubc88 \uc0c8\ub85c \uc0dd\uc131\ud574\ub3c4 \ubb34\ubc29\ud558\uc9c0\ub9cc lazy\ub85c \uc7ac\uc0ac\uc6a9\n    /// \ud83d\udca1 Java \ube44\uad50: @Service \uc2f1\uae00\ud1a4 \ube48\uacfc \uc720\uc0ac\n    lazy var calculateBMRUseCase = CalculateBMRUseCase()\n\n    /// TDEE \uacc4\uc0b0 Use Case\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Stateless Use Case\n    /// struct\uc774\ubbc0\ub85c \ub9e4\ubc88 \uc0c8\ub85c \uc0dd\uc131\ud574\ub3c4 \ubb34\ubc29\ud558\uc9c0\ub9cc lazy\ub85c \uc7ac\uc0ac\uc6a9\n    /// \ud83d\udca1 Java \ube44\uad50: @Service \uc2f1\uae00\ud1a4 \ube48\uacfc \uc720\uc0ac\n    lazy var calculateTDEEUseCase = CalculateTDEEUseCase()\n\n    /// Body composition \uae30\ub85d Use Case\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Orchestration Use Case with Dependencies\n    /// \uc5ec\ub7ec Use Case\uc640 Repository\ub97c \uc870\ud569\ud558\uc5ec \ubcf5\uc7a1\ud55c \ube44\uc988\ub2c8\uc2a4 \ub85c\uc9c1 \uad6c\ud604\n    /// \ud83d\udca1 Java \ube44\uad50: @Service with @Autowired dependencies\n    lazy var recordBodyCompositionUseCase: RecordBodyCompositionUseCase = {\n        return RecordBodyCompositionUseCase(\n            calculateBMRUseCase: calculateBMRUseCase,\n            calculateTDEEUseCase: calculateTDEEUseCase,\n            bodyRepository: bodyRepository\n        )\n    }()\n\n    /// Body trends \uc870\ud68c Use Case\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Query Use Case\n    /// \ucc28\ud2b8 \ud45c\uc2dc\ub97c \uc704\ud55c \ub370\uc774\ud130 \uc870\ud68c \ubc0f \ubcc0\ud658\n    /// \ud83d\udca1 Java \ube44\uad50: @Service with read-only operations\n    lazy var fetchBodyTrendsUseCase: FetchBodyTrendsUseCase = {\n        return FetchBodyTrendsUseCase(bodyRepository: bodyRepository)\n    }()\n\n    // TODO: Phase 4\uc5d0\uc11c \ucd94\uac00 \uc608\uc815\n    // - SearchFoodUseCase\n    // - LogExerciseUseCase\n    // - etc.\n}\n\n// MARK: - Factory Methods\n\nextension DIContainer {\n\n    // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Factory Pattern\n    // \uc758\uc874\uc131 \uc0dd\uc131 \ub85c\uc9c1\uc744 \ucea1\uc290\ud654\n    // \ud14c\uc2a4\ud2b8 \uc2dc Mock \uac1d\uccb4\ub85c \uad50\uccb4 \uac00\ub2a5\n\n    // MARK: - Body Composition ViewModels\n\n    /// BodyCompositionViewModel \uc0dd\uc131\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Factory Method Pattern\n    /// - ViewModel \uc0dd\uc131 \ub85c\uc9c1\uc744 \uc911\uc559\ud654\n    /// - \uc758\uc874\uc131 \uc8fc\uc785\uc744 \ud55c \uacf3\uc5d0\uc11c \uad00\ub9ac\n    /// - \ud14c\uc2a4\ud2b8 \uc2dc mock \uc8fc\uc785\uc774 \uc26c\uc6cc\uc9d0\n    /// \ud83d\udca1 Java \ube44\uad50: @Bean \uba54\uc11c\ub4dc\uc640 \uc720\uc0ac\n    ///\n    /// - Parameters:\n    ///   - userProfile: \uc0ac\uc6a9\uc790 \ud504\ub85c\ud544 (BMR/TDEE \uacc4\uc0b0\uc5d0 \ud544\uc694)\n    /// - Returns: \uc0c8\ub85c\uc6b4 BodyCompositionViewModel \uc778\uc2a4\ud134\uc2a4\n    func makeBodyCompositionViewModel(userProfile: UserProfile) -> BodyCompositionViewModel {\n        return BodyCompositionViewModel(\n            recordBodyCompositionUseCase: recordBodyCompositionUseCase,\n            fetchBodyTrendsUseCase: fetchBodyTrendsUseCase,\n            bodyRepository: bodyRepository,\n            userProfile: userProfile\n        )\n    }\n\n    /// BodyTrendsViewModel \uc0dd\uc131\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Factory Method Pattern\n    /// - \ucc28\ud2b8 \ud45c\uc2dc\ub97c \uc704\ud55c ViewModel \uc0dd\uc131\n    /// - \uc758\uc874\uc131 \uc8fc\uc785\uc744 \ud55c \uacf3\uc5d0\uc11c \uad00\ub9ac\n    /// \ud83d\udca1 Java \ube44\uad50: @Bean \uba54\uc11c\ub4dc\uc640 \uc720\uc0ac\n    ///\n    /// - Returns: \uc0c8\ub85c\uc6b4 BodyTrendsViewModel \uc778\uc2a4\ud134\uc2a4\n    func makeBodyTrendsViewModel() -> BodyTrendsViewModel {\n        return BodyTrendsViewModel(\n            fetchBodyTrendsUseCase: fetchBodyTrendsUseCase,\n            bodyRepository: bodyRepository\n        )\n    }\n\n    /// MetabolismViewModel \uc0dd\uc131\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Factory Method Pattern\n    /// - \ub300\uc2dc\ubcf4\ub4dc\uc6a9 BMR/TDEE \ud45c\uc2dc ViewModel \uc0dd\uc131\n    /// - \uc758\uc874\uc131 \uc8fc\uc785\uc744 \ud55c \uacf3\uc5d0\uc11c \uad00\ub9ac\n    /// \ud83d\udca1 Java \ube44\uad50: @Bean \uba54\uc11c\ub4dc\uc640 \uc720\uc0ac\n    ///\n    /// - Returns: \uc0c8\ub85c\uc6b4 MetabolismViewModel \uc778\uc2a4\ud134\uc2a4\n    func makeMetabolismViewModel() -> MetabolismViewModel {\n        return MetabolismViewModel(bodyRepository: bodyRepository)\n    }\n\n    // TODO: \uac01 Feature \uad6c\ud604 \uc2dc Factory \uba54\uc11c\ub4dc \ucd94\uac00\n    // func makeOnboardingViewModel() -> OnboardingViewModel\n    // func makeDashboardViewModel() -> DashboardViewModel\n    // func makeFoodLogViewModel() -> FoodLogViewModel\n}\n\n// MARK: - Testing Support\n\n#if DEBUG\nextension DIContainer {\n\n    /// \ud14c\uc2a4\ud2b8\uc6a9 \ucee8\ud14c\uc774\ub108 \uc0dd\uc131\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: #if DEBUG\n    /// \ub514\ubc84\uadf8 \ube4c\ub4dc\uc5d0\uc11c\ub9cc \ud3ec\ud568\ub418\ub294 \ucf54\ub4dc\n    /// \ud504\ub85c\ub355\uc158 \ube4c\ub4dc \ud06c\uae30\uc640 \ubcf4\uc548\uc5d0 \uc601\ud5a5 \uc5c6\uc74c\n    /// \ud83d\udca1 Java \ube44\uad50: BuildConfig.DEBUG \uccb4\ud06c\uc640 \uc720\uc0ac\n    static func makeForTesting() -> DIContainer {\n        return DIContainer()\n    }\n}\n#endif\n",
        "last_modified": "2026-01-14T22:58:13.146936"
      },
      "task_intent": {
        "title": "Body Composition Tracking with BMR/TDEE",
        "description": "Complete body composition logging system including height, weight, body fat percentage, muscle mass, with automatic BMR (Mifflin-St Jeor) and TDEE calculations. Visualize changes over time with Swift Charts graphs showing trends and goal progress.",
        "from_plan": true
      },
      "commits_behind_main": 1,
      "status": "active",
      "merged_at": null
    },
    "005-korean-food-database-integration": {
      "task_id": "005-korean-food-database-integration",
      "branch_point": {
        "commit_hash": "c44bfbcd7c1699b176a8bb155e8c35f43ebd4ad9",
        "content": "//\n//  DIContainer.swift\n//  Bodii\n//\n//  Created by Auto-Claude on 2026-01-11.\n//\n\n// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Dependency Injection Container\n// \uc571 \uc804\uccb4\uc5d0\uc11c \uc0ac\uc6a9\ub418\ub294 \uc758\uc874\uc131\ub4e4\uc744 \uc911\uc559\uc5d0\uc11c \uad00\ub9ac\ud558\ub294 \ucee8\ud14c\uc774\ub108\n// \ud83d\udca1 Java \ube44\uad50: Dagger/Hilt\uc758 Component\uc640 \uc720\uc0ac\ud55c \uc5ed\ud560\n\nimport Foundation\n\n// MARK: - DI Container\n\n/// \uc758\uc874\uc131 \uc8fc\uc785 \ucee8\ud14c\uc774\ub108\n/// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Singleton Pattern\n/// \uc571 \uc804\uc5ed\uc5d0\uc11c \ub2e8\uc77c \uc778\uc2a4\ud134\uc2a4\ub97c \ud1b5\ud574 \uc758\uc874\uc131\uc5d0 \uc811\uadfc\n/// \ud83d\udca1 Java \ube44\uad50: static getInstance() \ud328\ud134\uacfc \uc720\uc0ac\ud558\uc9c0\ub9cc \ub354 \uac04\uacb0\nfinal class DIContainer {\n\n    // MARK: - Singleton\n\n    /// \uacf5\uc720 \uc778\uc2a4\ud134\uc2a4\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: static let\n    /// Swift\uc5d0\uc11c \uc2f1\uae00\ud1a4\uc740 static let\uc73c\ub85c \uac04\ub2e8\ud788 \uad6c\ud604\n    /// Thread-safe\ud558\uac8c \ud55c \ubc88\ub9cc \ucd08\uae30\ud654\ub428 (Swift \ub7f0\ud0c0\uc784 \ubcf4\uc7a5)\n    static let shared = DIContainer()\n\n    // MARK: - Initialization\n\n    /// private init\uc73c\ub85c \uc678\ubd80 \uc778\uc2a4\ud134\uc2a4\ud654 \ubc29\uc9c0\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Access Control\n    /// private init\uc740 \uc678\ubd80\uc5d0\uc11c new\ub97c \ub9c9\uc544 \uc2f1\uae00\ud1a4 \ubcf4\uc7a5\n    /// \ud83d\udca1 Java \ube44\uad50: private constructor\uc640 \ub3d9\uc77c\n    private init() {}\n\n    // MARK: - Infrastructure\n\n    // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: lazy var\n    // \ucc98\uc74c \uc811\uadfc\ud560 \ub54c\ub9cc \ucd08\uae30\ud654\ub418\ub294 \ud504\ub85c\ud37c\ud2f0\n    // \ubb34\uac70\uc6b4 \uac1d\uccb4\uc758 \uc9c0\uc5f0 \ucd08\uae30\ud654\uc5d0 \uc720\uc6a9\n    // \ud83d\udca1 Java \ube44\uad50: Lazy initialization pattern\n\n    /// Persistence Controller (Core Data)\n    /// \u26a0\ufe0f \uc8fc\uc758: PersistenceController\ub294 \ubcc4\ub3c4\ub85c shared \uc778\uc2a4\ud134\uc2a4 \uad00\ub9ac\n\n    // MARK: - Data Sources\n\n    // TODO: Phase 2\uc5d0\uc11c \ucd94\uac00 \uc608\uc815\n    // - NetworkManager\n    // - HealthKitManager\n    // - FoodAPIDataSource\n    // - GeminiAPIDataSource\n\n    // MARK: - Repositories\n\n    // TODO: Phase 3\uc5d0\uc11c \ucd94\uac00 \uc608\uc815\n    // - UserRepository\n    // - BodyRepository\n    // - FoodRepository\n    // - ExerciseRepository\n    // - SleepRepository\n    // - GoalRepository\n\n    // MARK: - Use Cases\n\n    // TODO: Phase 4\uc5d0\uc11c \ucd94\uac00 \uc608\uc815\n    // - CalculateBMRUseCase\n    // - CalculateTDEEUseCase\n    // - RecordBodyUseCase\n    // - SearchFoodUseCase\n    // - etc.\n\n    // MARK: - View Models\n\n    // TODO: Phase 5\uc5d0\uc11c \ucd94\uac00 \uc608\uc815\n    // - OnboardingViewModel\n    // - DashboardViewModel\n    // - BodyViewModel\n    // - etc.\n}\n\n// MARK: - Factory Methods\n\nextension DIContainer {\n\n    // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Factory Pattern\n    // \uc758\uc874\uc131 \uc0dd\uc131 \ub85c\uc9c1\uc744 \ucea1\uc290\ud654\n    // \ud14c\uc2a4\ud2b8 \uc2dc Mock \uac1d\uccb4\ub85c \uad50\uccb4 \uac00\ub2a5\n\n    // TODO: \uac01 Feature \uad6c\ud604 \uc2dc Factory \uba54\uc11c\ub4dc \ucd94\uac00\n    // func makeOnboardingViewModel() -> OnboardingViewModel\n    // func makeDashboardViewModel() -> DashboardViewModel\n    // func makeBodyViewModel() -> BodyViewModel\n}\n\n// MARK: - Testing Support\n\n#if DEBUG\nextension DIContainer {\n\n    /// \ud14c\uc2a4\ud2b8\uc6a9 \ucee8\ud14c\uc774\ub108 \uc0dd\uc131\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: #if DEBUG\n    /// \ub514\ubc84\uadf8 \ube4c\ub4dc\uc5d0\uc11c\ub9cc \ud3ec\ud568\ub418\ub294 \ucf54\ub4dc\n    /// \ud504\ub85c\ub355\uc158 \ube4c\ub4dc \ud06c\uae30\uc640 \ubcf4\uc548\uc5d0 \uc601\ud5a5 \uc5c6\uc74c\n    /// \ud83d\udca1 Java \ube44\uad50: BuildConfig.DEBUG \uccb4\ud06c\uc640 \uc720\uc0ac\n    static func makeForTesting() -> DIContainer {\n        return DIContainer()\n    }\n}\n#endif\n",
        "timestamp": "2026-01-13T07:46:23.878686"
      },
      "worktree_state": {
        "content": "//\n//  DIContainer.swift\n//  Bodii\n//\n//  Created by Auto-Claude on 2026-01-11.\n//\n\n// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Dependency Injection Container\n// \uc571 \uc804\uccb4\uc5d0\uc11c \uc0ac\uc6a9\ub418\ub294 \uc758\uc874\uc131\ub4e4\uc744 \uc911\uc559\uc5d0\uc11c \uad00\ub9ac\ud558\ub294 \ucee8\ud14c\uc774\ub108\n// \ud83d\udca1 Java \ube44\uad50: Dagger/Hilt\uc758 Component\uc640 \uc720\uc0ac\ud55c \uc5ed\ud560\n\nimport Foundation\n\n// MARK: - DI Container\n\n/// \uc758\uc874\uc131 \uc8fc\uc785 \ucee8\ud14c\uc774\ub108\n/// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Singleton Pattern\n/// \uc571 \uc804\uc5ed\uc5d0\uc11c \ub2e8\uc77c \uc778\uc2a4\ud134\uc2a4\ub97c \ud1b5\ud574 \uc758\uc874\uc131\uc5d0 \uc811\uadfc\n/// \ud83d\udca1 Java \ube44\uad50: static getInstance() \ud328\ud134\uacfc \uc720\uc0ac\ud558\uc9c0\ub9cc \ub354 \uac04\uacb0\nfinal class DIContainer {\n\n    // MARK: - Singleton\n\n    /// \uacf5\uc720 \uc778\uc2a4\ud134\uc2a4\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: static let\n    /// Swift\uc5d0\uc11c \uc2f1\uae00\ud1a4\uc740 static let\uc73c\ub85c \uac04\ub2e8\ud788 \uad6c\ud604\n    /// Thread-safe\ud558\uac8c \ud55c \ubc88\ub9cc \ucd08\uae30\ud654\ub428 (Swift \ub7f0\ud0c0\uc784 \ubcf4\uc7a5)\n    static let shared = DIContainer()\n\n    // MARK: - Initialization\n\n    /// private init\uc73c\ub85c \uc678\ubd80 \uc778\uc2a4\ud134\uc2a4\ud654 \ubc29\uc9c0\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Access Control\n    /// private init\uc740 \uc678\ubd80\uc5d0\uc11c new\ub97c \ub9c9\uc544 \uc2f1\uae00\ud1a4 \ubcf4\uc7a5\n    /// \ud83d\udca1 Java \ube44\uad50: private constructor\uc640 \ub3d9\uc77c\n    private init() {}\n\n    // MARK: - Infrastructure\n\n    // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: lazy var\n    // \ucc98\uc74c \uc811\uadfc\ud560 \ub54c\ub9cc \ucd08\uae30\ud654\ub418\ub294 \ud504\ub85c\ud37c\ud2f0\n    // \ubb34\uac70\uc6b4 \uac1d\uccb4\uc758 \uc9c0\uc5f0 \ucd08\uae30\ud654\uc5d0 \uc720\uc6a9\n    // \ud83d\udca1 Java \ube44\uad50: Lazy initialization pattern\n\n    /// Persistence Controller (Core Data)\n    /// \u26a0\ufe0f \uc8fc\uc758: PersistenceController\ub294 \ubcc4\ub3c4\ub85c shared \uc778\uc2a4\ud134\uc2a4 \uad00\ub9ac\n\n    /// \ub124\ud2b8\uc6cc\ud06c \ub9e4\ub2c8\uc800 (\uc2f1\uae00\ud1a4)\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Singleton Dependency\n    /// \ubaa8\ub4e0 \ub124\ud2b8\uc6cc\ud06c \uc694\uccad\uc5d0 \uacf5\uc720\ub418\ub294 \ub9e4\ub2c8\uc800\n    /// \ud83d\udca1 Java \ube44\uad50: OkHttpClient\ub97c \uc2f1\uae00\ud1a4\uc73c\ub85c \uad00\ub9ac\ud558\ub294 \ud328\ud134\n    lazy var networkManager: NetworkManager = {\n        NetworkManager()\n    }()\n\n    // MARK: - Data Sources\n\n    /// \uc2dd\uc57d\ucc98 API \uc11c\ube44\uc2a4\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: API Service\n    /// \ud55c\uad6d \uc2dd\ud488 \uc601\uc591 \ub370\uc774\ud130\ubca0\uc774\uc2a4 API \ud638\ucd9c \uc11c\ube44\uc2a4\n    /// \ud83d\udca1 Java \ube44\uad50: Retrofit Service \uc778\uc2a4\ud134\uc2a4\n    lazy var kfdaFoodAPIService: KFDAFoodAPIService = {\n        KFDAFoodAPIService(networkManager: self.networkManager)\n    }()\n\n    /// USDA API \uc11c\ube44\uc2a4\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: API Service\n    /// \ubbf8\uad6d \ub18d\ubb34\ubd80 \uc2dd\ud488 \ub370\uc774\ud130\ubca0\uc774\uc2a4 API \ud638\ucd9c \uc11c\ube44\uc2a4\n    /// \ud83d\udca1 Java \ube44\uad50: Retrofit Service \uc778\uc2a4\ud134\uc2a4\n    lazy var usdaFoodAPIService: USDAFoodAPIService = {\n        USDAFoodAPIService(networkManager: self.networkManager)\n    }()\n\n    /// \ud1b5\ud569 \uc2dd\ud488 \uac80\uc0c9 \uc11c\ube44\uc2a4\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Unified Service\n    /// \uc5ec\ub7ec API\ub97c \ud1b5\ud569\ud558\uc5ec \ucd5c\uc801\uc758 \uac80\uc0c9 \uacb0\uacfc \uc81c\uacf5\n    /// \ud55c\uad6d \uc74c\uc2dd\uc740 \uc2dd\uc57d\ucc98 \uc6b0\uc120, \uc678\uad6d \uc74c\uc2dd\uc740 USDA \uc6b0\uc120\n    /// \ud83d\udca1 Java \ube44\uad50: Facade Pattern\uc758 \uad6c\ud604\uccb4\n    lazy var unifiedFoodSearchService: UnifiedFoodSearchService = {\n        UnifiedFoodSearchService(\n            kfdaService: self.kfdaFoodAPIService,\n            usdaService: self.usdaFoodAPIService\n        )\n    }()\n\n    /// \uc2dd\ud488 \ub85c\uceec \ub370\uc774\ud130 \uc18c\uc2a4\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Local Data Source\n    /// Core Data\ub97c \uc0ac\uc6a9\ud55c \uc2dd\ud488 \uce90\uc2f1 \ubc0f \uc624\ud504\ub77c\uc778 \uc9c0\uc6d0\n    /// \ud83d\udca1 Java \ube44\uad50: Room Database\uc758 DAO\uc640 \uc720\uc0ac\n    lazy var foodLocalDataSource: FoodLocalDataSource = {\n        FoodLocalDataSourceImpl()\n    }()\n\n    // TODO: Phase 2\uc5d0\uc11c \ucd94\uac00 \uc608\uc815\n    // - HealthKitManager\n    // - GeminiAPIDataSource\n\n    // MARK: - Repositories\n\n    /// \uc2dd\ud488 \uac80\uc0c9 \uc800\uc7a5\uc18c\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Repository Pattern\n    /// \ub2e4\uc911 \ub370\uc774\ud130 \uc18c\uc2a4(API + \ub85c\uceec)\ub97c \ucd94\uc0c1\ud654\ud55c \ub2e8\uc77c \uc778\ud130\ud398\uc774\uc2a4\n    /// \ud83d\udca1 Java \ube44\uad50: Spring Data Repository\n    lazy var foodSearchRepository: FoodSearchRepository = {\n        FoodSearchRepositoryImpl(\n            searchService: self.unifiedFoodSearchService,\n            localDataSource: self.foodLocalDataSource\n        )\n    }()\n\n    // TODO: Phase 3\uc5d0\uc11c \ucd94\uac00 \uc608\uc815\n    // - UserRepository\n    // - BodyRepository\n    // - ExerciseRepository\n    // - SleepRepository\n    // - GoalRepository\n\n    // MARK: - Use Cases\n\n    // TODO: Phase 4\uc5d0\uc11c \ucd94\uac00 \uc608\uc815\n    // - CalculateBMRUseCase\n    // - CalculateTDEEUseCase\n    // - RecordBodyUseCase\n    // - SearchFoodUseCase\n    // - etc.\n\n    // MARK: - View Models\n\n    // TODO: Phase 5\uc5d0\uc11c \ucd94\uac00 \uc608\uc815\n    // - OnboardingViewModel\n    // - DashboardViewModel\n    // - BodyViewModel\n    // - etc.\n}\n\n// MARK: - Factory Methods\n\nextension DIContainer {\n\n    // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Factory Pattern\n    // \uc758\uc874\uc131 \uc0dd\uc131 \ub85c\uc9c1\uc744 \ucea1\uc290\ud654\n    // \ud14c\uc2a4\ud2b8 \uc2dc Mock \uac1d\uccb4\ub85c \uad50\uccb4 \uac00\ub2a5\n    // \ud83d\udca1 Java \ube44\uad50: @Bean \uba54\uc11c\ub4dc\uc640 \uc720\uc0ac\n\n    // MARK: - Food Search\n\n    /// FoodSearchViewModel \uc0dd\uc131\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: ViewModel Factory\n    /// ViewModel \uc0dd\uc131 \uc2dc \ud544\uc694\ud55c \ubaa8\ub4e0 \uc758\uc874\uc131\uc744 \uc8fc\uc785\n    /// \ud83d\udca1 Java \ube44\uad50: ViewModelProvider.Factory\n    ///\n    /// - Returns: FoodSearchViewModel \uc778\uc2a4\ud134\uc2a4\n    /// - Note: Phase 9\uc5d0\uc11c FoodSearchViewModel \uad6c\ud604 \uc2dc \ud65c\uc131\ud654\n    // func makeFoodSearchViewModel() -> FoodSearchViewModel {\n    //     FoodSearchViewModel(repository: foodSearchRepository)\n    // }\n\n    // TODO: \uac01 Feature \uad6c\ud604 \uc2dc Factory \uba54\uc11c\ub4dc \ucd94\uac00\n    // func makeOnboardingViewModel() -> OnboardingViewModel\n    // func makeDashboardViewModel() -> DashboardViewModel\n    // func makeBodyViewModel() -> BodyViewModel\n    // func makeFoodRecordViewModel() -> FoodRecordViewModel\n}\n\n// MARK: - Testing Support\n\n#if DEBUG\nextension DIContainer {\n\n    /// \ud14c\uc2a4\ud2b8\uc6a9 \ucee8\ud14c\uc774\ub108 \uc0dd\uc131\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: #if DEBUG\n    /// \ub514\ubc84\uadf8 \ube4c\ub4dc\uc5d0\uc11c\ub9cc \ud3ec\ud568\ub418\ub294 \ucf54\ub4dc\n    /// \ud504\ub85c\ub355\uc158 \ube4c\ub4dc \ud06c\uae30\uc640 \ubcf4\uc548\uc5d0 \uc601\ud5a5 \uc5c6\uc74c\n    /// \ud83d\udca1 Java \ube44\uad50: BuildConfig.DEBUG \uccb4\ud06c\uc640 \uc720\uc0ac\n    static func makeForTesting() -> DIContainer {\n        return DIContainer()\n    }\n}\n#endif\n",
        "last_modified": "2026-01-14T22:55:39.256496"
      },
      "task_intent": {
        "title": "005-korean-food-database-integration",
        "description": "Integrate Korean Food & Drug Administration (\uc2dd\uc57d\ucc98) food nutrition database API as primary source, with USDA FoodData Central as fallback for international foods. Prioritize Korean dishes (kimchi jjigae, bibimbap, tteokbokki) that are poorly covered by competitors.",
        "from_plan": true
      },
      "commits_behind_main": 0,
      "status": "active",
      "merged_at": null
    },
    "008-exercise-tracking-with-met-calculations": {
      "task_id": "008-exercise-tracking-with-met-calculations",
      "branch_point": {
        "commit_hash": "4e56d606f7b0d4cb74120dd392544f3fe2d4f5b4",
        "content": "//\n//  DIContainer.swift\n//  Bodii\n//\n//  Created by Auto-Claude on 2026-01-11.\n//\n\n// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Dependency Injection Container\n// \uc571 \uc804\uccb4\uc5d0\uc11c \uc0ac\uc6a9\ub418\ub294 \uc758\uc874\uc131\ub4e4\uc744 \uc911\uc559\uc5d0\uc11c \uad00\ub9ac\ud558\ub294 \ucee8\ud14c\uc774\ub108\n// \ud83d\udca1 Java \ube44\uad50: Dagger/Hilt\uc758 Component\uc640 \uc720\uc0ac\ud55c \uc5ed\ud560\n\nimport Foundation\n\n// MARK: - DI Container\n\n/// \uc758\uc874\uc131 \uc8fc\uc785 \ucee8\ud14c\uc774\ub108\n/// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Singleton Pattern\n/// \uc571 \uc804\uc5ed\uc5d0\uc11c \ub2e8\uc77c \uc778\uc2a4\ud134\uc2a4\ub97c \ud1b5\ud574 \uc758\uc874\uc131\uc5d0 \uc811\uadfc\n/// \ud83d\udca1 Java \ube44\uad50: static getInstance() \ud328\ud134\uacfc \uc720\uc0ac\ud558\uc9c0\ub9cc \ub354 \uac04\uacb0\nfinal class DIContainer {\n\n    // MARK: - Singleton\n\n    /// \uacf5\uc720 \uc778\uc2a4\ud134\uc2a4\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: static let\n    /// Swift\uc5d0\uc11c \uc2f1\uae00\ud1a4\uc740 static let\uc73c\ub85c \uac04\ub2e8\ud788 \uad6c\ud604\n    /// Thread-safe\ud558\uac8c \ud55c \ubc88\ub9cc \ucd08\uae30\ud654\ub428 (Swift \ub7f0\ud0c0\uc784 \ubcf4\uc7a5)\n    static let shared = DIContainer()\n\n    // MARK: - Initialization\n\n    /// private init\uc73c\ub85c \uc678\ubd80 \uc778\uc2a4\ud134\uc2a4\ud654 \ubc29\uc9c0\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Access Control\n    /// private init\uc740 \uc678\ubd80\uc5d0\uc11c new\ub97c \ub9c9\uc544 \uc2f1\uae00\ud1a4 \ubcf4\uc7a5\n    /// \ud83d\udca1 Java \ube44\uad50: private constructor\uc640 \ub3d9\uc77c\n    private init() {}\n\n    // MARK: - Infrastructure\n\n    // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: lazy var\n    // \ucc98\uc74c \uc811\uadfc\ud560 \ub54c\ub9cc \ucd08\uae30\ud654\ub418\ub294 \ud504\ub85c\ud37c\ud2f0\n    // \ubb34\uac70\uc6b4 \uac1d\uccb4\uc758 \uc9c0\uc5f0 \ucd08\uae30\ud654\uc5d0 \uc720\uc6a9\n    // \ud83d\udca1 Java \ube44\uad50: Lazy initialization pattern\n\n    /// Persistence Controller (Core Data)\n    /// \u26a0\ufe0f \uc8fc\uc758: PersistenceController\ub294 \ubcc4\ub3c4\ub85c shared \uc778\uc2a4\ud134\uc2a4 \uad00\ub9ac\n\n    // MARK: - Data Sources\n\n    /// Body composition \ub85c\uceec \ub370\uc774\ud130 \uc18c\uc2a4\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Lazy Initialization\n    /// \uccab \uc811\uadfc \uc2dc \ud55c \ubc88\ub9cc \uc0dd\uc131\ub418\uc5b4 \uc7ac\uc0ac\uc6a9\ub428\n    /// \ud83d\udca1 Java \ube44\uad50: @Lazy + @Autowired\uc640 \uc720\uc0ac\n    lazy var bodyLocalDataSource: BodyLocalDataSource = {\n        return BodyLocalDataSource(persistenceController: .shared)\n    }()\n\n    // TODO: Phase 2\uc5d0\uc11c \ucd94\uac00 \uc608\uc815\n    // - NetworkManager\n    // - HealthKitManager\n    // - FoodAPIDataSource\n    // - GeminiAPIDataSource\n\n    // MARK: - Repositories\n\n    /// Body composition \ub9ac\ud3ec\uc9c0\ud1a0\ub9ac\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Dependency Injection Chain\n    /// bodyLocalDataSource\ub97c \uc8fc\uc785\ubc1b\uc544 \uc0dd\uc131\n    /// \ud83d\udca1 Java \ube44\uad50: @Autowired Repository\uc640 \uc720\uc0ac\n    lazy var bodyRepository: BodyRepositoryProtocol = {\n        return BodyRepository(localDataSource: bodyLocalDataSource)\n    }()\n\n    // TODO: Phase 3\uc5d0\uc11c \ucd94\uac00 \uc608\uc815\n    // - UserRepository\n    // - FoodRepository\n    // - ExerciseRepository\n    // - SleepRepository\n    // - GoalRepository\n\n    // MARK: - Use Cases\n\n    /// BMR \uacc4\uc0b0 Use Case\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Stateless Use Case\n    /// struct\uc774\ubbc0\ub85c \ub9e4\ubc88 \uc0c8\ub85c \uc0dd\uc131\ud574\ub3c4 \ubb34\ubc29\ud558\uc9c0\ub9cc lazy\ub85c \uc7ac\uc0ac\uc6a9\n    /// \ud83d\udca1 Java \ube44\uad50: @Service \uc2f1\uae00\ud1a4 \ube48\uacfc \uc720\uc0ac\n    lazy var calculateBMRUseCase = CalculateBMRUseCase()\n\n    /// TDEE \uacc4\uc0b0 Use Case\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Stateless Use Case\n    /// struct\uc774\ubbc0\ub85c \ub9e4\ubc88 \uc0c8\ub85c \uc0dd\uc131\ud574\ub3c4 \ubb34\ubc29\ud558\uc9c0\ub9cc lazy\ub85c \uc7ac\uc0ac\uc6a9\n    /// \ud83d\udca1 Java \ube44\uad50: @Service \uc2f1\uae00\ud1a4 \ube48\uacfc \uc720\uc0ac\n    lazy var calculateTDEEUseCase = CalculateTDEEUseCase()\n\n    /// Body composition \uae30\ub85d Use Case\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Orchestration Use Case with Dependencies\n    /// \uc5ec\ub7ec Use Case\uc640 Repository\ub97c \uc870\ud569\ud558\uc5ec \ubcf5\uc7a1\ud55c \ube44\uc988\ub2c8\uc2a4 \ub85c\uc9c1 \uad6c\ud604\n    /// \ud83d\udca1 Java \ube44\uad50: @Service with @Autowired dependencies\n    lazy var recordBodyCompositionUseCase: RecordBodyCompositionUseCase = {\n        return RecordBodyCompositionUseCase(\n            calculateBMRUseCase: calculateBMRUseCase,\n            calculateTDEEUseCase: calculateTDEEUseCase,\n            bodyRepository: bodyRepository\n        )\n    }()\n\n    /// Body trends \uc870\ud68c Use Case\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Query Use Case\n    /// \ucc28\ud2b8 \ud45c\uc2dc\ub97c \uc704\ud55c \ub370\uc774\ud130 \uc870\ud68c \ubc0f \ubcc0\ud658\n    /// \ud83d\udca1 Java \ube44\uad50: @Service with read-only operations\n    lazy var fetchBodyTrendsUseCase: FetchBodyTrendsUseCase = {\n        return FetchBodyTrendsUseCase(bodyRepository: bodyRepository)\n    }()\n\n    // TODO: Phase 4\uc5d0\uc11c \ucd94\uac00 \uc608\uc815\n    // - SearchFoodUseCase\n    // - LogExerciseUseCase\n    // - etc.\n}\n\n// MARK: - Factory Methods\n\nextension DIContainer {\n\n    // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Factory Pattern\n    // \uc758\uc874\uc131 \uc0dd\uc131 \ub85c\uc9c1\uc744 \ucea1\uc290\ud654\n    // \ud14c\uc2a4\ud2b8 \uc2dc Mock \uac1d\uccb4\ub85c \uad50\uccb4 \uac00\ub2a5\n\n    // MARK: - Body Composition ViewModels\n\n    /// BodyCompositionViewModel \uc0dd\uc131\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Factory Method Pattern\n    /// - ViewModel \uc0dd\uc131 \ub85c\uc9c1\uc744 \uc911\uc559\ud654\n    /// - \uc758\uc874\uc131 \uc8fc\uc785\uc744 \ud55c \uacf3\uc5d0\uc11c \uad00\ub9ac\n    /// - \ud14c\uc2a4\ud2b8 \uc2dc mock \uc8fc\uc785\uc774 \uc26c\uc6cc\uc9d0\n    /// \ud83d\udca1 Java \ube44\uad50: @Bean \uba54\uc11c\ub4dc\uc640 \uc720\uc0ac\n    ///\n    /// - Parameters:\n    ///   - userProfile: \uc0ac\uc6a9\uc790 \ud504\ub85c\ud544 (BMR/TDEE \uacc4\uc0b0\uc5d0 \ud544\uc694)\n    /// - Returns: \uc0c8\ub85c\uc6b4 BodyCompositionViewModel \uc778\uc2a4\ud134\uc2a4\n    func makeBodyCompositionViewModel(userProfile: UserProfile) -> BodyCompositionViewModel {\n        return BodyCompositionViewModel(\n            recordBodyCompositionUseCase: recordBodyCompositionUseCase,\n            fetchBodyTrendsUseCase: fetchBodyTrendsUseCase,\n            bodyRepository: bodyRepository,\n            userProfile: userProfile\n        )\n    }\n\n    /// BodyTrendsViewModel \uc0dd\uc131\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Factory Method Pattern\n    /// - \ucc28\ud2b8 \ud45c\uc2dc\ub97c \uc704\ud55c ViewModel \uc0dd\uc131\n    /// - \uc758\uc874\uc131 \uc8fc\uc785\uc744 \ud55c \uacf3\uc5d0\uc11c \uad00\ub9ac\n    /// \ud83d\udca1 Java \ube44\uad50: @Bean \uba54\uc11c\ub4dc\uc640 \uc720\uc0ac\n    ///\n    /// - Returns: \uc0c8\ub85c\uc6b4 BodyTrendsViewModel \uc778\uc2a4\ud134\uc2a4\n    func makeBodyTrendsViewModel() -> BodyTrendsViewModel {\n        return BodyTrendsViewModel(\n            fetchBodyTrendsUseCase: fetchBodyTrendsUseCase,\n            bodyRepository: bodyRepository\n        )\n    }\n\n    /// MetabolismViewModel \uc0dd\uc131\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Factory Method Pattern\n    /// - \ub300\uc2dc\ubcf4\ub4dc\uc6a9 BMR/TDEE \ud45c\uc2dc ViewModel \uc0dd\uc131\n    /// - \uc758\uc874\uc131 \uc8fc\uc785\uc744 \ud55c \uacf3\uc5d0\uc11c \uad00\ub9ac\n    /// \ud83d\udca1 Java \ube44\uad50: @Bean \uba54\uc11c\ub4dc\uc640 \uc720\uc0ac\n    ///\n    /// - Returns: \uc0c8\ub85c\uc6b4 MetabolismViewModel \uc778\uc2a4\ud134\uc2a4\n    func makeMetabolismViewModel() -> MetabolismViewModel {\n        return MetabolismViewModel(bodyRepository: bodyRepository)\n    }\n\n    // TODO: \uac01 Feature \uad6c\ud604 \uc2dc Factory \uba54\uc11c\ub4dc \ucd94\uac00\n    // func makeOnboardingViewModel() -> OnboardingViewModel\n    // func makeDashboardViewModel() -> DashboardViewModel\n    // func makeFoodLogViewModel() -> FoodLogViewModel\n}\n\n// MARK: - Testing Support\n\n#if DEBUG\nextension DIContainer {\n\n    /// \ud14c\uc2a4\ud2b8\uc6a9 \ucee8\ud14c\uc774\ub108 \uc0dd\uc131\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: #if DEBUG\n    /// \ub514\ubc84\uadf8 \ube4c\ub4dc\uc5d0\uc11c\ub9cc \ud3ec\ud568\ub418\ub294 \ucf54\ub4dc\n    /// \ud504\ub85c\ub355\uc158 \ube4c\ub4dc \ud06c\uae30\uc640 \ubcf4\uc548\uc5d0 \uc601\ud5a5 \uc5c6\uc74c\n    /// \ud83d\udca1 Java \ube44\uad50: BuildConfig.DEBUG \uccb4\ud06c\uc640 \uc720\uc0ac\n    static func makeForTesting() -> DIContainer {\n        return DIContainer()\n    }\n}\n#endif\n",
        "timestamp": "2026-01-14T11:45:41.765455"
      },
      "worktree_state": {
        "content": "//\n//  DIContainer.swift\n//  Bodii\n//\n//  Created by Auto-Claude on 2026-01-11.\n//\n\n// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Dependency Injection Container\n// \uc571 \uc804\uccb4\uc5d0\uc11c \uc0ac\uc6a9\ub418\ub294 \uc758\uc874\uc131\ub4e4\uc744 \uc911\uc559\uc5d0\uc11c \uad00\ub9ac\ud558\ub294 \ucee8\ud14c\uc774\ub108\n// \ud83d\udca1 Java \ube44\uad50: Dagger/Hilt\uc758 Component\uc640 \uc720\uc0ac\ud55c \uc5ed\ud560\n\nimport Foundation\n\n// MARK: - DI Container\n\n/// \uc758\uc874\uc131 \uc8fc\uc785 \ucee8\ud14c\uc774\ub108\n/// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Singleton Pattern\n/// \uc571 \uc804\uc5ed\uc5d0\uc11c \ub2e8\uc77c \uc778\uc2a4\ud134\uc2a4\ub97c \ud1b5\ud574 \uc758\uc874\uc131\uc5d0 \uc811\uadfc\n/// \ud83d\udca1 Java \ube44\uad50: static getInstance() \ud328\ud134\uacfc \uc720\uc0ac\ud558\uc9c0\ub9cc \ub354 \uac04\uacb0\nfinal class DIContainer {\n\n    // MARK: - Singleton\n\n    /// \uacf5\uc720 \uc778\uc2a4\ud134\uc2a4\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: static let\n    /// Swift\uc5d0\uc11c \uc2f1\uae00\ud1a4\uc740 static let\uc73c\ub85c \uac04\ub2e8\ud788 \uad6c\ud604\n    /// Thread-safe\ud558\uac8c \ud55c \ubc88\ub9cc \ucd08\uae30\ud654\ub428 (Swift \ub7f0\ud0c0\uc784 \ubcf4\uc7a5)\n    static let shared = DIContainer()\n\n    // MARK: - Initialization\n\n    /// private init\uc73c\ub85c \uc678\ubd80 \uc778\uc2a4\ud134\uc2a4\ud654 \ubc29\uc9c0\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Access Control\n    /// private init\uc740 \uc678\ubd80\uc5d0\uc11c new\ub97c \ub9c9\uc544 \uc2f1\uae00\ud1a4 \ubcf4\uc7a5\n    /// \ud83d\udca1 Java \ube44\uad50: private constructor\uc640 \ub3d9\uc77c\n    private init() {}\n\n    // MARK: - Infrastructure\n\n    // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: lazy var\n    // \ucc98\uc74c \uc811\uadfc\ud560 \ub54c\ub9cc \ucd08\uae30\ud654\ub418\ub294 \ud504\ub85c\ud37c\ud2f0\n    // \ubb34\uac70\uc6b4 \uac1d\uccb4\uc758 \uc9c0\uc5f0 \ucd08\uae30\ud654\uc5d0 \uc720\uc6a9\n    // \ud83d\udca1 Java \ube44\uad50: Lazy initialization pattern\n\n    /// Persistence Controller (Core Data)\n    /// \u26a0\ufe0f \uc8fc\uc758: PersistenceController\ub294 \ubcc4\ub3c4\ub85c shared \uc778\uc2a4\ud134\uc2a4 \uad00\ub9ac\n\n    // MARK: - Data Sources\n\n    /// \uc6b4\ub3d9 \uae30\ub85d \ub85c\uceec \ub370\uc774\ud130 \uc18c\uc2a4\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: lazy var\n    /// \ucc98\uc74c \uc811\uadfc\ud560 \ub54c\ub9cc \ucd08\uae30\ud654\ub418\uba70, \uc774\ud6c4\uc5d0\ub294 \uce90\uc2dc\ub41c \uc778\uc2a4\ud134\uc2a4 \ubc18\ud658\n    lazy var exerciseRecordLocalDataSource: ExerciseRecordLocalDataSource = {\n        ExerciseRecordLocalDataSource(context: PersistenceController.shared.viewContext)\n    }()\n\n    /// \uc77c\uc77c \uae30\ub85d \ub85c\uceec \ub370\uc774\ud130 \uc18c\uc2a4\n    lazy var dailyLogLocalDataSource: DailyLogLocalDataSource = {\n        DailyLogLocalDataSource(context: PersistenceController.shared.viewContext)\n    }()\n\n    // TODO: Phase 2\uc5d0\uc11c \ucd94\uac00 \uc608\uc815\n    // - NetworkManager\n    // - HealthKitManager\n    // - FoodAPIDataSource\n    // - GeminiAPIDataSource\n\n    // MARK: - Repositories\n\n    /// \uc6b4\ub3d9 \uae30\ub85d \uc800\uc7a5\uc18c\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Protocol\uc744 \ud0c0\uc785\uc73c\ub85c \uc0ac\uc6a9\n    /// \ud14c\uc2a4\ud2b8 \uc2dc Mock\uc73c\ub85c \uad50\uccb4 \uac00\ub2a5\ud558\ub3c4\ub85d \ud504\ub85c\ud1a0\ucf5c \ud0c0\uc785 \uc0ac\uc6a9\n    /// \ud83d\udca1 Java \ube44\uad50: Interface \ud0c0\uc785\uc73c\ub85c \ud544\ub4dc \uc120\uc5b8\ud558\ub294 \uac83\uacfc \ub3d9\uc77c\n    lazy var exerciseRecordRepository: ExerciseRecordRepository = {\n        ExerciseRecordRepositoryImpl(localDataSource: exerciseRecordLocalDataSource)\n    }()\n\n    /// \uc77c\uc77c \uae30\ub85d \uc800\uc7a5\uc18c\n    lazy var dailyLogRepository: DailyLogRepository = {\n        DailyLogRepositoryImpl(localDataSource: dailyLogLocalDataSource)\n    }()\n\n    // TODO: Phase 3\uc5d0\uc11c \ucd94\uac00 \uc608\uc815\n    // - UserRepository\n    // - BodyRepository\n    // - FoodRepository\n    // - SleepRepository\n    // - GoalRepository\n\n    // MARK: - Services\n\n    /// \uc77c\uc77c \uae30\ub85d \uad00\ub9ac \uc11c\ube44\uc2a4\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Service Layer\n    /// Repository\ub97c \uc870\ud569\ud558\uc5ec \ubcf5\uc7a1\ud55c \ube44\uc988\ub2c8\uc2a4 \ub85c\uc9c1 \ucc98\ub9ac\n    lazy var dailyLogService: DailyLogService = {\n        DailyLogService(repository: dailyLogRepository)\n    }()\n\n    // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: ExerciseCalcService\ub294 enum\uc774\ubbc0\ub85c \ub4f1\ub85d \ubd88\ud544\uc694\n    // static \uba54\uc11c\ub4dc\ub9cc \uc788\uc5b4\uc11c \uc778\uc2a4\ud134\uc2a4\ud654\ud560 \ud544\uc694 \uc5c6\uc74c\n    // \ud83d\udca1 Java \ube44\uad50: Utility \ud074\ub798\uc2a4\uc758 static \uba54\uc11c\ub4dc\uc640 \uc720\uc0ac\n\n    // MARK: - Use Cases\n\n    /// \uc6b4\ub3d9 \uae30\ub85d \ucd94\uac00 \uc720\uc2a4\ucf00\uc774\uc2a4\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Use Case Pattern\n    /// \ub2e8\uc77c \ucc45\uc784 \uc6d0\uce59 - \ud558\ub098\uc758 Use Case\ub294 \ud558\ub098\uc758 \ube44\uc988\ub2c8\uc2a4 \uc561\uc158\ub9cc \ub2f4\ub2f9\n    lazy var addExerciseRecordUseCase: AddExerciseRecordUseCase = {\n        AddExerciseRecordUseCase(\n            exerciseRepository: exerciseRecordRepository,\n            dailyLogService: dailyLogService\n        )\n    }()\n\n    /// \uc6b4\ub3d9 \uae30\ub85d \uc218\uc815 \uc720\uc2a4\ucf00\uc774\uc2a4\n    lazy var updateExerciseRecordUseCase: UpdateExerciseRecordUseCase = {\n        UpdateExerciseRecordUseCase(\n            exerciseRepository: exerciseRecordRepository,\n            dailyLogService: dailyLogService\n        )\n    }()\n\n    /// \uc6b4\ub3d9 \uae30\ub85d \uc0ad\uc81c \uc720\uc2a4\ucf00\uc774\uc2a4\n    lazy var deleteExerciseRecordUseCase: DeleteExerciseRecordUseCase = {\n        DeleteExerciseRecordUseCase(\n            exerciseRepository: exerciseRecordRepository,\n            dailyLogService: dailyLogService\n        )\n    }()\n\n    /// \uc6b4\ub3d9 \uae30\ub85d \uc870\ud68c \uc720\uc2a4\ucf00\uc774\uc2a4\n    lazy var getExerciseRecordsUseCase: GetExerciseRecordsUseCase = {\n        GetExerciseRecordsUseCase(exerciseRepository: exerciseRecordRepository)\n    }()\n\n    // TODO: Phase 4\uc5d0\uc11c \ucd94\uac00 \uc608\uc815\n    // - CalculateBMRUseCase\n    // - CalculateTDEEUseCase\n    // - RecordBodyUseCase\n    // - SearchFoodUseCase\n    // - etc.\n}\n\n// MARK: - Factory Methods\n\nextension DIContainer {\n\n    // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Factory Pattern\n    // \uc758\uc874\uc131 \uc0dd\uc131 \ub85c\uc9c1\uc744 \ucea1\uc290\ud654\n    // \ud14c\uc2a4\ud2b8 \uc2dc Mock \uac1d\uccb4\ub85c \uad50\uccb4 \uac00\ub2a5\n\n    // MARK: - Exercise ViewModels\n\n    /// \uc6b4\ub3d9 \ubaa9\ub85d ViewModel \uc0dd\uc131\n    ///\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Factory Method Pattern\n    /// ViewModel \uc0dd\uc131 \uc2dc \ud544\uc694\ud55c \ubaa8\ub4e0 \uc758\uc874\uc131\uc744 \uc8fc\uc785\n    /// \ud14c\uc2a4\ud2b8 \uc2dc \uc774 \uba54\uc11c\ub4dc\ub9cc \uc624\ubc84\ub77c\uc774\ub4dc\ud558\uba74 Mock ViewModel \uc81c\uacf5 \uac00\ub2a5\n    ///\n    /// - Parameter userId: \uc0ac\uc6a9\uc790 ID\n    /// - Returns: \uc758\uc874\uc131\uc774 \uc8fc\uc785\ub41c ExerciseListViewModel\n    ///\n    /// - Example:\n    /// ```swift\n    /// let viewModel = DIContainer.shared.makeExerciseListViewModel(userId: user.id)\n    /// ExerciseListView(viewModel: viewModel)\n    /// ```\n    func makeExerciseListViewModel(userId: UUID) -> ExerciseListViewModel {\n        ExerciseListViewModel(\n            getExerciseRecordsUseCase: getExerciseRecordsUseCase,\n            deleteExerciseRecordUseCase: deleteExerciseRecordUseCase,\n            dailyLogRepository: dailyLogRepository,\n            userId: userId\n        )\n    }\n\n    /// \uc6b4\ub3d9 \uc785\ub825 ViewModel \uc0dd\uc131\n    ///\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: \uc678\ubd80 \ud30c\ub77c\ubbf8\ud130\uac00 \ub9ce\uc740 Factory Method\n    /// ViewModel\uc774 \uc0ac\uc6a9\uc790\ubcc4 \ub370\uc774\ud130(\uccb4\uc911, BMR, TDEE)\ub97c \ud544\uc694\ub85c \ud560 \ub54c\n    /// Factory Method\ub85c \uae54\ub054\ud558\uac8c \uc8fc\uc785\n    ///\n    /// - Parameters:\n    ///   - userId: \uc0ac\uc6a9\uc790 ID\n    ///   - userWeight: \uc0ac\uc6a9\uc790 \uccb4\uc911 (kg) - \uce7c\ub85c\ub9ac \uacc4\uc0b0\uc5d0 \ud544\uc694\n    ///   - userBMR: \uc0ac\uc6a9\uc790 \uae30\ucd08\ub300\uc0ac\ub7c9 (kcal)\n    ///   - userTDEE: \uc0ac\uc6a9\uc790 \ud65c\ub3d9\ub300\uc0ac\ub7c9 (kcal)\n    ///   - editingExercise: \ud3b8\uc9d1\ud560 \uc6b4\ub3d9 \uae30\ub85d (\ud3b8\uc9d1 \ubaa8\ub4dc\uc77c \ub54c\ub9cc \uc81c\uacf5)\n    /// - Returns: \uc758\uc874\uc131\uc774 \uc8fc\uc785\ub41c ExerciseInputViewModel\n    ///\n    /// - Example:\n    /// ```swift\n    /// // \ucd94\uac00 \ubaa8\ub4dc\n    /// let viewModel = DIContainer.shared.makeExerciseInputViewModel(\n    ///     userId: user.id,\n    ///     userWeight: user.currentWeight ?? 70.0,\n    ///     userBMR: user.currentBMR ?? 1650,\n    ///     userTDEE: user.currentTDEE ?? 2310\n    /// )\n    ///\n    /// // \ud3b8\uc9d1 \ubaa8\ub4dc\n    /// let viewModel = DIContainer.shared.makeExerciseInputViewModel(\n    ///     userId: user.id,\n    ///     userWeight: 70.0,\n    ///     userBMR: 1650,\n    ///     userTDEE: 2310,\n    ///     editingExercise: exercise\n    /// )\n    /// ```\n    func makeExerciseInputViewModel(\n        userId: UUID,\n        userWeight: Decimal,\n        userBMR: Int32,\n        userTDEE: Int32,\n        editingExercise: ExerciseRecord? = nil\n    ) -> ExerciseInputViewModel {\n        ExerciseInputViewModel(\n            addExerciseRecordUseCase: addExerciseRecordUseCase,\n            updateExerciseRecordUseCase: editingExercise != nil ? updateExerciseRecordUseCase : nil,\n            userId: userId,\n            userWeight: userWeight,\n            userBMR: userBMR,\n            userTDEE: userTDEE,\n            editingExercise: editingExercise\n        )\n    }\n\n    // TODO: \uac01 Feature \uad6c\ud604 \uc2dc Factory \uba54\uc11c\ub4dc \ucd94\uac00\n    // func makeOnboardingViewModel() -> OnboardingViewModel\n    // func makeDashboardViewModel() -> DashboardViewModel\n    // func makeBodyViewModel() -> BodyViewModel\n}\n\n// MARK: - Testing Support\n\n#if DEBUG\nextension DIContainer {\n\n    /// \ud14c\uc2a4\ud2b8\uc6a9 \ucee8\ud14c\uc774\ub108 \uc0dd\uc131\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: #if DEBUG\n    /// \ub514\ubc84\uadf8 \ube4c\ub4dc\uc5d0\uc11c\ub9cc \ud3ec\ud568\ub418\ub294 \ucf54\ub4dc\n    /// \ud504\ub85c\ub355\uc158 \ube4c\ub4dc \ud06c\uae30\uc640 \ubcf4\uc548\uc5d0 \uc601\ud5a5 \uc5c6\uc74c\n    /// \ud83d\udca1 Java \ube44\uad50: BuildConfig.DEBUG \uccb4\ud06c\uc640 \uc720\uc0ac\n    static func makeForTesting() -> DIContainer {\n        return DIContainer()\n    }\n}\n#endif\n",
        "last_modified": "2026-01-14T22:54:09.699430"
      },
      "task_intent": {
        "title": "008-exercise-tracking-with-met-calculations",
        "description": "Exercise logging with activity type selection, duration input, and automatic calorie burn calculation using MET (Metabolic Equivalent of Task) values. Track both cardio and strength training with appropriate calculations.",
        "from_plan": true
      },
      "commits_behind_main": 0,
      "status": "active",
      "merged_at": null
    },
    "009-sleep-tracking-with-5-status-system": {
      "task_id": "009-sleep-tracking-with-5-status-system",
      "branch_point": {
        "commit_hash": "4e56d606f7b0d4cb74120dd392544f3fe2d4f5b4",
        "content": "//\n//  DIContainer.swift\n//  Bodii\n//\n//  Created by Auto-Claude on 2026-01-11.\n//\n\n// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Dependency Injection Container\n// \uc571 \uc804\uccb4\uc5d0\uc11c \uc0ac\uc6a9\ub418\ub294 \uc758\uc874\uc131\ub4e4\uc744 \uc911\uc559\uc5d0\uc11c \uad00\ub9ac\ud558\ub294 \ucee8\ud14c\uc774\ub108\n// \ud83d\udca1 Java \ube44\uad50: Dagger/Hilt\uc758 Component\uc640 \uc720\uc0ac\ud55c \uc5ed\ud560\n\nimport Foundation\n\n// MARK: - DI Container\n\n/// \uc758\uc874\uc131 \uc8fc\uc785 \ucee8\ud14c\uc774\ub108\n/// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Singleton Pattern\n/// \uc571 \uc804\uc5ed\uc5d0\uc11c \ub2e8\uc77c \uc778\uc2a4\ud134\uc2a4\ub97c \ud1b5\ud574 \uc758\uc874\uc131\uc5d0 \uc811\uadfc\n/// \ud83d\udca1 Java \ube44\uad50: static getInstance() \ud328\ud134\uacfc \uc720\uc0ac\ud558\uc9c0\ub9cc \ub354 \uac04\uacb0\nfinal class DIContainer {\n\n    // MARK: - Singleton\n\n    /// \uacf5\uc720 \uc778\uc2a4\ud134\uc2a4\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: static let\n    /// Swift\uc5d0\uc11c \uc2f1\uae00\ud1a4\uc740 static let\uc73c\ub85c \uac04\ub2e8\ud788 \uad6c\ud604\n    /// Thread-safe\ud558\uac8c \ud55c \ubc88\ub9cc \ucd08\uae30\ud654\ub428 (Swift \ub7f0\ud0c0\uc784 \ubcf4\uc7a5)\n    static let shared = DIContainer()\n\n    // MARK: - Initialization\n\n    /// private init\uc73c\ub85c \uc678\ubd80 \uc778\uc2a4\ud134\uc2a4\ud654 \ubc29\uc9c0\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Access Control\n    /// private init\uc740 \uc678\ubd80\uc5d0\uc11c new\ub97c \ub9c9\uc544 \uc2f1\uae00\ud1a4 \ubcf4\uc7a5\n    /// \ud83d\udca1 Java \ube44\uad50: private constructor\uc640 \ub3d9\uc77c\n    private init() {}\n\n    // MARK: - Infrastructure\n\n    // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: lazy var\n    // \ucc98\uc74c \uc811\uadfc\ud560 \ub54c\ub9cc \ucd08\uae30\ud654\ub418\ub294 \ud504\ub85c\ud37c\ud2f0\n    // \ubb34\uac70\uc6b4 \uac1d\uccb4\uc758 \uc9c0\uc5f0 \ucd08\uae30\ud654\uc5d0 \uc720\uc6a9\n    // \ud83d\udca1 Java \ube44\uad50: Lazy initialization pattern\n\n    /// Persistence Controller (Core Data)\n    /// \u26a0\ufe0f \uc8fc\uc758: PersistenceController\ub294 \ubcc4\ub3c4\ub85c shared \uc778\uc2a4\ud134\uc2a4 \uad00\ub9ac\n\n    // MARK: - Data Sources\n\n    /// Body composition \ub85c\uceec \ub370\uc774\ud130 \uc18c\uc2a4\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Lazy Initialization\n    /// \uccab \uc811\uadfc \uc2dc \ud55c \ubc88\ub9cc \uc0dd\uc131\ub418\uc5b4 \uc7ac\uc0ac\uc6a9\ub428\n    /// \ud83d\udca1 Java \ube44\uad50: @Lazy + @Autowired\uc640 \uc720\uc0ac\n    lazy var bodyLocalDataSource: BodyLocalDataSource = {\n        return BodyLocalDataSource(persistenceController: .shared)\n    }()\n\n    // TODO: Phase 2\uc5d0\uc11c \ucd94\uac00 \uc608\uc815\n    // - NetworkManager\n    // - HealthKitManager\n    // - FoodAPIDataSource\n    // - GeminiAPIDataSource\n\n    // MARK: - Repositories\n\n    /// Body composition \ub9ac\ud3ec\uc9c0\ud1a0\ub9ac\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Dependency Injection Chain\n    /// bodyLocalDataSource\ub97c \uc8fc\uc785\ubc1b\uc544 \uc0dd\uc131\n    /// \ud83d\udca1 Java \ube44\uad50: @Autowired Repository\uc640 \uc720\uc0ac\n    lazy var bodyRepository: BodyRepositoryProtocol = {\n        return BodyRepository(localDataSource: bodyLocalDataSource)\n    }()\n\n    // TODO: Phase 3\uc5d0\uc11c \ucd94\uac00 \uc608\uc815\n    // - UserRepository\n    // - FoodRepository\n    // - ExerciseRepository\n    // - SleepRepository\n    // - GoalRepository\n\n    // MARK: - Use Cases\n\n    /// BMR \uacc4\uc0b0 Use Case\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Stateless Use Case\n    /// struct\uc774\ubbc0\ub85c \ub9e4\ubc88 \uc0c8\ub85c \uc0dd\uc131\ud574\ub3c4 \ubb34\ubc29\ud558\uc9c0\ub9cc lazy\ub85c \uc7ac\uc0ac\uc6a9\n    /// \ud83d\udca1 Java \ube44\uad50: @Service \uc2f1\uae00\ud1a4 \ube48\uacfc \uc720\uc0ac\n    lazy var calculateBMRUseCase = CalculateBMRUseCase()\n\n    /// TDEE \uacc4\uc0b0 Use Case\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Stateless Use Case\n    /// struct\uc774\ubbc0\ub85c \ub9e4\ubc88 \uc0c8\ub85c \uc0dd\uc131\ud574\ub3c4 \ubb34\ubc29\ud558\uc9c0\ub9cc lazy\ub85c \uc7ac\uc0ac\uc6a9\n    /// \ud83d\udca1 Java \ube44\uad50: @Service \uc2f1\uae00\ud1a4 \ube48\uacfc \uc720\uc0ac\n    lazy var calculateTDEEUseCase = CalculateTDEEUseCase()\n\n    /// Body composition \uae30\ub85d Use Case\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Orchestration Use Case with Dependencies\n    /// \uc5ec\ub7ec Use Case\uc640 Repository\ub97c \uc870\ud569\ud558\uc5ec \ubcf5\uc7a1\ud55c \ube44\uc988\ub2c8\uc2a4 \ub85c\uc9c1 \uad6c\ud604\n    /// \ud83d\udca1 Java \ube44\uad50: @Service with @Autowired dependencies\n    lazy var recordBodyCompositionUseCase: RecordBodyCompositionUseCase = {\n        return RecordBodyCompositionUseCase(\n            calculateBMRUseCase: calculateBMRUseCase,\n            calculateTDEEUseCase: calculateTDEEUseCase,\n            bodyRepository: bodyRepository\n        )\n    }()\n\n    /// Body trends \uc870\ud68c Use Case\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Query Use Case\n    /// \ucc28\ud2b8 \ud45c\uc2dc\ub97c \uc704\ud55c \ub370\uc774\ud130 \uc870\ud68c \ubc0f \ubcc0\ud658\n    /// \ud83d\udca1 Java \ube44\uad50: @Service with read-only operations\n    lazy var fetchBodyTrendsUseCase: FetchBodyTrendsUseCase = {\n        return FetchBodyTrendsUseCase(bodyRepository: bodyRepository)\n    }()\n\n    // TODO: Phase 4\uc5d0\uc11c \ucd94\uac00 \uc608\uc815\n    // - SearchFoodUseCase\n    // - LogExerciseUseCase\n    // - etc.\n}\n\n// MARK: - Factory Methods\n\nextension DIContainer {\n\n    // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Factory Pattern\n    // \uc758\uc874\uc131 \uc0dd\uc131 \ub85c\uc9c1\uc744 \ucea1\uc290\ud654\n    // \ud14c\uc2a4\ud2b8 \uc2dc Mock \uac1d\uccb4\ub85c \uad50\uccb4 \uac00\ub2a5\n\n    // MARK: - Body Composition ViewModels\n\n    /// BodyCompositionViewModel \uc0dd\uc131\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Factory Method Pattern\n    /// - ViewModel \uc0dd\uc131 \ub85c\uc9c1\uc744 \uc911\uc559\ud654\n    /// - \uc758\uc874\uc131 \uc8fc\uc785\uc744 \ud55c \uacf3\uc5d0\uc11c \uad00\ub9ac\n    /// - \ud14c\uc2a4\ud2b8 \uc2dc mock \uc8fc\uc785\uc774 \uc26c\uc6cc\uc9d0\n    /// \ud83d\udca1 Java \ube44\uad50: @Bean \uba54\uc11c\ub4dc\uc640 \uc720\uc0ac\n    ///\n    /// - Parameters:\n    ///   - userProfile: \uc0ac\uc6a9\uc790 \ud504\ub85c\ud544 (BMR/TDEE \uacc4\uc0b0\uc5d0 \ud544\uc694)\n    /// - Returns: \uc0c8\ub85c\uc6b4 BodyCompositionViewModel \uc778\uc2a4\ud134\uc2a4\n    func makeBodyCompositionViewModel(userProfile: UserProfile) -> BodyCompositionViewModel {\n        return BodyCompositionViewModel(\n            recordBodyCompositionUseCase: recordBodyCompositionUseCase,\n            fetchBodyTrendsUseCase: fetchBodyTrendsUseCase,\n            bodyRepository: bodyRepository,\n            userProfile: userProfile\n        )\n    }\n\n    /// BodyTrendsViewModel \uc0dd\uc131\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Factory Method Pattern\n    /// - \ucc28\ud2b8 \ud45c\uc2dc\ub97c \uc704\ud55c ViewModel \uc0dd\uc131\n    /// - \uc758\uc874\uc131 \uc8fc\uc785\uc744 \ud55c \uacf3\uc5d0\uc11c \uad00\ub9ac\n    /// \ud83d\udca1 Java \ube44\uad50: @Bean \uba54\uc11c\ub4dc\uc640 \uc720\uc0ac\n    ///\n    /// - Returns: \uc0c8\ub85c\uc6b4 BodyTrendsViewModel \uc778\uc2a4\ud134\uc2a4\n    func makeBodyTrendsViewModel() -> BodyTrendsViewModel {\n        return BodyTrendsViewModel(\n            fetchBodyTrendsUseCase: fetchBodyTrendsUseCase,\n            bodyRepository: bodyRepository\n        )\n    }\n\n    /// MetabolismViewModel \uc0dd\uc131\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Factory Method Pattern\n    /// - \ub300\uc2dc\ubcf4\ub4dc\uc6a9 BMR/TDEE \ud45c\uc2dc ViewModel \uc0dd\uc131\n    /// - \uc758\uc874\uc131 \uc8fc\uc785\uc744 \ud55c \uacf3\uc5d0\uc11c \uad00\ub9ac\n    /// \ud83d\udca1 Java \ube44\uad50: @Bean \uba54\uc11c\ub4dc\uc640 \uc720\uc0ac\n    ///\n    /// - Returns: \uc0c8\ub85c\uc6b4 MetabolismViewModel \uc778\uc2a4\ud134\uc2a4\n    func makeMetabolismViewModel() -> MetabolismViewModel {\n        return MetabolismViewModel(bodyRepository: bodyRepository)\n    }\n\n    // TODO: \uac01 Feature \uad6c\ud604 \uc2dc Factory \uba54\uc11c\ub4dc \ucd94\uac00\n    // func makeOnboardingViewModel() -> OnboardingViewModel\n    // func makeDashboardViewModel() -> DashboardViewModel\n    // func makeFoodLogViewModel() -> FoodLogViewModel\n}\n\n// MARK: - Testing Support\n\n#if DEBUG\nextension DIContainer {\n\n    /// \ud14c\uc2a4\ud2b8\uc6a9 \ucee8\ud14c\uc774\ub108 \uc0dd\uc131\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: #if DEBUG\n    /// \ub514\ubc84\uadf8 \ube4c\ub4dc\uc5d0\uc11c\ub9cc \ud3ec\ud568\ub418\ub294 \ucf54\ub4dc\n    /// \ud504\ub85c\ub355\uc158 \ube4c\ub4dc \ud06c\uae30\uc640 \ubcf4\uc548\uc5d0 \uc601\ud5a5 \uc5c6\uc74c\n    /// \ud83d\udca1 Java \ube44\uad50: BuildConfig.DEBUG \uccb4\ud06c\uc640 \uc720\uc0ac\n    static func makeForTesting() -> DIContainer {\n        return DIContainer()\n    }\n}\n#endif\n",
        "timestamp": "2026-01-14T21:03:40.462795"
      },
      "worktree_state": {
        "content": "//\n//  DIContainer.swift\n//  Bodii\n//\n//  Created by Auto-Claude on 2026-01-11.\n//\n\n// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Dependency Injection Container\n// \uc571 \uc804\uccb4\uc5d0\uc11c \uc0ac\uc6a9\ub418\ub294 \uc758\uc874\uc131\ub4e4\uc744 \uc911\uc559\uc5d0\uc11c \uad00\ub9ac\ud558\ub294 \ucee8\ud14c\uc774\ub108\n// \ud83d\udca1 Java \ube44\uad50: Dagger/Hilt\uc758 Component\uc640 \uc720\uc0ac\ud55c \uc5ed\ud560\n\nimport Foundation\n\n// MARK: - DI Container\n\n/// \uc758\uc874\uc131 \uc8fc\uc785 \ucee8\ud14c\uc774\ub108\n/// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Singleton Pattern\n/// \uc571 \uc804\uc5ed\uc5d0\uc11c \ub2e8\uc77c \uc778\uc2a4\ud134\uc2a4\ub97c \ud1b5\ud574 \uc758\uc874\uc131\uc5d0 \uc811\uadfc\n/// \ud83d\udca1 Java \ube44\uad50: static getInstance() \ud328\ud134\uacfc \uc720\uc0ac\ud558\uc9c0\ub9cc \ub354 \uac04\uacb0\nfinal class DIContainer {\n\n    // MARK: - Singleton\n\n    /// \uacf5\uc720 \uc778\uc2a4\ud134\uc2a4\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: static let\n    /// Swift\uc5d0\uc11c \uc2f1\uae00\ud1a4\uc740 static let\uc73c\ub85c \uac04\ub2e8\ud788 \uad6c\ud604\n    /// Thread-safe\ud558\uac8c \ud55c \ubc88\ub9cc \ucd08\uae30\ud654\ub428 (Swift \ub7f0\ud0c0\uc784 \ubcf4\uc7a5)\n    static let shared = DIContainer()\n\n    // MARK: - Initialization\n\n    /// private init\uc73c\ub85c \uc678\ubd80 \uc778\uc2a4\ud134\uc2a4\ud654 \ubc29\uc9c0\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Access Control\n    /// private init\uc740 \uc678\ubd80\uc5d0\uc11c new\ub97c \ub9c9\uc544 \uc2f1\uae00\ud1a4 \ubcf4\uc7a5\n    /// \ud83d\udca1 Java \ube44\uad50: private constructor\uc640 \ub3d9\uc77c\n    private init() {}\n\n    // MARK: - Infrastructure\n\n    // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: lazy var\n    // \ucc98\uc74c \uc811\uadfc\ud560 \ub54c\ub9cc \ucd08\uae30\ud654\ub418\ub294 \ud504\ub85c\ud37c\ud2f0\n    // \ubb34\uac70\uc6b4 \uac1d\uccb4\uc758 \uc9c0\uc5f0 \ucd08\uae30\ud654\uc5d0 \uc720\uc6a9\n    // \ud83d\udca1 Java \ube44\uad50: Lazy initialization pattern\n\n    /// Persistence Controller (Core Data)\n    /// \u26a0\ufe0f \uc8fc\uc758: PersistenceController\ub294 \ubcc4\ub3c4\ub85c shared \uc778\uc2a4\ud134\uc2a4 \uad00\ub9ac\n\n    // MARK: - Data Sources\n\n    /// Body composition \ub85c\uceec \ub370\uc774\ud130 \uc18c\uc2a4\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Lazy Initialization\n    /// \uccab \uc811\uadfc \uc2dc \ud55c \ubc88\ub9cc \uc0dd\uc131\ub418\uc5b4 \uc7ac\uc0ac\uc6a9\ub428\n    /// \ud83d\udca1 Java \ube44\uad50: @Lazy + @Autowired\uc640 \uc720\uc0ac\n    lazy var bodyLocalDataSource: BodyLocalDataSource = {\n        return BodyLocalDataSource(persistenceController: .shared)\n    }()\n\n    /// Sleep tracking \ub85c\uceec \ub370\uc774\ud130 \uc18c\uc2a4\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Lazy Initialization\n    /// \uccab \uc811\uadfc \uc2dc \ud55c \ubc88\ub9cc \uc0dd\uc131\ub418\uc5b4 \uc7ac\uc0ac\uc6a9\ub428\n    /// \ud83d\udca1 Java \ube44\uad50: @Lazy + @Autowired\uc640 \uc720\uc0ac\n    lazy var sleepLocalDataSource: SleepLocalDataSource = {\n        return SleepLocalDataSource(persistenceController: .shared)\n    }()\n\n    // TODO: Phase 2\uc5d0\uc11c \ucd94\uac00 \uc608\uc815\n    // - NetworkManager\n    // - HealthKitManager\n    // - FoodAPIDataSource\n    // - GeminiAPIDataSource\n\n    // MARK: - Repositories\n\n    /// Body composition \ub9ac\ud3ec\uc9c0\ud1a0\ub9ac\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Dependency Injection Chain\n    /// bodyLocalDataSource\ub97c \uc8fc\uc785\ubc1b\uc544 \uc0dd\uc131\n    /// \ud83d\udca1 Java \ube44\uad50: @Autowired Repository\uc640 \uc720\uc0ac\n    lazy var bodyRepository: BodyRepositoryProtocol = {\n        return BodyRepository(localDataSource: bodyLocalDataSource)\n    }()\n\n    /// Sleep tracking \ub9ac\ud3ec\uc9c0\ud1a0\ub9ac\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Dependency Injection Chain\n    /// sleepLocalDataSource\ub97c \uc8fc\uc785\ubc1b\uc544 \uc0dd\uc131\n    /// \ud83d\udca1 Java \ube44\uad50: @Autowired Repository\uc640 \uc720\uc0ac\n    lazy var sleepRepository: SleepRepositoryProtocol = {\n        return SleepRepository(localDataSource: sleepLocalDataSource)\n    }()\n\n    // TODO: Phase 3\uc5d0\uc11c \ucd94\uac00 \uc608\uc815\n    // - UserRepository\n    // - FoodRepository\n    // - ExerciseRepository\n    // - GoalRepository\n\n    // MARK: - Use Cases\n\n    /// BMR \uacc4\uc0b0 Use Case\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Stateless Use Case\n    /// struct\uc774\ubbc0\ub85c \ub9e4\ubc88 \uc0c8\ub85c \uc0dd\uc131\ud574\ub3c4 \ubb34\ubc29\ud558\uc9c0\ub9cc lazy\ub85c \uc7ac\uc0ac\uc6a9\n    /// \ud83d\udca1 Java \ube44\uad50: @Service \uc2f1\uae00\ud1a4 \ube48\uacfc \uc720\uc0ac\n    lazy var calculateBMRUseCase = CalculateBMRUseCase()\n\n    /// TDEE \uacc4\uc0b0 Use Case\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Stateless Use Case\n    /// struct\uc774\ubbc0\ub85c \ub9e4\ubc88 \uc0c8\ub85c \uc0dd\uc131\ud574\ub3c4 \ubb34\ubc29\ud558\uc9c0\ub9cc lazy\ub85c \uc7ac\uc0ac\uc6a9\n    /// \ud83d\udca1 Java \ube44\uad50: @Service \uc2f1\uae00\ud1a4 \ube48\uacfc \uc720\uc0ac\n    lazy var calculateTDEEUseCase = CalculateTDEEUseCase()\n\n    /// Body composition \uae30\ub85d Use Case\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Orchestration Use Case with Dependencies\n    /// \uc5ec\ub7ec Use Case\uc640 Repository\ub97c \uc870\ud569\ud558\uc5ec \ubcf5\uc7a1\ud55c \ube44\uc988\ub2c8\uc2a4 \ub85c\uc9c1 \uad6c\ud604\n    /// \ud83d\udca1 Java \ube44\uad50: @Service with @Autowired dependencies\n    lazy var recordBodyCompositionUseCase: RecordBodyCompositionUseCase = {\n        return RecordBodyCompositionUseCase(\n            calculateBMRUseCase: calculateBMRUseCase,\n            calculateTDEEUseCase: calculateTDEEUseCase,\n            bodyRepository: bodyRepository\n        )\n    }()\n\n    /// Body trends \uc870\ud68c Use Case\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Query Use Case\n    /// \ucc28\ud2b8 \ud45c\uc2dc\ub97c \uc704\ud55c \ub370\uc774\ud130 \uc870\ud68c \ubc0f \ubcc0\ud658\n    /// \ud83d\udca1 Java \ube44\uad50: @Service with read-only operations\n    lazy var fetchBodyTrendsUseCase: FetchBodyTrendsUseCase = {\n        return FetchBodyTrendsUseCase(bodyRepository: bodyRepository)\n    }()\n\n    /// Sleep \uae30\ub85d Use Case\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Domain Use Case with Auto Status Calculation\n    /// \uc218\uba74 \uc2dc\uac04\uc744 \uc785\ub825\ubc1b\uc544 \uc0c1\ud0dc\ub97c \uc790\ub3d9 \uacc4\uc0b0\ud558\uace0 \uc800\uc7a5\n    /// \ud83d\udca1 Java \ube44\uad50: @Service with business logic\n    lazy var recordSleepUseCase: RecordSleepUseCase = {\n        return RecordSleepUseCase(sleepRepository: sleepRepository)\n    }()\n\n    /// Sleep \ud788\uc2a4\ud1a0\ub9ac \uc870\ud68c Use Case\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Query Use Case\n    /// \ub9ac\uc2a4\ud2b8 \ud45c\uc2dc\ub97c \uc704\ud55c \uc218\uba74 \uae30\ub85d \uc870\ud68c \ubc0f \ud1b5\uacc4 \uacc4\uc0b0\n    /// \ud83d\udca1 Java \ube44\uad50: @Service with read-only operations\n    lazy var fetchSleepHistoryUseCase: FetchSleepHistoryUseCase = {\n        return FetchSleepHistoryUseCase(sleepRepository: sleepRepository)\n    }()\n\n    /// Sleep \ud1b5\uacc4 \uc870\ud68c Use Case\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Statistics Use Case\n    /// \ucc28\ud2b8 \ubc0f \ub300\uc2dc\ubcf4\ub4dc \ud45c\uc2dc\ub97c \uc704\ud55c \uc218\uba74 \ud1b5\uacc4 \uacc4\uc0b0\n    /// \ud83d\udca1 Java \ube44\uad50: @Service with analytics logic\n    lazy var fetchSleepStatsUseCase: FetchSleepStatsUseCase = {\n        return FetchSleepStatsUseCase(sleepRepository: sleepRepository)\n    }()\n\n    // TODO: Phase 4\uc5d0\uc11c \ucd94\uac00 \uc608\uc815\n    // - SearchFoodUseCase\n    // - LogExerciseUseCase\n    // - etc.\n}\n\n// MARK: - Factory Methods\n\nextension DIContainer {\n\n    // \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Factory Pattern\n    // \uc758\uc874\uc131 \uc0dd\uc131 \ub85c\uc9c1\uc744 \ucea1\uc290\ud654\n    // \ud14c\uc2a4\ud2b8 \uc2dc Mock \uac1d\uccb4\ub85c \uad50\uccb4 \uac00\ub2a5\n\n    // MARK: - Body Composition ViewModels\n\n    /// BodyCompositionViewModel \uc0dd\uc131\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Factory Method Pattern\n    /// - ViewModel \uc0dd\uc131 \ub85c\uc9c1\uc744 \uc911\uc559\ud654\n    /// - \uc758\uc874\uc131 \uc8fc\uc785\uc744 \ud55c \uacf3\uc5d0\uc11c \uad00\ub9ac\n    /// - \ud14c\uc2a4\ud2b8 \uc2dc mock \uc8fc\uc785\uc774 \uc26c\uc6cc\uc9d0\n    /// \ud83d\udca1 Java \ube44\uad50: @Bean \uba54\uc11c\ub4dc\uc640 \uc720\uc0ac\n    ///\n    /// - Parameters:\n    ///   - userProfile: \uc0ac\uc6a9\uc790 \ud504\ub85c\ud544 (BMR/TDEE \uacc4\uc0b0\uc5d0 \ud544\uc694)\n    /// - Returns: \uc0c8\ub85c\uc6b4 BodyCompositionViewModel \uc778\uc2a4\ud134\uc2a4\n    func makeBodyCompositionViewModel(userProfile: UserProfile) -> BodyCompositionViewModel {\n        return BodyCompositionViewModel(\n            recordBodyCompositionUseCase: recordBodyCompositionUseCase,\n            fetchBodyTrendsUseCase: fetchBodyTrendsUseCase,\n            bodyRepository: bodyRepository,\n            userProfile: userProfile\n        )\n    }\n\n    /// BodyTrendsViewModel \uc0dd\uc131\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Factory Method Pattern\n    /// - \ucc28\ud2b8 \ud45c\uc2dc\ub97c \uc704\ud55c ViewModel \uc0dd\uc131\n    /// - \uc758\uc874\uc131 \uc8fc\uc785\uc744 \ud55c \uacf3\uc5d0\uc11c \uad00\ub9ac\n    /// \ud83d\udca1 Java \ube44\uad50: @Bean \uba54\uc11c\ub4dc\uc640 \uc720\uc0ac\n    ///\n    /// - Returns: \uc0c8\ub85c\uc6b4 BodyTrendsViewModel \uc778\uc2a4\ud134\uc2a4\n    func makeBodyTrendsViewModel() -> BodyTrendsViewModel {\n        return BodyTrendsViewModel(\n            fetchBodyTrendsUseCase: fetchBodyTrendsUseCase,\n            bodyRepository: bodyRepository\n        )\n    }\n\n    /// MetabolismViewModel \uc0dd\uc131\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Factory Method Pattern\n    /// - \ub300\uc2dc\ubcf4\ub4dc\uc6a9 BMR/TDEE \ud45c\uc2dc ViewModel \uc0dd\uc131\n    /// - \uc758\uc874\uc131 \uc8fc\uc785\uc744 \ud55c \uacf3\uc5d0\uc11c \uad00\ub9ac\n    /// \ud83d\udca1 Java \ube44\uad50: @Bean \uba54\uc11c\ub4dc\uc640 \uc720\uc0ac\n    ///\n    /// - Returns: \uc0c8\ub85c\uc6b4 MetabolismViewModel \uc778\uc2a4\ud134\uc2a4\n    func makeMetabolismViewModel() -> MetabolismViewModel {\n        return MetabolismViewModel(bodyRepository: bodyRepository)\n    }\n\n    // MARK: - Sleep ViewModels\n\n    /// SleepInputViewModel \uc0dd\uc131\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Factory Method Pattern\n    /// - \uc218\uba74 \uc785\ub825\uc744 \uc704\ud55c ViewModel \uc0dd\uc131\n    /// - \uc758\uc874\uc131 \uc8fc\uc785\uc744 \ud55c \uacf3\uc5d0\uc11c \uad00\ub9ac\n    /// - \uae30\ubcf8 \uc218\uba74 \uc2dc\uac04 \uc124\uc815 \uac00\ub2a5\n    /// \ud83d\udca1 Java \ube44\uad50: @Bean \uba54\uc11c\ub4dc\uc640 \uc720\uc0ac\n    ///\n    /// - Parameters:\n    ///   - userId: \uc0ac\uc6a9\uc790 ID\n    ///   - defaultHours: \uae30\ubcf8 \uc218\uba74 \uc2dc\uac04 (\uc2dc\uac04, \uae30\ubcf8\uac12: 7)\n    ///   - defaultMinutes: \uae30\ubcf8 \uc218\uba74 \uc2dc\uac04 (\ubd84, \uae30\ubcf8\uac12: 0)\n    /// - Returns: \uc0c8\ub85c\uc6b4 SleepInputViewModel \uc778\uc2a4\ud134\uc2a4\n    func makeSleepInputViewModel(\n        userId: UUID,\n        defaultHours: Int = 7,\n        defaultMinutes: Int = 0\n    ) -> SleepInputViewModel {\n        return SleepInputViewModel(\n            recordSleepUseCase: recordSleepUseCase,\n            userId: userId,\n            defaultHours: defaultHours,\n            defaultMinutes: defaultMinutes\n        )\n    }\n\n    /// SleepHistoryViewModel \uc0dd\uc131\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Factory Method Pattern\n    /// - \uc218\uba74 \ud788\uc2a4\ud1a0\ub9ac \ub9ac\uc2a4\ud2b8\ub97c \uc704\ud55c ViewModel \uc0dd\uc131\n    /// - \uc758\uc874\uc131 \uc8fc\uc785\uc744 \ud55c \uacf3\uc5d0\uc11c \uad00\ub9ac\n    /// - \uae30\ubcf8 \uc870\ud68c \ubaa8\ub4dc \uc124\uc815 \uac00\ub2a5 (\ucd5c\uadfc 30\uc77c)\n    /// \ud83d\udca1 Java \ube44\uad50: @Bean \uba54\uc11c\ub4dc\uc640 \uc720\uc0ac\n    ///\n    /// - Parameter defaultMode: \uae30\ubcf8 \uc870\ud68c \ubaa8\ub4dc (\uae30\ubcf8\uac12: \ucd5c\uadfc 30\uc77c)\n    /// - Returns: \uc0c8\ub85c\uc6b4 SleepHistoryViewModel \uc778\uc2a4\ud134\uc2a4\n    func makeSleepHistoryViewModel(\n        defaultMode: FetchSleepHistoryUseCase.QueryMode = .recent(days: 30)\n    ) -> SleepHistoryViewModel {\n        return SleepHistoryViewModel(\n            fetchSleepHistoryUseCase: fetchSleepHistoryUseCase,\n            sleepRepository: sleepRepository,\n            defaultMode: defaultMode\n        )\n    }\n\n    /// SleepTrendsViewModel \uc0dd\uc131\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Factory Method Pattern\n    /// - \uc218\uba74 \ud2b8\ub80c\ub4dc \ucc28\ud2b8\ub97c \uc704\ud55c ViewModel \uc0dd\uc131\n    /// - \uc758\uc874\uc131 \uc8fc\uc785\uc744 \ud55c \uacf3\uc5d0\uc11c \uad00\ub9ac\n    /// - \ucc28\ud2b8 \ud45c\uc2dc\uc6a9 \ud1b5\uacc4 \ub370\uc774\ud130 \uc81c\uacf5\n    /// \ud83d\udca1 Java \ube44\uad50: @Bean \uba54\uc11c\ub4dc\uc640 \uc720\uc0ac\n    ///\n    /// - Returns: \uc0c8\ub85c\uc6b4 SleepTrendsViewModel \uc778\uc2a4\ud134\uc2a4\n    func makeSleepTrendsViewModel() -> SleepTrendsViewModel {\n        return SleepTrendsViewModel(\n            fetchSleepStatsUseCase: fetchSleepStatsUseCase,\n            sleepRepository: sleepRepository\n        )\n    }\n\n    // MARK: - Managers\n\n    /// SleepPromptManager \uc0dd\uc131\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: Manager Factory Method\n    /// - \uc544\uce68 \uc218\uba74 \uae30\ub85d \ud504\ub86c\ud504\ud2b8 \uad00\ub9ac\uc790 \uc0dd\uc131\n    /// - \uc758\uc874\uc131 \uc8fc\uc785\uc744 \ud55c \uacf3\uc5d0\uc11c \uad00\ub9ac\n    /// - UserDefaults\ub294 \uae30\ubcf8\uac12(.standard) \uc0ac\uc6a9\n    /// \ud83d\udca1 Java \ube44\uad50: @Bean \uba54\uc11c\ub4dc\uc640 \uc720\uc0ac\n    ///\n    /// - Returns: \uc0c8\ub85c\uc6b4 SleepPromptManager \uc778\uc2a4\ud134\uc2a4\n    func makeSleepPromptManager() -> SleepPromptManager {\n        return SleepPromptManager(\n            sleepRepository: sleepRepository,\n            userDefaults: .standard\n        )\n    }\n\n    // TODO: \uac01 Feature \uad6c\ud604 \uc2dc Factory \uba54\uc11c\ub4dc \ucd94\uac00\n    // func makeOnboardingViewModel() -> OnboardingViewModel\n    // func makeDashboardViewModel() -> DashboardViewModel\n    // func makeFoodLogViewModel() -> FoodLogViewModel\n}\n\n// MARK: - Testing Support\n\n#if DEBUG\nextension DIContainer {\n\n    /// \ud14c\uc2a4\ud2b8\uc6a9 \ucee8\ud14c\uc774\ub108 \uc0dd\uc131\n    /// \ud83d\udcda \ud559\uc2b5 \ud3ec\uc778\ud2b8: #if DEBUG\n    /// \ub514\ubc84\uadf8 \ube4c\ub4dc\uc5d0\uc11c\ub9cc \ud3ec\ud568\ub418\ub294 \ucf54\ub4dc\n    /// \ud504\ub85c\ub355\uc158 \ube4c\ub4dc \ud06c\uae30\uc640 \ubcf4\uc548\uc5d0 \uc601\ud5a5 \uc5c6\uc74c\n    /// \ud83d\udca1 Java \ube44\uad50: BuildConfig.DEBUG \uccb4\ud06c\uc640 \uc720\uc0ac\n    static func makeForTesting() -> DIContainer {\n        return DIContainer()\n    }\n}\n#endif\n",
        "last_modified": "2026-01-14T22:52:08.908097"
      },
      "task_intent": {
        "title": "009-sleep-tracking-with-5-status-system",
        "description": "Sleep logging with 5-status tracking (bad, soso, good, excellent, oversleep), duration input, wake time prompts, and correlation with other health metrics. Automatic morning prompt to log previous night's sleep.",
        "from_plan": true
      },
      "commits_behind_main": 0,
      "status": "active",
      "merged_at": null
    }
  },
  "created_at": "2026-01-11T19:04:11.948709",
  "last_updated": "2026-01-14T21:03:40.554144"
}